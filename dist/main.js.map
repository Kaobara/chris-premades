{"version":3,"file":"main.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;;;;;;;;ACAO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,UAAU,4BAA4B,oBAAoB;AACtF;AACA,gCAAgC,iCAAiC;AACjE,yBAAyB,wBAAwB;AACjD,2DAA2D,mFAAmF;AAC9I;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA,0BAA0B,mBAAmB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,4CAA4C;;AAE5E;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,kCAAkC;AAClE,yBAAyB,uBAAuB;AAChD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,WAAW,4BAA4B,oBAAoB;AACvF;AACA,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD,2DAA2D,mFAAmF;AAC9I;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA,0BAA0B,mBAAmB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAA+C;AAC/E;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,kCAAkC;AAClE,yBAAyB,uBAAuB;AAChD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,WAAW,2BAA2B,oBAAoB;AACtF;AACA,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD,2DAA2D,mFAAmF;AAC9I;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA,0BAA0B,mBAAmB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,iCAAiC;AACjE;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,wBAAwB;AACjD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW,OAAO,oBAAoB;AAClE;AACA,wBAAwB,qBAAqB;AAC7C,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sBAAsB;AAC5C,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,+BAA+B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,uBAAuB;AAChD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW,OAAO,oBAAoB;AAClE;AACA,wBAAwB,sBAAsB;AAC9C,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,sBAAsB;AAC5C,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,iCAAiC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,uBAAuB;AAChD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,WAAW,OAAO,oBAAoB;AAClE;AACA,uBAAuB,sBAAsB;AAC7C,0BAA0B,mBAAmB;AAC7C,gCAAgC,4BAA4B;AAC5D;;AAEA;;AAEA;AACA;AACA;AACA,sBAAsB,sBAAsB;AAC5C,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,kCAAkC;AAClE;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA;AACA,gCAAgC,iCAAiC;AACjE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,uBAAuB;AAChD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,WAAW,OAAO,mBAAmB;AACjE;AACA,wBAAwB,qBAAqB;AAC7C,0BAA0B,mBAAmB;AAC7C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB;AAClD;;AAEA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,qCAAqC;AACrE;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,8BAA8B;AAC9D,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,wBAAwB;AACjD,0BAA0B,uBAAuB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,qBAAqB;AAC3C,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,uBAAuB;AAChD,2BAA2B,sBAAsB;AACjD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;;AAErD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,UAAU,OAAO,oBAAoB;AACjE;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,UAAU,OAAO,oBAAoB;AACjE;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,WAAW,+CAA+C,yCAAyC;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,0BAA0B,uBAAuB;AACjD;AACA;AACA,mDAAmD,2DAA2D;AAC9G;;AAEA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,0BAA0B,uBAAuB;AACjD;AACA;AACA,mDAAmD,0DAA0D;AAC7G;;AAEA;;AAEA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,wBAAwB;AACjD,2BAA2B,uBAAuB;AAClD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;AACA,0BAA0B,WAAW,SAAS,6CAA6C;AAC3F;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,6CAA6C,iFAAiF;AAC9H,8CAA8C,iFAAiF;AAC/H,kDAAkD,4DAA4D;AAC9G;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3yBmE;AAChC;AAC5B;AACP;AACA;AACA,wDAAwD,aAAa;AACrE;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,wCAAwC,MAAM;AAC9C;AACA,KAAK;AACL;AACA;AACA;AACA,UAAU;AACV,kBAAkB,MAAM;AACxB;AACA,KAAK;AACL;AACA;AACA;AACA,UAAU;AACV;AACA,kBAAkB,MAAM;AACxB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,2HAA2H,2CAA2C;AACtK,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,KAAK;AACL;AACA,+EAA+E,YAAY;AAC3F;AACA,wBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,uFAAuF,YAAY,sBAAsB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,cAAc;AACd;AACA;AACA;AACA,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,cAAc,aAAa;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,kDAAkD;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,8CAA8C;AAC3F,wCAAwC;AACxC;AACA;AACA,4BAA4B,2EAA2E;AACvG;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,mBAAmB,iBAAiB;AACpC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qCAAqC;AACtF;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,qDAAqD,GAAG,oKAAoK;AAC5N,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,IAAI,IAAI,mBAAmB;AACrF,iDAAiD,+CAA+C;AAChG;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,UAAU;AACV,kBAAkB,MAAM;AACxB;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB,MAAM;AAC3B,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,wCAAwC,MAAM,6CAA6C,oCAAoC,oBAAoB,QAAQ;AAC3J;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA,2BAA2B,SAAS,kDAAkD,cAAc,uEAAuE;AAC3K;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC,+CAA+C,EAAE;AACjD;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA,mDAAmD,EAAE,UAAU,kBAAkB,gEAAgE;AACjJ;AACA,wCAAwC,iBAAiB,uDAAuD,oBAAoB,aAAa,mBAAmB;AACpK,mDAAmD,oBAAoB,gBAAgB,KAAK,kBAAkB,6DAA6D,0DAA0D;AACrO;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD,qEAAqE,EAAE;AACvE;AACA,wCAAwC,aAAa;AACrD;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,0BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB,MAAM;AAC3B,KAAK;AACL,0GAA0G;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,kCAAkC;AACzE,qCAAqC,8BAA8B;AACnE,uBAAuB;AACvB;AACA;AACA,6CAA6C,wCAAwC;AACrF;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB,MAAM;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA,mFAAmF,uBAAuB;AAC1G;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,oCAAoC;AACpC;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,+CAA+C;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,KAAK;AACL;AACA;AACA;AACA;AACA,wDAAwD;AACxD,wCAAwC;AACxC;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mBAAmB;AACzD,UAAU;AACV;AACA,4BAA4B,6BAA6B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,sCAAsC,mBAAmB;AACzD,UAAU;AACV;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB,MAAM;AAC3B,KAAK;AACL,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,IAAI,IAAI,mBAAmB;AACzF,6DAA6D,+CAA+C;AAC5G;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,2EAA2E,cAAc;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,+CAA+C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,+BAA+B,wBAAwB;AACvD;AACA,oCAAoC,wBAAwB;AAC5D,wCAAwC,yBAAyB;AACjE;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,qEAAqE,oBAAoB;AACzF;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3pC2C;AACpC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,yDAAyD,iEAAiE;AAC1H;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACO;AACP;AACA;AACA;AACA;;AChDA,SAAS,0BAAc;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,8EAA8E,iCAAiC,QAAQ;AAC5N;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,sBAAsB,0BAAc;AACpC;AACA;AACA;AACA;AACA;;AC1E+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAI,mBAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3HyC;AACE;AACpC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8FAA8F;AAChI,0BAA0B,KAAK,gCAAgC,mBAAS;AACxE;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,yHAAyH;AAC3J,mCAAmC,qFAAqF;AACxH,qCAAqC,oFAAoF;AACzH,oBAAoB,mFAAmF;AACvG,0BAA0B,KAAK,wCAAwC,mBAAS;AAChF;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACO;AACP;AACA,kCAAkC,2CAA2C;AAC7E,0BAA0B,KAAK,6BAA6B,mBAAS;AACrE;AACA;AACA;AACA;AACA;;ACzE2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sCAAsC;AAC7D;AACA;AACO;AACP;AACA;AACA;;AC3YyC;AACE;AACV;AAC1B;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,yBAAyB,mBAAS;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,kBAAkB,KAAK;AACvB;AACA,MAAM;AACN;AACA;AACA,gBAAgB,KAAK;AACrB;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,kBAAkB;AAClB,0BAA0B,KAAK;AAC/B;AACA;AACA,UAAU;AACV;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,wBAAwB,mBAAS;AAChE;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAS;AAChC,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;AC/YA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;ACV4C;AAC5C,IAAI,sBAAQ;AACZ,SAAS,yBAAW;AACpB;AACA,0MAA0M,0FAA0F;AACpS;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,sBAAQ;AACZ;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,sBAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,mBAAmB,yBAAW;AAC9B;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,+DAA+D,OAAO,iBAAiB,gBAAgB,OAAO,eAAe;AAC9J;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,oCAAoC;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2CAAe,IAAI,EAAC;;;ACtGS;;AAE7B,4BAA4B,IAAI;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,mBAAmB;AAChC;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA,qDAAe,aAAa;;AC3BiB;AAC7C;AACA;AACA;AACA;AACA,8BAA8B,cAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,iBAAiB,WAAK;AACtB;AACA,SAAS,YAAM;AACf;AACA;AACO,IAAI,WAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,YAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEgD;AACE;AACF;AAChD,uBAAuB,8DAA8D;AACrF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,mCAAmC,WAAK;AACxC;AACA,iCAAiC,KAAK,sBAAsB,mBAAS;AACrE;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,iEAAiE,YAAY;AAC7E;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,8BAA8B,WAAK;AACnC;AACA,kCAAkC,KAAK,yDAAyD,mBAAS;AACzG;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,YAAY,KAAK;AACjB;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;AC/DkD;AAC3C;AACP,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;;ACPmD;AAC5C;AACP,sBAAsB,cAAc;AACpC;;ACH+C;AACF;AAC7C,eAAe,gBAAM,EAAE,8DAA8D;AACrF;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,uDAAuD,YAAY;AACnE;AACA,IAAI,WAAK;AACT;AACA,uBAAuB,8DAA8D;AACrF;AACA,2BAA2B,WAAK;AAChC;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACO;AACP,cAAc,gBAAM;AACpB;AACA;;ACrB6C;AACE;AACxC,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA,0EAA0E,KAAK,oFAAoF,KAAK,iCAAiC,KAAK;AAC9M,MAAM;AACN;AACA;AACA;AACA,0BAA0B,KAAK,kCAAkC,mBAAS;AAC1E;AACA,IAAI,KAAK;AACT;;ACf+C;AACxC,qBAAqB,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK,+BAA+B,KAAK;AACrD,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA,oEAAoE,uDAAuD;AAC3H;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA,uEAAuE,gEAAgE;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,2BAA2B,KAAK;AAChC;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;ACjB+C;AACC;AACzC,wBAAwB,8DAA8D;AAC7F;AACA;AACA;AACA,QAAQ,KAAK,yBAAyB,KAAK;AAC3C;AACA;AACA;AACA,0BAA0B,KAAK,oCAAoC,SAAS,yBAAyB,SAAS,iDAAiD,KAAK;AACpK;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA,8EAA8E,0DAA0D;AACxI,MAAM;AACN,cAAc,KAAK;AACnB;AACA;;ACrB+C;AACxC,qBAAqB,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACjE+C;AACxC,0BAA0B,8DAA8D;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;;ACf+C;AACxC,uBAAuB,8DAA8D;AAC5F,0BAA0B,KAAK;AAC/B;AACA;AACA;;ACL+C;AACC;AACzC,sBAAsB,8DAA8D;AAC3F;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK,0BAA0B,KAAK;AAC7C;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,8BAA8B,KAAK,oCAAoC,SAAS,yBAAyB,SAAS,iDAAiD,KAAK;AACxK;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,cAAc,KAAK;AACnB;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yCAAyC;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;;AClEO,6BAA6B,8DAA8D;AAClG;AACA;;ACF+C;AACF;AAC7C,eAAe,iBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,sBAAsB,8DAA8D;AACpF;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACO;AACP,cAAc,iBAAM;AACpB;AACA;;AChD2C;AACZ;AACM;AACN;AACU;AACN;AACF;AACS;AACC;AACpC;AACP,kBAAkB,UAAU;AAC5B,YAAY,IAAI;AAChB,eAAe,OAAO;AACtB,iBAAiB,SAAS;AAC1B,cAAc,MAAM;AACpB,aAAa,KAAK;AAClB,eAAe,YAAY;AAC3B,kBAAkB,UAAU;AAC5B,YAAY,IAAI;AAChB;;ACnBmD;AACE;AACF;AACnD,6BAA6B,8DAA8D;AAC3F;AACA,iBAAiB,KAAK;AACtB;AACA,SAAS,mBAAS;AAClB,qBAAqB,KAAK;AAC1B;AACA,qBAAqB,KAAK;AAC1B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,6BAA6B,8DAA8D;AAC3F,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,6BAA6B,8DAA8D;AAC3F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAK;AACjC;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,6BAAS;AACxB,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;AACA,iBAAiB,6BAAS;AAC1B;;ACrF4C;AACR;AACpC;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,mFAAmF,6DAA6D;AAChJ;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA,sHAAsH;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA,8BAA8B,MAAM;AACpC,sBAAsB;AACtB,8BAA8B,MAAM;AACpC;AACA;AACA;AACA,kBAAkB;AAClB;AACA,0BAA0B,MAAM;AAChC,kBAAkB;AAClB,0BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;;AChHiD;AACF;AACxC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,mDAAmD,KAAK,8BAA8B,KAAK;AACpH,UAAU,OAAO;AACjB,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,6DAA6D;AAC9G;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC9D4C;AACR;AACH;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAK,0BAA0B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yFAAyF,6DAA6D;AACtJ;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,QAAQ,KAAK;AACb;AACA;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,2BAA2B,KAAK;AAChC;AACA,IAAI,WAAK;AACT;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,2BAA2B,KAAK;AAChC;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA,aAAa,iBAAK;AAClB;AACA;AACA;AACA;;AC7J+D;AACV;AACrD,qBAAqB,8DAA8D;AACnF,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C;AACA,oDAAoD,KAAK;AACzD,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,oBAAoB,KAAK,kDAAkD,KAAK,8BAA8B,KAAK;AACnH,UAAU,WAAW;AACrB,4BAA4B,KAAK;AACjC,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG;AACtG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;AC3L6C;AACE;AACxC,2BAA2B,8DAA8D;AAChG;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA,YAAY,KAAK,kDAAkD,KAAK;AACxE;AACA,UAAU;AACV;AACA,UAAU;AACV,kBAAkB,KAAK;AACvB,6BAA6B,KAAK,sBAAsB,KAAK;AAC7D,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,kCAAkC,KAAK,kCAAkC,mBAAS;AAClF;AACA;AACA;AACA;AACA;AACA,iCAAiC,mBAAS;AAC1C;AACA,yBAAyB,KAAK,yCAAyC,KAAK;AAC5E;AACA;AACA;;ACjEqD;AACF;AACnD,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,wBAAwB,KAAK;AAC7B;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA,+BAA+B,WAAK;AACpC;AACA,YAAY,KAAK;AACjB;AACA,sDAAsD,KAAK;AAC3D;AACA,6DAA6D,YAAY;AACzE;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,+BAA+B,WAAK;AACpC;AACA,YAAY,KAAK;AACjB,6BAA6B,KAAK;AAClC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,wDAAwD,YAAY;AACpE,cAAc,KAAK;AACnB;AACA,QAAQ,WAAK;AACb;AACA;AACA,2BAA2B,8DAA8D;AACzF;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uDAAuD;AACzF;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oDAAoD;AACvF;AACA;AACA,eAAe,oBAAS;AACxB;AACA;AACO;AACP,YAAY,eAAI;AAChB;AACA,iBAAiB,oBAAS;AAC1B;;ACzGqD;AACF;AACA;AACnD,eAAe,iBAAM,eAAe,gBAAgB;AACpD;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,iBAAiB,KAAK,sLAAsL,KAAK;AACjN;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,cAAc,KAAK;AACnB;AACA;AACA,8BAA8B,KAAK,6BAA6B,mBAAS;AACzE;AACA;AACA;AACA,kBAAkB,KAAK;AACvB,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,sBAAsB,8DAA8D;AACpF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP,cAAc,iBAAM;AACpB;AACA;AACA;;ACnIqD;AACF;AACnD,8BAA8B,8DAA8D;AAC5F,iBAAiB,KAAK;AACtB;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC,6BAA6B,KAAK;AAClC;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,4CAA4C,KAAK;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,kBAAkB,KAAK;AACvB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,iBAAiB,KAAK;AACtB;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,kBAAkB,KAAK;AACvB;AACA;AACA,kCAAkC,8DAA8D;AAChG;AACA,2BAA2B,WAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,iCAAiC,8DAA8D;AAC/F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,mBAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,gBAAgB,mBAAQ;AACxB;;ACxH6C;AACE;AACC;AACH;AAC7C;AACA;AACA,SAAS,mBAAS;AAClB,iBAAiB,KAAK;AACtB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,4BAA4B,KAAK;AACjC,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,2DAA2D,SAAS;AACpE,8DAA8D,4BAA4B;AAC1F,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qBAAqB;AAC3C,gCAAgC,qCAAqC;AACrE,uBAAuB,WAAW,GAAG,kBAAkB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C,gFAAgF;AAC/H;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD,gCAAgC,+CAA+C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,wCAAwC,4CAA4C;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;;ACtKqD;AAC9C,uCAAuC,8DAA8D;AAC5G,UAAU,KAAK;AACf;;ACHqD;AAC9C;AACP;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACrCkD;AAC3C;AACP;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf,2BAA2B,KAAK;AAChC,0BAA0B,KAAK;AAC/B;;ACvCqD;AAC9C;AACP;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;;ACrCqD;AACrD;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACO;AACP;AACA;AACA;;AClD+C;AACU;AACzD,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW;AACf;AACA,eAAe,cAAG;AAClB,IAAI,WAAW;AACf;AACA,SAAS,iBAAM;AACf;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,2BAA2B;AACpD;AACA,eAAe,eAAI;AACnB;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB,WAAW,cAAG;AACd,YAAY,eAAI;AAChB,cAAc,iBAAM;AACpB;AACA;;AC3FkD;AAC3C;AACP;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;;ACrC+C;AACU;AACzD;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;AACA,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW;AACf;AACA,eAAe,gBAAG;AAClB,IAAI,WAAW;AACf;AACO;AACP;AACA,YAAY,iBAAI;AAChB,WAAW,gBAAG;AACd;;AC3G+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC9CqD;AAC9C;AACP;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;;ACrCkD;AAC3C;AACP;AACA;AACA;AACA;AACA;AACA,4CAA4C,YAAY;AACxD;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA,KAAK;AACL;AACA,UAAU,KAAK;AACf;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,4BAA4B;AAC1F;AACA;AACA,UAAU,KAAK;AACf;;ACvE6C;AACtC;AACP,mBAAmB,WAAW;AAC9B;;ACHqD;AACF;AAC5C,kCAAkC,8DAA8D;AACvG;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,wDAAwD,KAAK;AAC7D,wDAAwD,KAAK;AAC7D;AACA;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA,iEAAiE,KAAK;AACtE,2DAA2D,KAAK;AAChE,wDAAwD,KAAK;AAC7D,yDAAyD,KAAK;AAC9D;AACA;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA,oDAAoD,KAAK;AACzD;AACA;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA,kDAAkD,iCAAiC;AACnF,oBAAoB,mBAAmB;AACvC;AACA,wBAAwB,4CAA4C;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;AC3FmD;AACE;AAC9C,4BAA4B,8DAA8D;AACjG;AACA,4BAA4B,KAAK;AACjC,2CAA2C,KAAK;AAChD,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;;ACZgD;AACE;AACF;AAChD,eAAe,sBAAI,EAAE,8DAA8D;AACnF;AACA,0BAA0B,KAAK;AAC/B,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,KAAK;AACrF,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,wBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,qBAAqB,mBAAS;AAC7D;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,UAAU,KAAK;AACf,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,YAAY,WAAK;AACjB;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,yBAAyB;AAC3F,+BAA+B,KAAK;AACpC,gCAAgC,mBAAS;AACzC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,wBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,0CAA0C,mBAAS;AAClF;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,8EAA8E,YAAY;AAC1F;AACA;AACA,oBAAoB,cAAc;AAClC;AACA,KAAK;AACL;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,gBAAgB,KAAK;AACrB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,sBAAI;AAChB,cAAc,wBAAM;AACpB,cAAc,wBAAM;AACpB;;ACnN+C;AACF;AACG;AACzC,oCAAoC,sBAAsB;AACjE,iBAAiB,KAAK;AACtB;AACA;AACA,sCAAsC,SAAS;AAC/C,QAAQ,KAAK;AACb;AACA,2BAA2B,WAAK;AAChC;AACA,oBAAoB,sCAAsC;AAC1D;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK,+BAA+B,SAAS;AACrD;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;AC7BqD;AAC9C,+BAA+B,8DAA8D;AACpG;AACA,0BAA0B,KAAK;AAC/B;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC7BoD;AAC7C,4BAA4B,8DAA8D;AACjG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC/B6C;AACE;AACF;AAC7C,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA,uBAAuB,KAAK;AAC5B;AACA,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,YAAY,WAAK;AACjB;AACA;AACA,cAAc,KAAK,oCAAoC,mFAAmF;AAC1I;;AAEA;AACA,IAAI,WAAK;;AAET;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,kCAAkC,8DAA8D;AAChG;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,2DAA2D,YAAY;AACvE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,gBAAgB,KAAK;AACrB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAM;AACrB;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,sBAAsB,KAAK;AAC3B,2BAA2B,KAAK;AAChC;AACA;AACO;AACP,YAAY,gBAAI;AAChB,cAAc,kBAAM;AACpB;AACA,cAAc,kBAAM;AACpB,cAAc,kBAAM;AACpB;;AChQgD;AACE;AACF;AACzC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;;AC5BgD;AACzC,sBAAsB,8DAA8D;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACjBgD;AACE;AAC3C,uBAAuB,8DAA8D;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK,8CAA8C,mBAAS;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,oBAAoB,4CAA4C;AAChE;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;;AC5CkD;AACF;AACA;AAChD,eAAe,oBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,qBAAqB,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,UAAU,KAAK;AACf;AACA,eAAe,sBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,oBAAI;AAChB;AACA,cAAc,sBAAM;AACpB;AACA;;AC5GgD;AACE;AACF;AAChD,eAAe,kBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,yFAAyF;AACzF;AACA,aAAa;AACb;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,kBAAI;AAChB,YAAY,kBAAI;AAChB,cAAc,oBAAM;AACpB,YAAY,kBAAI;AAChB;;ACxHkD;AACF;AAChD,eAAe,eAAM;AACrB;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,aAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,cAAc,eAAM;AACpB,YAAY,aAAI;AAChB;;ACzBkD;AACF;AACA;AAChD,eAAe,kBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK,uBAAuB,uBAAuB;AACzE,IAAI,WAAK;AACT;AACO;AACP,cAAc,oBAAM;AACpB,YAAY,kBAAI;AAChB;;ACjDkD;AACF;AACA;AAChD,eAAe,iBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,iBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,iBAAI;AAChB,YAAY,iBAAI;AAChB,cAAc,mBAAM;AACpB;;AChFkD;AACF;AACA;AAChD,eAAe,aAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,uBAAuB;AACrF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,eAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK,uBAAuB,uBAAuB;AACzE,IAAI,WAAK;AACT;AACO;AACP,YAAY,aAAI;AAChB;AACA;AACA,cAAc,eAAM;AACpB;;ACxGkD;AACF;AACA;AACG;AACnD,eAAe,mBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,uBAAuB,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,4BAA4B,mBAAS;AACrC,+DAA+D,yBAAyB;AACxF;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK,uBAAuB,uBAAuB;AACzE,IAAI,WAAK;AACT;AACA,qBAAqB,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,4BAA4B,mBAAS;AACrC,+DAA+D,yBAAyB;AACxF;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK,uBAAuB,uBAAuB;AACzE,IAAI,WAAK;AACT;AACA,eAAe,qBAAM;AACrB;AACA,SAAS,mBAAS;AAClB,iBAAiB,KAAK;AACtB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,oCAAoC,SAAS;AAC7C,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,mBAAI;AAChB,YAAY,mBAAI;AAChB;AACA;AACA,cAAc,qBAAM;AACpB;;AC3IkD;AACF;AAChD,eAAe,iBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,cAAc,KAAK;AACnB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,iBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB,YAAY,iBAAI;AAChB,YAAY,iBAAI;AAChB;;AChFkD;AACF;AACzC,wBAAwB,8DAA8D;AAC7F;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACdkD;AACF;AAChD,eAAe,eAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,eAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB,YAAY,eAAI;AAChB;;AC1BkD;AACF;AACA;AACzC,yBAAyB,8DAA8D;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;;AC7BkD;AACF;AACA;AAChD,eAAe,WAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,aAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,WAAI;AAChB,cAAc,aAAM;AACpB;;AC1CkD;AACF;AAChD,eAAe,oBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,6BAA6B,GAAG,eAAe;AAC5F;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,oBAAI;AACnB;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,oBAAI;AAChB,YAAY,oBAAI;AAChB;;ACrDkD;AAC3C,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;;AChB6C;AACZ;AACE;AACkB;AACJ;AACV;AACU;AACF;AACR;AACY;AACJ;AACV;AACM;AACJ;AACJ;AACkB;AACV;AACO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,8BAA8B,KAAK;AACnC;AACA;AACA;AACO;AACP,mBAAmB,WAAW;AAC9B,aAAa,KAAK;AAClB,cAAc,MAAM;AACpB,uBAAuB,eAAe;AACtC,qBAAqB,aAAa;AAClC,gBAAgB,QAAQ;AACxB,oBAAoB,YAAY;AAChC,gBAAgB,QAAQ;AACxB,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,gBAAgB,QAAQ;AACxB,cAAc,MAAM;AACpB,uBAAuB,eAAe;AACtC,qBAAqB,aAAa;AAClC,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;;AC3SyD;AACV;AAC/C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD,kDAAkD,KAAK;AACvD,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD,oCAAoC,KAAK;AACzC;AACA,mDAAmD,KAAK;AACxD;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA,qBAAqB;AACrB;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA,wBAAwB,KAAK,0BAA0B,KAAK;AAC5D,2CAA2C,wBAAwB;AACnE;AACA;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA,QAAQ,KAAK,wBAAwB,KAAK;AAC1C;AACA;AACA;AACA,wBAAwB,KAAK,2BAA2B,KAAK;AAC7D,4DAA4D,0BAA0B;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,KAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kCAAkC,8DAA8D;AAChG;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,mCAAmC,8DAA8D;AACjG;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB;AACA;AACA;AACA;AACA;;;ACpNqD;AAC9C,wBAAwB,8DAA8D;AAC7F;AACA,wBAAwB,KAAK;AAC7B;AACA,YAAY,KAAK,qCAAqC,KAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf,iBAAiB,KAAK;AACtB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACtD+C;AACF;AAC7C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN,gEAAgE,YAAY;AAC5E,cAAc,KAAK;AACnB;AACA;AACA;AACA,eAAe,iBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,QAAQ,KAAK;AACb,2BAA2B,WAAK;AAChC;AACA;AACA,6CAA6C,KAAK;AAClD,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,gBAAK;AACpB;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB,cAAc,iBAAM;AACpB,aAAa,gBAAK;AAClB;;ACtFqD;AACF;AAC5C,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,iDAAiD,+CAA+C;AAChG;AACA,8CAA8C;AAC9C;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,sDAAsD,KAAK;AAC3D;AACA,6DAA6D,YAAY;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,YAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA,QAAQ,WAAK;AACb;AACA;;ACpHqD;AAC9C,0BAA0B,8DAA8D;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC7DgD;AACE;AACF;AAChD,sBAAsB,8DAA8D;AACpF;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,yBAAyB,mBAAS;AACjE;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,QAAQ,KAAK;AACb,IAAI,WAAK;AACT;AACA,eAAe,wBAAS;AACxB;AACA;AACO;AACP;AACA,iBAAiB,wBAAS;AAC1B;;AChCqD;AAC9C,mCAAmC,8DAA8D;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AC1DkD;AAC3C,wCAAwC,8DAA8D;AAC7G;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACjC+C;AACF;AAC7C,eAAe,aAAM,EAAE,8DAA8D;AACrF;AACA,2BAA2B,WAAK;AAChC;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN,QAAQ,WAAK;AACb;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,YAAK,EAAE,8DAA8D;AACpF;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,aAAa,YAAK;AAClB,cAAc,aAAM;AACpB;;AC5D6C;AACE;AAC/C;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,8DAA8D,gBAAgB;AAC9E,4BAA4B,mBAAS;AACrC;AACA,UAAU,KAAK;AACf;AACA;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA,oBAAoB,cAAc;AAClC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;ACpF+C;AACxC,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;;ACdgD;AACE;AAC3C;AACP;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;;AC7BkD;AAC3C,0BAA0B,8DAA8D;AAC/F;AACA;AACA,QAAQ,KAAK;AACb,8CAA8C,KAAK;AACnD;AACA,UAAU,KAAK;AACf;;ACR2D;AAClB;AAClC;AACP,iBAAiB,SAAS;AAC1B,gCAAgC,kBAAkB;AAClD;;ACLqD;AAC9C,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN,+CAA+C,YAAY;AAC3D;AACA;AACA,sBAAsB,cAAc;AACpC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;ACpE6C;AACE;AACC;AAChD,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,4DAA4D,yBAAyB;AACrF;AACA;AACA,MAAM;AACN;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,UAAU;AACV,kBAAkB,KAAK;AACvB;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,qBAAqB,mBAAS;AAC7D;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,mFAAmF,SAAS;AAC5F;AACA;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB;AACA;;ACxHO;AACP,uCAAuC;AACvC;;ACF6C;AACE;AACxC,kCAAkC,8DAA8D;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mJAAmJ,4BAA4B;AAC/K,SAAS;AACT;AACA,eAAe,mBAAS;AACxB,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;;ACjDqD;AAC9C,mCAAmC,8DAA8D;AACxG;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,4BAA4B,KAAK;AACjC,wBAAwB,0BAA0B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACzBmD;AACE;AACF;AAC5C,kCAAkC,8DAA8D;AACvG,aAAa,KAAK;AAClB,wBAAwB,KAAK;AAC7B,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,0BAA0B,mBAAS;AAClE;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,yBAAyB,8CAA8C;AACvE;AACA,yCAAyC,6BAA6B,GAAG,eAAe;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS,kBAAkB,QAAQ,KAAK;AACxC;AACA,IAAI,KAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KqD;AACF;AAC5C,6BAA6B,8DAA8D;AAClG,yBAAyB,KAAK;AAC9B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,yCAAyC,6BAA6B,GAAG,eAAe;AACxF;AACA;AACA,IAAI,WAAK;AACT;;ACdgD;AACzC,sBAAsB,8DAA8D;AAC3F;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,IAAI,WAAK;AACT;;ACbkD;AACF;AACzC,+BAA+B,8DAA8D;AACpG;AACA,SAAS,KAAK;AACd;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACjBiC;AACkB;AAC5C;AACP,aAAa,KAAK;AAClB,sBAAsB,cAAc;AACpC;;ACLgD;;AAEzC,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,yBAAyB;AAC/F,wEAAwE,yBAAyB;AACjG,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;;ACxD2C;AACpC;AACP,kBAAkB,UAAU;AAC5B;;ACH+C;AACxC,6BAA6B,8DAA8D;AAClG;AACA,oBAAoB,KAAK;AACzB,gCAAgC,KAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,SAAS;AACnB;AACA,2BAA2B,sBAAsB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA,2BAA2B,sBAAsB;AACjD,sCAAsC,uCAAuC;AAC7E,uBAAuB,uCAAuC;AAC9D;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA,2BAA2B,sBAAsB;AACjD,sCAAsC,uCAAuC;AAC7E,yBAAyB,uCAAuC;AAChE;AACA;;AAEA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA,2BAA2B,sBAAsB;AACjD;;AAEA;AACA;AACA,iCAAiC,sBAAsB;AACvD,uBAAuB,sBAAsB;AAC7C;AACA;AACA;;AC5D+C;AACxC,8BAA8B,8DAA8D;AACnG,yBAAyB,KAAK;AAC9B;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC5DmD;AACE;AACC;AACH;AACnD,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA,kFAAkF,YAAY;AAC9F,UAAU,KAAK;AACf,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,mBAAS;AAClB,iBAAiB,KAAK;AACtB;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,yBAAyB,mBAAS;AACjE;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,kDAAkD,KAAK;AACvD;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,cAAc,KAAK;AACnB;AACA;AACA,eAAe,qBAAS;AACxB;AACA;AACO;AACP,YAAY,gBAAI;AAChB,YAAY,gBAAI;AAChB,cAAc,kBAAM;AACpB;AACA,iBAAiB,qBAAS;AAC1B;;ACvG+C;AACxC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA,2CAA2C,kDAAkD;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC/DgD;AACE;AACF;AACzC;AACP;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;;AC/C+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACHkD;AAC3C,4BAA4B,8DAA8D;AACjG;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA,oDAAoD,YAAY;AAChE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;;AC9B6C;AACtC;AACP,mBAAmB,WAAW;AAC9B;;ACH6C;AACE;AACF;AACtC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA,IAAI,WAAK;AACT;;AC1EqD;AAC9C,sCAAsC,8DAA8D;AAC3G,4FAA4F,KAAK;AACjG,IAAI,KAAK;AACT;;;ACJ+C;AACxC,4BAA4B,8DAA8D;AACjG;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;;ACjCkD;AAC3C,0BAA0B,8DAA8D;AAC/F;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;;ACrDyC;AAClC;AACP,iBAAiB,SAAS;AAC1B;;ACH+C;AACF;AACtC,2BAA2B,8DAA8D;AAChG;AACA,eAAe,KAAK;AACpB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;;AChB+C;AACF;AACtC,6BAA6B,8DAA8D;AAClG;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AC1CqD;AAC9C,kCAAkC,8DAA8D;AACvG;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA,wBAAwB,sCAAsC;AAC9D;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA;;ACzBkD;AAC3C;AACP;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACvBkD;AAC3C,qBAAqB,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;;AC/CqC;AACN;AACxB;AACP,YAAY,IAAI;AAChB,eAAe,OAAO;AACtB;;ACL6C;AACE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,0BAA0B,KAAK,wBAAwB,mBAAS;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,yBAAyB;AAC3F,4BAA4B,mBAAS;AACrC;AACA;AACA,eAAe,aAAM;AACrB;AACA;AACA;AACA,6DAA6D,YAAY;AACzE;AACA;AACA,eAAe,aAAM;AACrB;AACA;AACA;AACA;AACA,6DAA6D,YAAY;AACzE;AACA;AACO,IAAI,aAAM;AACjB;AACA,cAAc,aAAM;AACpB,cAAc,aAAM;AACpB;;AC1DkD;AAC3C;AACP;AACA;AACA;AACA;AACA,gFAAgF,YAAY;AAC5F;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;;ACbqD;AAC9C;AACP,uBAAuB,eAAe;AACtC;;ACHgD;AACE;AACC;AACH;AAChD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,4BAA4B,mBAAS;AACpE;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,+BAA+B,SAAS;AACxC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK,6BAA6B,6BAA6B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,qFAAqF;AACrF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,eAAe,eAAG;AAClB;AACA;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAM;AACrB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,2BAA2B,8DAA8D;AACzF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,cAAc,kBAAM;AACpB,WAAW,eAAG;AACd,cAAc,kBAAM;AACpB,cAAc,kBAAM;AACpB;AACA;;ACtI6C;AACE;AACC;AAChD,eAAe,cAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACA,eAAe,cAAI;AACnB;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA,8EAA8E,mCAAmC,GAAG,0BAA0B;AAC9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,+BAA+B;AAC1D;AACO;AACP,YAAY,cAAI;AAChB;AACA,YAAY,cAAI;AAChB;;ACjG6C;AACE;AACF;AAC7C,eAAe,oBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,mBAAS;AAClB,iBAAiB,KAAK;AACtB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,YAAY,mBAAS;AACrB;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,mBAAmB,KAAK;AACxB;AACA,oBAAoB,KAAK;AACzB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,4BAA4B,mBAAS;AACrC,8DAA8D,2BAA2B;AACzF;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,iBAAG;AAClB,UAAU,KAAK;AACf;AACA,eAAe,qBAAO;AACtB;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,0BAA0B,KAAK,2BAA2B,mBAAS,QAAQ,KAAK;AAChF;AACA,UAAU,KAAK;AACf,uBAAuB,KAAK;AAC5B;AACA,UAAU,KAAK;AACf;AACO;AACP,cAAc,oBAAM;AACpB;AACA;AACA;AACA,YAAY,kBAAI;AAChB,WAAW,iBAAG;AACd,eAAe,qBAAO;AACtB;;ACzO+C;AAC/C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA,SAAS;AACT,KAAK;AACL;AACO;AACP;AACA,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B;AACA;AACA;;AClD+C;AAC/C,IAAI,iCAAU;AACd;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kCAAW;AACR;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,sBAAsB,KAAK,uCAAuC,iCAAU;AAC5E,gBAAgB,kCAAW;AAC3B;AACA,SAAS;AACT,KAAK;AACL;AACO;AACP,kBAAkB,kCAAW;AAC7B,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B;AACA,IAAI,kCAAW;AACf;;AC3CiD;AACF;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB;;AC/CiD;AACF;AACxC,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB;;AC3BiD;AACF;AACxC,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC1DiD;AACF;AACxC,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC1DiD;AACF;AACxC,uCAAuC,8DAA8D;AAC5G;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB;;ACtCiD;AACF;AACxC,sCAAsC,8DAA8D;AAC3G;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB;;ACtCgD;AACE;AAClD,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,uBAAS;AACxB;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,4BAA4B,mBAAS;AACrC;AACA;AACO;AACP,YAAY,kBAAI;AAChB,iBAAiB,uBAAS;AAC1B;;ACpBiD;AAC1C;AACP,qBAAqB,aAAa;AAClC;;ACHqD;AACrD,eAAe,mBAAK,EAAE,8DAA8D;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,wCAAwC,KAAK;AACtG;AACA,eAAe,kBAAI,EAAE,8DAA8D;AACnF,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD,uBAAuB,sBAAsB;AAC7C;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,UAAU,GAAG,kBAAkB;AACtD,sBAAsB,iBAAiB;AACvC,gCAAgC,2BAA2B;AAC3D;AACA;AACA,2BAA2B,uBAAuB;AAClD,kDAAkD,iGAAiG;AACnJ,6CAA6C,kGAAkG;AAC/I,8CAA8C,gGAAgG;AAC9I,yBAAyB,mBAAmB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,OAAO,GAAG,kBAAkB;AACnD,sBAAsB,UAAU;AAChC,gCAAgC,2BAA2B;AAC3D;AACA;AACA,2BAA2B,uBAAuB;AAClD,kDAAkD,gGAAgG;AAClJ;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB,GAAG,kBAAkB;AACjE,gCAAgC,wBAAwB;AACxD,sBAAsB,gBAAgB;AACtC;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,WAAW,SAAS,6CAA6C;AACjG;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,6CAA6C,gFAAgF;AAC7H,8CAA8C,gFAAgF;AAC9H,kDAAkD,4DAA4D;AAC9G;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,kCAAkC,MAAM,wCAAwC;AAChH,8BAA8B,2BAA2B;AACzD;AACA;AACA;AACA;AACA;AACA,+CAA+C,iFAAiF;AAChI,iCAAiC,gBAAgB;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA,2BAA2B,2BAA2B;AACtD,+CAA+C,iFAAiF;AAChI,yBAAyB,yEAAyE;AAClG;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iBAAG;AAClB,oBAAoB,KAAK;AACzB;AACA,8CAA8C,0CAA0C;AACxF;AACO;AACP,aAAa,mBAAK;AAClB,YAAY,kBAAI;AAChB,WAAW,iBAAG;AACd;;AC/MiD;AAC1C;AACP;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;;ACRyC;AAClC;AACP,iBAAiB,SAAS;AAC1B;;ACHwD;AACxD,uBAAuB,8DAA8D;AACrF;AACA,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,KAAK;AACxE,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA,wBAAwB,8DAA8D;AACtF;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;AC1GqD;AAC9C,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,4GAA4G;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;;ACzG6C;AACE;AACC;AACH;AAC7C,yBAAyB,8DAA8D;AACvF;AACA,2BAA2B,WAAK;AAChC;AACA,SAAS,KAAK;AACd,QAAQ,WAAK;AACb;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,IAAI,WAAK;AACT;AACA,eAAe,YAAI,EAAE,8DAA8D;AACnF;AACA;AACA,qBAAqB,KAAK;AAC1B,sBAAsB,KAAK;AAC3B,kBAAkB,KAAK;AACvB;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B,yBAAyB,SAAS;AAClC,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA,YAAY,YAAI;AAChB;;ACjGqD;AACF;AAC5C,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB,4BAA4B,KAAK;AACjC;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,kBAAkB,KAAK;AACvB;AACA,IAAI,WAAK;AACT;;AC1B6C;AACE;AACF;AAC7C,qBAAqB,8DAA8D;AACnF;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,6EAA6E,YAAY;AACzF;AACA,IAAI,WAAK;AACT;AACA,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA,2BAA2B,8BAA8B;AACzD,IAAI,WAAK;AACT;AACA,sBAAsB,8DAA8D;AACpF,kBAAkB,KAAK;AACvB,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,+BAA+B,KAAK;AACpC,+BAA+B,KAAK;AACpC;AACA;AACA;AACO;AACP;AACA,YAAY,iBAAI;AAChB;AACA;;ACpJ+C;AAC/C,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,YAAY,KAAK;AACjB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,8DAA8D,uDAAuD;AAC9M;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA,oFAAoF,+DAA+D;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,2BAA2B,8DAA8D;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA,UAAU,KAAK;AACf;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB;AACA;AACA;AACA;AACA;AACA;;ACtLkD;AAC3C;AACP,kBAAkB,KAAK;AACvB,mBAAmB,KAAK;AACxB,wBAAwB,KAAK;AAC7B;AACA,sCAAsC;AACtC;;ACP6C;AACE;AACxC,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA,6BAA6B,KAAK,sGAAsG,KAAK;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,gEAAgE,mBAAS;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,sCAAsC,YAAY,IAAI;AACjJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,sCAAsC,YAAY,IAAI;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA,uEAAuE,qCAAqC,YAAY;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,uEAAuE,qCAAqC,YAAY;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;;ACjNqD;AAC9C,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;;ACf+C;AACF;AAC7C,6BAA6B,8DAA8D;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA;;ACtH6C;AACE;AAC/C,eAAe,SAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,YAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACO;AACP,YAAY,SAAI;AAChB,eAAe,YAAO;AACtB;;AC5E+C;AACF;AACtC,iCAAiC,sBAAsB;AAC9D,iBAAiB,KAAK;AACtB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;;ACfO;AACP,uCAAuC;AACvC;;ACFoD;AAC7C;AACP,uBAAuB,eAAe;AACtC;;ACH+C;AACF;AACtC,gCAAgC,8DAA8D;AACrG,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACpBmD;AAC5C,iCAAiC,8DAA8D;AACtG,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACtB+C;AAC/C,wCAAwC,8DAA8D;AACtG;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,mCAAmC,8DAA8D;AACjG,4BAA4B,KAAK;AACjC;AACA,iCAAiC,KAAK;AACtC,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACO;AACP;AACA;AACA;;ACxD+C;;AAExC,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA;AACA,gEAAgE,KAAK;AACrE,oBAAoB,KAAK;AACzB,gCAAgC,KAAK,4BAA4B,KAAK;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD,0BAA0B,uBAAuB;AACjD,6CAA6C,yCAAyC;AACtF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD,0BAA0B,uBAAuB;AACjD,6CAA6C,yCAAyC;AACtF;AACA,gCAAgC,gCAAgC;AAChE,yBAAyB,yBAAyB;AAClD;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;AACxC;;AAEA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC,2DAA2D,2DAA2D;AACtH;;AAEA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC,2DAA2D,4DAA4D;AACvH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,WAAW,UAAU,oBAAoB;AACtE;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,WAAW;AAC3C;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0DAA0D;AACjF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qDAAqD;AAC5E,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAyD;AAChF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAyD;AAChF,SAAS;AACT;AACA;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAyD;AAChF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAyD;AAChF,SAAS;AACT;AACA;;AAEA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAyD;AAChF,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA,SAAS;;AAET;AACA;;AC1fqD;AACF;AACnD,eAAe,iBAAM,EAAE,8DAA8D;AACrF;AACA,iBAAiB,KAAK;AACtB;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B;AACA,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK;AACf;AACA,2CAA2C,KAAK;AAChD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,cAAG;AAClB,UAAU,KAAK;AACf;AACO;AACP,cAAc,iBAAM;AACpB,WAAW,cAAG;AACd;;ACpCkD;AACF;AACzC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,YAAY;AACrE;AACA;AACA,IAAI,WAAK;AACT;;ACxGgD;AACE;AACF;AAChD,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA,kBAAkB,KAAK;AACvB;AACA,wBAAwB,KAAK;AAC7B;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,oBAAoB,WAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,sBAAS;AACxB;AACA;AACO;AACP,YAAY,iBAAI;AAChB,iBAAiB,sBAAS;AAC1B;;AC1EkD;AACF;AACzC,eAAe,yBAAY,EAAE,8DAA8D;AAClG;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,uDAAuD,YAAY;AACnE;AACA,IAAI,WAAK;AACT;;AC1B+C;AACxC;AACP,oBAAoB,yBAAY;AAChC;;ACHqD;AACF;AAC5C,+BAA+B,8DAA8D;AACpG;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;AC9B+C;AACxC,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,kDAAkD,KAAK;AACvD;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AChF+C;AACxC,8BAA8B,8DAA8D;AACnG;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AC9D+C;AAC/C,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,6CAA6C,KAAK;AAClD;AACA;AACA,eAAe,kBAAK;AACpB;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C,UAAU,KAAK;AACf;AACA,eAAe,oBAAO;AACtB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,oBAAO;AACtB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB,aAAa,kBAAK;AAClB,eAAe,oBAAO;AACtB,eAAe,oBAAO;AACtB;;ACtDO;AACP;AACA;AACA;;ACHmD;AACE;AACU;AAC/D,eAAe,cAAI,EAAE,8DAA8D;AACnF;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF;AACvF,iBAAiB;AACjB;AACA,6FAA6F;AAC7F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,QAAQ,WAAW;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D,oCAAoC,gBAAgB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,kBAAkB;AACtD,yBAAyB,oEAAoE;AAC7F,mBAAmB,iGAAiG,GAAG,kBAAkB;AACzI,2BAA2B,OAAO,GAAG,kBAAkB;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,WAAW,SAAS,6CAA6C;AACxG,wDAAwD,kBAAkB;AAC1E;AACA;AACA,+BAA+B,uBAAuB;AACtD,iDAAiD,iFAAiF;AAClI,kDAAkD,iFAAiF;AACnI,sDAAsD,2DAA2D;AACjH,oCAAoC,yBAAyB;AAC7D;;AAEA;AACA;AACA,uCAAuC,WAAW,WAAW,4CAA4C;AACzG;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B;AAC9D,sBAAsB,kBAAkB;AACxC;AACA;;AAEA;AACA,0EAA0E;AAC1E,gBAAgB,WAAW;AAC3B,aAAa;;AAEb;AACA,oBAAoB,oEAAoE;;AAExF;AACA;AACA;AACA;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA,oCAAoC,gBAAgB;AACpD,+BAA+B,sBAAsB;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D,oCAAoC,gBAAgB;AACpD,+BAA+B,sBAAsB;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW,OAAO,4CAA4C;AACrG,wBAAwB,kBAAkB;AAC1C;AACA,8BAA8B,sBAAsB;AACpD,gCAAgC,qBAAqB;AACrD,oCAAoC,2BAA2B;AAC/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW,OAAO,4CAA4C;AACrG,uBAAuB,kBAAkB;AACzC;AACA,8BAA8B,sBAAsB;AACpD,gCAAgC,qBAAqB;AACrD,oCAAoC,gBAAgB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,WAAW,OAAO,4CAA4C;AACrG,uBAAuB,kBAAkB;AACzC;AACA,8BAA8B,sBAAsB;AACpD,gCAAgC,qBAAqB;AACrD,oCAAoC,gBAAgB;AACpD;AACA,iDAAiD,wCAAwC;AACzF;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,WAAW,SAAS,4CAA4C;AACvG,+BAA+B,2BAA2B;AAC1D;;AAEA;AACA;AACA;AACA,eAAe,cAAI;AACnB;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;AACA,eAAe,gBAAM,EAAE,8DAA8D;AACrF;AACA,kBAAkB,KAAK;AACvB;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB,GAAG,kBAAkB;AAChE,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,+EAA+E;AAC9H,gCAAgC,kCAAkC;AAClE,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA,eAAe,aAAG;AAClB;AACA,IAAI,WAAW;AACf,QAAQ,KAAK,4EAA4E,sCAAsC;AAC/H;AACA,eAAe,mBAAS;AACxB;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,2CAA2C,KAAK;AAChD,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,cAAI;AAChB,cAAc,gBAAM;AACpB,WAAW,aAAG;AACd,iBAAiB,mBAAS;AAC1B,YAAY,cAAI;AAChB;;AC9XmD;AACE;AACF;AACnD,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,wGAAwG;AACxG;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B,cAAc,KAAK;AACnB;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD,gCAAgC,gBAAgB;;AAEhD;AACA;AACA;AACA;AACA;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA;AACA,gCAAgC,2BAA2B;AAC3D;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,kBAAkB;AAClD,qBAAqB,oEAAoE;AACzF,eAAe,iGAAiG,GAAG,kBAAkB;AACrI,uBAAuB,QAAQ,GAAG,kBAAkB;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,WAAW,SAAS,6CAA6C;AACpG,qDAAqD,kBAAkB;AACvE;AACA;AACA,2BAA2B,uBAAuB;AAClD,6CAA6C,iFAAiF;AAC9H,8CAA8C,iFAAiF;AAC/H,kDAAkD,2DAA2D;AAC7G,gCAAgC,yBAAyB;AACzD;;AAEA;AACA;AACA,mCAAmC,WAAW,WAAW,4CAA4C;AACrG;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;;AAEA;AACA;AACA,mCAAmC,WAAW,UAAU,4CAA4C;AACpG;AACA;AACA,6BAA6B,2BAA2B;AACxD,gCAAgC,gBAAgB;AAChD;;AAEA;AACA;AACA,mCAAmC,WAAW,MAAM,4CAA4C;AAChG,2BAA2B,2BAA2B;AACtD,0BAA0B,sBAAsB;AAChD,4BAA4B,qBAAqB;AACjD,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,oEAAoE;;AAEpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;;AAEA;AACA;AACA,mCAAmC,WAAW,SAAS,4CAA4C;AACnG,2BAA2B,2BAA2B;AACtD;;AAEA;AACA;AACA,mCAAmC,WAAW,OAAO,4CAA4C;AACjG,6BAA6B,yBAAyB;AACtD;AACA,gCAAgC,gBAAgB;AAChD;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,WAAW,OAAO,4CAA4C;AACjG,mBAAmB,kBAAkB;AACrC;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,2BAA2B;AACjE,wCAAwC,4BAA4B;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA,uDAAuD,+EAA+E;AACtI,wCAAwC,kCAAkC;AAC1E,mCAAmC,2BAA2B;AAC9D;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,WAAW,SAAS,6CAA6C;AACpG,kDAAkD,kBAAkB;AACpE;AACA;AACA,mCAAmC,uBAAuB;AAC1D,qDAAqD,iFAAiF;AACtI,sDAAsD,iFAAiF;AACvI,0DAA0D,2DAA2D;AACrH,wCAAwC,yBAAyB;AACjE;;AAEA;AACA;AACA;AACA;AACA,eAAe,sBAAO;AACtB;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC,8DAA8D,4BAA4B;AAC1F,4BAA4B,mBAAS;AACrC,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,mBAAI;AAChB,eAAe,sBAAO;AACtB;;AC/NkD;AAC3C;AACP;AACA;AACA;AACA;AACA,0DAA0D,YAAY;AACtE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;;ACb2D;AACpD;AACP,0BAA0B,kBAAkB;AAC5C;;ACHkD;AAC3C,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,UAAU,KAAK;AACf;;ACR+C;AACxC;AACP,oBAAoB,YAAY;AAChC;;ACH+C;AACxC;AACP;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA,kEAAkE,kBAAkB;AACpF,oEAAoE,iBAAiB;AACrF;;ACjBkD;AAC3C,4BAA4B,8DAA8D;AACjG;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;;ACPmD;AACD;AAClD,eAAe,WAAI,EAAE,8DAA8D;AACnF;AACA,mBAAmB,SAAS;AAC5B,kBAAkB,SAAS;AAC3B,4BAA4B,KAAK;AACjC;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,UAAG;AAClB;AACA;AACO;AACP,YAAY,WAAI;AAChB,WAAW,UAAG;AACd;;AC9C6C;AACV;AAC5B;AACP,cAAc,MAAM;AACpB,mBAAmB,WAAW;AAC9B;;ACLgD;AACzC,wBAAwB,8DAA8D;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACfqC;AAC9B;AACP,eAAe,OAAO;AACtB;;ACHqD;AAC9C,6BAA6B,8DAA8D;AAClG;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC9BkD;AAC3C,yBAAyB,8DAA8D;AAC9F;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;;AC7DuC;AAChC;AACP,gBAAgB,QAAQ;AACxB;;ACHkD;AAC3C,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD,qCAAqC,KAAK;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,uBAAuB,KAAK;AAC5B,8DAA8D;AAC9D;;ACjFkD;AAC3C,mCAAmC,8DAA8D;AACxG;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA,yDAAyD,YAAY;AACrE,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA;;ACjBkD;AAClD,yBAAyB,8DAA8D;AACvF;AACA,iBAAiB,KAAK;AACtB,0DAA0D,YAAY;AACtE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf,gBAAgB,KAAK;AACrB;AACA,eAAe,gBAAI,EAAE,8DAA8D;AACnF,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,sBAAsB,8DAA8D;AACpF;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA,sBAAsB,8DAA8D;AACpF;AACA;AACA,uBAAuB,KAAK;AAC5B,UAAU,KAAK;AACf;AACO;AACP,YAAY,gBAAI;AAChB;AACA;AACA;AACA;;ACzE2D;AACd;AACtC;AACP,0BAA0B,kBAAkB;AAC5C,mBAAmB,WAAW;AAC9B;;ACLkD;AAC3C,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK,uBAAuB,QAAQ;AAClD,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,kBAAkB,KAAK;AACvB,UAAU;AACV,2BAA2B;AAC3B,kBAAkB,KAAK;AACvB;AACA;AACA;;ACtH6C;AACtC;AACP,mBAAmB,WAAW;AAC9B;;ACH+C;AACF;AAC7C,eAAe,kBAAI,EAAE,8DAA8D;AACnF,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF;AACA,4FAA4F,KAAK;AACjG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,kBAAI;AAChB,cAAc,oBAAM;AACpB;;AC5CmD;AACE;AACF;AAC5C,8BAA8B,8DAA8D;AACnG;AACA,SAAS,mBAAS;AAClB,kBAAkB,KAAK;AACvB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,yDAAyD,YAAY;AACrE;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,iBAAiB,KAAK;AACtB;AACA,QAAQ,WAAK;AACb;AACA;AACA,2BAA2B,KAAK,sBAAsB,mBAAS;AAC/D,uBAAuB,KAAK;AAC5B,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;;AC7C+C;AACF;AAC7C,eAAe,oBAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,mBAAI;AACnB;AACA;AACA,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B,KAAK;AACL;AACA,eAAe,qBAAM;AACrB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACO;AACP,aAAa,oBAAK;AAClB,YAAY,mBAAI;AAChB,cAAc,qBAAM;AACpB;;ACnFqD;AACrD;AACA,2BAA2B,KAAK;AAChC;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,qBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA,uBAAuB,8DAA8D;AACrF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACO;AACP,YAAY,qBAAI;AAChB;AACA;AACA;;ACzG+C;AACxC,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,0BAA0B,KAAK;AAC/B;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;;AC7E+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf;;ACRmD;AACE;AACF;AACnD;AACA;AACA;AACA,IAAI,0BAAU;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,eAAe,oBAAI;AACnB,kBAAkB,KAAK;AACvB;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,gCAAgC,0BAAU;AAC1C;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,4BAA4B,KAAK;AACjC,sBAAsB,KAAK;AAC3B;AACA;AACA,sBAAsB,KAAK,wBAAwB,iBAAiB;AACpE,sBAAsB,KAAK;AAC3B;AACA,UAAU;AACV;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA,wCAAwC,0BAAU;AAClD;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,eAAe,oBAAI;AACnB,SAAS,KAAK;AACd;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA,gCAAgC,0BAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,iBAAiB;AACjB;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;AACA,eAAe,sBAAM;AACrB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,eAAe,sBAAM,eAAe,gBAAgB;AACpD;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,QAAQ,KAAK;AACb;AACA,wBAAwB,KAAK,uJAAuJ,KAAK;AACzL;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,cAAc,KAAK;AACnB,8BAA8B,KAAK,iCAAiC,mBAAS;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB,qBAAqB,KAAK;AAC1B;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,oBAAI;AAChB,YAAY,oBAAI;AAChB,YAAY,oBAAI;AAChB,cAAc,sBAAM;AACpB,cAAc,sBAAM;AACpB;AACA;AACA;;AC/RqD;AAC9C;AACP,iBAAiB,KAAK;AACtB;AACA;;ACJqD;AACF;AACnD,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,YAAY,KAAK;AACjB,4BAA4B,KAAK;AACjC;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,MAAM;AACN,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF,qBAAqB,KAAK,mDAAmD,KAAK;AAClF;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA,yCAAyC,iGAAiG,GAAG,eAAe;AAC5J;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,mBAAI;AAChB,cAAc,qBAAM;AACpB;;AC9C+C;AAC/C;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,sEAAsE;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6CAA6C,sEAAsE;AACnH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,UAAU;AACzC;AACA,6DAA6D;AAC7D,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B,wBAAwB;;AAErD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA,kBAAkB,KAAK,iDAAiD,KAAK;AAC7E,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,eAAe,iBAAG;AAClB,6DAA6D,eAAe,UAAU,kBAAkB;AACxG;AACO;AACP;AACA;AACA,YAAY,kBAAI;AAChB,WAAW,iBAAG;AACd;;ACjdqD;AAC9C,mCAAmC,8DAA8D;AACxG,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN,6BAA6B,KAAK;AAClC;AACA,4CAA4C,KAAK;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iGAAiG;AACjG;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;;AC7FqD;AAC9C,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4BAA4B;AACvD,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,2DAA2D,yBAAyB;AACpF;AACA;;AC5D+C;AACF;AACtC;AACP;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,IAAI,WAAK;AACT;;AC1BO;AACP,uCAAuC;AACvC;;ACFO;AACP,uCAAuC;AACvC;;ACF+C;AAC/C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA,gBAAgB,KAAK;AACrB,4BAA4B,KAAK,4BAA4B,KAAK;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,gCAAgC,4BAA4B;AAC5D,yBAAyB,yBAAyB;AAClD,6CAA6C,qFAAqF;AAClI,8CAA8C,qFAAqF;AACnI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,gCAAgC,WAAW;AAC3C,6CAA6C,iFAAiF;AAC9H,8CAA8C,+EAA+E;AAC7H,kDAAkD,4DAA4D;;AAE9G;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD,6CAA6C,iFAAiF;AAC9H,8CAA8C,iFAAiF;AAC/H,kDAAkD,mFAAmF;AACrI;;AAEA;AACA;AACA,+BAA+B,WAAW,UAAU,oBAAoB;AACxE;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA,+BAA+B,WAAW,UAAU,oBAAoB;AACxE;AACA;AACA,kBAAkB,kBAAkB;AACpC,yBAAyB,mCAAmC;AAC5D;;AAEA;AACA,gCAAgC,MAAM;AACtC,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,+BAA+B,WAAW,UAAU,oBAAoB;AACxE,kBAAkB,kBAAkB;AACpC,gCAAgC,2CAA2C;AAC3E;AACA,yBAAyB,yBAAyB;AAClD;;AAEA;AACA;AACA;AACA,+BAA+B,WAAW,UAAU,oBAAoB;AACxE,kBAAkB,kBAAkB;AACpC,gCAAgC,WAAW;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,YAAY;AACtC,4BAA4B,qBAAqB;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mCAAmC;AAChE;AACA,2BAA2B,aAAa;AACxC,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB,4BAA4B,KAAK,4BAA4B,KAAK;AAClE,wCAAwC,qCAAqC;AAC7E;AACO;AACP,YAAY,eAAI;AAChB;AACA;;AC3JqD;AAC9C,6BAA6B,8DAA8D;AAClG;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf,iBAAiB,KAAK;AACtB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC/B+C;AACF;AAC7C,eAAe,YAAI,EAAE,8DAA8D;AACnF;AACA,qBAAqB,WAAK;AAC1B;AACA;AACA,UAAU,gBAAQ;AAClB;AACA,IAAI,WAAK;AACT,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,gBAAQ;AACvB;AACA,yBAAyB,KAAK;AAC9B;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA,oBAAoB,kDAAkD;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAkD;AACtE,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,yBAAyB;AACxD;AACA,+BAA+B,yBAAyB;AACxD;AACA,iCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA,eAAe,WAAG;AAClB;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK;AACb;AACA,8CAA8C,mBAAmB;AACjE;AACA,sBAAsB,8DAA8D;AACpF;AACA,qBAAqB,WAAK;AAC1B;AACA,kBAAkB,KAAK;AACvB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,UAAU,gBAAQ;AAClB;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,YAAI;AAChB,WAAW,WAAG;AACd,gBAAgB,gBAAQ;AACxB;AACA;;ACpLgD;AACE;AACF;AAChD;AACA;AACA;AACA;AACA;AACA,kDAAkD,KAAK;AACvD,sFAAsF,YAAY;AAClG;AACA;AACO,2BAA2B,8DAA8D;AAChG;AACA,SAAS,mBAAS;AAClB,qBAAqB,KAAK;AAC1B;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,YAAY,KAAK,mBAAmB,KAAK;AACzC,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,0BAA0B,KAAK,yBAAyB,mBAAS;AACjE;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,6BAA6B,8BAA8B;AAC3D;AACA,QAAQ,KAAK,mBAAmB,KAAK;AACrC,IAAI,WAAK;AACT;;AC3CqD;AAC9C,4BAA4B,8DAA8D;AACjG;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;;AClCO,uBAAuB,8DAA8D;AAC5F;AACA;AACA;AACA;;ACJkD;AAC3C,wBAAwB,8DAA8D;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;ACvDmC;AACE;AAC9B;AACP,eAAe,OAAO;AACtB,cAAc,MAAM;AACpB;;ACLkD;AAC3C,sBAAsB,8DAA8D;AAC3F,0BAA0B,KAAK;AAC/B;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,8DAA8D,yBAAyB;AACvF;AACA;;ACTO;AACP;AACA;;ACFiC;AACY;AACtC;AACP,mBAAmB,WAAW;AAC9B,aAAa,KAAK;AAClB;;ACLiD;AACF;AAC/C,eAAe,iBAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,6BAA6B,KAAK;AAClC;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB,iBAAiB,KAAK;AACtB,+GAA+G,uDAAuD;AACtK,UAAU,KAAK;AACf;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,wBAAW,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB;AACA,mBAAmB,wBAAW;AAC9B;;AC9JiD;AACF;AAC/C,eAAe,qBAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB,iBAAiB,KAAK;AACtB,UAAU,KAAK;AACf;AACA,eAAe,sBAAK,EAAE,8DAA8D;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,cAAc,KAAK;AACnB;AACA,IAAI,KAAK;AACT;AACO;AACP,YAAY,qBAAI;AAChB,aAAa,sBAAK;AAClB;;AC9FiD;AACF;AAC/C,eAAe,cAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB,iBAAiB,KAAK;AACtB,UAAU,KAAK;AACf;AACA,eAAe,eAAK,EAAE,8DAA8D;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,cAAc,KAAK;AACnB;AACA,IAAI,KAAK;AACT;AACO;AACP,YAAY,cAAI;AAChB,aAAa,eAAK;AAClB;;AC9FgD;AACE;AAC3C;AACP;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,8DAA8D,4BAA4B;AAC1F,4BAA4B,mBAAS;AACrC;AACA;AACA;AACO,0BAA0B,8DAA8D;AAC/F,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO,eAAe,aAAI,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACO;AACP,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;;ACzEkD;AAC3C,sBAAsB,8DAA8D;AAC3F;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA,mBAAmB;AACnB,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qGAAqG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AC5EmE;AAClC;AAC1B;AACP,gBAAgB,QAAQ;AACxB,iBAAiB,SAAS;AAC1B,oBAAoB,aAAI;AACxB,iBAAiB,SAAS;AAC1B,aAAa,KAAK;AAClB;;ACR6C;AACE;AACF;AAC7C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA,qBAAqB,WAAK;AAC1B;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,IAAI,WAAK;AACT,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,cAAG;AAClB;AACA,oBAAoB,KAAK,0CAA0C,KAAK;AACxE;AACA,8CAA8C,uCAAuC;AACrF;AACA,qBAAqB,8DAA8D;AACnF;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,gBAAK;AACpB;AACA,mBAAmB,KAAK;AACxB;AACA,SAAS,mBAAS;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,4BAA4B;AAC1F,4BAA4B,mBAAS;AACrC,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,eAAI;AAChB,WAAW,cAAG;AACd;AACA,aAAa,gBAAK;AAClB;AACA;;ACvNgD;AACE;AAC3C;AACP;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;;ACf2C;AACpC;AACP,kBAAkB,UAAU;AAC5B;;ACH+C;AACF;AACtC,0BAA0B,8DAA8D;AAC/F,wBAAwB,KAAK;AAC7B,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,+EAA+E,uBAAuB;AACtG;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA,IAAI,KAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;;ACxFgD;AACE;AACC;AACH;AAChD,eAAe,iBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,gCAAgC,SAAS;AACzC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,cAAG;AAClB;AACA;AACO;AACP,cAAc,iBAAM;AACpB,WAAW,cAAG;AACd;;ACnC+C;AACF;AAC7C,SAAS,aAAK;AACd;AACA;AACA;AACA,yCAAyC,cAAM;AAC/C;AACA;AACA,0CAA0C,gBAAQ;AAClD,MAAM;AACN;AACA;AACA,0CAA0C,cAAM;AAChD;AACA;AACA,2CAA2C,gBAAQ;AACnD;AACA;AACA,uBAAuB,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,yCAAyC;AAClE,uBAAuB,2CAA2C;AAClE;AACA,eAAe,cAAM;AACrB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,oBAAoB,cAAc;AAClC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,uBAAuB,8DAA8D;AACrF,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,0BAA0B,6BAA6B;AACvD;AACA;AACA,eAAe,gBAAQ;AACvB;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,aAAa,aAAK;AAClB;AACA,cAAc,cAAM;AACpB;AACA;AACA;AACA,gBAAgB,gBAAQ;AACxB;;AC1M+C;AACC;AACzC,2BAA2B,8DAA8D;AAChG;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,6BAA6B,KAAK;AAClC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,SAAS;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AChF+C;AAC/C;AACA;AACA,oBAAoB,KAAK;AACzB,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mBAAmB;AAC7B,2CAA2C,qCAAqC;AAChF,wCAAwC,qEAAqE;AAC7G,mBAAmB,mBAAmB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C,kBAAkB,yBAAyB;AAC3C,mBAAmB,mBAAmB;AACtC;AACA;;AAEA;AACA;AACA,eAAe,gBAAY;AAC3B,oBAAoB,KAAK;AACzB,iCAAiC,KAAK;AACtC,8CAA8C,gCAAgC;AAC9E;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA,oBAAoB,gBAAY;AAChC;;AC3DkD;AACF;AACzC,2BAA2B,8DAA8D;AAChG;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,oBAAoB,oDAAoD;AACxE,qBAAqB,KAAK;AAC1B;AACA,IAAI,WAAK;AACT;;;AChC+C;AACF;AAC7C,eAAe,aAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,aAAI;AAChB;AACA;;ACzImD;AACE;AACF;AACnD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,mBAAS;AAClB,kBAAkB,KAAK;AACvB,mBAAmB,KAAK;AACxB;AACA,qBAAqB,KAAK;AAC1B;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,eAAG;AAClB;AACA;AACO;AACP,cAAc,kBAAM;AACpB,WAAW,eAAG;AACd;;AC9BqD;AAC9C,+BAA+B,8DAA8D;AACpG;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;;ACVkD;AAC3C,sCAAsC,8DAA8D;AAC3G;AACA,0DAA0D,YAAY;AACtE,8BAA8B,KAAK;AACnC;AACA,UAAU,KAAK;AACf;;ACPiE;AAC1D;AACP,6BAA6B,qBAAqB;AAClD;;ACHO,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA;AACA,iCAAiC,SAAS,OAAO,+BAA+B;AAChF;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AChDgD;AACE;AACC;AACH;AAChD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,+BAA+B,SAAS;AACxC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,eAAG;AAClB;AACA;AACO;AACP,cAAc,kBAAM;AACpB,WAAW,eAAG;AACd;;ACjDkD;AAC3C,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,YAAY;AACtE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;;ACzCqD;AAC9C;AACP,uBAAuB,eAAe;AACtC;;ACHqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D;AACA;AACA,+DAA+D,wBAAwB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA,6CAA6C,wBAAwB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,mBAAK;AACd,mCAAmC,yEAAyE;AAC5G;AACA;AACA,SAAS,kBAAI;AACb,mCAAmC,+GAA+G;AAClJ;AACA,SAAS,oBAAM;AACf,mCAAmC,gHAAgH;AACnJ;AACA;AACA,aAAa,mBAAK;AAClB,YAAY,kBAAI;AAChB,cAAc,oBAAM;AACpB;AACA;AACO;AACP;AACA;AACA;AACA;;AC7EkD;AAC3C,4BAA4B,8DAA8D;AACjG;AACA,UAAU,KAAK;AACf;;ACJO;AACP;AACA;;ACFgD;AACzC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,sDAAsD,YAAY;AAClE;AACA,IAAI,WAAK;AACT;;ACfkD;AAC3C,sBAAsB,8DAA8D;AAC3F;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;;ACPkD;AAC3C,sBAAsB,8DAA8D;AAC3F;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC9BiD;AACJ;AACE;AACA;AACF;AACS;AACf;AACN;AACU;AACY;AACF;AACpB;AAC1B;AACP,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,cAAc,MAAM;AACpB,eAAe,OAAO;AACtB,aAAa,KAAK;AAClB,aAAa,KAAK;AAClB,YAAY,IAAI;AAChB,kBAAkB,UAAU;AAC5B,iBAAiB,SAAS;AAC1B,aAAa,KAAK;AAClB;;ACzB+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACHgD;AACE;AAClD;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;;ACrByC;AAClC;AACP,iBAAiB,SAAS;AAC1B;;ACH+C;AAC/C,kCAAkC,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,mCAAmC,8DAA8D;AACjG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;ACrFA;AACA,uCAAuC;AACvC;AACA,SAAS,cAAM;AACf,wDAAwD;AACxD;AACA;AACO,IAAI,eAAO;AAClB,cAAc,cAAM;AACpB;AACA;;ACV6C;AACE;AACF;AAC7C;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA,QAAQ,mBAAS;AACjB;AACA,QAAQ,KAAK;AACb,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,SAAS,KAAK;AACd,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK;AACf,0BAA0B,mDAAmD;AAC7E;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA;AACA,IAAI,WAAK;AACT;AACA,2BAA2B,8DAA8D;AACzF;AACA,QAAQ,mBAAS;AACjB,kBAAkB,KAAK;AACvB;AACA;AACA,SAAS,KAAK;AACd,gEAAgE,KAAK;AACrE;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,2CAA2C,mBAAS;AACnF;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,mDAAmD;AAC7E,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF;AACA,4BAA4B,mBAAS;AACrC;AACA,IAAI,KAAK;AACT,IAAI,WAAK;AACT;AACA,eAAe,kBAAG;AAClB,UAAU,KAAK;AACf;AACA,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb,UAAU,KAAK;AACf;AACA;AACO;AACP,cAAc,qBAAM;AACpB;AACA,WAAW,kBAAG;AACd,YAAY,mBAAI;AAChB;;AC9FqD;AACF;AACnD,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,SAAS,KAAK;AACd,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA,IAAI,WAAK;AACT;AACA,eAAe,sBAAS;AACxB;AACA;AACO;AACP,YAAY,iBAAI;AAChB,iBAAiB,sBAAS;AAC1B;;AC/DmD;AACE;AACF;AACnD,eAAe,mBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,mBAAS;AAClB,kBAAkB,KAAK;AACvB;AACA,qBAAqB,KAAK;AAC1B;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,6CAA6C,KAAK;AAClD;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,gBAAG;AAClB;AACA;AACO;AACP,cAAc,mBAAM;AACpB,WAAW,gBAAG;AACd;;;AC9C+C;AACF;AAC7C,eAAe,WAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAO;AACtB,QAAQ,KAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,WAAI;AAChB,eAAe,cAAO;AACtB;AACA;;ACtD6C;AACE;AACC;AACzC,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA,kEAAkE,SAAS;AAC3E;AACA,4DAA4D,yBAAyB;AACrF;AACA;AACA,MAAM;AACN;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,8BAA8B,KAAK,kCAAkC,mBAAS;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB,yDAAyD,SAAS,2DAA2D,SAAS;AACtI,yDAAyD,YAAY;AACrE,UAAU,KAAK;AACf;;ACjDkD;AAClD,wBAAwB,8DAA8D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK,0BAA0B,KAAK;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,uBAAuB,8DAA8D;AACrF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;ACtEyC;AAClC;AACP,iBAAiB,SAAS;AAC1B;;ACHmD;AACE;AACF;AAC5C,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA,IAAI,WAAK;AACT;;ACvD+C;AACF;AAC7C,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,YAAY;AACrE;AACA;AACA;AACA,qEAAqE,YAAY;AACjF;AACA;AACA,sBAAsB,YAAY;AAClC;AACA,SAAS;AACT,cAAc,KAAK;AACnB;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAK;AACpB;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA,UAAU,KAAK;AACf;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,eAAe,oBAAO;AACtB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,oBAAO;AACtB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB,aAAa,kBAAK;AAClB,eAAe,oBAAO;AACtB,eAAe,oBAAO;AACtB;;ACjHkD;AACF;AACA;AACG;AAC5C,4BAA4B,8DAA8D;AACjG;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB,mCAAmC,KAAK,sBAAsB,mBAAS;AACvE;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,mEAAmE,SAAS;AAC5E,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACnC4C;AACR;AACA;AACpC;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,4CAA4C,KAAK;AACjD;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,MAAM;AACjC;AACA;AACO;AACP,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,MAAM;AAChB;AACA;AACA;AACA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,MAAM;AAChB;AACA,SAAS,eAAM;AACf;AACA;AACA,eAAe,cAAK;AACpB,UAAU,MAAM,4CAA4C;AAC5D,UAAU,MAAM,mCAAmC;AACnD;AACO;AACP;AACA;AACA,cAAc,eAAM;AACpB,aAAa,cAAK;AAClB;;ACvJ+C;AACK;AACP;AACgB;AAC7D,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,8BAA8B,KAAK,+BAA+B;AAClE;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yFAAyF,8DAA8D,2DAA2D;AAClN;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,SAAS;AACnB,gBAAgB,KAAK;AACrB,iGAAiG,kBAAkB;AACnH;AACA,eAAe,sBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,gCAAgC,qEAAqE;AACrG;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACA,eAAe,sBAAM;AACrB;AACA;AACA;AACA,UAAU,SAAS;AACnB,yCAAyC,uDAAuD;AAChG;AACA;AACA,eAAe,qBAAK;AACpB;AACA,SAAS,KAAK;AACd;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACO;AACP,YAAY,oBAAI;AAChB,cAAc,sBAAM;AACpB,cAAc,sBAAM;AACpB,aAAa,qBAAK;AAClB;;ACvI+C;AACxC,iCAAiC,8DAA8D;AACtG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,UAAU,KAAK;AACf;;AC9E6C;AACE;AACxC,6BAA6B,8DAA8D;AAClG;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,8DAA8D,yBAAyB;AACvF;AACA,4BAA4B,KAAK;AACjC,4BAA4B,mBAAS;AACrC;AACA,UAAU,KAAK;AACf;;AC3BkD;AAC3C,mCAAmC,8DAA8D;AACxG;AACA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA,iKAAiK,uBAAuB;AACxL;AACA;AACA,2FAA2F,gDAAgD;AAC3I;AACA;AACA;AACA;AACA,0DAA0D,KAAK;AAC/D,+CAA+C,KAAK;AACpD;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;;ACrBqD;AACF;AAC5C,6BAA6B,8DAA8D;AAClG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,MAAM;AACN,oEAAoE,YAAY;AAChF;AACA,KAAK,WAAK;AACV;;ACpB6C;AACE;AAC/C,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yFAAyF,8DAA8D,wDAAwD;AAC/M;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,sFAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA,eAAe,qBAAO,EAAE,8DAA8D;AACtF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,kBAAI;AAChB;AACA,eAAe,qBAAO;AACtB;;AChMqD;AACF;AACnD,eAAe,sBAAM,EAAE,8DAA8D;AACrF;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACO;AACP,cAAc,sBAAM;AACpB,YAAY,oBAAI;AAChB;;ACnC6C;AACE;AAC/C,eAAe,cAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2GAA2G;AAC3G;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,0BAA0B,8DAA8D;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2GAA2G;AAC3G;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,4DAA4D,uBAAuB;AACnF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,cAAI;AAChB;AACA;AACA;AACA;;ACjNqD;AAC9C,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC5EqD;AACF;AACnD,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA;AACA,eAAe,gCAAiB,EAAE,8DAA8D;AAChG;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,gBAAgB,KAAK;AACrB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,qCAAqC,uBAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC,UAAU,KAAK;AACf;AACA,eAAe,sBAAO;AACtB,uBAAuB,KAAK;AAC5B;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,mBAAI;AAChB,cAAc,qBAAM;AACpB,yBAAyB,gCAAiB;AAC1C,cAAc,qBAAM;AACpB;AACA,eAAe,sBAAO;AACtB;;AC3M+C;AACF;AAC7C,wBAAwB,8DAA8D;AACtF;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA,IAAI,WAAK;AACT;AACA,0BAA0B,8DAA8D;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA,uBAAuB;AACvB,cAAc,KAAK;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;;AC7L+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACHgD;AACE;AAC3C,2BAA2B,8DAA8D;AAChG;AACA,UAAU,mBAAS;AACnB,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;;ACPgD;AACE;AACC;AACH;AAChD,eAAe,iBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,+BAA+B,SAAS;AACxC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,cAAG;AAClB;AACA;AACO;AACP,cAAc,iBAAM;AACpB,WAAW,cAAG;AACd;;ACjDgD;AACE;AACF;AAChD,eAAe,uBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,mBAAS;AAClB,kBAAkB,KAAK;AACvB;AACA,oBAAoB,KAAK;AACzB;AACA,wBAAwB,KAAK;AAC7B;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA,IAAI,WAAK;AACT;AACA,eAAe,oBAAG;AAClB;AACA;AACO;AACP,cAAc,uBAAM;AACpB,WAAW,oBAAG;AACd;;ACjCuD;AAChD;AACP,wBAAwB,gBAAgB;AACxC;;ACHqD;AACF;AACnD,SAAS,eAAI;AACb,YAAY;AACZ;AACA,eAAe,eAAI;AACnB;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,sBAAsB,EAAE,wBAAwB,mBAAS;AACvH;AACA;AACA;AACO;AACP,YAAY,eAAI;AAChB,YAAY,eAAI;AAChB;;ACtB+C;AAC/C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK,sBAAsB,KAAK;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,eAAe,kBAAO,EAAE,8DAA8D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4BAA4B;AAC1F;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB,eAAe,kBAAO;AACtB;;ACrJ+D;AACV;AACrD,eAAe,sBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA,kDAAkD,KAAK;AACvD,sDAAsD,YAAY;AAClE,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,gCAAgC,WAAW;AAC3C;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G;AAC5G;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,6BAAW,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,6BAAW,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,sBAAI;AAChB,mBAAmB,6BAAW;AAC9B,mBAAmB,6BAAW;AAC9B;;AC9LkD;AAC3C,qBAAqB,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,4CAA4C,YAAY;AACxD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;;ACtB+B;AACxB;AACP,YAAY,IAAI;AAChB;;ACH6C;AACE;AACF;AAC7C,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iBAAiB,KAAK,iFAAiF,KAAK;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,eAAe,qBAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,yBAAyB,KAAK;AAC9B;AACA,kBAAkB,KAAK;AACvB,UAAU;AACV,yBAAyB,KAAK;AAC9B;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,MAAM;AACN,+BAA+B,WAAK;AACpC;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,YAAY,WAAK;AACjB;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,kEAAkE,2BAA2B;AAC7F,gCAAgC,mBAAS;AACzC;AACA,QAAQ,WAAK;AACb;AACA;AACA,eAAe,qBAAO;AACtB;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,qBAAqB,KAAK;AAC1B,cAAc,KAAK;AACnB;AACA;AACO;AACP,YAAY,kBAAI;AAChB,eAAe,qBAAO;AACtB,eAAe,qBAAO;AACtB;;ACrHkD;AAC3C,2BAA2B,8DAA8D;AAChG;AACA;AACA,UAAU,KAAK;AACf;;ACL+C;AACF;AAC7C,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA,uBAAuB;AACvB,cAAc,KAAK;AACnB;AACA;AACO;AACP,YAAY,gBAAI;AAChB,cAAc,kBAAM;AACpB,YAAY,gBAAI;AAChB;;AC/JmD;AACE;AACF;AACnD,eAAe,8BAAS;AACxB,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,gDAAgD,KAAK;AACrD,oEAAoE,yBAAyB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC,2CAA2C,KAAK;AAChD;AACA,8DAA8D,sBAAsB;AACpF;AACA;AACA,+BAA+B,8DAA8D;AAC7F;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,uGAAuG;AACvG,iBAAiB;AACjB;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,0BAA0B,8DAA8D;AACxF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA,iBAAiB,8BAAS;AAC1B;AACA;;AC/L+C;AACxC,yBAAyB,8DAA8D;AAC9F,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD,sBAAsB,aAAa;AACnC,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE,yBAAyB,wBAAwB;AACjD;;AAEA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,oDAAoD,GAAG,WAAW,QAAQ,oBAAoB;AACvH,wBAAwB,oDAAoD,GAAG,WAAW,MAAM,oBAAoB;AACpH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD,iFAAiF;AACpI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC,kBAAkB;AACnD;AACA;AACA,oCAAoC,qCAAqC;AACzE;;AAEA;AACA,KAAK;AACL;;AC7HmD;AACE;AACC;AACH;AACnD,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA,SAAS,KAAK;AACd;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,mDAAmD;AAC7E,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,8CAA8C,SAAS,oCAAoC,YAAY;AACvG,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACO;AACP,cAAc,qBAAM;AACpB,YAAY,mBAAI;AAChB;;ACzCgD;AACD;AACF;AAC7C,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,oBAAO;AACtB;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACO;AACP,YAAY,iBAAI;AAChB,eAAe,oBAAO;AACtB;;AChDqD;AAC9C,mCAAmC,8DAA8D;AACxG;AACA;AACA,QAAQ,KAAK;AACb;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;;AC3BqD;AAC9C,+BAA+B,8DAA8D;AACpG,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,mEAAmE,YAAY;AAC/E;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;;ACzCkD;AAC3C,0BAA0B,8DAA8D;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACfkD;AAC3C,gCAAgC,8DAA8D;AACrG;AACA,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACvCwC;AACY;AAC7C;AACP,uBAAuB,eAAe;AACtC,iBAAiB,SAAS;AAC1B;;ACL+C;AACK;AACP;AACF;AAC3C,eAAe,uBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gDAAgD;AAClG;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,SAAS;AACnB,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA,UAAU,UAAU;AACpB;AACA,eAAe,wBAAK;AACpB;AACA,SAAS,KAAK;AACd;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,8DAA8D,4BAA4B;AAC1F;AACA;AACO;AACP,YAAY,uBAAI;AAChB,aAAa,wBAAK;AAClB;;AC9I+C;AACJ;AACpC,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA;AACA,kDAAkD,8CAA8C;AAChG;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA,UAAU,UAAU;AACpB;;AChF+C;AACxC,mCAAmC,8DAA8D;AACxG;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC/DqD;AACrD,yBAAyB,8DAA8D;AACvF,yBAAyB,KAAK;AAC9B,8BAA8B,KAAK;AACnC,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,UAAU,KAAK;AACf,gCAAgC,qBAAqB;AACrD;AACA,eAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qBAAqB;AAClD;AACO;AACP;AACA,iBAAiB,oCAAS;AAC1B;;ACvB6C;AACE;AACC;AACH;AACtC,mCAAmC,8DAA8D;AACxG;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,4BAA4B,mBAAS;AACpE;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,uBAAuB;AACvD;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C,kDAAkD,KAAK;AACvD;AACA,yDAAyD,cAAc;AACvE;AACA,SAAS,kBAAkB,QAAQ,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;;AC5EkD;AACF;AACzC,4BAA4B,8DAA8D;AACjG;AACA,wBAAwB,KAAK;AAC7B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACX6C;AACtC;AACP,mBAAmB,WAAW;AAC9B;;ACHO;AACP,uCAAuC;AACvC;;ACF+C;AACU;AACzD,eAAe,uBAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA,eAAe,uBAAI;AACnB;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,gBAAgB,KAAK;AACrB,UAAU,KAAK;AACf;AACA,eAAe,sBAAG;AAClB,IAAI,WAAW;AACf;AACO;AACP,YAAY,uBAAI;AAChB,YAAY,uBAAI;AAChB,WAAW,sBAAG;AACd;;AC3LqD;AAC9C;AACP,eAAe,KAAK;AACpB;AACA,uBAAuB,uBAAuB;AAC9C;;ACL+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACH+C;AACF;AACtC,iCAAiC,8DAA8D;AACtG;AACA;AACA,yDAAyD,YAAY;AACrE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf,2BAA2B,WAAK;AAChC;AACA;AACA,kEAAkE,YAAY;AAC9E;AACA,IAAI,WAAK;AACT;;AClB6C;AACE;AACF;AAC7C,qCAAqC,8DAA8D;AACnG;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,KAAK;AAClD,yDAAyD,YAAY;AACrE;AACA,8CAA8C,KAAK;AACnD,yBAAyB,KAAK;AAC9B;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,qCAAqC,8DAA8D;AACnG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,uDAAuD,YAAY;AACnE;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA;;AC9E+C;AACF;AACtC,8BAA8B,8DAA8D;AACnG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,uBAAuB,KAAK,iDAAiD,KAAK;AAClF,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN,QAAQ,WAAK;AACb;AACA,MAAM;AACN,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA,oCAAoC,wBAAwB;AAC5D,8BAA8B,uBAAuB;AACrD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B;AAC9D,0BAA0B,oIAAoI,GAAG,yCAAyC;AAC1M;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,iCAAiC;AAC3D;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,qIAAqI,GAAG,yCAAyC;AAC3M;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD,+EAA+E;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B;AAC9D;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;;AChHkD;AAC3C;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,QAAQ,KAAK;AACb;;ACrBqD;AAC9C,6BAA6B,8DAA8D;AAClG;AACA,kBAAkB,KAAK;AACvB;AACA,UAAU,KAAK;AACf;;ACN6C;AACE;AACF;AACtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,iCAAiC,KAAK;AACtC,2CAA2C,KAAK;AAChD,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACzB6C;AACE;AACxC,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA,0BAA0B,KAAK,sDAAsD,mBAAS;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,KAAK;AAC9E;AACA,YAAY,KAAK;AACjB,6DAA6D,YAAY;AACzE;AACA;AACA,sBAAsB,YAAY;AAClC;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EmD;AACE;AACF;AACC;AACpD,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE,gEAAgE;AAChE;AACA,uBAAuB,8DAA8D;AACrF;AACA,qBAAqB,KAAK;AAC1B;AACA,6BAA6B,sDAAsD;AACnF;AACA,kCAAkC,8DAA8D;AAChG,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,UAAU,KAAK;AACf;AACA,8BAA8B,8DAA8D;AAC5F,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA,MAAM;AACN,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,qCAAqC,KAAK;AAC1C,kEAAkE,yBAAyB;AAC3F,cAAc,KAAK;AACnB,gCAAgC,mBAAS;AACzC;AACA;AACA;AACA,oCAAoC,8DAA8D;AAClG;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,4DAA4D,yBAAyB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA,+BAA+B,8DAA8D;AAC7F,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA,MAAM;AACN,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,qCAAqC,KAAK;AAC1C,kEAAkE,yBAAyB;AAC3F,gCAAgC,mBAAS;AACzC,cAAc,KAAK;AACnB;AACA;AACA;AACA,eAAe,eAAK;AACpB;AACA;AACA;AACA;AACA,kEAAkE,YAAY;AAC9E;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA,8BAA8B,8DAA8D;AAC5F,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA,MAAM;AACN,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,qCAAqC,KAAK;AAC1C,kEAAkE,yBAAyB;AAC3F;AACA,gCAAgC,mBAAS;AACzC,cAAc,KAAK;AACnB;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yCAAyC;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA,mCAAmC,8DAA8D;AACjG,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA,MAAM;AACN,kCAAkC,KAAK;AACvC,kCAAkC,KAAK;AACvC;AACA,qCAAqC,8DAA8D;AACnG,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,qCAAqC,8DAA8D;AACnG,kBAAkB,KAAK;AACvB;AACA;AACA,8BAA8B,KAAK,8BAA8B,mBAAS;AAC1E;AACA,qCAAqC,8DAA8D;AACnG,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,qCAAqC,8DAA8D;AACnG,kBAAkB,KAAK;AACvB;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,yBAAyB;AAC3F,gCAAgC,mBAAS;AACzC,cAAc,KAAK;AACnB;AACA;AACA;AACA,qCAAqC,8DAA8D;AACnG,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,mEAAmE,YAAY;AAC/E;AACA,IAAI,WAAK;AACT;AACA,2BAA2B,8DAA8D;AACzF,iBAAiB,KAAK;AACtB;AACA;AACA,iCAAiC,8DAA8D;AAC/F,cAAc,KAAK;AACnB;AACA,MAAM;AACN,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA,qCAAqC,KAAK;AAC1C,kEAAkE,yBAAyB;AAC3F;AACA,gCAAgC,mBAAS;AACzC,cAAc,KAAK;AACnB;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,cAAc,KAAK;AACnB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA,aAAa,eAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AC9WmD;AACE;AACU;AAC/D,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,0BAA0B,WAAW;AACrC;AACA,iCAAiC,KAAK;AACtC;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B,QAAQ,KAAK,8BAA8B,KAAK;AAChD,8BAA8B,KAAK,+BAA+B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,YAAY,sBAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,6BAA6B,KAAK;AAClC;AACA,4CAA4C,KAAK;AACjD,6BAA6B,KAAK;AAClC;AACA,4CAA4C,KAAK;AACjD;AACA,yDAAyD,aAAa,cAAc;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,iBAAiB;AACjB;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,eAAe,oBAAO,EAAE,8DAA8D;AACtF;AACA;AACA;AACA,QAAQ,sBAAS;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAQ,EAAE,8DAA8D;AACvF;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK,kCAAkC,mBAAS;AAC9E;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,QAAQ,KAAK;AACb;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,QAAQ,sBAAS;AACjB,QAAQ,sBAAS;AACjB;AACA,4DAA4D;AAC5D,iDAAiD;AACjD;AACA;AACA,eAAe,mBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK,kCAAkC,mBAAS;AAC9E;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,oDAAoD,mBAAS;AAC7D;AACA;AACA;AACA;AACA,MAAM;AACN,8BAA8B,KAAK;AACnC;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,oBAAO;AACtB;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,kCAAkC,KAAK,6BAA6B,mBAAS,QAAQ,KAAK;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,eAAe;AAC3F,oBAAoB,0BAA0B;AAC9C;AACA;AACA;AACA,eAAe,qBAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA,IAAI,sBAAS;AACb;AACA;AACA;AACA,eAAe,sBAAS;AACxB,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,iBAAI;AAChB,eAAe,oBAAO;AACtB,gBAAgB,qBAAQ;AACxB,cAAc,mBAAM;AACpB,eAAe,oBAAO;AACtB,YAAY,iBAAI;AAChB,gBAAgB,qBAAQ;AACxB,iBAAiB,sBAAS;AAC1B;AACA;;ACne+D;AACV;AACrD,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,kCAAkC,WAAW;AAC7C,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,wBAAW,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,wBAAW,EAAE,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,iBAAI;AAChB,mBAAmB,wBAAW;AAC9B,mBAAmB,wBAAW;AAC9B,gBAAgB,qBAAQ;AACxB;;ACtJ6C;AACE;AACF;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,KAAK;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB,oCAAoC;AACrD,iBAAiB,sDAAsD;AACvE,iBAAiB;AACjB;AACA;AACA;AACA,6CAA6C,KAAK;AAClD,0BAA0B,KAAK,2BAA2B,mBAAS;AACnE,6CAA6C,KAAK;AAClD;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,qEAAqE,GAAG,gCAAgC;AACxG;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,KAAK;AACnF,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6CAA6C,KAAK;AAClD,0BAA0B,KAAK,2BAA2B,mBAAS;AACnE,6CAA6C,KAAK;AAClD;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA,uCAAuC,mDAAmD;AAC1F;AACA;AACA,0CAA0C,KAAK;AAC/C,8BAA8B,KAAK,0BAA0B,mBAAS;AACtE,0CAA0C,KAAK;AAC/C;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA,UAAU;AACV;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2FAA2F;AACxG,aAAa,yFAAyF;AACtG,aAAa;AACb;AACA;AACA;AACA,kCAAkC,2EAA2E;AAC7G,0BAA0B,KAAK,wBAAwB,mBAAS;AAChE;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;ACzM+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,KAAK;AAC7D,yDAAyD,YAAY;AACrE;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;;ACpC6C;AACE;AACF;AACtC,qCAAqC,sBAAsB;AAClE;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4BAA4B;AAC1F,4BAA4B,mBAAS;AACrC;AACA,IAAI,WAAK;AACT;;ACrDgD;AACE;AACF;AAChD,6BAA6B,8DAA8D;AAC3F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK,oEAAoE,mBAAS;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,KAAK;AAClD,iCAAiC,yCAAyC;AAC1E;AACA,+BAA+B,8DAA8D;AAC7F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,mBAAS;AAChC,SAAS;AACT;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA,6DAA6D,YAAY;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAyC;AAC1E,IAAI,WAAK;AACT;AACA,gCAAgC,8DAA8D;AAC9F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK,mEAAmE,mBAAS;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,KAAK;AAClD,iCAAiC,yCAAyC;AAC1E;AACA,6BAA6B,8DAA8D;AAC3F;AACA,+BAA+B,WAAK;AACpC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA,0DAA0D,yBAAyB;AACnF;AACA;AACA,4DAA4D,YAAY;AACxE;AACA,iCAAiC,yCAAyC;AAC1E,IAAI,WAAK;AACT;AACA,gCAAgC,8DAA8D;AAC9F;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,iCAAiC,yCAAyC;AAC1E,IAAI,WAAK;AACT;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B;AACA,QAAQ,WAAK;AACb;AACA;AACA,yBAAyB,KAAK,oCAAoC,mBAAS;AAC3E;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,0DAA0D,yBAAyB;AACnF;AACA;AACA;AACA;AACA;AACA,iCAAiC,kDAAkD;AACnF;AACA;AACA,4CAA4C,2DAA2D;AACvG;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AClaqD;AACF;AACnD;AACA,eAAe,yBAAI,EAAE,8DAA8D;AACnF,2BAA2B,WAAK;AAChC;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,yCAAyC,+BAA+B,GAAG,eAAe;AAC1F;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,yBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,KAAK;AACnE,MAAM;AACN,+BAA+B,WAAK;AACpC;AACA;AACA,YAAY,KAAK;AACjB,kBAAkB,KAAK,uCAAuC,KAAK,gCAAgC,KAAK;AACxG;AACA,QAAQ,WAAK;AACb;AACA;AACO;AACP,YAAY,yBAAI;AAChB,YAAY,yBAAI;AAChB;;AC1DqD;AAC9C,4BAA4B,8DAA8D;AACjG;AACA;AACA,qBAAqB,KAAK;AAC1B,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;;AC9B+C;AACF;AACtC;AACP;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,4CAA4C,YAAY;AACxD;AACA;AACA,kBAAkB,cAAc;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA,SAAS;AACT;AACA,kBAAkB,KAAK;AACvB,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,MAAM;AACN;AACA,sBAAsB,cAAc;AACpC;AACA,SAAS;AACT;AACA,IAAI,WAAK;AACT;;ACvE6C;AACE;AAC/C,eAAe,aAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,gBAAO;AACtB;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,cAAc,KAAK,2BAA2B,mBAAS;AACvD;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B;AACA;AACA,eAAe,aAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,aAAI;AAChB,eAAe,gBAAO;AACtB,YAAY,aAAI;AAChB;;ACzHmD;AACE;AAC9C,gCAAgC,8DAA8D;AACrG;AACA;;ACJkD;AAClD,wBAAwB,8DAA8D;AACtF,gEAAgE,KAAK;AACrE,IAAI,KAAK;AACT;AACA,eAAe,mBAAQ;AACvB;AACA;AACO;AACP;AACA,gBAAgB,mBAAQ;AACxB;;ACX2C;AACpC;AACP,kBAAkB,UAAU;AAC5B;;ACHqD;AAC9C,4BAA4B,8DAA8D;AACjG;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AClCqD;AACrD,eAAe,wBAAW;AAC1B;AACA;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK,kBAAkB,wBAAW;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK,kBAAkB,wBAAW;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,UAAU,KAAK;AACf;AACA,wBAAwB,8DAA8D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK,kBAAkB,wBAAW;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK,kBAAkB,wBAAW;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK,kBAAkB,wBAAW;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oFAAoF,kBAAkB,EAAE;AACxG;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAM;AACpB;AACA;;AC9SgD;AACE;AACF;AAChD,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,mCAAmC,WAAK;AACxC;AACA,iCAAiC,KAAK,sBAAsB,mBAAS;AACrE;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,iEAAiE,YAAY;AAC7E;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,8BAA8B,WAAK;AACnC;AACA,kCAAkC,KAAK,yDAAyD,mBAAS;AACzG;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,YAAY,KAAK;AACjB;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAI;AACnB,UAAU,KAAK;AACf;AACO;AACP,cAAc,qBAAM;AACpB,YAAY,mBAAI;AAChB,YAAY,mBAAI;AAChB;;AC/EgD;AACE;AAC3C;AACP;AACA;AACA;AACA,QAAQ,KAAK;AACb,mBAAmB,KAAK;AACxB;AACA,4BAA4B,mBAAS;AACrC;AACA;;ACXkD;AAC3C,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;;ACtDkD;AAClD,uBAAuB,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,IAAI,KAAK;AACT;AACA,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,sBAAsB,KAAK,uBAAuB,iDAAiD;AACnG,cAAc;AACd,qBAAqB,KAAK,gDAAgD,KAAK;AAC/E;AACA,UAAU;AACV,yBAAyB,KAAK;AAC9B;AACA,sBAAsB,KAAK,uBAAuB,iDAAiD;AACnG,cAAc;AACd,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACO;AACP;AACA,YAAY,iBAAI;AAChB;;AChFkD;AAC3C,0BAA0B,8DAA8D;AAC/F;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;;ACpBuD;AACF;AACN;AACN;AAClC;AACP,uBAAuB,eAAe;AACtC,oBAAoB,YAAY;AAChC,wBAAwB,gBAAgB;AACxC,iBAAiB,SAAS;AAC1B;;ACTO,gCAAgC,8DAA8D;AACrG;AACA;;ACF+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iHAAiH;AACjH;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC9DkD;AACF;AACzC,gCAAgC,8DAA8D;AACrG,yBAAyB,KAAK;AAC9B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,yCAAyC,6BAA6B,GAAG,eAAe;AACxF;AACA;AACA,IAAI,WAAK;AACT;;ACd+C;AACF;AACtC,2BAA2B,8DAA8D;AAChG;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,+BAA+B,WAAK;AACpC;AACA;AACA,6DAA6D,YAAY;AACzE;AACA,QAAQ,WAAK;AACb;AACA;;ACtBmD;AACE;AACF;AACnD,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2BAA2B,WAAK;AAChC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,gBAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACO;AACP,YAAY,gBAAI;AAChB,YAAY,gBAAI;AAChB;AACA;;AC3F+C;AACF;AAC7C,uBAAuB,8DAA8D;AACrF;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA,sBAAsB,KAAK;AAC3B,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA,oBAAoB,sCAAsC;AAC1D;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA,MAAM;AACN,8BAA8B,KAAK;AACnC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,QAAQ,KAAK;AACb,wDAAwD,YAAY;AACpE;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,iBAAS;AACxB;AACA;AACA,eAAe,gBAAQ,EAAE,8DAA8D;AACvF;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP;AACA,iBAAiB,iBAAS;AAC1B,gBAAgB,gBAAQ;AACxB;;AC1F+C;AACC;AAChD,8BAA8B,8DAA8D;AAC5F;AACA;AACA;AACA,6CAA6C,SAAS,oCAAoC,YAAY;AACtG,UAAU,KAAK;AACf;AACA,iCAAiC,8DAA8D;AAC/F,iBAAiB,KAAK;AACtB;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;;AC7B+C;AACxC,mCAAmC,8DAA8D;AACxG;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,UAAU,KAAK;AACf;;ACrF+C;AAC/C,eAAe,uBAAI,EAAE,8DAA8D;AACnF;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,uBAAuB,8DAA8D;AACrF;AACA;AACA;AACO;AACP,YAAY,uBAAI;AAChB;AACA;;AChD+C;AACF;AAC7C,eAAe,sBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,mBAAmB;AACnB,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,wBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,qBAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,sBAAI;AAChB,cAAc,wBAAM;AACpB,WAAW,qBAAG;AACd;;AC3C+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,UAAU,KAAK;AACf;;ACnF+C;AACF;AACtC,qCAAqC,8DAA8D;AAC1G;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,mDAAmD,YAAY;AAC/D;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B,IAAI,WAAK;AACT;;ACxB6C;AACE;AACF;AAC7C,eAAe,mBAAI,EAAE,8DAA8D;AACnF,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,sBAAsB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,wBAAS;AACxB,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,YAAY;AACzE;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,UAAU,KAAK;AACf;AACA,eAAe,sBAAO;AACtB,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,4BAA4B,mBAAS;AACrC,8DAA8D,gBAAgB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,mBAAI;AAChB,iBAAiB,wBAAS;AAC1B,eAAe,sBAAO;AACtB,cAAc,qBAAM;AACpB;;ACtG+C;AACxC,iCAAiC,8DAA8D;AACtG;AACA;AACA,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf;;ACVqD;AAC9C,6BAA6B,8DAA8D;AAClG,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;;AC1C+D;AACV;AACF;AACnD,eAAe,oBAAI,EAAE,8DAA8D;AACnF,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,8CAA8C,KAAK;AACnD,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD,wCAAwC,KAAK;AAC7C,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0GAA0G;AAC1G;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,8BAA8B,8DAA8D;AAC5F;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,oBAAI;AAChB;AACA;;AC5P+C;AACF;AACtC;AACP;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACfkD;AACF;AACzC;AACP,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,wBAAwB,KAAK;AAC7B,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;AACA;;ACZqD;AACF;AACnD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,mCAAmC,WAAK;AACxC;AACA,8BAA8B,KAAK;AACnC;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,gBAAgB,KAAK;AACrB;AACA,iEAAiE,YAAY;AAC7E;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,8BAA8B,WAAK;AACnC;AACA,+BAA+B,KAAK;AACpC;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC,cAAc;AACd;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,eAAe,gBAAI;AACnB;AACA;AACO;AACP,cAAc,kBAAM;AACpB,YAAY,gBAAI;AAChB;;AC1HqD;AACF;AACnD,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA,YAAY,KAAK;AACjB,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,MAAM;AACN,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF,qBAAqB,KAAK;AAC1B;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iGAAiG,GAAG,eAAe;AAC5J;AACA;AACA,IAAI,WAAK;AACT;AACA,sBAAsB,8DAA8D;AACpF,qBAAqB,KAAK;AAC1B;AACA,iBAAiB,KAAK;AACtB;AACA,2BAA2B,WAAK;AAChC;AACA,yCAAyC,yBAAyB,GAAG,eAAe;AACpF,IAAI,WAAK;AACT;AACO;AACP,YAAY,kBAAI;AAChB,cAAc,oBAAM;AACpB;AACA;;ACtDgD;AACE;AACU;AAC5D,eAAe,SAAI,EAAE,8DAA8D;AACnF;AACA,iBAAiB,KAAK;AACtB,gBAAgB,KAAK;AACrB,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,iBAAiB;AACjB;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA,2EAA2E;AAC3E;AACA,YAAY,KAAK,4FAA4F,qDAAqD;AAClK;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,4BAA4B,KAAK;AACjC,wBAAwB,KAAK;AAC7B,sBAAsB,KAAK;AAC3B,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,4DAA4D,KAAK;AACjE,+DAA+D,KAAK;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,KAAK;AACrB,sBAAsB,aAAa;AACnC,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA,8BAA8B,KAAK;AACnC;AACA,qCAAqC,KAAK;AAC1C;AACA,oDAAoD,KAAK;AACzD,gBAAgB,KAAK;AACrB;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,sBAAsB,KAAK;AAC3B;AACA;AACA,kCAAkC,KAAK,0BAA0B,mBAAS;AAC1E;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,KAAK;AAChC;AACA;AACA,eAAe,QAAG,EAAE,8DAA8D;AAClF;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACA,eAAe,WAAM,EAAE,8DAA8D;AACrF,iBAAiB,KAAK;AACtB;AACA,SAAS,KAAK;AACd,SAAS,mBAAS;AAClB,6EAA6E,qDAAqD;AAClI;AACA,eAAe,aAAQ;AACvB,iBAAiB,KAAK;AACtB;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,YAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,kCAAkC,KAAK,sBAAsB,mBAAS;AACtE;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,6EAA6E,sBAAsB;AACnG;AACA,eAAe,mBAAc;AAC7B;AACA,oBAAoB,KAAK;AACzB,gCAAgC,KAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kBAAkB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE,4BAA4B,kBAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,WAAW,QAAQ,oBAAoB;AAC3E,6BAA6B,kBAAkB;AAC/C;AACA;AACA,wCAAwC,cAAc;AACtD;AACA,uDAAuD,sDAAsD;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sDAAsD;AAC7G,0DAA0D,yEAAyE;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,cAAc;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,cAAc;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,kBAAkB;AAC5C;;AAEA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE,4BAA4B,kBAAkB;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE,4BAA4B,kBAAkB;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,kBAAkB;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sDAAsD;AAC7G,0DAA0D,yEAAyE;AACnI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,kBAAkB;AAC5C;;AAEA;AACA;AACA;AACA;AACA,wCAAwC,wBAAwB;AAChE,4BAA4B,kBAAkB;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA,wCAAwC,yBAAyB;AACjE,4BAA4B,kBAAkB;AAC9C;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,UAAU,QAAQ;AACtD,6BAA6B,kBAAkB;AAC/C;AACA;AACA,uDAAuD,sDAAsD;AAC7G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,sDAAsD;AAC7G,0DAA0D,yEAAyE;AACnI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,cAAc;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0DAA0D;AAClG;;AAEA;AACA;AACA;AACA;AACA,eAAe,iBAAY;AAC3B,oBAAoB,KAAK;AACzB;AACA,8CAA8C,gCAAgC;AAC9E;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,YAAY,SAAI;AAChB,WAAW,QAAG;AACd,sBAAsB,mBAAc;AACpC,oBAAoB,iBAAY;AAChC,cAAc,WAAM;AACpB,gBAAgB,aAAQ;AACxB,eAAe,YAAO;AACtB;AACA;;ACpnB6C;AACtC,kCAAkC,8DAA8D;AACvG;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,6DAA6D,YAAY;AACzE;AACA,IAAI,WAAK;AACT;;ACdmD;AACE;AACF;AAC5C,uBAAuB,8DAA8D;AAC5F;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,yBAAyB,KAAK;AAC9B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA,0DAA0D,yBAAyB;AACnF;AACA;AACA;AACA,IAAI,WAAK;AACT;;AC3CkD;AACF;AACzC,2CAA2C,sBAAsB;AACxE;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,+DAA+D,KAAK;AACnG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI,WAAK;AACT;;ACvBoD;AAC7C;AACP,kBAAkB,KAAK;AACvB;AACA,0DAA0D,uBAAuB;AACjF;;ACL+C;AACxC,+BAA+B,8DAA8D;AACpG,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACdmD;AACE;AACF;AACnD,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,MAAM;AACN,8BAA8B,KAAK,4BAA4B,mBAAS;AACxE;AACA;AACA;AACA;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF,qBAAqB,KAAK;AAC1B;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iGAAiG,GAAG,eAAe;AAC5J;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,kBAAI;AAChB,cAAc,oBAAM;AACpB;;ACxCqD;AACF;AAC5C,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACnDmD;AACE;AAC9C,gCAAgC,8DAA8D;AACrG;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE,IAAI,WAAK;AACT;;AC5CqD;AAC9C;AACP,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AChBqD;AACF;AACnD,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA;AACA,MAAM;AACN,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,eAAe,sBAAM,EAAE,8DAA8D;AACrF,qBAAqB,KAAK;AAC1B;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iGAAiG,GAAG,eAAe;AAC5J;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,oBAAI;AAChB,cAAc,sBAAM;AACpB;;ACvC+C;AAC/C,eAAe,oBAAI,EAAE,8DAA8D;AACnF,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD,0BAA0B,uBAAuB;AACjD,6CAA6C,yCAAyC;AACtF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD,0BAA0B,uBAAuB;AACjD,6CAA6C,yCAAyC;AACtF;AACA,gCAAgC,gCAAgC;AAChE,yBAAyB,yBAAyB;AAClD;AACA;AACA,sBAAsB,oCAAoC;AAC1D,uBAAuB,iBAAiB;;AAExC;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC,2DAA2D,4DAA4D;AACvH;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,+CAA+C;AAC/E,oDAAoD,kBAAkB;AACtE,sBAAsB,mBAAmB;AACzC,uBAAuB,UAAU,IAAI,kBAAkB;AACvD,0BAA0B,uBAAuB;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,kBAAkB;AACtE,sBAAsB,mBAAmB;AACzC,uBAAuB,UAAU,GAAG,kBAAkB;;AAEtD;AACA;AACA,eAAe,wBAAwB,GAAG,kBAAkB;AAC5D,qCAAqC,sBAAsB;AAC3D,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2CAA2C;AAC3E;AACA;;AAEA;AACA;AACA,oBAAoB,kBAAkB;AACtC,qCAAqC,sBAAsB;AAC3D,kCAAkC,sBAAsB;AACxD;AACA;AACA;AACA;AACA;AACA,gCAAgC,6CAA6C;AAC7E;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,kBAAkB;AACtC,qCAAqC,sBAAsB;AAC3D,kCAAkC,sBAAsB;AACxD;AACA;AACA;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE;;AAEA;AACA;AACA,sBAAsB,8DAA8D;AACpF,oBAAoB,KAAK,iDAAiD,KAAK;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sBAAsB;AACrD,2BAA2B,qCAAqC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sCAAsC;AAC3E,+BAA+B,sBAAsB;AACrD,2BAA2B,qCAAqC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAW,GAAG,kBAAkB;AAC3D;AACA;AACA,+BAA+B,sBAAsB;AACrD,2BAA2B,qCAAqC;AAChE;AACA;AACA;AACA;AACA;AACA,oCAAoC,aAAa;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,KAAK;AACL;AACA,eAAe,mBAAG;AAClB,oBAAoB,KAAK,0CAA0C,KAAK;AACxE;AACA,wCAAwC,sCAAsC;AAC9E;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP,YAAY,oBAAI;AAChB;AACA,WAAW,mBAAG;AACd;;AC7L+C;AACF;AAC7C,eAAe,uBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA;AACA;AACA,cAAc;AACd;AACA,cAAc;AACd;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4FAA4F;AACrI,UAAU;AACV;AACA;AACA,2EAA2E,yDAAyD;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,uDAAuD;AAC3F;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,oEAAoE,wDAAwD;AAC5H;AACA,oCAAoC,sCAAsC;AAC1E;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,eAAe,yBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,6DAA6D,YAAY;AACzE;AACA,IAAI,WAAK;AACT;AACA,eAAe,uBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,4EAA4E;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,uBAAI;AAChB,cAAc,yBAAM;AACpB,YAAY,uBAAI;AAChB;;AClQqD;AACF;AAC5C,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACvBgD;AACE;AACC;AAC5C;AACP,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,8DAA8D,uBAAuB;AACrF,4BAA4B,mBAAS;AACrC;AACA;AACO,wBAAwB,8DAA8D;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE,8EAA8E,gDAAgD;AAC9H;AACA;;ACpCkD;AACF;AACzC,+BAA+B,8DAA8D;AACpG;AACA;AACA,0BAA0B,KAAK,kDAAkD,KAAK;AACtF;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACjCoD;AACD;AAC5C;AACP,qBAAqB,aAAa;AAClC,eAAe,OAAO;AACtB,sBAAsB,cAAc;AACpC;;ACNqD;AACrD,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,MAAM;AACN;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,oBAAO,EAAE,8DAA8D;AACtF,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,iBAAI;AAChB,eAAe,oBAAO;AACtB;;AC/FkD;AACF;AACzC,qBAAqB,8DAA8D;AAC1F;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,sDAAsD,YAAY;AAClE;AACA,IAAI,WAAK;AACT;;ACdsD;AACvB;AACxB;AACP,kBAAkB,UAAU;AAC5B,YAAY,IAAI;AAChB;;ACL6C;AACE;AACF;AAC7C,eAAe,cAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA,eAAe,gBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACA,eAAe,cAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,cAAI;AAChB,YAAY,cAAI;AAChB,cAAc,gBAAM;AACpB;;ACvF6C;AACE;AACF;AAC7C,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA,kBAAkB,KAAK;AACvB;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,qBAAqB,KAAK;AAC1B;AACA;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D,MAAM;AACN;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,QAAQ,KAAK;AACb,wEAAwE,cAAc;AACtF;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAG;AAClB;AACA;AACO;AACP,cAAc,qBAAM;AACpB,WAAW,kBAAG;AACd;;ACpD+C;AAC/C,eAAe,2BAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK,6CAA6C,KAAK;AACnE;AACA;AACA,wBAAwB,8DAA8D;AACtF,UAAU,2BAAO;AACjB;AACA,wBAAwB,8DAA8D;AACtF,UAAU,2BAAO;AACjB;AACA,yBAAyB,8DAA8D;AACvF,UAAU,2BAAO;AACjB;AACA,yBAAyB,8DAA8D;AACvF,UAAU,2BAAO;AACjB;AACA,2BAA2B,8DAA8D;AACzF,UAAU,2BAAO;AACjB;AACA,yBAAyB,8DAA8D;AACvF,UAAU,2BAAO;AACjB;AACA,8BAA8B,8DAA8D;AAC5F,UAAU,2BAAO;AACjB;AACA,0BAA0B,8DAA8D;AACxF,UAAU,2BAAO;AACjB;AACA,0BAA0B,8DAA8D;AACxF,UAAU,2BAAO;AACjB;AACA,2BAA2B,8DAA8D;AACzF,UAAU,2BAAO;AACjB;AACA,yBAAyB,8DAA8D;AACvF,UAAU,2BAAO;AACjB;AACA,eAAe,yBAAK,EAAE,8DAA8D;AACpF,UAAU,2BAAO;AACjB;AACA,2BAA2B,8DAA8D;AACzF,UAAU,2BAAO;AACjB;AACA,wBAAwB,8DAA8D;AACtF,UAAU,2BAAO;AACjB;AACA,4BAA4B,8DAA8D;AAC1F,UAAU,2BAAO;AACjB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yBAAK;AAClB;AACA;AACA;AACA;;AC3F6C;AACE;AACF;AACtC,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC,oBAAoB,KAAK,6BAA6B,KAAK;AAC3D,gBAAgB,KAAK,6BAA6B,KAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD,8BAA8B,uBAAuB;AACrD,iDAAiD,yCAAyC;AAC1F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD,8BAA8B,uBAAuB;AACrD,iDAAiD,yCAAyC;AAC1F;AACA,oCAAoC,gCAAgC;AACpE,6BAA6B,yBAAyB;AACtD;AACA;AACA,0BAA0B,oCAAoC;AAC9D,2BAA2B,iBAAiB;AAC5C;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA,yDAAyD,kBAAkB;AAC3E,+DAA+D,2DAA2D;AAC1H;AACA;;AAEA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,8BAA8B,KAAK,kCAAkC,mBAAS;AAC9E;AACA,YAAY,WAAK;AACjB,sDAAsD,kDAAkD;AACxG;AACA;AACA;AACA,wBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iCAAiC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,qDAAqD,KAAK;AAC1D;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,qBAAqB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,+EAA+E;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA,kDAAkD,kDAAkD;AACpG;AACA;;AC/M6C;AACE;AAC/C,eAAe,mBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,eAAe,iBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,cAAc,mBAAM;AACpB,YAAY,iBAAI;AAChB;;AC9G+C;AACxC,4BAA4B,8DAA8D;AACjG;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;ACpEkD;AAC3C,eAAe,WAAK,EAAE,8DAA8D;AAC3F;AACA;AACA;AACA;AACA;AACA,6CAA6C,KAAK;AAClD,yDAAyD,YAAY;AACrE;AACA;;ACViC;AAC1B;AACP,aAAa,WAAK;AAClB;;ACH6C;AACE;AACF;AAC7C,eAAe,iBAAI;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,uBAAuB,KAAK;AAC5B;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,kBAAK;AACpB;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,8DAA8D,yBAAyB;AACvF;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACO;AACP,YAAY,iBAAI;AAChB,aAAa,kBAAK;AAClB;;AClEkD;AACF;AACzC,6BAA6B,8DAA8D;AAClG;AACA,iBAAiB,KAAK;AACtB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACXgD;AACE;AAC3C;AACP;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;;ACd+C;AACI;AAC5C;AACP,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC;;ACL+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACHkD;AAC3C,8BAA8B,8DAA8D;AACnG;AACA,2CAA2C,YAAY;AACvD;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B,+BAA+B,KAAK;AACpC,cAAc,KAAK;AACnB;AACA;;AC3DiD;AAC1C,IAAI,aAAM;AACjB,qBAAqB,aAAa;AAClC;;ACHgD;AACE;AACC;AAC5C;AACP;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,8DAA8D,uBAAuB;AACrF,4BAA4B,mBAAS;AACrC;AACA;AACO,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,8EAA8E,gDAAgD;AAC9H;AACA;;ACpCgD;AACE;AAC3C,eAAe,SAAI,EAAE,8DAA8D;AAC1F;AACA,iBAAiB,KAAK;AACtB;AACA,0BAA0B,KAAK;AAC/B;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;;ACdkD;AACnB;AACxB;AACP,cAAc,MAAM;AACpB,YAAY,SAAI;AAChB,qBAAqB,aAAa;AAClC;;ACN+C;AACxC,8BAA8B,8DAA8D;AACnG;AACA;AACA,qBAAqB,KAAK;AAC1B,2BAA2B,KAAK;AAChC;AACA,gBAAgB,KAAK;AACrB;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;ACvC6C;AACE;AAC/C,eAAe,sBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,yBAAO;AACtB;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,yBAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA,cAAc,KAAK;AACnB;AACA;AACO;AACP,YAAY,sBAAI;AAChB,eAAe,yBAAO;AACtB,eAAe,yBAAO;AACtB;;AClE6C;AACE;AACxC,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gJAAgJ,4BAA4B;AAC5K,SAAS;AACT;AACA,eAAe,mBAAS;AACxB,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;;ACnD+C;AACF;AAC7C,qBAAqB,8DAA8D;AACnF;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACA,eAAe,gBAAQ,EAAE,8DAA8D;AACvF;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACO;AACP;AACA,gBAAgB,gBAAQ;AACxB;;ACpG6C;AACE;AAC/C,eAAe,eAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,kBAAO;AACtB;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,2BAA2B;AACzF,4BAA4B,mBAAS;AACrC;AACA,kCAAkC,KAAK;AACvC;AACO;AACP,YAAY,eAAI;AAChB,eAAe,kBAAO;AACtB;;AC3EgD;AACE;AACF;AAChD,eAAe,qBAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,+EAA+E;AAC9H;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mEAAmE,GAAG,kBAAkB;AACvH,yCAAyC,gBAAgB;AACzD,qCAAqC,sBAAsB;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iCAAiC,GAAG,kBAAkB;AACrF,wCAAwC,kCAAkC;AAC1E,qCAAqC,sBAAsB;AAC3D;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,0CAA0C,GAAG,kBAAkB;AAC9F,wCAAwC,kBAAkB;AAC1D,kCAAkC,sBAAsB;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,sCAAsC,GAAG,kBAAkB;AAC1F,wCAAwC,kCAAkC;AAC1E,kCAAkC,sBAAsB;AACxD;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yCAAyC,GAAG,kBAAkB;AAC7F,wCAAwC,kBAAkB;AAC1D,kCAAkC,sBAAsB;AACxD;;AAEA;AACA;AACA;AACA,wBAAwB,gEAAgE;AACxF;AACA;AACA,+BAA+B,yCAAyC,GAAG,kBAAkB;AAC7F,wCAAwC,kCAAkC;AAC1E,kCAAkC,sBAAsB;AACxD;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oEAAoE,GAAG,kBAAkB;AACxH,wCAAwC,kBAAkB;AAC1D,qCAAqC,sBAAsB;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kEAAkE,GAAG,kBAAkB;AACtH,wCAAwC,kCAAkC;AAC1E,qCAAqC,sBAAsB;AAC3D;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA,SAAS,KAAK;AACd;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA;AACA,yBAAyB,KAAK;AAC9B,iEAAiE,KAAK;AACtE,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,oBAAoB,KAAK;AACzB;AACA,8BAA8B,KAAK,4BAA4B,mBAAS;AACxE;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gBAAgB,WAAK;AACrB;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA,IAAI,WAAK;AACT,wBAAwB,KAAK;AAC7B,SAAS,KAAK,eAAe,KAAK;AAClC;AACA;AACA,QAAQ,KAAK;AACb;AACA,UAAU,qBAAS;AACnB;AACA,eAAe,qBAAS;AACxB;AACA,UAAU,KAAK;AACf;AACO;AACP,cAAc,kBAAM;AACpB,iBAAiB,qBAAS;AAC1B,iBAAiB,qBAAS;AAC1B;;;ACjPqD;AAC9C,8BAA8B,8DAA8D;AACnG;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA,4HAA4H,uBAAuB;AACnJ;AACA;AACA,0DAA0D,gDAAgD;AAC1G;AACA;AACA;AACA;AACA,0DAA0D,KAAK;AAC/D,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,UAAU,KAAK;AACf;;;ACnD6C;AACE;AACF;AACtC,wCAAwC,gBAAgB;AAC/D;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B,SAAS,KAAK;AACd,QAAQ,KAAK;AACb,QAAQ,KAAK;AACb;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,yBAAyB,KAAK;AAC9B,cAAc,KAAK;AACnB;AACA;AACA,8BAA8B,KAAK,4BAA4B,mBAAS;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,gCAAgC,mBAAS;AACzC;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;;AChDkD;AAClD,wBAAwB,8DAA8D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,gBAAK;AACpB;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACO;AACP;AACA,aAAa,gBAAK;AAClB;;AC9BkD;AAC3C,gCAAgC,8DAA8D;AACrG;AACA;AACA,cAAc,KAAK;AACnB,KAAK;AACL;;ACNkD;AAC3C;AACP;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC1C2C;AACU;AACN;AACxC;AACP,uBAAuB,eAAe;AACtC,kBAAkB,UAAU;AAC5B,oBAAoB,YAAY;AAChC;;ACPqD;AAC9C,mCAAmC,8DAA8D;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;;AC3B6C;AACE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF;AACA;AACA,4BAA4B,mBAAS;AACrC,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA,8DAA8D,2BAA2B;AACzF;AACA;AACA,4BAA4B,mBAAS;AACrC,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;ACzF6C;AACE;AACK;AACpD,eAAe,qBAAK;AACpB;AACA,SAAS,KAAK;AACd;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,8DAA8D,4BAA4B;AAC1F;AACA;AACA,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN,2BAA2B,KAAK;AAChC;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,SAAS;AACnB,gBAAgB,KAAK;AACrB,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA,wHAAwH,kBAAkB;AAC1I;AACA,eAAe,yBAAS;AACxB,UAAU,SAAS;AACnB,yCAAyC,uDAAuD;AAChG;AACO;AACP,YAAY,oBAAI;AAChB,iBAAiB,yBAAS;AAC1B,aAAa,qBAAK;AAClB;;AC7F+C;AACF;AAC7C,iCAAiC,8DAA8D;AAC/F,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,mCAAmC,8DAA8D;AACjG;AACA;AACA;AACA,kFAAkF,kBAAkB;AACpG;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP;AACA;AACA;AACA;;AC9F+C;AAC/C,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA,YAAY,KAAK;AACjB,8BAA8B,KAAK;AACnC;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,8BAA8B,KAAK;AACnC;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,8DAA8D,0DAA0D;AACjN;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,eAAe,2BAAW,EAAE,8DAA8D;AAC1F,uFAAuF,+DAA+D;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,eAAe,0BAAU,EAAE,8DAA8D;AACzF;AACA;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,oBAAI;AAChB,mBAAmB,2BAAW;AAC9B,kBAAkB,0BAAU;AAC5B;;AC7LiD;AAC1C,yBAAyB,8DAA8D;AAC9F;AACA;AACA,SAAS,KAAK;AACd;AACA,+BAA+B,KAAK;AACpC;;ACPuC;AAChC;AACP,eAAe,QAAQ;AACvB;;ACHqD;AAC9C,2BAA2B,8DAA8D;AAChG,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC,mDAAmD,KAAK;AACxD;AACA;AACA,gCAAgC,KAAK;AACrC,mDAAmD,KAAK;AACxD;AACA;AACA,gCAAgC,KAAK;AACrC,mDAAmD,KAAK;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,uDAAuD;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AC5K6C;AACE;AACC;AACH;AAC7C,eAAe,mBAAM,EAAE,8DAA8D;AACrF;AACA,QAAQ,mBAAS;AACjB;AACA,QAAQ,KAAK;AACb,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,SAAS,KAAK;AACd,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA,UAAU,KAAK;AACf,0BAA0B,mDAAmD;AAC7E;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,uEAAuE,SAAS;AAChF,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,uBAAU,EAAE,8DAA8D;AACzF;AACA,QAAQ,mBAAS;AACjB,kBAAkB,KAAK;AACvB;AACA;AACA,SAAS,KAAK;AACd,gEAAgE,KAAK;AACrE;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,2CAA2C,mBAAS;AACnF;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,mDAAmD;AAC7E,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA,+DAA+D,yBAAyB;AACxF;AACA,4BAA4B,mBAAS;AACrC;AACA,IAAI,KAAK;AACT,IAAI,WAAK;AACT;AACA,eAAe,gBAAG;AAClB,UAAU,KAAK;AACf;AACO;AACP,cAAc,mBAAM;AACpB,kBAAkB,uBAAU;AAC5B,WAAW,gBAAG;AACd;;AC/E+D;AACV;AACrD,eAAe,kBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,2BAA2B,KAAK;AAChC;AACA,0CAA0C,KAAK;AAC/C,6BAA6B,KAAK;AAClC;AACA,4CAA4C,KAAK;AACjD,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,kGAAkG,KAAK;AACvG;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,6BAA6B,WAAW;AACxC,4BAA4B,KAAK;AACjC,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG;AACxG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;;AAEf;AACA,eAAe,sBAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAM,EAAE,8DAA8D;AACrF,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,kBAAI;AAChB,gBAAgB,sBAAQ;AACxB,cAAc,oBAAM;AACpB;;ACjK+C;AACxC;AACP,cAAc,MAAM;AACpB;;ACHkD;AAC3C,gCAAgC,8DAA8D;AACrG,wBAAwB,KAAK;AAC7B,2BAA2B,KAAK;AAChC;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,mCAAmC,KAAK;AACxC,mCAAmC,KAAK;AACxC;AACA;AACA,6BAA6B,KAAK;AAClC,gCAAgC,KAAK;AACrC;;ACdgD;AACE;AACC;AACH;AAChD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,+BAA+B,SAAS;AACxC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE,IAAI,WAAK;AACT;AACA,eAAe,eAAG;AAClB;AACA;AACO;AACP,cAAc,kBAAM;AACpB,WAAW,eAAG;AACd;;ACtF6C;AACE;AACF;AAC7C,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,iBAAiB;AACjB;AACA,6BAA6B,KAAK;AAClC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,yBAAyB,8DAA8D;AACvF;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,+BAA+B,8DAA8D;AAC7F;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,qBAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,KAAK;AACd,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,gBAAgB;AAC9E,4BAA4B,mBAAS;AACrC;AACA;AACO;AACP,YAAY,gBAAI;AAChB,iBAAiB,qBAAS;AAC1B;AACA;AACA;;ACpKgD;AACE;AACC;AACH;AAChD,eAAe,kBAAM,EAAE,8DAA8D;AACrF;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA,gCAAgC,yDAAyD;AACzF,QAAQ,KAAK;AACb;AACA,+BAA+B,SAAS;AACxC,2CAA2C,KAAK;AAChD,+EAA+E,YAAY;AAC3F;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,IAAI,WAAK;AACT;AACA,eAAe,eAAG;AAClB;AACA;AACO;AACP,cAAc,kBAAM;AACpB,WAAW,eAAG;AACd;;ACjD+C;AACF;AAC7C,4BAA4B,8DAA8D;AAC1F;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,eAAe,iBAAK;AACpB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAO;AACtB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAO;AACtB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,gBAAI;AAChB;AACA,aAAa,iBAAK;AAClB,eAAe,mBAAO;AACtB,eAAe,mBAAO;AACtB;;ACpQmD;AACE;AACF;AAC5C,0CAA0C,sBAAsB;AACvE;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,+BAA+B,KAAK,4CAA4C,KAAK,sEAAsE,KAAK;AAChK;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,8DAA8D,qBAAqB;AACnF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,KAAK;AACL;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;AChCgD;AACE;AACF;AACzC,+BAA+B,8DAA8D;AACpG;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,gBAAgB,KAAK;AACrB;AACA,aAAa,KAAK;AAClB;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK,sBAAsB,mBAAS;AAC9D;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,IAAI,WAAK;AACT;;AC1BkD;AAC3C,6BAA6B,8DAA8D;AAClG;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;;ACtD+C;AACxC;AACP,oBAAoB,YAAY;AAChC;;ACHyD;AACV;AACxC,iCAAiC,8DAA8D;AACtG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AC3GyD;AACV;AACxC,4BAA4B,8DAA8D;AACjG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,uDAAuD,KAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AC7HyD;AACV;AACxC,gCAAgC,8DAA8D;AACrG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,uDAAuD,KAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AC9FyD;AACV;AACxC,gCAAgC,8DAA8D;AACrG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D,+CAA+C,KAAK;AACpD;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AChGyD;AACV;AACxC,qCAAqC,8DAA8D;AAC1G,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,2BAA2B,KAAK;AAChC;AACA,0CAA0C,KAAK;AAC/C,gCAAgC,KAAK;AACrC;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AC1I+D;AACV;AACrD,eAAe,yBAAI,EAAE,8DAA8D;AACnF,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA,8CAA8C,KAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,6BAA6B,WAAW;AACxC,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,6BAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,8DAA8D;AACvF,yBAAyB,KAAK;AAC9B,8BAA8B,KAAK;AACnC,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,+BAA+B,uDAAuD;AACtF;AACA,wBAAwB,8DAA8D;AACtF;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA,+BAA+B,uDAAuD;AACtF;AACO;AACP,YAAY,yBAAI;AAChB,gBAAgB,6BAAQ;AACxB;AACA;AACA;;ACxNyD;AACV;AACxC,gCAAgC,8DAA8D;AACrG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AC3HyD;AACV;AACxC,0BAA0B,8DAA8D;AAC/F,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA,+BAA+B,KAAK;AACpC;AACA,8CAA8C,KAAK;AACnD;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C;AACA,oDAAoD,KAAK;AACzD,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA,mDAAmD,KAAK;AACxD;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AClHyD;AACV;AACxC,4BAA4B,8DAA8D;AACjG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,uDAAuD,KAAK;AAC5D,6CAA6C,KAAK;AAClD;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,qDAAqD,KAAK;AAC1D;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA,uDAAuD,KAAK;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;AChIiD;AACF;AACxC,mCAAmC,8DAA8D;AACxG;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA,KAAK;AACL,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,OAAO;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,uBAAuB,4FAA4F,uBAAuB,wBAAwB;AAClK;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;ACrGyD;AACV;AACxC,kCAAkC,8DAA8D;AACvG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA,iCAAiC,KAAK;AACtC;AACA,gDAAgD,KAAK;AACrD;AACA,mCAAmC,KAAK;AACxC;AACA,kDAAkD,KAAK;AACvD,wCAAwC,KAAK;AAC7C;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA,wDAAwD,KAAK;AAC7D;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;ACpGyD;AACV;AACxC,6BAA6B,8DAA8D;AAClG,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA,8DAA8D,KAAK;AACnE;AACA,yCAAyC,KAAK;AAC9C;AACA,wDAAwD,KAAK;AAC7D;AACA,8CAA8C,KAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C;AACA,yDAAyD,KAAK;AAC9D,+CAA+C,KAAK;AACpD;AACA,wCAAwC,KAAK;AAC7C;AACA,uDAAuD,KAAK;AAC5D;AACA;AACA,wFAAwF,KAAK;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,qDAAqD,KAAK;AAC1D;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,QAAQ,KAAK,8BAA8B,KAAK;AAChD,UAAU,WAAW;AACrB;;ACnImD;AACE;AACU;AACZ;AACnD,eAAe,yBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,6CAA6C,KAAK;AAClD,uCAAuC,KAAK;AAC5C;AACA,sDAAsD,KAAK;AAC3D,4CAA4C,KAAK;AACjD,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,0BAA0B,KAAK;AAC/B;AACA,yCAAyC,KAAK;AAC9C;AACA,eAAe,KAAK;AACpB;AACA,kIAAkI,YAAY;AAC9I,mIAAmI,YAAY;AAC/I;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,kDAAkD,KAAK,8BAA8B,KAAK;AACnH,6BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf,gCAAgC,wCAAwC;AACxE,2BAA2B,KAAK;AAChC;AACA,gCAAgC,KAAK;AACrC;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,yCAAyC,mBAAS;AAClD,iEAAiE,yBAAyB;AAC1F;AACA;AACA;AACA;AACA,mCAAmC,8DAA8D;AACjG,2BAA2B,WAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA,0BAA0B,KAAK,2CAA2C,mBAAS;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,IAAI,WAAK;AACT,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,oEAAoE;AACpE;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;AACO;AACP,UAAU,yBAAI;AACd;AACA;;AClM+C;AACU;AACzD,eAAe,WAAI,EAAE,8DAA8D;AACnF,UAAU,YAAK,kBAAkB,EAAE,KAAK;AACxC;AACA,eAAe,YAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC,4BAA4B,KAAK;AACjC,gBAAgB,KAAK,8BAA8B,KAAK;AACxD,kBAAkB,WAAW;AAC7B;AACA,KAAK;AACL;AACO;AACP,YAAY,WAAI;AAChB,aAAa,YAAK;AAClB;;ACxC+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA,IAAI,KAAK;AACT;;ACJ8C;AACD;AAC7C,eAAe,4BAAI,EAAE,8DAA8D;AACnF,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,8BAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,yCAAyC,2DAA2D,GAAG,eAAe;AACtH;AACA;AACA,IAAI,WAAK;AACT;AACO;AACP,YAAY,4BAAI;AAChB,cAAc,8BAAM;AACpB;;ACvF+C;AACF;AACtC,4BAA4B,8DAA8D;AACjG;AACA;AACA,mBAAmB,KAAK;AACxB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE,eAAe,KAAK;AACpB;;AC7C6C;AACE;AACC;AACH;AACtC,eAAe,iBAAQ,EAAE,8DAA8D;AAC9F,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,kCAAkC,KAAK,iDAAiD,mBAAS;AACjG;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,YAAY,WAAK;AACjB;AACA;AACA,+CAA+C,KAAK;AACpD,uEAAuE,SAAS;AAChF,kEAAkE,yBAAyB;AAC3F,gCAAgC,mBAAS;AACzC;AACA;AACA;AACA;AACA,uDAAuD,YAAY;AACnE;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,gDAAgD,YAAY;AAC5D;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,KAAK,gDAAgD,mBAAS;AAC3F;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA,SAAS;AACT;AACA,wBAAwB,KAAK,8BAA8B,KAAK;AAChE,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA,uBAAuB,qBAAqB;AAC5C;;AAEA;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA,uBAAuB,qBAAqB;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD,4CAA4C,iCAAiC;AAC7E,sCAAsC,wBAAwB;AAC9D,uCAAuC,uBAAuB;AAC9D;AACA,uCAAuC,mBAAmB;AAC1D;;AAEA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C,gCAAgC,iCAAiC;AACjE,yBAAyB,wBAAwB;AACjD,2BAA2B,uBAAuB;AAClD,+CAA+C,+EAA+E;AAC9H,2DAA2D,+EAA+E;AAC1I;AACA;AACA,6BAA6B,mBAAmB;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,4CAA4C;;AAE5E;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,gCAAgC;AAChE;AACA;;AAEA;AACA,2BAA2B,KAAK,kCAAkC,mBAAS;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF,QAAQ,WAAK;AACb;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA,6BAA6B,kBAAkB;AAC/C;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA,gCAAgC,iCAAiC;AACjE,yBAAyB,yBAAyB;AAClD,2DAA2D,gEAAgE;AAC3H,+CAA+C,gEAAgE;AAC/G;AACA,2BAA2B,uBAAuB;AAClD;AACA,6BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0CAA0C;AAC1E;AACA;AACA;AACA;AACA,sBAAsB,uBAAuB;AAC7C,0BAA0B,uBAAuB;AACjD,wBAAwB,uBAAuB;AAC/C;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C,gCAAgC,iCAAiC;AACjE,yBAAyB,yBAAyB;AAClD,0BAA0B,uBAAuB;AACjD;AACA,6BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD,4CAA4C,iCAAiC;AAC7E,qCAAqC,yBAAyB;AAC9D,sCAAsC,uBAAuB;AAC7D;AACA,uCAAuC,mBAAmB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,gCAAgC,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;;AAEA;AACA;AACA,QAAQ,WAAK;AACb;;ACzbqD;AACrD,eAAe,uBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,8DAA8D,+DAA+D;AACtN;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iDAAiD,KAAK;AACtD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,eAAe,8BAAW,EAAE,8DAA8D;AAC1F,0FAA0F,+DAA+D;AACzJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,eAAe,6BAAU,EAAE,8DAA8D;AACzF;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yBAAM;AACrB;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,uBAAI;AAChB,mBAAmB,8BAAW;AAC9B,kBAAkB,6BAAU;AAC5B,cAAc,yBAAM;AACpB;;AC5I+C;AACxC,0BAA0B,8DAA8D;AAC/F;AACA;AACA,SAAS,KAAK,gCAAgC,KAAK;AACnD;AACA;AACA;AACA,mBAAmB,KAAK;AACxB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,yCAAyC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;;AClD+C;AACF;AACtC,4BAA4B,8DAA8D;AACjG,2BAA2B,WAAK;AAChC;AACA,qBAAqB,KAAK;AAC1B,wBAAwB,KAAK,mDAAmD,KAAK;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,oEAAoE;AACpE;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;AACA;AACA;;AChE6C;AACE;AACxC,4BAA4B,8DAA8D;AACjG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,QAAQ,KAAK;AACb;AACA,IAAI,WAAK;AACT;;ACVmD;AACE;AACF;AAC5C,kCAAkC,8DAA8D;AACvG;AACA,kBAAkB,KAAK;AACvB;AACA,2BAA2B,WAAK;AAChC;AACA,sBAAsB,KAAK;AAC3B;AACA,QAAQ,WAAK;AACb;AACA;AACA,8DAA8D,KAAK;AACnE;AACA,QAAQ,WAAK;AACb;AACA;AACA,0BAA0B,KAAK,gDAAgD,mBAAS;AACxF;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,IAAI,WAAK;AACT;;AC/B6C;AACE;AACF;AAC7C,eAAe,sBAAM,EAAE,8DAA8D;AACrF;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,kDAAkD,KAAK;AACvD;AACA,yDAAyD,YAAY;AACrE;AACA,4BAA4B,KAAK;AACjC;AACA,QAAQ,WAAK;AACb;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,cAAc,KAAK;AACnB,aAAa,KAAK,qDAAqD,KAAK;AAC5E;AACA,UAAU,KAAK;AACf,oBAAoB,KAAK;AACzB,yBAAyB,KAAK;AAC9B,IAAI,WAAK;AACT;AACA,eAAe,oBAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,cAAc,sBAAM;AACpB,YAAY,oBAAI;AAChB;;ACrEkD;AACF;AAChD,eAAe,eAAI,EAAE,8DAA8D;AACnF,UAAU,KAAK;AACf,UAAU,KAAK;AACf,UAAU,KAAK;AACf;AACA,eAAe,oBAAS;AACxB;AACA;AACA;AACA,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;AACA,eAAe,gBAAK;AACpB;AACA,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,eAAI;AAChB,iBAAiB,oBAAS;AAC1B,aAAa,gBAAK;AAClB;;ACzB2C;AACpC;AACP,kBAAkB,UAAU;AAC5B;;ACH6C;AACtC,4BAA4B,8DAA8D;AACjG;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACfgD;AACE;AAC3C,uBAAuB,8DAA8D;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,4BAA4B;AAC7G,aAAa;AACb;AACA;AACA;AACA,0EAA0E,2DAA2D,wCAAwC,6BAA6B;AAC1M;AACA;AACA,mBAAmB,mBAAS;AAC5B,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iBAAiB,KAAK;AACtB,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;ACpHmD;AACC;AACD;AACnD;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,qBAAqB,KAAK;AAC1B;AACA;AACA,iCAAiC,KAAK;AACtC,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA,6BAA6B,8DAA8D;AAC3F;AACA;AACA,UAAU,KAAK;AACf;AACA,8BAA8B,8DAA8D;AAC5F;AACA;AACA,2BAA2B,8DAA8D;AACzF;AACA;AACA,6BAA6B,8DAA8D;AAC3F;AACA,qIAAqI,KAAK;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,kBAAkB,QAAQ,KAAK;AACxC;AACA;AACA;AACA,yCAAyC,4BAA4B,KAAK,gCAAgC;AAC1G;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,4BAA4B,mBAAS;AACrC,+DAA+D,yBAAyB;AACxF,yBAAyB,kDAAkD;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,2DAA2D,yBAAyB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,mCAAmC,8DAA8D;AACjG;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,oBAAoB,mCAAmC;AACvD,0BAA0B,KAAK;AAC/B;AACA,0BAA0B,2DAA2D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,uDAAuD,YAAY;AACnE;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yCAAyC,+FAA+F,GAAG,eAAe;AAC1J,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvMmC;AAC5B;AACP,cAAc,MAAM;AACpB;;ACHkD;AACF;AAChD,eAAe,kBAAK;AACpB;AACA,iBAAiB,KAAK;AACtB;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK,oCAAoC,KAAK,oDAAoD,KAAK;AACnH,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA,kBAAkB;AAClB,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA,YAAY,KAAK;AACjB,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA,kBAAkB,KAAK,iBAAiB,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB,iBAAiB,KAAK,+CAA+C,KAAK;AAC1E;AACA;AACA,MAAM;AACN,sBAAsB,KAAK;AAC3B,2BAA2B,KAAK;AAChC;AACA,wBAAwB,KAAK;AAC7B,yBAAyB,KAAK;AAC9B;AACA,sBAAsB,KAAK;AAC3B,sBAAsB,KAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,sBAAS;AACxB;AACA,QAAQ,KAAK;AACb,kBAAkB,KAAK;AACvB;AACA,2BAA2B,KAAK;AAChC;AACA;AACA,QAAQ,KAAK;AACb,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;;AAEO,IAAI,yBAAY;AACvB,aAAa,kBAAK;AAClB,iBAAiB,sBAAS;AAC1B;;AC/H+C;AACxC;AACP,oBAAoB,yBAAY;AAChC;;ACHkD;AAClD,eAAe,kBAAO,EAAE,8DAA8D;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA,4EAA4E,KAAK;AACjF,0EAA0E,KAAK;AAC/E;AACA;AACA,IAAI,KAAK;AACT;AACA,eAAe,gBAAK,EAAE,8DAA8D;AACpF;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACO;AACP,eAAe,kBAAO;AACtB,aAAa,gBAAK;AAClB;;AC/FmD;AACE;AACF;AACnD,eAAe,2BAAS;AACxB;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA,wBAAwB,KAAK;AAC7B,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA,mDAAmD,KAAK;AACxD;AACA,sEAAsE,sBAAsB;AAC5F,oCAAoC,mBAAS;AAC7C,mCAAmC,WAAK;AACxC;AACA;AACA;AACA,YAAY,WAAK;AACjB;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACO;AACP,iBAAiB,2BAAS;AAC1B;;AC7CkD;AACG;AACF;AACnD,eAAe,qBAAM;AACrB,yDAAyD,mBAAS;AAClE;AACA;AACA;AACA,wBAAwB,KAAK,8DAA8D,KAAK,gEAAgE,KAAK;AACrK;AACA,2BAA2B,WAAK;AAChC;AACA,4BAA4B,KAAK;AACjC,kBAAkB,KAAK;AACvB;AACA;AACA,IAAI,WAAK;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK,oDAAoD,KAAK,gEAAgE,KAAK;AAC/J;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,0BAA0B,KAAK;AAC/B;AACA;AACA;AACO;AACP,cAAc,qBAAM;AACpB;AACA;AACA;;AC/DkD;AAC3C;AACP;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;;ACbgD;AACE;AAC3C,4BAA4B,8DAA8D;AACjG;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA,8DAA8D,yBAAyB;AACvF,4BAA4B,mBAAS;AACrC;AACA;;AChBiD;AACJ;AACtC;AACP,qBAAqB,aAAa;AAClC,mBAAmB,WAAW;AAC9B;;ACLkD;AAC3C,6BAA6B,8DAA8D;AAClG;AACA,0BAA0B,KAAK;AAC/B;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,YAAY,KAAK;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;;AC5C6C;AACE;AACF;AAC7C,kCAAkC,8DAA8D;AAChG,4BAA4B,KAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,6BAA6B,mBAAS;AACtC;AACA;AACA,oCAAoC,8DAA8D;AAClG;AACA,2BAA2B,WAAK;AAChC;AACA,iBAAiB,KAAK;AACtB;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,UAAU,KAAK;AACf,IAAI,WAAK;AACT;AACO;AACP;AACA;AACA;;AClFmD;AAC5C,8BAA8B,8DAA8D;AACnG;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA,yCAAyC,4BAA4B,GAAG,eAAe;AACvF;AACA;AACA,IAAI,WAAK;AACT;;ACf+C;AACxC,oCAAoC,8DAA8D;AACzG,UAAU,KAAK;AACf;;ACH+C;AACxC,2BAA2B,8DAA8D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA,oBAAoB,KAAK;AACzB,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU;AACrC;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D,kCAAkC,uBAAuB;AACzD,sDAAsD,2EAA2E;AACjI,sDAAsD,2EAA2E;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C,+DAA+D,2DAA2D;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAAuB;AACzD,kCAAkC,uBAAuB;AACzD,8BAA8B,wBAAwB;AACtD,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA,yBAAyB,kBAAkB;AAC3C,+DAA+D,2DAA2D;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB,SAAS,yBAAyB;AAC1E,iCAAiC,qBAAqB;AACtD,+DAA+D,0DAA0D;AACzH,+DAA+D,wEAAwE;AACvI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClM+C;AACF;AACtC,iCAAiC,8DAA8D;AACtG;AACA;AACA;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,IAAI,WAAK;AACT;;ACjB6C;AACC;AAC9C,eAAe,gBAAI,EAAE,8DAA8D;AACnF;AACA,iBAAiB,KAAK;AACtB;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,+GAA+G;AAC/G;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA,eAAe,mBAAO,EAAE,8DAA8D;AACtF;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B,4BAA4B,KAAK;AACjC,uBAAuB,KAAK;AAC5B;AACA,UAAU,KAAK;AACf;AACA,eAAe,iBAAK;AACpB;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4BAA4B;AAC1F;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,SAAS,KAAK;AACd;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA,0BAA0B,KAAK,+DAA+D,mBAAS;AACvG;AACA,UAAU,KAAK;AACf;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,8BAA8B,KAAK,+DAA+D,mBAAS;AAC3G;AACA,cAAc,KAAK;AACnB,2BAA2B,KAAK;AAChC;AACA,cAAc,KAAK;AACnB;AACA;AACO;AACP,YAAY,gBAAI;AAChB,aAAa,iBAAK;AAClB;AACA;AACA,eAAe,mBAAO;AACtB;;ACrLgD;AACE;AAClD,eAAe,cAAI,EAAE,8DAA8D;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,mCAAmC,mBAAS;AAC5C,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA,mDAAmD,KAAK;AACxD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,6BAA6B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,6DAA6D;AAC7D;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA,KAAK;AACL;AACA,eAAe,cAAI;AACnB;AACA;AACA,uBAAuB,8DAA8D;AACrF,iBAAiB,KAAK;AACtB;AACA,UAAU,KAAK;AACf;AACO;AACP,YAAY,cAAI;AAChB,YAAY,cAAI;AAChB;AACA;;ACpPmD;AACE;AACU;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAI,EAAE,8DAA8D;AACnF,iBAAiB,KAAK;AACtB;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA,kBAAkB,cAAc;AAChC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,UAAU;AACV,8BAA8B,KAAK;AACnC;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA,gCAAgC,KAAK;AACrC;AACA,mDAAmD,KAAK;AACxD;AACA,kEAAkE,yBAAyB;AAC3F;AACA;AACA,6DAA6D,YAAY;AACzE;AACA;AACA,0BAA0B,cAAc;AACxC;AACA,aAAa;AACb,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,iCAAiC,KAAK;AACtC;AACA;AACA;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2HAA2H,cAAc;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,+FAA+F,sCAAsC;AACrI;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA,kBAAkB;AAClB,gDAAgD,KAAK,4BAA4B,mBAAS;AAC1F;AACA;AACA;AACA,wCAAwC,mBAAS;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,WAAW;AACf;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,sBAAsB,KAAK;AAC3B,UAAU,KAAK;AACf;AACA,iCAAiC,8DAA8D;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA,2CAA2C,KAAK;AAChD,iCAAiC,KAAK;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B,qBAAqB,KAAK;AAC1B;AACA,oBAAoB,KAAK;AACzB,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wFAAwF,oBAAoB,mFAAmF,kCAAkC,mDAAmD,sBAAsB;AAC1S;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,SAAS,mBAAS;AAClB;AACA;AACA;AACA,4BAA4B,mBAAS;AACrC;AACA;AACA;AACO;AACP,YAAY,cAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AClakD;AACF;AACzC;AACP;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,mBAAmB,KAAK;AACxB;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;ACjB+C;AACxC,+BAA+B,8DAA8D;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,YAAY;AAC3E;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,KAAK;AACf;;AClI6C;AACC;AACD;AAC7C;AACA,eAAe,mBAAI;AACnB,eAAe,KAAK;AACpB;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA,6BAA6B,KAAK;AAClC;AACA,eAAe,KAAK;AACpB,2BAA2B,WAAK;AAChC;AACA,2BAA2B,KAAK;AAChC;AACA,IAAI,WAAK;AACT;AACA,eAAe,qBAAM,EAAE,8DAA8D;AACrF,wBAAwB,KAAK;AAC7B;AACA;AACA,6BAA6B,KAAK;AAClC;AACA,eAAe,KAAK;AACpB,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA,kCAAkC,KAAK,iCAAiC,mBAAS;AACjF;AACA;AACA,8DAA8D,KAAK;AACnE;AACA,2CAA2C,uBAAuB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,4GAA4G,uBAAuB;AACnI;AACA,gGAAgG,uBAAuB;AACvH;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;AACA,eAAe,mBAAI,EAAE,8DAA8D;AACnF;AACA,kBAAkB,KAAK;AACvB,UAAU,KAAK;AACf;AACA;AACO;AACP,YAAY,mBAAI;AAChB,cAAc,qBAAM;AACpB,cAAc,qBAAM;AACpB,YAAY,mBAAI;AAChB;;AC1EqD;AACF;AAC5C,gCAAgC,8DAA8D;AACrG,2BAA2B,WAAK;AAChC;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA,yDAAyD,YAAY;AACrE;AACA,IAAI,WAAK;AACT;;ACXqD;AAC9C,gCAAgC,8DAA8D;AACrG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,KAAK;AACT;;AC3BgD;AACE;AACF;AACzC,6CAA6C,gBAAgB;AACpE;AACA;AACA,iBAAiB,KAAK;AACtB;AACA,+BAA+B,KAAK,6CAA6C,KAAK,uEAAuE,KAAK;AAClK;AACA;AACA,2BAA2B,WAAK;AAChC;AACA;AACA;AACA;AACA;AACA,8DAA8D,sBAAsB;AACpF,4BAA4B,mBAAS;AACrC;AACA;AACA,QAAQ,WAAK;AACb;AACA;AACA;AACA;AACA,IAAI,WAAK;AACT;;;AC3BqD;AAC9C;AACP,uBAAuB,eAAe;AACtC;;ACH6C;AACE;AAC/C;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA,cAAc,KAAK;AACnB,cAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK;AACnB;AACA;AACA;AACA,4DAA4D,2BAA2B;AACvF,4BAA4B,mBAAS;AACrC;AACA;AACA,UAAU,KAAK;AACf;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACO;AACP;AACA;AACA;;AC1FgF;AACS;AAClC;AACH;AAC0D;AACnD;AACgD;AAClD;AAC6B;AACI;AACR;AACjB;AAC2C;AAChB;AACd;AACiB;AACX;AAC3B;AAC2B;AACvB;AACI;AAC+B;AACtB;AAC0B;AACf;AACF;AACtB;AAC8B;AACT;AACvB;AACV;AACQ;AACyB;AAC1B;AACkC;AACR;AACH;AACoB;AACA;AAClD;AACF;AACS;AACM;AACgC;AACjC;AACO;AACG;AACwC;AACJ;AACnB;AACpB;AACA;AACP;AACE;AACmB;AACxB;AACmB;AACe;AAC3B;AACyC;AAC/C;AACM;AACR;AACI;AACoC;AACvB;AACtB;AAC8C;AACtB;AACrB;AACQ;AAC6C;AACS;AACpD;AACI;AACA;AACZ;AACwB;AACH;AACc;AACF;AACP;AACsB;AACf;AACxC;AACoC;AAC1B;AACA;AACgB;AACf;AAC6B;AACrC;AACR;AACU;AACmB;AACP;AAC8B;AAChC;AACJ;AACoB;AACP;AACC;AACc;AACY;AACzC;AACG;AACH;AAC8B;AACR;AACU;AACf;AAClB;AACD;AACwC;AAC9B;AACgB;AACnB;AACY;AACA;AACA;AACd;AAC2B;AAC1B;AAC4B;AACzB;AACH;AAC6B;AACF;AACC;AAC7B;AACoC;AACG;AAClC;AACI;AACR;AACP;AACmC;AACzC;AACoB;AACW;AACR;AACe;AAC5B;AACQ;AACd;AAC+B;AAC7B;AACiB;AACnB;AACmB;AACpB;AACG;AACd;AAC0B;AAChB;AAC4B;AACO;AACgB;AAC3C;AACe;AACa;AACA;AACrB;AACN;AACiC;AACX;AAChC;AACY;AACwB;AACL;AAClC;AACkB;AACL;AAC8B;AAChC;AACW;AACJ;AACE;AACR;AAC0B;AACD;AACvB;AACiC;AACzC;AAC0B;AACQ;AAC9C;AACsB;AACM;AACG;AACA;AACa;AAC9B;AACwC;AACpB;AACd;AACW;AACf;AACqD;AAC3D;AACmC;AAC3B;AACqC;AACN;AACM;AACzB;AACJ;AACI;AAC2C;AAC5C;AACP;AACuB;AAChB;AACa;AACX;AACL;AACJ;AACF;AACQ;AACiB;AAC1B;AACD;AACsB;AACI;AACE;AAC3B;AACG;AACH;AACS;AACgC;AACrB;AACvB;AACN;AAC4C;AACvB;AACgB;AACO;AAClB;AACC;AACZ;AACJ;AACoB;AAC5B;AACmC;AACzC;AACc;AACQ;AACA;AACF;AACN;AACY;AACZ;AACI;AACkB;AACO;AACN;AACA;AACH;AACM;AAC5B;AACS;AACI;AACU;AACA;AACnB;AACwB;AACE;AACE;AACF;AACE;AAC3B;AACK;AACgC;AACZ;AACD;AACd;AACtB;AACS;AACY;AACf;AACA;AACF;AACqB;AACnB;AACsB;AACH;AACf;AACwB;AAC1B;AACQ;AACF;AACnB;AACO;AACe;AACkB;AAClC;AACqB;AACuB;AACzC;AACQ;AACN;AACM;AACF;AACmB;AACxB;AACgC;AAClB;AACK;AACH;AACjB;AACiB;AAClB;AAC2C;AACxB;AACN;AACF;AACV;AACQ;AACA;AACU;AAC0B;AACpC;AACZ;AACI;AACc;AACF;AACV;AAC8C;AACzD;AACe;AACkB;AACzB;AACL;AAC8C;AAC5C;AACI;AACA;AACwC;AAChC;AACsB;AAC9B;AACA;AACwB;AACN;AACf;AACS;AAC6B;AACN;AACX;AACR;AACZ;AAC0B;AACf;AACjB;AACW;AACT;AACS;AACc;AACf;AACF;AACD;AAC+B;AACJ;AAC1B;AACN;AACpD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAK;AAC5B,kBAAkB,YAAK;AACvB;AACA,KAAK;AACL;AACA;AACA,sBAAsB,cAAc;AACpC,iBAAiB,SAAS;AAC1B,aAAa,KAAK;AAClB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,uBAAuB,eAAe;AACtC,cAAc,MAAM;AACpB,iBAAiB,SAAS;AAC1B,yBAAyB,iBAAiB;AAC1C,uBAAuB,eAAe;AACtC,oBAAoB,YAAY;AAChC,iBAAiB,SAAS;AAC1B,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,YAAY,IAAI;AAChB,eAAe,OAAO;AACtB,yBAAyB,iBAAiB;AAC1C,cAAc,MAAM;AACpB,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,iBAAiB,SAAS;AAC1B,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,iBAAiB,SAAS;AAC1B,2BAA2B,mBAAmB;AAC9C,sBAAsB,cAAc;AACpC,eAAe,OAAO;AACtB,aAAa,KAAK;AAClB,wBAAwB,gBAAgB;AACxC,aAAa,KAAK;AAClB,cAAc,MAAM;AACpB,iBAAiB,SAAS;AAC1B,kBAAkB,UAAU;AAC5B,yBAAyB,iBAAiB;AAC1C,cAAc,MAAM;AACpB,iBAAiB,SAAS;AAC1B,iBAAiB,SAAS;AAC1B,mBAAmB,WAAW;AAC9B,uBAAuB,eAAe;AACtC,kBAAkB,UAAU;AAC5B,cAAc,aAAM;AACpB,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,mBAAmB,WAAW;AAC9B,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,cAAc,MAAM;AACpB,iBAAiB,SAAS;AAC1B,gBAAgB,QAAQ;AACxB,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,aAAa,KAAK;AAClB,oBAAoB,YAAY;AAChC,cAAc,MAAM;AACpB;AACA,IAAI,YAAK;AACT,kBAAkB,UAAU;AAC5B,yBAAyB,SAAS;AAClC,gBAAgB,aAAa;AAC7B,kBAAkB,UAAU;AAC5B;AACA,kBAAkB,SAAS;AAC3B,mBAAmB,SAAS;AAC5B;AACA,oBAAoB,YAAY;AAChC,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,sBAAsB,cAAc;AACpC,4BAA4B,SAAS;AACrC,YAAY,IAAI;AAChB;AACO,IAAI,aAAM;AACjB,wBAAwB,gBAAgB;AACxC,0BAA0B,kBAAkB;AAC5C,sBAAsB,cAAc;AACpC,qBAAqB,eAAO;AAC5B,uBAAuB,eAAO;AAC9B,0BAA0B,kBAAkB;AAC5C,uBAAuB,SAAS;AAChC;AACO,IAAI,YAAK;AAChB,mBAAmB,WAAW;AAC9B,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,IAAI;AACtB;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA,kBAAkB,YAAY;AAC9B;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACO;AACP,0BAA0B,kBAAkB;AAC5C,iBAAiB,SAAS;AAC1B,eAAe,OAAO;AACtB,2BAA2B,mBAAmB;AAC9C,mBAAmB,WAAW;AAC9B,4BAA4B,oBAAoB;AAChD,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,sBAAsB,cAAc;AACpC,8BAA8B,sBAAsB;AACpD,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,wBAAwB,gBAAgB;AACxC,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC,yBAAyB,iBAAiB;AAC1C,mBAAmB,WAAW;AAC9B,yBAAyB,iBAAiB;AAC1C,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,WAAW,GAAG;AACd,kBAAkB,UAAU;AAC5B,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,qBAAqB,aAAa;AAClC,iBAAiB,SAAS;AAC1B,sBAAsB,cAAc;AACpC,0BAA0B,kBAAkB;AAC5C,+BAA+B,uBAAuB;AACtD,cAAc,MAAM;AACpB,aAAa,KAAK;AAClB,kBAAkB,UAAU;AAC5B,uBAAuB,eAAe;AACtC,oBAAoB,YAAY;AAChC,yBAAyB,iBAAiB;AAC1C,0BAA0B,kBAAkB;AAC5C,yBAAyB,iBAAiB;AAC1C,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,sBAAsB,cAAc;AACpC,6BAA6B,qBAAqB;AAClD,mBAAmB,WAAW;AAC9B,kBAAkB,UAAU;AAC5B,oBAAoB,YAAY;AAChC,yBAAyB,iBAAiB;AAC1C,cAAc,aAAM;AACpB,mBAAmB,WAAW;AAC9B,iBAAiB,SAAS;AAC1B,qBAAqB,aAAa;AAClC,gCAAgC,wBAAwB;AACxD,+BAA+B,uBAAuB;AACtD,mCAAmC,2BAA2B;AAC9D,kCAAkC,0BAA0B;AAC5D,sBAAsB,cAAc;AACpC,wBAAwB,gBAAgB;AACxC,wBAAwB,gBAAgB;AACxC,kBAAkB,UAAU;AAC5B,8BAA8B,sBAAsB;AACpD,6BAA6B,qBAAqB;AAClD,qBAAqB,aAAa;AAClC,wBAAwB,gBAAgB;AACxC,mBAAmB,WAAW;AAC9B,eAAe,OAAO;AACtB,qBAAqB,aAAa;AAClC,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,wBAAwB,gBAAgB;AACxC,gBAAgB,QAAQ;AACxB,YAAY,IAAI;AAChB,iBAAiB,SAAS;AAC1B,uBAAuB,eAAe;AACtC,wBAAwB,gBAAgB;AACxC,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,iBAAiB,SAAS;AAC1B,sBAAsB,cAAc;AACpC,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,qBAAqB,aAAa;AAClC,qBAAqB,aAAa;AAClC,sBAAsB,cAAc;AACpC,wBAAwB,gBAAgB;AACxC,uBAAuB,eAAe;AACtC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,0BAA0B,kBAAkB;AAC5C,wBAAwB,gBAAgB;AACxC,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,oBAAoB,YAAY;AAChC,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,wBAAwB,gBAAgB;AACxC,iBAAiB,SAAS;AAC1B,kBAAkB,UAAU;AAC5B,iBAAiB,SAAS;AAC1B,kBAAkB,UAAU;AAC5B,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,WAAW,GAAG;AACd,kBAAkB,UAAU;AAC5B,gBAAgB,QAAQ;AACxB,mBAAmB,WAAW;AAC9B,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,mBAAmB,WAAW;AAC9B,qBAAqB,aAAa;AAClC,gCAAgC,wBAAwB;AACxD,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,cAAc,MAAM;AACpB,uBAAuB,eAAe;AACtC,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,mBAAmB,WAAW;AAC9B,uBAAuB,eAAe;AACtC,wBAAwB,gBAAgB;AACxC,oBAAoB,YAAY;AAChC,0BAA0B,kBAAkB;AAC5C,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,uBAAuB,eAAe;AACtC,iBAAiB,SAAS;AAC1B,WAAW,GAAG;AACd,kBAAkB,UAAU;AAC5B,sBAAsB,cAAc;AACpC,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,yBAAyB,iBAAiB;AAC1C,qBAAqB,aAAa;AAClC,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,4BAA4B,oBAAoB;AAChD,gBAAgB,QAAQ;AACxB,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,0BAA0B,kBAAkB;AAC5C,sBAAsB,cAAc;AACpC,0BAA0B,kBAAkB;AAC5C,wBAAwB,gBAAgB;AACxC,0BAA0B,kBAAkB;AAC5C,kCAAkC,0BAA0B;AAC5D,0BAA0B,kBAAkB;AAC5C,0BAA0B,kBAAkB;AAC5C,mBAAmB,WAAW;AAC9B,wBAAwB,gBAAgB;AACxC,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,kBAAkB,UAAU;AAC5B,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,oBAAoB,YAAY;AAChC,iBAAiB,SAAS;AAC1B,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,mBAAmB,WAAW;AAC9B,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,iBAAiB,SAAS;AAC1B,4BAA4B,oBAAoB;AAChD,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B;AACA,gBAAgB,QAAQ;AACxB,uBAAuB,eAAe;AACtC,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,aAAa,YAAK;AAClB;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,eAAe,OAAO;AACtB,sBAAsB,cAAc;AACpC,0BAA0B,kBAAkB;AAC5C,0BAA0B,kBAAkB;AAC5C,yBAAyB,iBAAiB;AAC1C,sBAAsB,cAAc;AACpC,4BAA4B,oBAAoB;AAChD,sBAAsB,cAAc;AACpC,wBAAwB,gBAAgB;AACxC,oBAAoB,YAAY;AAChC,uBAAuB,eAAe;AACtC,iCAAiC,yBAAyB;AAC1D,0BAA0B,kBAAkB;AAC5C,mBAAmB,WAAW;AAC9B,qBAAqB,aAAa;AAClC,YAAY,IAAI;AAChB,yBAAyB,iBAAiB;AAC1C,cAAc,MAAM;AACpB,kBAAkB,UAAU;AAC5B,2BAA2B,mBAAmB;AAC9C,sBAAsB,cAAc;AACpC,qBAAqB,aAAa;AAClC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,uBAAuB,eAAe;AACtC,0BAA0B,kBAAkB;AAC5C,qBAAqB,aAAa;AAClC,oBAAoB,YAAY;AAChC,iBAAiB,SAAS;AAC1B,sBAAsB,cAAc;AACpC,2BAA2B,mBAAmB;AAC9C,oBAAoB,YAAY;AAChC,oBAAoB,YAAY;AAChC,mBAAmB,WAAW;AAC9B,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,yBAAyB,iBAAiB;AAC1C,wBAAwB,gBAAgB;AACxC,eAAe,OAAO;AACtB,kBAAkB,UAAU;AAC5B,mBAAmB,WAAW;AAC9B,qBAAqB,aAAa;AAClC,kBAAkB,UAAU;AAC5B,0BAA0B,kBAAkB;AAC5C,mBAAmB,WAAW;AAC9B,uBAAuB,eAAe;AACtC,oBAAoB,YAAY;AAChC,uBAAuB,eAAe;AACtC,kBAAkB,UAAU;AAC5B,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,uBAAuB,eAAe;AACtC,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,0BAA0B,kBAAkB;AAC5C,sBAAsB,cAAc;AACpC,cAAc,MAAM;AACpB,wBAAwB,gBAAgB;AACxC,mBAAmB,WAAW;AAC9B,uBAAuB,eAAe;AACtC,uBAAuB,eAAe;AACtC,4BAA4B,oBAAoB;AAChD,4BAA4B,oBAAoB;AAChD,uBAAuB,eAAe;AACtC,iBAAiB,SAAS;AAC1B,mBAAmB,WAAW;AAC9B,0BAA0B,kBAAkB;AAC5C,yBAAyB,iBAAiB;AAC1C,oBAAoB,YAAY;AAChC,4BAA4B,oBAAoB;AAChD,sBAAsB,cAAc;AACpC,+BAA+B,uBAAuB;AACtD,kBAAkB,WAAW;AAC7B,gBAAgB,iBAAQ;AACxB;AACA,0BAA0B,kBAAkB;AAC5C,iBAAiB,SAAS;AAC1B,mBAAmB,WAAW;AAC9B,mBAAmB,WAAW;AAC9B,yBAAyB,iBAAiB;AAC1C,uBAAuB,eAAe;AACtC,mBAAmB,WAAW;AAC9B,cAAc,MAAM;AACpB,kBAAkB,UAAU;AAC5B,kBAAkB,UAAU;AAC5B,yBAAyB,iBAAiB;AAC1C,sBAAsB,cAAc;AACpC,oBAAoB,YAAY;AAChC,qBAAqB,aAAa;AAClC,qBAAqB,aAAa;AAClC,2BAA2B,mBAAmB;AAC9C,kBAAkB,UAAU;AAC5B,wBAAwB,gBAAgB;AACxC,mBAAmB,WAAW;AAC9B,iBAAiB,SAAS;AAC1B,iBAAiB,SAAS;AAC1B,gBAAgB,QAAQ;AACxB,sBAAsB,cAAc;AACpC,sBAAsB,cAAc;AACpC,uBAAuB,eAAe;AACtC,uBAAuB,eAAe;AACtC,mBAAmB,WAAW;AAC9B;;AC51B4C;AACR;AACA;AACS;AAC7C;AACO;AACP,WAAW,eAAG;AACd,cAAc,kBAAM;AACpB,cAAc,kBAAM;AACpB,aAAa,iBAAK;AAClB;AACA;AACA;AACA,SAAS,kBAAM;AACf;AACA;AACA,eAAe,iBAAK;AACpB;AACA,UAAU,MAAM;AAChB;AACA;AACA,SAAS,eAAG;AACZ;AACA,QAAQ,MAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,IAAI,eAAG;AACP;AACA,eAAe,kBAAM;AACrB;AACA,QAAQ,MAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,kBAAM;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,KAAK;AAC3E;AACA;AACA,YAAY,eAAG;AACf;AACA;AACA;AACA;AACA,eAAe,sBAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,KAAK,+BAA+B,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C;AACA,qCAAqC,KAAK;AAC1C;AACA;AACA;AACA;AACA,kCAAkC,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB,cAAc;AACd,wCAAwC,mCAAmC,aAAa,MAAM;AAC9F,cAAc;AACd;AACA,yFAAyF,6CAA6C;AACtI;AACA;AACA,iDAAiD,EAAE,cAAc;AACjE,oCAAoC,MAAM,GAAG;AAC7C;AACA,2CAA2C,MAAM;AACjD,kBAAkB;AAClB;AACA;AACA;AACA;AACA,UAAU;AACV,yBAAyB,KAAK;AAC9B;AACA;AACA,gBAAgB,KAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sBAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,QAAQ,sBAAU;AAClB;AACA;AACA;AACA;AACA;AACA,8DAA8D,KAAK;AACnE;AACA;AACA,QAAQ,eAAG;AACX,MAAM;AACN,QAAQ,sBAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kBAAM;AAClB;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;ACjQ0C;AACE;AACrC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA,0BAA0B,KAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,yBAAyB,2BAA2B;AACpD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sCAAsC;AACtE;AACA,KAAK;AACL;AACA;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,KAAK,4BAA4B,mBAAS;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FO;AACP;AACA;AACA;AACA;;ACJ2C;AACN;AAC9B,qBAAqB,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA,SAAS;AACT;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,KAAK;AACL;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACO;AACP;AACA;AACA,UAAU,UAAU;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;ACtJ4C;AACrC;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,QAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC;AACA;AACA,iBAAiB,KAAK;AACtB,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA,oCAAoC,KAAK;AACzC,kDAAkD,KAAK;AACvD;AACA;AACA,4CAA4C,KAAK;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,KAAK;AACxF,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,KAAK;AACjC,yBAAyB,KAAK;AAC9B,2BAA2B,KAAK;AAChC,8BAA8B,KAAK;AACnC,oBAAoB,KAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,KAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA,MAAM;AACN;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;ACrvJyC;AACE;AACD;AACnC;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,aAAM;AAC7B,uBAAuB,aAAM;AAC7B;AACA;AACA;AACA,uFAAuF,uDAAuD;AAC9I,4FAA4F,uDAAuD;AACnJ;AACA;AACA,sCAAsC,6CAA6C;AACnF;AACA;AACA;AACA,sCAAsC,gDAAgD;AACtF;AACA;AACA,kCAAkC,KAAK,4BAA4B,mBAAS;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAK;AAC5B,uBAAuB,YAAK;AAC5B;AACA;AACA;AACA,uFAAuF,uDAAuD;AAC9I,4FAA4F,uDAAuD;AACnJ;AACA;AACA,sCAAsC,6CAA6C;AACnF;AACA;AACA;AACA,sCAAsC,gDAAgD;AACtF;AACA;AACA,kCAAkC,KAAK,2BAA2B,mBAAS;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;;ACxIO;AACP;AACA;AACA;;ACHA;AACA;AACA;AACA,mGAAmG,0BAA0B;AAC7H;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,SAAS;AACT;AACA,MAAM;AACN;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA,KAAK;AACL;;AC7O2C;AAC3C;AACA,IAAI,YAAM;AACV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,QAAQ,KAAK;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,YAAM,mBAAmB,YAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,YAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO;AACP;AACA;AACA;AACA;AACA;;AChPkF;AACoB;AAClD;AACU;AAC7B;AACmB;AACpD;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO,sCAAsC,iEAAiB;AAC9D;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+DAA+D,QAAQ;AACvE;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B,cAAc;AACd;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA,kBAAkB,4BAA4B;AAC9C;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,KAAK;AACvB;AACA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;ACvXmF;AACqB;AACX;AACF;AACA;AAC1B;AAC1D,eAAe,SAAI;AAC1B,UAAU,UAAU;AACpB,UAAU,oBAAoB;AAC9B,UAAU,aAAa;AACvB,UAAU,UAAU;AACpB,UAAU,YAAY;AACtB,UAAU,cAAc;AACxB;;ACb4C;AACR;AACpC,eAAe,0BAAW;AAC1B;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,oBAAoB,KAAK;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,KAAK;AACrC,iBAAiB,sBAAsB;AACvC,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,MAAM;AACd,MAAM;AACN,gCAAgC,sCAAsC,aAAa,cAAc;AACjG,MAAM;AACN;AACA,iFAAiF,gDAAgD;AACjI;AACA;AACA,yCAAyC,EAAE,cAAc;AACzD,4BAA4B,MAAM,GAAG;AACrC;AACA,sCAAsC,cAAc;AACpD,UAAU;AACV;AACA;AACA;AACA;AACA;AACO;AACP,YAAY,0BAAW;AACvB;AACA;AACA;;ACjI4C;AACrC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,yBAAyB,sEAAsE;AAC/F;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,KAAK;AAC3B;AACA,SAAS;AACT,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,SAAS;AACT;AACA;;ACzCO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACT+C;AACxC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,KAAK;AACjD;AACA;AACA;AACA;;ACrC+C;AACc;AACS;AACU;AACG;AACgY;AAC3V;AAC/D;AAC6B;AAC/C;AACc;AACC;AACwB;AACtB;AACzB;AACiC;AACf;AACyB;AAChB;AACI;AACE;AACV;AACsB;AACvB;AACrD;AACO;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,IAAI;AACrD,cAAc;AACd,kDAAkD,IAAI;AACtD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,UAAU;AAClD,2CAA2C,eAAe;AAC1D,cAAc;AACd,yCAAyC,UAAU;AACnD,4CAA4C,eAAe;AAC3D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,SAAS;AACjD,yCAAyC,SAAS;AAClD,cAAc;AACd,yCAAyC,SAAS;AAClD,yCAAyC,SAAS;AAClD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,WAAW;AAC1D;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,eAAe;AAC1D,wCAAwC,eAAe;AACvD,wCAAwC,eAAe;AACvD,wCAAwC,eAAe;AACvD,wCAAwC,eAAe;AACvD,wCAAwC,eAAe;AACvD,+CAA+C,eAAe;AAC9D,+CAA+C,eAAe;AAC9D,cAAc;AACd,4CAA4C,eAAe;AAC3D,yCAAyC,eAAe;AACxD,yCAAyC,eAAe;AACxD,yCAAyC,eAAe;AACxD,yCAAyC,eAAe;AACxD,yCAAyC,eAAe;AACxD,gDAAgD,eAAe;AAC/D,gDAAgD,eAAe;AAC/D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,kDAAkD,uBAAuB;AACzE,kDAAkD,uBAAuB;AACzE,+DAA+D,cAAc;AAC7E,cAAc;AACd,mDAAmD,MAAM;AACzD,mDAAmD,uBAAuB;AAC1E,mDAAmD,uBAAuB;AAC1E,gEAAgE,cAAc;AAC9E;AACA,YAAY,2BAA2B;AACvC;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,SAAS;AACjD,cAAc;AACd,yCAAyC,SAAS;AAClD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,WAAW;AACvB;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,UAAU;AACtB;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oBAAoB;AACtE,cAAc;AACd,mDAAmD,oBAAoB;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,iBAAiB;AACvF,cAAc;AACd,uEAAuE,iBAAiB;AACxF;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD,cAAc;AACd,0CAA0C,YAAY;AACtD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAI;AACpD,cAAc;AACd,iDAAiD,SAAI;AACrD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD,kDAAkD,MAAM;AACxD,cAAc;AACd,kDAAkD,MAAM;AACxD,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD,kDAAkD,MAAM;AACxD,cAAc;AACd,kDAAkD,MAAM;AACxD,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,UAAU;AAC5D,cAAc;AACd,mDAAmD,UAAU;AAC7D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,MAAM;AACzD,cAAc;AACd,oDAAoD,MAAM;AAC1D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,MAAM;AACzD,cAAc;AACd,oDAAoD,MAAM;AAC1D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,MAAM;AAChE,2DAA2D,MAAM;AACjE,kDAAkD,MAAM;AACxD,cAAc;AACd,2DAA2D,MAAM;AACjE,4DAA4D,MAAM;AAClE,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,MAAM;AAC7C,cAAc;AACd,wCAAwC,MAAM;AAC9C;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,MAAM;AAC9D,cAAc;AACd,yDAAyD,MAAM;AAC/D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,MAAM;AACzD,cAAc;AACd,oDAAoD,MAAM;AAC1D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,MAAM;AACvD,cAAc;AACd,kDAAkD,MAAM;AACxD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,kDAAkD,MAAM;AACxD,2DAA2D,MAAM;AACjE,cAAc;AACd,mDAAmD,MAAM;AACzD,mDAAmD,MAAM;AACzD,4DAA4D,MAAM;AAClE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,MAAM;AACzD,cAAc;AACd,oDAAoD,MAAM;AAC1D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,MAAM;AACjE,cAAc;AACd,4DAA4D,MAAM;AAClE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM;AAC9C,wCAAwC,MAAM;AAC9C,cAAc;AACd,yCAAyC,MAAM;AAC/C,yCAAyC,MAAM;AAC/C;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,QAAQ;AAC3D,cAAc;AACd,oDAAoD,QAAQ;AAC5D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,MAAM;AACzD,cAAc;AACd,oDAAoD,MAAM;AAC1D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,MAAM;AAClE,gEAAgE,MAAM;AACtE,cAAc;AACd,6DAA6D,MAAM;AACnE,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,oDAAoD,MAAM;AAC1D,wDAAwD,MAAM;AAC9D,cAAc;AACd,mDAAmD,MAAM;AACzD,qDAAqD,MAAM;AAC3D,yDAAyD,MAAM;AAC/D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa;AACrD,cAAc;AACd,yCAAyC,aAAa;AACtD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA,uBAAuB,iBAAiB;AACxC;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,UAAU;AAC3D,wDAAwD,UAAU;AAClE,cAAc;AACd,kDAAkD,UAAU;AAC5D,yDAAyD,UAAU;AACnE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,MAAM;AACtE,cAAc;AACd,iEAAiE,MAAM;AACvE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD,0CAA0C,kBAAkB;AAC5D,cAAc;AACd,2CAA2C,YAAY;AACvD,2CAA2C,kBAAkB;AAC7D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,MAAM;AAChD,0CAA0C,MAAM;AAChD,2DAA2D,MAAM;AACjE,gDAAgD,MAAM;AACtD,kDAAkD,MAAM;AACxD,cAAc;AACd,2CAA2C,MAAM;AACjD,2CAA2C,MAAM;AACjD,qDAAqD,MAAM;AAC3D,iDAAiD,MAAM;AACvD,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,IAAI;AAC9D,cAAc;AACd,2DAA2D,IAAI;AAC/D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,MAAM;AAClE,kDAAkD,MAAM;AACxD,cAAc;AACd,6DAA6D,MAAM;AACnE,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC,4CAA4C,mBAAmB;AAC/D,cAAc;AACd,6CAA6C,mBAAmB;AAChE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD,wDAAwD,WAAW;AACnE,+CAA+C,WAAW;AAC1D,cAAc;AACd,6CAA6C,WAAW;AACxD,yDAAyD,WAAW;AACpE,gDAAgD,WAAW;AAC3D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yBAAyB;AACrE,cAAc;AACd,6CAA6C,yBAAyB;AACtE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,2BAA2B;AACvE,cAAc;AACd,6CAA6C,2BAA2B;AACxE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,wDAAwD,aAAa;AACrE,wDAAwD,aAAa;AACrE,kDAAkD,aAAa;AAC/D,cAAc;AACd,yDAAyD,aAAa;AACtE,yDAAyD,aAAa;AACtE,mDAAmD,aAAa;AAChE;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,WAAW;AAC7D,cAAc;AACd,mDAAmD,WAAW;AAC9D;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,+CAA+C,MAAM;AACrD,cAAc;AACd,mDAAmD,MAAM;AACzD,gDAAgD,MAAM;AACtD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM;AAC9C,cAAc;AACd,yCAAyC,MAAM;AAC/C;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,cAAc;AACd,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,sDAAsD,MAAM;AAC5D,kDAAkD,MAAM;AACxD,cAAc;AACd,mDAAmD,MAAM;AACzD,uDAAuD,MAAM;AAC7D,mDAAmD,MAAM;AACzD;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,OAAO;AACrC,KAAK;AACL,IAAI,cAAc;AAClB;AACA;AACA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,wBAAwB;AACxC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,kBAAkB;AAClC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,uBAAuB;AACvC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,oBAAoB;AACpC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,yBAAyB;AACzC;AACA,KAAK;AACL;;AC9hD4C;AACrC;AACP,iBAAiB,KAAK;AACtB;AACO;AACP;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACO;AACP;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACO;AACP;AACA,iBAAiB,KAAK;AACtB;AACO;AACP,iBAAiB,KAAK;AACtB;;ACxB2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,KAAK;AACtB;AACO;AACP;AACA;;ACrCO;AACP;AACA,SAAS,gCAAgC;AACzC,SAAS,sCAAsC;AAC/C,SAAS,0CAA0C;AACnD,SAAS,kCAAkC;AAC3C,SAAS,gCAAgC;AACzC,SAAS,kCAAkC;AAC3C,SAAS,8BAA8B;AACvC,SAAS,kCAAkC;AAC3C,SAAS,oCAAoC;AAC7C,SAAS,oCAAoC;AAC7C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,kCAAkC;AAC/D,6BAA6B,mCAAmC;AAChE,6BAA6B,oCAAoC;AACjE,6BAA6B,oCAAoC;AACjE,6BAA6B,kCAAkC;AAC/D,6BAA6B,gCAAgC;AAC7D,6BAA6B,oCAAoC;AACjE,6BAA6B,kCAAkC;AAC/D,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B,gCAAgC;AAC7D,6BAA6B,8CAA8C;AAC3E,6BAA6B,gCAAgC;AAC7D,6BAA6B,gCAAgC;AAC7D,6BAA6B,kCAAkC;AAC/D,6BAA6B,0CAA0C;AACvE,6BAA6B,wCAAwC;AACrE,6BAA6B,wCAAwC;AACrE,6BAA6B,oCAAoC;AACjE,6BAA6B,sCAAsC;AACnE,6BAA6B,sCAAsC;AACnE,6BAA6B,wCAAwC;AACrE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,6CAA6C;AAC1E,6BAA6B,gCAAgC;AAC7D,6BAA6B,uCAAuC;AACpE,6BAA6B,0CAA0C;AACvE,6BAA6B,yCAAyC;AACtE,6BAA6B,mCAAmC;AAChE,6BAA6B,gDAAgD;AAC7E,6BAA6B,kCAAkC;AAC/D,6BAA6B,oCAAoC;AACjE,6BAA6B,+CAA+C;AAC5E,6BAA6B,6CAA6C;AAC1E,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,gCAAgC;AAC7D,6BAA6B,sCAAsC;AACnE,6BAA6B,0CAA0C;AACvE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,yCAAyC;AACtE,6BAA6B,yCAAyC;AACtE,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,yCAAyC;AACtE,6BAA6B,yCAAyC;AACtE,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B,yCAAyC;AACtE,6BAA6B,qCAAqC;AAClE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,wCAAwC;AACrE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,yCAAyC;AACtE,6BAA6B,yCAAyC;AACtE,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,yCAAyC;AACtE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,oCAAoC;AACjE,6BAA6B,4CAA4C;AACzE,6BAA6B,mCAAmC;AAChE,6BAA6B,kCAAkC;AAC/D,6BAA6B,qCAAqC;AAClE,6BAA6B,6CAA6C;AAC1E,6BAA6B,oCAAoC;AACjE,6BAA6B,gCAAgC;AAC7D,6BAA6B,oCAAoC;AACjE,6BAA6B,sCAAsC;AACnE,6BAA6B,kCAAkC;AAC/D,6BAA6B,oCAAoC;AACjE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,oCAAoC;AACjE,6BAA6B,gCAAgC;AAC7D,6BAA6B,kCAAkC;AAC/D,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gCAAgC;AAC7D,6BAA6B,gCAAgC;AAC7D,6BAA6B,gCAAgC;AAC7D,6BAA6B,kCAAkC;AAC/D,6BAA6B,0CAA0C;AACvE,6BAA6B,wCAAwC;AACrE,6BAA6B,oCAAoC;AACjE,6BAA6B,sCAAsC;AACnE,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B,iDAAiD;AAC9E,6BAA6B,0CAA0C;AACvE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kCAAkC;AAC/D,6BAA6B,gCAAgC;AAC7D,6BAA6B,oCAAoC;AACjE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gCAAgC;AAC7D,6BAA6B,4CAA4C;AACzE,6BAA6B,8CAA8C;AAC3E,6BAA6B,wCAAwC;AACrE,6BAA6B,kCAAkC;AAC/D,6BAA6B,8CAA8C;AAC3E,6BAA6B,oCAAoC;AACjE,6BAA6B,oCAAoC;AACjE,6BAA6B,8BAA8B;AAC3D,6BAA6B,oCAAoC;AACjE,6BAA6B,oCAAoC;AACjE,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,wBAAwB;AACrD,6BAA6B,wBAAwB;AACrD,6BAA6B,wBAAwB;AACrD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B,oCAAoC;AACjE,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,oCAAoC;AACjE,6BAA6B,gCAAgC;AAC7D,6BAA6B,kCAAkC;AAC/D,6BAA6B,gCAAgC;AAC7D,6BAA6B,oCAAoC;AACjE,6BAA6B,wCAAwC;AACrE,6BAA6B,kDAAkD;AAC/E,6BAA6B,kCAAkC;AAC/D,6BAA6B;AAC7B;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D,6BAA6B,8BAA8B;AAC3D,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gCAAgC;AAC7D,6BAA6B,4CAA4C;AACzE,6BAA6B,8CAA8C;AAC3E,6BAA6B,wCAAwC;AACrE,6BAA6B,kCAAkC;AAC/D,6BAA6B,8CAA8C;AAC3E,6BAA6B,oCAAoC;AACjE,6BAA6B,8BAA8B;AAC3D,6BAA6B,oCAAoC;AACjE,6BAA6B,oCAAoC;AACjE,6BAA6B,gCAAgC;AAC7D,6BAA6B,oCAAoC;AACjE,6BAA6B,gCAAgC;AAC7D;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE,6BAA6B,8CAA8C;AAC3E,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B,6CAA6C;AAC1E,6BAA6B,+CAA+C;AAC5E,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AC18LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2GAA2G,QAAQ;AACnH;AACA,wBAAwB,6BAA6B;AACrD;AACA,SAAS;AACT,MAAM;AACN;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC,sBAAsB,0BAA0B;AAChD;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN;;AC5BmE;AAC5D;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,SAAS;AACT;AACA;AACA;AACA;AACA,YAAY,YAAY;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA,YAAY,UAAU;AACtB,SAAS;AACT;AACA;;ACzB6E;AACO;AACV;AAChB;AACT;AACK;AACL;AACR;AAC+C;AAChC;AACM;AACuB;AACmC;AAC3D;AACgE;AAC9E;AACU;AAC0B;AAC1C;AACM;AACqF;AAC9D;AAC/B;AACS;AACV;AACU;AACD;AACF;AACQ;AACC;AACyF;AACnG;AACL;AACuC;AACtC;AACc;AACsB;AACvB;AACc;AACV;AACxB;AACO;AACjC;AACP;AACA,IAAI,gBAAgB;AACpB,IAAI,SAAS;AACb,CAAC;AACD;AACA;AACA,0CAA0C,kBAAkB;AAC5D,wCAAwC,gBAAgB;AACxD,2CAA2C,aAAa;AACxD,8CAA8C,aAAa;AAC3D,uCAAuC,WAAW;AAClD,uCAAuC,OAAO;AAC9C,oCAAoC,YAAY;AAChD,4CAA4C,oBAAoB;AAChE,6CAA6C,qBAAqB;AAClE,0CAA0C,kBAAkB;AAC5D,kCAAkC,UAAU;AAC5C,oCAAoC,OAAO;AAC3C,oCAAoC,OAAO;AAC3C,oCAAoC,OAAO;AAC3C,gCAAgC,SAAS;AACzC,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6BAA6B;AACzD;AACA,aAAa;AACb;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B,cAAc,KAAK;AACnB,uEAAuE,WAAW;AAClF;AACA;AACA;AACA,cAAc;AACd;AACA,+FAA+F,uBAAuB;AACtH;AACA,6FAA6F,YAAY;AACzG;AACA,uCAAuC,eAAe;AACtD,oCAAoC,UAAU;AAC9C;AACA,6FAA6F,MAAM;AACnG;AACA,oCAAoC,SAAS;AAC7C,qCAAqC,SAAS;AAC9C;AACA;AACA,uCAAuC,eAAe;AACtD,oCAAoC,eAAe;AACnD,oCAAoC,eAAe;AACnD,oCAAoC,eAAe;AACnD,oCAAoC,eAAe;AACnD,oCAAoC,eAAe;AACnD,2CAA2C,eAAe;AAC1D,2CAA2C,eAAe;AAC1D,YAAY,WAAW;AACvB;AACA;AACA,oCAAoC,MAAM;AAC1C,oCAAoC,MAAM;AAC1C;AACA,2FAA2F,MAAM;AACjG,sEAAsE,WAAW;AACjF,sCAAsC,aAAa;AACnD;AACA,UAAU,YAAY;AACtB;AACA,yCAAyC,MAAM;AAC/C,0CAA0C,MAAM;AAChD;AACA;AACA,yCAAyC,MAAM;AAC/C,0CAA0C,MAAM;AAChD;AACA,+GAA+G,MAAM;AACrH;AACA,0CAA0C,MAAM;AAChD,0CAA0C,MAAM;AAChD,mDAAmD,MAAM;AACzD;AACA,4FAA4F,MAAM;AAClG,2GAA2G,MAAM;AACjH,8FAA8F,SAAI;AAClG;AACA,kDAAkD,MAAM;AACxD,mDAAmD,MAAM;AACzD,0CAA0C,MAAM;AAChD;AACA,6FAA6F,MAAM;AACnG,qGAAqG,MAAM;AAC3G,yFAAyF,UAAU;AACnG,iHAAiH,MAAM;AACvH,2FAA2F,MAAM;AACjG,gHAAgH,MAAM;AACtH,iHAAiH,MAAM;AACvH,4FAA4F,MAAM;AAClG;AACA,0CAA0C,MAAM;AAChD,0CAA0C,uBAAuB;AACjE,0CAA0C,uBAAuB;AACjE,uDAAuD,cAAc;AACrE,QAAQ,2BAA2B;AACnC;AACA,iGAAiG,SAAS;AAC1G,6GAA6G,oBAAoB;AACjI,iIAAiI,iBAAiB;AAClJ,gEAAgE,oBAAoB;AACpF,2GAA2G,MAAM;AACjH,mGAAmG,QAAQ;AAC3G,sHAAsH,MAAM;AAC5H,qHAAqH,MAAM;AAC3H,kGAAkG,MAAM;AACxG,iHAAiH,MAAM;AACvH;AACA,0CAA0C,MAAM;AAChD,4CAA4C,MAAM;AAClD,gDAAgD,MAAM;AACtD;AACA;AACA,8CAA8C,kBAAkB;AAChE,oCAAoC,gBAAgB;AACpD;AACA,uFAAuF,aAAa;AACpG,+DAA+D,WAAW;AAC1E,8DAA8D,UAAU;AACxE;AACA,yCAAyC,UAAU;AACnD,gDAAgD,UAAU;AAC1D;AACA,4GAA4G,MAAM;AAClH,yGAAyG,IAAI;AAC7G;AACA,kCAAkC,YAAY;AAC9C,kCAAkC,kBAAkB;AACpD;AACA;AACA,kCAAkC,MAAM;AACxC,kCAAkC,MAAM;AACxC,mDAAmD,MAAM;AACzD,wCAAwC,MAAM;AAC9C,0CAA0C,MAAM;AAChD;AACA,0GAA0G,IAAI;AAC9G,kHAAkH,MAAM;AACxH,iGAAiG,MAAM;AACvG,iCAAiC,gBAAgB;AACjD,yCAAyC,WAAW;AACpD;AACA,QAAQ,mBAAmB;AAC3B,oCAAoC,mBAAmB;AACvD;AACA;AACA,oCAAoC,WAAW;AAC/C,gDAAgD,WAAW;AAC3D,uCAAuC,WAAW;AAClD;AACA,4GAA4G,yBAAyB;AACrI,oGAAoG,2BAA2B;AAC/H;AACA,QAAQ,aAAa;AACrB,gDAAgD,aAAa;AAC7D,gDAAgD,aAAa;AAC7D,0CAA0C,aAAa;AACvD;AACA;AACA,0CAA0C,MAAM;AAChD,uCAAuC,MAAM;AAC7C;AACA,8EAA8E,OAAO;AACrF,sFAAsF,MAAM;AAC5F,oHAAoH,WAAW;AAC/H,gGAAgG,MAAM;AACtG,oFAAoF,MAAM;AAC1F;AACA,0CAA0C,MAAM;AAChD,8CAA8C,MAAM;AACpD,0CAA0C,MAAM;AAChD;AACA,4BAA4B,UAAU;AACtC,CAAC;AACD;AACA;AACA,6BAA6B,qBAAqB;AAClD,wBAAwB,gBAAgB;AACxC,0BAA0B,kBAAkB;AAC5C,mBAAmB,WAAW;AAC9B,wBAAwB,gBAAgB;AACxC,mBAAmB,WAAW;AAC9B,4BAA4B,oBAAoB;AAChD;AACA;AACA,aAAa;AACb;AACA,eAAe;AACf,WAAW;AACX,UAAU;AACV,SAAS;AACT,iBAAiB;AACjB,iBAAiB;AACjB,WAAW;AACX,eAAe;AACf,aAAa;AACb,aAAa;AACb,gBAAgB;AAChB,C","sources":["webpack://chris-premades/webpack/bootstrap","webpack://chris-premades/webpack/runtime/define property getters","webpack://chris-premades/webpack/runtime/hasOwnProperty shorthand","webpack://chris-premades/./scripts/integrations/dae.js","webpack://chris-premades/./scripts/macros/animations/summonEffects.js","webpack://chris-premades/./scripts/helperFunctions.js","webpack://chris-premades/./scripts/equipment.js","webpack://chris-premades/./scripts/integrations/automatedAnimations.js","webpack://chris-premades/./scripts/integrations/buildABonus.js","webpack://chris-premades/./scripts/macros/animations/cast.js","webpack://chris-premades/./scripts/constants.js","webpack://chris-premades/./scripts/compendium.js","webpack://chris-premades/./scripts/scale.js","webpack://chris-premades/./scripts/item.js","webpack://chris-premades/./scripts/integrations/diceSoNice.js","webpack://chris-premades/./scripts/integrations/dndAnimations.js","webpack://chris-premades/./scripts/heap/heap.js","webpack://chris-premades/./scripts/heap/priority-queue.js","webpack://chris-premades/./scripts/utility/queue.js","webpack://chris-premades/./scripts/macros/raceFeatures/aasimar/radiantSoul.js","webpack://chris-premades/./scripts/macros/monsterFeatures/aberrantSpirit/whisperingAura.js","webpack://chris-premades/./scripts/macros/monsterFeatures/aberrantSpirit/aberrantSpirit.js","webpack://chris-premades/./scripts/macros/spells/acidArrow.js","webpack://chris-premades/./scripts/macros/actions/checkCover.js","webpack://chris-premades/./scripts/macros/actions/fall.js","webpack://chris-premades/./scripts/translations.js","webpack://chris-premades/./scripts/macros/actions/grapple.js","webpack://chris-premades/./scripts/macros/actions/help.js","webpack://chris-premades/./scripts/macros/actions/nonLethal.js","webpack://chris-premades/./scripts/macros/actions/search.js","webpack://chris-premades/./scripts/macros/actions/shove.js","webpack://chris-premades/./scripts/macros/actions/stealth.js","webpack://chris-premades/./scripts/macros/actions/underwater.js","webpack://chris-premades/./scripts/macros/actions/actions.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/ancestralGuardian/ancestralProtectors.js","webpack://chris-premades/./scripts/utility/summons.js","webpack://chris-premades/./scripts/macros/spells/animateDead.js","webpack://chris-premades/./scripts/utility/tashaSummon.js","webpack://chris-premades/./scripts/macros/classFeatures/bard/collegeOfCreation/animatingPerformance.js","webpack://chris-premades/./scripts/macros/spells/antagonize.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/battleSmith/arcaneJolt.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/schoolOfAbjuration/arcaneWard.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/armorer/armorModel.js","webpack://chris-premades/./scripts/macros/spells/armorOfAgathys.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/armorOfMagicalStrength.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfGlory/auraOfAlacrity.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/auraOfCourage.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfDevotion/auraOfDevotion.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathbreaker/auraOfHate.js","webpack://chris-premades/./scripts/macros/spells/auraOfLife.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/auraOfProtection.js","webpack://chris-premades/./scripts/macros/spells/auraOfPurity.js","webpack://chris-premades/./scripts/macros/spells/auraOfVitality.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfTheAncients/auraOfWarding.js","webpack://chris-premades/./scripts/macros/monsterFeatures/autognome/malfunction.js","webpack://chris-premades/./scripts/macros/monsterFeatures/autognome/autognome.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/orderOfScribes/awakenedSpellbook.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/peaceDomain/balmOfPeace.js","webpack://chris-premades/./scripts/macros/classFeatures/bard/bardicInspiration.js","webpack://chris-premades/./scripts/macros/spells/beaconOfHope.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/feyWanderer/beguilingTwist.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/beast/bestialSoul.js","webpack://chris-premades/./scripts/macros/spells/bestowCurse.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/backbreaker.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/brace.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/cleave.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/concussiveSmash.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/maimingStrike.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/flourish.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/hamstringShot.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/heartstopper.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/lacerate.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/piercingStrike.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/pommelStrike.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/prepare.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/rushAttack.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/tenacity.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/topple.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/weakeningStrike.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/mobileShot.js","webpack://chris-premades/./scripts/macros/homebrew/bg3/bg3.js","webpack://chris-premades/./scripts/macros/spells/bigbysHand.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/bloodCurses/binding.js","webpack://chris-premades/./scripts/macros/items/blackrazor.js","webpack://chris-premades/./scripts/macros/classFeatures/bard/collegeOfSwords/bladeFlourish.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/bladesinging/bladesong.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/blessedStrikes.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/forgeDomain/blessingOfTheForge.js","webpack://chris-premades/./scripts/macros/raceFeatures/shadarKai/blessingOfTheRavenQueen.js","webpack://chris-premades/./scripts/macros/spells/blight.js","webpack://chris-premades/./scripts/macros/spells/blink.js","webpack://chris-premades/./scripts/macros/items/bloodSpear.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bodak/auraOfAnnihilation.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bodak/deathGaze.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bodak/bodak.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/wildMagic/bolsteringMagic.js","webpack://chris-premades/./scripts/macros/spells/boomingBlade.js","webpack://chris-premades/./scripts/macros/items/bootsOfElvenkind.js","webpack://chris-premades/./scripts/macros/spells/borrowedKnowledge.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/brandOfCastigation/brandOfCastigation.js","webpack://chris-premades/./scripts/macros/classFeatures/monk/wayOfTheAscendantDragon/breathOfTheDragon.js","webpack://chris-premades/./scripts/macros/raceFeatures/dragonborn/chromatic/breathWeapon.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bugBear/brute.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bugBear/surpriseAttack.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bugBear/bugbear.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bulette/deadlyLeap.js","webpack://chris-premades/./scripts/macros/monsterFeatures/bulette/bulette.js","webpack://chris-premades/./scripts/macros/spells/burningHands.js","webpack://chris-premades/./scripts/macros/spells/callLightning.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/beast/callTheHunt.js","webpack://chris-premades/./scripts/macros/feats/cartomancer.js","webpack://chris-premades/./scripts/macros/monsterFeatures/troglodyte/stench.js","webpack://chris-premades/./scripts/macros/monsterFeatures/catoblepas/catoblepas.js","webpack://chris-premades/./scripts/macros/monsterFeatures/celestialSpirit/radiantMace.js","webpack://chris-premades/./scripts/macros/monsterFeatures/celestialSpirit/celestialSpirit.js","webpack://chris-premades/./scripts/macros/spells/chainLightning.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/natureDomain/charmAnimalsAndPlants.js","webpack://chris-premades/./scripts/macros/spells/charmPerson.js","webpack://chris-premades/./scripts/macros/monsterFeatures/chasme/proboscis.js","webpack://chris-premades/./scripts/macros/monsterFeatures/chasme/chasme.js","webpack://chris-premades/./scripts/macros/spells/chillTouch.js","webpack://chris-premades/./scripts/macros/spells/chromaticOrb.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/graveDomain/circleOfMortality.js","webpack://chris-premades/./scripts/macros/monsterFeatures/clayGolem/berserk.js","webpack://chris-premades/./scripts/macros/monsterFeatures/clayGolem/slam.js","webpack://chris-premades/./scripts/macros/monsterFeatures/clayGolem/clayGolem.js","webpack://chris-premades/./scripts/macros/mechanics/cleave.js","webpack://chris-premades/./scripts/macros/monsterFeatures/clockworkDefender/electrifiedBite.js","webpack://chris-premades/./scripts/macros/monsterFeatures/clockworkDefender/clockworkDefender.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/cloudStrike.js","webpack://chris-premades/./scripts/macros/spells/cloudkill.js","webpack://chris-premades/./scripts/macros/spells/compelledDuel.js","webpack://chris-premades/./scripts/macros/mechanics/conditionResistance.js","webpack://chris-premades/./scripts/macros/mechanics/conditionVulnerability.js","webpack://chris-premades/./scripts/macros/spells/conjureAnimals.js","webpack://chris-premades/./scripts/macros/spells/conjureCelestial.js","webpack://chris-premades/./scripts/macros/spells/conjureElemental.js","webpack://chris-premades/./scripts/macros/spells/conjureFey.js","webpack://chris-premades/./scripts/macros/spells/conjureMinorElementals.js","webpack://chris-premades/./scripts/macros/spells/conjureWoodlandBeings.js","webpack://chris-premades/./scripts/macros/monsterFeatures/constructSpirit/stonyLethargy.js","webpack://chris-premades/./scripts/macros/monsterFeatures/constructSpirit/constructSpirit.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathbreaker/controlUndead.js","webpack://chris-premades/./scripts/macros/monsterFeatures/corpseFlower/reanimate.js","webpack://chris-premades/./scripts/macros/monsterFeatures/corpseFlower/corpseFlower.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/boons/pactOfTheBlade/createPactWeapon.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/crimsonRite/crimsonRite.js","webpack://chris-premades/./scripts/macros/feats/crusher.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/giant/crushingThrow.js","webpack://chris-premades/./scripts/macros/items/crystalBlade.js","webpack://chris-premades/./scripts/macros/items/dancingSword.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/dangerSense.js","webpack://chris-premades/./scripts/macros/spells/danseMacabre.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/fiend/darkOnesBlessing.js","webpack://chris-premades/./scripts/macros/spells/darkness.js","webpack://chris-premades/./scripts/macros/spells/dawn.js","webpack://chris-premades/./scripts/macros/spells/deathWard.js","webpack://chris-premades/./scripts/macros/monsterFeatures/deepGnome/stoneCamouflage.js","webpack://chris-premades/./scripts/macros/monsterFeatures/deepGnome/deepGnome.js","webpack://chris-premades/./scripts/macros/spells/destructiveWave.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/tempestDomain/destructiveWrath.js","webpack://chris-premades/./scripts/macros/spells/detectThoughts.js","webpack://chris-premades/./scripts/macros/spells/disintegrate.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/zealot/divineFury.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/divineSmite.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/divineStrike.js","webpack://chris-premades/./scripts/macros/monsterFeatures/draconicSpirit/breathWeapon.js","webpack://chris-premades/./scripts/macros/monsterFeatures/draconicSpirit/draconicSpirit.js","webpack://chris-premades/./scripts/macros/classFeatures/monk/wayOfTheAscendantDragon/draconicStrike.js","webpack://chris-premades/./scripts/macros/items/dragonVessel.js","webpack://chris-premades/./scripts/macros/spells/dragonsBreath.js","webpack://chris-premades/./scripts/macros/items/dragonsWrath.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/gloomStalker/dreadAmbusher.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathbreaker/dreadLord.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathbreaker/dreadfulAspect.js","webpack://chris-premades/./scripts/macros/monsterFeatures/dreamEater/engulfingNightmare.js","webpack://chris-premades/./scripts/macros/monsterFeatures/dreamEater/dreamEater.js","webpack://chris-premades/./scripts/macros/monsterFeatures/drow/handCrossbow.js","webpack://chris-premades/./scripts/macros/monsterFeatures/drow/drow.js","webpack://chris-premades/./scripts/macros/feats/dualWielder.js","webpack://chris-premades/./scripts/macros/monsterFeatures/duergarMindMaster/mindMastery.js","webpack://chris-premades/./scripts/macros/monsterFeatures/duergarMindMaster/reduce.js","webpack://chris-premades/./scripts/macros/monsterFeatures/duergarMindMaster/duergarMindMaster.js","webpack://chris-premades/./scripts/macros/monsterFeatures/duergar/enlarge.js","webpack://chris-premades/./scripts/macros/monsterFeatures/duergar/duergar.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/warMagic/durableMagic.js","webpack://chris-premades/./scripts/macros/monsterFeatures/dybbuk/tentacle.js","webpack://chris-premades/./scripts/macros/monsterFeatures/dybbuk/dybbuk.js","webpack://chris-premades/./scripts/macros/raceFeatures/eladrin/eladrinSeason.js","webpack://chris-premades/./scripts/macros/monsterFeatures/elderBrain/breakConcentration.js","webpack://chris-premades/./scripts/macros/monsterFeatures/elderBrain/psychicLink.js","webpack://chris-premades/./scripts/macros/monsterFeatures/elderBrain/elderBrain.js","webpack://chris-premades/./scripts/macros/monsterFeatures/elderOblex/eatMemories.js","webpack://chris-premades/./scripts/macros/monsterFeatures/elderOblex/elderOblex.js","webpack://chris-premades/./scripts/macros/spells/eldritchBlast.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/invocations/eldritchSmite.js","webpack://chris-premades/./scripts/macros/feats/elementalAdept.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/giant/elementalCleaver.js","webpack://chris-premades/./scripts/macros/spells/elementalWeapon.js","webpack://chris-premades/./scripts/macros/items/elixirOfHealth.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/peaceDomain/emboldeningBond.js","webpack://chris-premades/./scripts/macros/classFeatures/druid/circleOfWildfire/enhancedBond.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/enhancedWeapon.js","webpack://chris-premades/./scripts/macros/spells/enlargeReduce.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/alchemist/experimentalElixir.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/schoolOfDivination/expertDivination.js","webpack://chris-premades/./scripts/macros/mechanics/explodingHeals.js","webpack://chris-premades/./scripts/macros/items/eyesOfMinuteSeeing.js","webpack://chris-premades/./scripts/macros/items/eyesOfTheEagle.js","webpack://chris-premades/./scripts/macros/spells/faerieFire.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/bloodCurses/fallenPuppet.js","webpack://chris-premades/./scripts/macros/spells/farStep.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/favoredFoe.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/archfey/feyPresence.js","webpack://chris-premades/./scripts/macros/monsterFeatures/feySpirit/fuming.js","webpack://chris-premades/./scripts/macros/monsterFeatures/feySpirit/tricksy.js","webpack://chris-premades/./scripts/macros/monsterFeatures/feySpirit/feySpirit.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fiendishSpirit/claws.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fiendishSpirit/deathThroes.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fiendishSpirit/fiendishSpirit.js","webpack://chris-premades/./scripts/macros/spells/findFamiliar.js","webpack://chris-premades/./scripts/macros/spells/findGreaterSteed.js","webpack://chris-premades/./scripts/macros/spells/findSteed.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fireElemental/fireForm.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fireElemental/touch.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fireElemental/fireElemental.js","webpack://chris-premades/./scripts/macros/spells/fireShield.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fireSnake/heatedBody.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fireSnake/fireSnake.js","webpack://chris-premades/./scripts/macros/spells/fireStorm.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/fireStrike.js","webpack://chris-premades/./scripts/macros/mechanics/firearm.js","webpack://chris-premades/./scripts/macros/spells/flameBlade.js","webpack://chris-premades/./scripts/macros/spells/fly.js","webpack://chris-premades/./scripts/macros/classFeatures/monk/focusedAim.js","webpack://chris-premades/./scripts/macros/spells/fogCloud.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/undead/formOfDread.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/beast/formOfTheBeast.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fragmentOfKrokulmar/psionicRevitalization.js","webpack://chris-premades/./scripts/macros/monsterFeatures/fragmentOfKrokulmar/fragmentOfKrokulmar.js","webpack://chris-premades/./scripts/macros/spells/frostFingers.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/frostStrike.js","webpack://chris-premades/./scripts/macros/monsterFeatures/gallowsSpeaker/sufferingEchoes.js","webpack://chris-premades/./scripts/macros/monsterFeatures/gallowsSpeaker/gallowsSpeaker.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/swarmKeeper/gatheredSwarm.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/autoGrapple.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/regeneration.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/swarm.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/prone.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/parry.js","webpack://chris-premades/./scripts/macros/monsterFeatures/generic/generic.js","webpack://chris-premades/./scripts/macros/monsterFeatures/ghast/ghast.js","webpack://chris-premades/./scripts/macros/monsterFeatures/gibberingMouther/gibbering.js","webpack://chris-premades/./scripts/macros/monsterFeatures/gibberingMouther/gibberingMouther.js","webpack://chris-premades/./scripts/macros/feats/giftOfTheChromaticDragon.js","webpack://chris-premades/./scripts/macros/generic/grapple.js","webpack://chris-premades/./scripts/macros/feats/graspOfAvarice.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/invocations/graspOfHadar.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/undead/graveTouched.js","webpack://chris-premades/./scripts/macros/spells/grease.js","webpack://chris-premades/./scripts/macros/spells/greenFlameBlade.js","webpack://chris-premades/./scripts/macros/monsterFeatures/grell/tentacles.js","webpack://chris-premades/./scripts/macros/monsterFeatures/grell/grell.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/schoolOfNecromancy/grimHarvest.js","webpack://chris-premades/./scripts/macros/items/grovelthrash.js","webpack://chris-premades/./scripts/macros/raceFeatures/grung/grungPoison.js","webpack://chris-premades/./scripts/utility/movement.js","webpack://chris-premades/./scripts/macros/spells/guardianOfFaith.js","webpack://chris-premades/./scripts/macros/spells/guardianOfNature.js","webpack://chris-premades/./scripts/macros/spells/hailOfThorns.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/harnessDivinePower.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/celestial/healingLight.js","webpack://chris-premades/./scripts/macros/spells/healingSpirit.js","webpack://chris-premades/./scripts/macros/classFeatures/sorcerer/stormSorcery/heartOfTheStorm.js","webpack://chris-premades/./scripts/macros/spells/heatMetal.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/hexblade/hexWarrior.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/hexblade/hexbladesCurse.js","webpack://chris-premades/./scripts/macros/spells/hex.js","webpack://chris-premades/./scripts/macros/monsterFeatures/hezrou/hezrou.js","webpack://chris-premades/./scripts/macros/raceFeatures/firbolg/hiddenStep.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/hillStrike.js","webpack://chris-premades/./scripts/macros/monsterFeatures/hobgoblin/martialAdvantage.js","webpack://chris-premades/./scripts/macros/monsterFeatures/hobgoblin/hobgoblin.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfDevotion/holyNimbus.js","webpack://chris-premades/./scripts/macros/spells/holyWeapon.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/homunculusServant.js","webpack://chris-premades/./scripts/macros/monsterFeatures/homunculus/bite.js","webpack://chris-premades/./scripts/macros/monsterFeatures/homunculus/homunculus.js","webpack://chris-premades/./scripts/macros/spells/hungerOfHadar.js","webpack://chris-premades/./scripts/macros/raceFeatures/lizardfolk/hungryJaws.js","webpack://chris-premades/./scripts/macros/spells/huntersMark.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/orderOfTheLycan/hybridTransformation.js","webpack://chris-premades/./scripts/macros/spells/iceStorm.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/beast/infectiousFury.js","webpack://chris-premades/./scripts/macros/spells/insectPlague.js","webpack://chris-premades/./scripts/macros/classFeatures/rogue/inquisitive/insightfulFighting.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfGlory/inspiringSmite.js","webpack://chris-premades/./scripts/macros/monsterFeatures/intellectDevourer/bodyThief.js","webpack://chris-premades/./scripts/macros/monsterFeatures/intellectDevourer/devourIntellect.js","webpack://chris-premades/./scripts/macros/monsterFeatures/intellectDevourer/intellectDevourer.js","webpack://chris-premades/./scripts/macros/spells/investitureOfFlame.js","webpack://chris-premades/./scripts/macros/spells/investitureOfIce.js","webpack://chris-premades/./scripts/macros/spells/investitureOfStone.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/invocations/investmentOfTheChainMaster.js","webpack://chris-premades/./scripts/macros/items/javelinOfLightning.js","webpack://chris-premades/./scripts/macros/monsterFeatures/kobold/packTactics.js","webpack://chris-premades/./scripts/macros/monsterFeatures/kobold/kobold.js","webpack://chris-premades/./scripts/macros/raceFeatures/minotaur/labyrinthineRecall.js","webpack://chris-premades/./scripts/macros/items/lanternOfRevealing.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/echoKnight/legionOfOne.js","webpack://chris-premades/./scripts/macros/monsterFeatures/leucrotta/leucrotta.js","webpack://chris-premades/./scripts/macros/spells/lifeTransference.js","webpack://chris-premades/./scripts/macros/spells/lightningArrow.js","webpack://chris-premades/./scripts/macros/spells/lightningLure.js","webpack://chris-premades/./scripts/macros/raceFeatures/bugbear/longLimbed.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/invocations/maddeningHex.js","webpack://chris-premades/./scripts/macros/feats/maelstromAura.js","webpack://chris-premades/./scripts/macros/spells/magicMissile.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/battleMaster/maneuvers.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/echoKnight/manifestEcho.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/orderOfScribes/manifestMind.js","webpack://chris-premades/./scripts/macros/mechanics/manualRolls.js","webpack://chris-premades/./scripts/macros/spells/massCureWounds.js","webpack://chris-premades/./scripts/macros/items/mastersAmulet.js","webpack://chris-premades/./scripts/macros/classFeatures/sorcerer/metaMagic.js","webpack://chris-premades/./scripts/macros/raceFeatures/dragonborn/metallic/metallicBreathWeapon.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/giant/mightyImpel.js","webpack://chris-premades/./scripts/macros/spells/mirrorImage.js","webpack://chris-premades/./scripts/macros/spells/moonbeam.js","webpack://chris-premades/./scripts/macros/classFeatures/bard/collegeOfCreation/moteOfPotential.js","webpack://chris-premades/./scripts/macros/monsterFeatures/mudMephit/deathBurst.js","webpack://chris-premades/./scripts/macros/monsterFeatures/mudMephit/mudMephit.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/bloodCurses/muddledMind.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/orderOfTheMutant/mutagencraft.js","webpack://chris-premades/./scripts/macros/raceFeatures/aasimar/necroticShroud.js","webpack://chris-premades/./scripts/macros/monsterFeatures/nightwalker/annihilatingAura.js","webpack://chris-premades/./scripts/macros/monsterFeatures/nightwalker/enervatingFocus.js","webpack://chris-premades/./scripts/macros/monsterFeatures/nightwalker/fingerOfDoom.js","webpack://chris-premades/./scripts/macros/monsterFeatures/nightwalker/lifeEater.js","webpack://chris-premades/./scripts/macros/monsterFeatures/nightwalker/nightwalker.js","webpack://chris-premades/./scripts/macros/generic/noConfiguration.js","webpack://chris-premades/./scripts/macros/items/oilOfSharpness.js","webpack://chris-premades/./scripts/macros/raceFeatures/dragonborn/oldBreathWeapon.js","webpack://chris-premades/./scripts/macros/feats/orcishFury.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/schoolOfEvocation/overchannel.js","webpack://chris-premades/./scripts/macros/feats/piercer.js","webpack://chris-premades/./scripts/macros/feats/planarWanderer.js","webpack://chris-premades/./scripts/macros/items/potionOfDiminution.js","webpack://chris-premades/./scripts/macros/items/potionOfFireBreath.js","webpack://chris-premades/./scripts/macros/items/potionOfGiantSize.js","webpack://chris-premades/./scripts/macros/items/potionOfGrowth.js","webpack://chris-premades/./scripts/macros/items/potionOfMaximumPower.js","webpack://chris-premades/./scripts/macros/items/potionOfPoison.js","webpack://chris-premades/./scripts/macros/items/potionOfVitality.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/lifeDomain/preserveLife.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/beastMaster/primalCompanion.js","webpack://chris-premades/./scripts/macros/spells/protectionFromEvilAndGood.js","webpack://chris-premades/./scripts/macros/raceFeatures/aasimar/radiantConsumption.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/celestial/radiantSoul.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/radiantWeapon.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/rage.js","webpack://chris-premades/./scripts/macros/spells/rayOfEnfeeblement.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/deathDomain/reaper.js","webpack://chris-premades/./scripts/macros/raceFeatures/orc/relentlessEndurance.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/battleMaster/relentless.js","webpack://chris-premades/./scripts/macros/generic/removeTemplate.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/repeatingShot.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/invocations/repellingBlast.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/repulsionShield.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/resistantArmor.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/returningWeapon.js","webpack://chris-premades/./scripts/macros/spells/rimesBindingIce.js","webpack://chris-premades/./scripts/macros/items/ringOfSpellStoring.js","webpack://chris-premades/./scripts/macros/classFeatures/bloodHunter/orderOfTheGhostslayer/riteOfTheDawn.js","webpack://chris-premades/./scripts/macros/monsterFeatures/rugOfSmothering/smother.js","webpack://chris-premades/./scripts/macros/monsterFeatures/rugOfSmothering/damageTransfer.js","webpack://chris-premades/./scripts/macros/monsterFeatures/rugOfSmothering/rugOfSmothering.js","webpack://chris-premades/./scripts/macros/classFeatures/paladin/oathOfDevotion/sacredWeapon.js","webpack://chris-premades/./scripts/macros/monsterFeatures/salamander/tail.js","webpack://chris-premades/./scripts/macros/monsterFeatures/salamander/salamander.js","webpack://chris-premades/./scripts/macros/spells/sanctuary.js","webpack://chris-premades/./scripts/macros/feats/savageAttacker.js","webpack://chris-premades/./scripts/macros/generic/saveConditionImmune.js","webpack://chris-premades/./scripts/macros/spells/scorchingRay.js","webpack://chris-premades/./scripts/macros/spells/searingSmite.js","webpack://chris-premades/./scripts/macros/spells/shadowBlade.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowDemon/claws.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowDemon/shadowDemon.js","webpack://chris-premades/./scripts/macros/spells/shadowOfMoil.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowSpirit/terrorFrenzy.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowSpirit/weightOfSorrow.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowSpirit/shadowSpirit.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadowghast/shadowghast.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadow/strengthDrain.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shadow/shadow.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shamblingMound/engulf.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shamblingMound/slam.js","webpack://chris-premades/./scripts/macros/monsterFeatures/shamblingMound/shamblingMound.js","webpack://chris-premades/./scripts/macros/spells/shockingGrasp.js","webpack://chris-premades/./scripts/macros/spells/sickeningRadiance.js","webpack://chris-premades/./scripts/macros/spells/skillEmpowerment.js","webpack://chris-premades/./scripts/macros/feats/slasher.js","webpack://chris-premades/./scripts/macros/spells/sleetStorm.js","webpack://chris-premades/./scripts/macros/classFeatures/rogue/sneakAttack.js","webpack://chris-premades/./scripts/macros/classFeatures/wizard/bladesinging/songOfDefense.js","webpack://chris-premades/./scripts/macros/feats/soothePain.js","webpack://chris-premades/./scripts/macros/monsterFeatures/soulMonger/soulThirst.js","webpack://chris-premades/./scripts/macros/monsterFeatures/soulMonger/waveOfWeariness.js","webpack://chris-premades/./scripts/macros/monsterFeatures/soulMonger/weightOfAges.js","webpack://chris-premades/./scripts/macros/monsterFeatures/soulMonger/soulMonger.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/infusions/spellRefuelingRing.js","webpack://chris-premades/./scripts/macros/spells/spikeGrowth.js","webpack://chris-premades/./scripts/macros/spells/spiritGuardians.js","webpack://chris-premades/./scripts/macros/spells/spiritShroud.js","webpack://chris-premades/./scripts/macros/spells/spiritualWeapon.js","webpack://chris-premades/./scripts/macros/monsterFeatures/sprite/shortbow.js","webpack://chris-premades/./scripts/macros/monsterFeatures/sprite/sprite.js","webpack://chris-premades/./scripts/macros/classFeatures/druid/circleOfStars/starryForm.js","webpack://chris-premades/./scripts/macros/feats/stasisStrike.js","webpack://chris-premades/./scripts/macros/classFeatures/artificer/battleSmith/steelDefender.js","webpack://chris-premades/./scripts/macros/monsterFeatures/stenchKow/stenchKow.js","webpack://chris-premades/./scripts/macros/classFeatures/monk/stillnessOfMind.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/stoneStrike.js","webpack://chris-premades/./scripts/macros/spells/stormSphere.js","webpack://chris-premades/./scripts/macros/feats/strikeOfTheGiants/stormStrike.js","webpack://chris-premades/./scripts/macros/items/stormgirdle.js","webpack://chris-premades/./scripts/macros/classFeatures/sorcerer/shadowMagic/strengthOfTheGrave.js","webpack://chris-premades/./scripts/macros/classFeatures/monk/stunningStrike.js","webpack://chris-premades/./scripts/macros/monsterFeatures/succubus/drainingKiss.js","webpack://chris-premades/./scripts/macros/monsterFeatures/succubus/succubus.js","webpack://chris-premades/./scripts/macros/spells/summonAberration.js","webpack://chris-premades/./scripts/macros/spells/summonBeast.js","webpack://chris-premades/./scripts/macros/spells/summonCelestial.js","webpack://chris-premades/./scripts/macros/spells/summonConstruct.js","webpack://chris-premades/./scripts/macros/spells/summonDraconicSpirit.js","webpack://chris-premades/./scripts/macros/classFeatures/ranger/drakeWarden/summonDrakeCompanion.js","webpack://chris-premades/./scripts/macros/spells/summonElemental.js","webpack://chris-premades/./scripts/macros/spells/summonFey.js","webpack://chris-premades/./scripts/macros/spells/summonFiend.js","webpack://chris-premades/./scripts/macros/spells/summonLesserDemons.js","webpack://chris-premades/./scripts/macros/spells/summonShadowspawn.js","webpack://chris-premades/./scripts/macros/spells/summonUndead.js","webpack://chris-premades/./scripts/macros/classFeatures/druid/circleOfWildfire/summonWildfireSpirit.js","webpack://chris-premades/./scripts/macros/generic/summon.js","webpack://chris-premades/./scripts/macros/spells/synapticStatic.js","webpack://chris-premades/./scripts/macros/spells/tashasOtherworldlyGuise.js","webpack://chris-premades/./scripts/macros/feats/telekinetic.js","webpack://chris-premades/./scripts/macros/spells/teleport.js","webpack://chris-premades/./scripts/macros/classFeatures/warlock/fathomless/tentacleOfTheDeeps.js","webpack://chris-premades/./scripts/macros/spells/thornWhip.js","webpack://chris-premades/./scripts/macros/spells/thunderStep.js","webpack://chris-premades/./scripts/macros/spells/thunderwave.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/tempestDomain/thunderboltStrike.js","webpack://chris-premades/./scripts/macros/spells/thunderousSmite.js","webpack://chris-premades/./scripts/macros/monsterFeatures/tixieTockworth/forceField.js","webpack://chris-premades/./scripts/macros/monsterFeatures/tixieTockworth/tixieTockworth.js","webpack://chris-premades/./scripts/macros/spells/tollTheDead.js","webpack://chris-premades/./scripts/macros/raceFeatures/elf/trance.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/gunslinger/trickShots.js","webpack://chris-premades/./scripts/macros/monsterFeatures/troglodyte/troglodyte.js","webpack://chris-premades/./scripts/macros/monsterFeatures/troll/regeneration.js","webpack://chris-premades/./scripts/macros/monsterFeatures/troll/troll.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/turnUndead.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/twilightDomain/twilightSanctuary.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/twilightDomain/twilightShroud.js","webpack://chris-premades/./scripts/macros/monsterFeatures/undeadSpirit/festeringAura.js","webpack://chris-premades/./scripts/macros/monsterFeatures/undeadSpirit/rottingClaw.js","webpack://chris-premades/./scripts/macros/monsterFeatures/undeadSpirit/undeadSpirit.js","webpack://chris-premades/./scripts/macros/raceFeatures/dhampir/vampiricBite.js","webpack://chris-premades/./scripts/macros/spells/vampiricTouch.js","webpack://chris-premades/./scripts/macros/classFeatures/fighter/gunslinger/viciousIntent.js","webpack://chris-premades/./scripts/macros/feats/vigorOfTheHillGiant.js","webpack://chris-premades/./scripts/macros/spells/vortexWarp.js","webpack://chris-premades/./scripts/macros/items/wandOfTheWarMage.js","webpack://chris-premades/./scripts/macros/spells/wardingBond.js","webpack://chris-premades/./scripts/macros/classFeatures/druid/wildshape.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/wildMagic/wildSurge.js","webpack://chris-premades/./scripts/macros/raceFeatures/shifter/wildhunt.js","webpack://chris-premades/./scripts/macros/spells/witherAndBloom.js","webpack://chris-premades/./scripts/macros/items/wrapsOffDyamak.js","webpack://chris-premades/./scripts/macros/classFeatures/cleric/tempestDomain/wrathOfTheStorm.js","webpack://chris-premades/./scripts/macros/classFeatures/barbarian/zealot/zealousPresence.js","webpack://chris-premades/./scripts/macros/monsterFeatures/zombie/undeadFortitude.js","webpack://chris-premades/./scripts/macros/monsterFeatures/zombie/zombie.js","webpack://chris-premades/./scripts/macros/spells/zoneOfTruth.js","webpack://chris-premades/./scripts/macros.js","webpack://chris-premades/./scripts/utility/effectAuras.js","webpack://chris-premades/./scripts/utility/effect.js","webpack://chris-premades/./scripts/macros/generic/syntheticAttack.js","webpack://chris-premades/./scripts/info.js","webpack://chris-premades/./scripts/utility/npcRandomizer.js","webpack://chris-premades/./scripts/patching.js","webpack://chris-premades/./scripts/macros/mechanics/conditions.js","webpack://chris-premades/./scripts/actor.js","webpack://chris-premades/./scripts/help.js","webpack://chris-premades/./scripts/tours.js","webpack://chris-premades/./scripts/settingsMenu.js","webpack://chris-premades/./scripts/utility/rest.js","webpack://chris-premades/./scripts/utility/templateEffect.js","webpack://chris-premades/./scripts/integrations/vae.js","webpack://chris-premades/./scripts/integrations/templateMacro.js","webpack://chris-premades/./scripts/macros/actions/token.js","webpack://chris-premades/./scripts/settings.js","webpack://chris-premades/./scripts/utility/remoteDialog.js","webpack://chris-premades/./scripts/runAsGM.js","webpack://chris-premades/./scripts/config.js","webpack://chris-premades/./scripts/journal.js","webpack://chris-premades/./scripts/update.js","webpack://chris-premades/./scripts/chat.js","webpack://chris-premades/./scripts/module.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export function addDAEFlags() {\n    let crFlags = Object.keys(CONFIG.DND5E.conditionTypes).map(i => 'flags.chris-premades.CR.' + i);\n    let cvFlags = Object.keys(CONFIG.DND5E.conditionTypes).map(i => 'flags.chris-premades.CV.' + i);\n    DAE.addAutoFields(crFlags.concat(cvFlags));\n    DAE.addAutoFields(['flags.chris-premades.skill.grappleInitiate', 'flags.chris-premades.skill.grappleEscape']);\n}\nexport function colorizeDAETitleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.open-item-effect');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let passiveEffect = !!object.effects.find(i => i.transfer);\n    let transferEffect = !!object.effects.find(i => i.transfer === false);\n    let color;\n    if (passiveEffect && !transferEffect) {\n        color = 'dodgerblue';\n    } else if (transferEffect && !passiveEffect) {\n        color = 'green';\n    } else if (transferEffect && passiveEffect) {\n        color = 'orchid';\n    } else return;\n    headerButton.style.color = color;\n}","//Animations by: eskiemoh\nasync function defaultAnimation(location, token, updates, iteration) {\n    let image = token.texture.src;\n    let imageSize = token.width * token.texture.scaleX;\n    new Sequence()\n        .wait(200)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.magic.mind sliver')\n        .atLocation(token, {'offset':{'y': -((imageSize - 1) / 2)}, 'gridUnits': true})\n        .scaleToObject(1.1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .animateProperty('spriteContainer', 'position.y', {'from': -3, 'to': -0.3, 'duration': 500, 'ease': 'easeOutCubic', 'gridUnits': true})\n        .fadeOut(100)\n        .rotate(-90)\n        .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n        .duration(500)\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n        .waitUntilFinished(-300)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.energy.pulse.yellow')\n        .atLocation(token)\n        .opacity(1)\n        .scaleToObject(1.5)\n        .filter('ColorMatrix', {'saturate': -1, 'hue': 160, 'brightness': 2})\n\n        .effect()\n        .file('jb2a.particles.outward.blue.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': -0.5, 'brightness': 1.1})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness': 50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .animation()\n        .on(token)\n        .fadeIn(500)\n\n        .play();\n}\nasync function celestial(location, token, updates, iteration) {\n    let image = token.texture.src;\n    let imageSize = token.width * token.texture.scaleX;\n    new Sequence()\n        .wait(200)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.magic.mind sliver')\n        .atLocation(token, {'offset': {'y': -((imageSize - 1) / 2)}, 'gridUnits': true})\n        .scaleToObject(1.1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness':10})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .animateProperty('spriteContainer', 'position.y', {'from': -3, 'to': -0.3, 'duration': 500, 'ease': 'easeOutCubic', 'gridUnits': true})\n        .fadeOut(100)\n        .rotate(-90)\n        .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n        .duration(500)\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n        .waitUntilFinished(-500)\n\n        .effect()\n        .file('jb2a.swirling_feathers.outburst.01.orange.1')\n        .atLocation(token)\n        .opacity(1)\n        .scaleToObject(2)\n        .filter('ColorMatrix', {'saturate': 0.25, 'hue': 20, 'brightness': 1.1})\n        .belowTokens()\n        .zIndex(1)\n\n        .wait(200)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.energy.pulse.yellow')\n        .atLocation(token)\n        .opacity(1)\n        .scaleToObject(1.5)\n\n        .effect()\n        .delay(250)\n        .file('jb2a.markers.light.complete.yellow')\n        .attachTo(token)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .belowTokens()\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n        .zIndex(1.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': -0.5, 'brightness': 1.1})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness': 50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .animation()\n        .on(token)\n        .fadeIn(500)\n\n        .play();\n}\nasync function fiend(location, token, updates, iteration) {\n    let image = token.texture.src;\n    let imageSize = token.width * token.texture.scaleX;\n    new Sequence()\n        .wait(200)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.magic.mind sliver')\n        .atLocation(token, {'offset': {'y':-((imageSize - 1) / 2)}, 'gridUnits': true})\n        .scaleToObject(1.1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 0})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .animateProperty('spriteContainer', 'position.y', {'from': -3, 'to': -0.3, 'duration': 500, 'ease': 'easeOutCubic', 'gridUnits': true})\n        .fadeOut(100)\n        .rotate(-90)\n        .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n        .duration(500)\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n        .waitUntilFinished(-300)\n\n        .effect()\n        .file('jb2a.impact.ground_crack.02.dark_red')\n        .atLocation(token)\n        .opacity(1)\n        .randomRotation()\n        .belowTokens()\n        .scaleToObject(2)\n        .zIndex(0.2)\n\n        .wait(100)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.energy.pulse.red')\n        .atLocation(token)\n        .opacity(1)\n        .scaleToObject(1.5)\n\n        .effect()\n        .file('jb2a.particles.outward.red.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': 1, 'brightness': 0.5})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.red')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.red')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness': 0})\n        .filter('Blur', {'blurX': 5, 'blurY': 5 })\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .animation()\n        .on(token)\n        .fadeIn(250)\n\n        .play();\n}\nasync function fire(location, token, updates, iteration) {\n    let image = token.texture.src;\n    new Sequence()\n        .wait(150)\n        \n        .effect()\n        .file('jb2a.impact.fire.01.orange')\n        .atLocation(token, {'offset': {'y': 0}, 'gridUnits': true})\n        .scaleToObject(2.5)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n        \n        .wait(100)\n        \n        .effect()\n        .file('jb2a.ground_cracks.orange.02')\n        .atLocation(token)\n        .fadeIn(500, {'ease': 'easeOutCirc'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        .opacity(1)\n        .randomRotation()\n        .belowTokens()\n        .scaleToObject(1.5)\n        .zIndex(0.2)\n        \n        .effect()\n        .file('jb2a.particles.outward.orange.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': 0, 'brightness': 1})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': -0, 'brightness': 1.1})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        \n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n        \n        .animation()\n        .on(token)\n        .fadeIn(250)\n        \n        .play();\n}\nasync function water(location, token, updates, iteration) {\n    let image = token.texture.src;\n    new Sequence()\n        .wait(150)\n        \n        .effect()\n        .file('jb2a.impact.water.02.blue')\n        .atLocation(token, {'offset': {'y': 0}, 'gridUnits': true})\n        .scaleToObject(2.5)\n        .fadeOut(1500, {'ease': 'easeOutExpo'})\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n        \n        .wait(100)\n        \n        .effect()\n        .file('jb2a.water_splash.circle.01.blue')\n        .atLocation(token)\n        .fadeIn(500, {'ease': 'easeOutCirc'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        .opacity(1)\n        .randomRotation()\n        .belowTokens()\n        .scaleToObject(1.5)\n        .zIndex(0.2)\n        \n        .effect()\n        .file('jb2a.particles.outward.blue.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': 1, 'brightness': 1.2})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': -0, 'brightness': 1.1})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        \n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n        \n        .animation()\n        .on(token)\n        .fadeIn(250)\n        \n        .play();\n}\nasync function air(location, token, updates, iteration) {\n    let image = token.texture.src;\n    new Sequence()\n        .wait(150)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.air.explosion.gray')\n        .atLocation(token, {'offset': {'y': 0}, 'gridUnits': true})\n        .scaleToObject(1.5)\n        .fadeOut(500, {'ease': 'easeOutExpo'})\n        .attachTo(token, {'bindAlpha': false})\n        .filter('ColorMatrix', {'saturate': -1, 'hue': -180})\n        .zIndex(5)\n\n        .wait(100)\n\n        .effect()\n        .file('jb2a.smoke.ring.01.white')\n        .atLocation(token)\n        .fadeIn(500, {'ease': 'easeOutCirc'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        .playbackRate(1.5)\n        .opacity(0.65)\n        .randomRotation()\n        .belowTokens()\n        .scaleToObject(1.5)\n        .zIndex(0.2)\n\n        .effect()\n        .file('jb2a.particles.outward.blue.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 1.2})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': 0, 'brightness': 1.1})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .animation()\n        .on(token)\n        .fadeIn(250)\n\n        .play();\n}\nasync function earth(location, token, updates, iteration) {\n    let image = token.texture.src;\n    new Sequence()\n        .wait(150)\n\n        .effect()\n        .file('jb2a.impact.earth.01.browngreen')\n        .atLocation(token, {'offset': {'y': 0}, 'gridUnits':true})\n        .scaleToObject(2.5)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .attachTo(token, {'bindAlpha': false})\n        .zIndex(5)\n\n        .wait(100)\n\n        .effect()\n        .delay(100)\n        .file('animated-spell-effects-cartoon.smoke.11')\n        .atLocation(token)\n        .playbackRate(0.65)\n        .fadeIn(250)\n        .fadeOut(1500)\n        .scaleToObject(2)\n        .randomRotation()\n        .opacity(0.5)\n        .filter('ColorMatrix', {'brightness': 0.8})\n        .zIndex(4)\n\n        .effect()\n        .file('jb2a.particles.outward.orange.01.03')\n        .atLocation(token)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': 0.75, 'brightness': 0.85})\n        .randomRotation()\n        .scaleToObject(2)\n        .duration(10000)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {saturate: -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.yellow')\n        .atLocation(token)\n        .filter('ColorMatrix', {'saturate': 0.8, 'brightness': 0.85})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness':50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5 })\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .animation()\n        .on(token)\n        .fadeIn(250)\n\n        .play();\n}\nasync function nature(location, token, updates, iteration) {\n    new Sequence()\n        .wait(200)\n        \n        .effect()\n        .file('jb2a.swirling_leaves.complete.01.green.0')\n        .atLocation(token)\n        .scaleToObject(2.25)\n        .scaleIn(0, 4000, {'ease': 'easeOutBack'})\n        .endTime(4500)\n        .fadeOut(750, {'ease': 'easeOutQuint'})\n        .zIndex(6)\n        \n        .wait(1000)\n        \n        .effect()\n        .file('jb2a.sacred_flame.target.green')\n        .atLocation(token)\n        .scaleToObject(2)\n        .scaleIn(0, 4000, {'ease': 'easeOutBack'})\n        .endTime(2500)\n        .fadeOut(500)\n        .zIndex(5)\n        .waitUntilFinished(-1000)\n        \n        .effect()\n        .file('jb2a.plant_growth.04.ring.4x4.complete.greenwhite')\n        .atLocation(token)\n        .opacity(1)\n        .belowTokens()\n        .randomRotation()\n        .scaleToObject(1.5)\n        .zIndex(1.1)\n        \n        .wait(200)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.green')\n        .atLocation(token)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 200})\n        .fadeOut(300, {'ease': 'linear'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.1)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.green')\n        .atLocation(token)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .scaleToObject(1.25)\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .duration(10000)\n        \n        .effect()\n        .file('jb2a.swirling_leaves.outburst.01.greenorange')\n        .atLocation(token)\n        .opacity(1)\n        .scaleToObject(2)\n        .zIndex(1)\n        \n        .animation()\n        .delay(300)\n        .on(token)\n        .fadeIn(500)\n        \n        .play();\n}\nasync function shadow(location, token, updates, iteration) {\n    let image = token.texture.src;\n    new Sequence()\n        .wait(150)\n\n        .effect()\n        .file('jb2a.smoke.puff.centered.dark_black')\n        .atLocation(token)\n        .scaleToObject(1.8 * token.texture.scaleX)\n        .randomRotation()\n        .belowTokens()\n        .scaleIn(0, 2000, {'ease': 'easeOutCubic'})\n        .repeats(5, 500,500)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(token.texture.scaleX)\n        .fadeIn(500, {'ease': 'easeInExpo'})\n        .fadeOut(1500, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness': 0})\n        .filter('Blur', {'blurX': 5, 'blurY': 5})\n        .scaleIn(0, 2000, {'ease': 'easeOutSine'})\n        .duration(3500)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-1000)\n\n        .effect()\n        .file('jb2a.smoke.puff.centered.dark_black')\n        .atLocation(token)\n        .scaleToObject(1.8 * token.texture.scaleX)\n        .randomRotation()\n        .fadeOut(2400)\n        .scaleOut(0.25, 2400, {'ease': 'easeOutSine'})\n\n        .animation()\n        .on(token)\n        .fadeIn(500)\n\n        .play();\n}\nasync function future(location, token, updates, iteration) {\n    let image = token.texture.src;\n    let imageSize = token.width * token.texture.scaleX;\n    new Sequence()\n        .wait(150)\n\n        .effect()\n        .file('jb2a.token_stage.round.blue.02.02')\n        .atLocation(token, {'offset':{'y': 0}, 'gridUnits': true})\n        .scaleToObject(1.25)\n        .filter('ColorMatrix', {'saturate': 1})\n        .belowTokens()\n        .fadeOut(1000)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(10000)\n        .zIndex(0.1)\n\n        .effect()\n        .delay(500)\n        .file('jb2a.token_stage.round.blue.02.02')\n        .atLocation(token, {'offset':{'y': 0}, 'gridUnits': true})\n        .scaleToObject(1)\n        .filter('ColorMatrix', {'saturate': 1})\n        .belowTokens()\n        .fadeOut(1000)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(10000)\n        .zIndex(0.1)\n\n        .wait(1000)\n        \n        .effect()\n        .atLocation(token, {'offset': {'x': -0.25 * imageSize, 'y': -0.25 * imageSize}, 'randomOffset': 0.5, 'gridUnits': true})\n        .shape('rectangle', {\n            'lineSize': 4,\n            'lineColor': '#FFFFFF',\n            'fillColor': '#FFFFFF',\n            'fillAlpha': 1,\n            'width': 0.25 * imageSize,\n            'height': 0.25 * imageSize,\n            'gridUnits': true,\n            'name': 'future'\n        })\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .fadeOut(500)\n        .duration(500)\n        .animateProperty('sprite', 'position.y', { 'from': -0, 'to': -0.5, 'duration': 500, 'gridUnits': true})\n        .repeats(16, 100,100)\n\n        .effect()\n        .atLocation(token, {'randomOffset': 0.5})\n        .shape('rectangle', {\n            'lineSize': 4,\n            'lineColor': '#FFFFFF',\n            'fillColor': '#FFFFFF',\n            'fillAlpha': 1,\n            'width': 0.25 * imageSize,\n            'height': 0.25 * imageSize,\n            'gridUnits': true,\n            'name': 'future2'\n        })\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .fadeOut(500)\n        .duration(500)\n        .animateProperty('sprite', 'position.y', { 'from': 0, 'to': -0.5, 'duration': 500, 'gridUnits': true})\n        .repeats(16, 100,100)\n\n        .wait(100)\n\n        .effect()\n        .file(image)\n        .atLocation(token)\n        .scaleToObject(1, {'considerTokenScale': true})\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1,  'brightness':50})\n        .filter('Blur', {'blurX': 5, 'blurY': 5 })\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .duration(2200)\n        .attachTo(token, {'bindAlpha': false})\n        .waitUntilFinished(-800)\n\n        .effect()\n        .delay(400)\n        .file(`jb2a.particles.outward.white.01.03`)\n        .attachTo(token, {'offset': {'y': 0.2}, 'gridUnits': true, 'followRotation': false})\n        .scaleToObject()\n        .duration(1000)\n        .fadeOut(800)\n        .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'width', {'from': 0, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': 1.0, 'duration': 1000, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'position.y', {'from': -0, 'to': -0.6, 'duration': 1000, 'gridUnits': true})\n        .opacity(1)\n        .zIndex(0.3)\n\n        .animation()\n        .on(token)\n        .fadeIn(500)\n\n        .play();\n}\nexport let summonEffects = {\n    'default': defaultAnimation,\n    'celestial': celestial,\n    'fiend': fiend,\n    'fire': fire,\n    'water': water,\n    'air': air,\n    'earth': earth,\n    'nature': nature,\n    'shadow': shadow,\n    'future': future\n}","import {summonEffects} from './macros/animations/summonEffects.js';\nimport {socket} from './module.js';\nexport let chris = {\n    'dialog': async function _dialog(title, options, content) {\n        if (content) content = '<center>' + content + '</center>';\n        let buttons = options.map(([label, value]) => ({label, value}));\n        let selected = await warpgate.buttonDialog(\n            {\n                buttons,\n                title,\n                content\n            },\n            'column'\n        );\n        return selected;\n    },\n    'numberDialog': async function _numberDialog(title, buttons, options) {\n        let inputs = [];\n        for (let i of options) {\n            inputs.push({\n                'label': i,\n                'type': 'number'\n            });\n        }\n        let config = {\n            'title': title\n        };\n        return await warpgate.menu(\n            {\n                'inputs': inputs,\n                'buttons': buttons\n            },\n            config\n        );\n    },\n    'findEffect': function _findEffect(actor, name) {\n        return actor.effects.getName(name);\n    },\n    'createEffect': async function _createEffect(actor, effectData) {\n        if (effectData.label) {\n            console.warn('The effect \"' + effectData.label + '\" has effect data with a label instead of a name!');\n            effectData.name = effectData.label;\n            delete effectData.label;\n        }\n        if (chris.firstOwner(actor).id === game.user.id) {\n            let effects = await actor.createEmbeddedDocuments('ActiveEffect', [effectData]);\n            return effects[0];\n        } else {\n            return await fromUuid(await socket.executeAsGM('createEffect', actor.uuid, effectData));\n        }\n    },\n    'removeEffect': async function _removeEffect(effect) {\n        if (chris.firstOwner(effect).id === game.user.id) {\n            await effect.delete();\n        } else {\n            await socket.executeAsGM('removeEffect', effect.uuid);\n        }\n    },\n    'updateEffect': async function _updateEffect(effect, updates) {\n        if (game.user.isGM) {\n            await effect.update(updates);\n        } else {\n            updates._id = effect.id;\n            await socket.executeAsGM('updateEffect', effect.uuid, updates);\n        }\n    },\n    'addCondition': async function _addCondition(actor, name, overlay, origin) {\n        await game.dfreds.effectInterface.addEffect(\n            {\n                'effectName': name,\n                'uuid': actor.uuid,\n                'origin': origin,\n                'overlay': overlay\n            }\n        );\n    },\n    'removeCondition': async function _removeCondition(actor, name) {\n        await game.dfreds.effectInterface.removeEffect(\n            {\n                'effectName': name,\n                'uuid': actor.uuid\n            }\n        );\n    },\n    'applyDamage': async function _applyDamage(tokenList, damageValue, damageType) {\n        let targets;\n        if (Array.isArray(tokenList)) {\n            targets = new Set(tokenList);\n        } else {\n            targets = new Set([tokenList]);\n        }\n        await MidiQOL.applyTokenDamage(\n            [\n                {\n                    damage: damageValue,\n                    type: damageType\n                }\n            ],\n            damageValue,\n            targets,\n            null,\n            null\n        );\n    },\n    'applyWorkflowDamage': async function _applyWorkflowDamage(sourceToken, damageRoll, damageType, targets, flavor, itemCardId) {\n        new MidiQOL.DamageOnlyWorkflow(sourceToken.actor, sourceToken, damageRoll.total, damageType, targets, damageRoll, {'flavor': flavor, 'itemCardId': itemCardId});\n    },\n    'findNearby': function _findNearby(tokenDoc, range, disposition, includeIncapacitated = false, includeToken = false) {\n        let dispositionValue;\n        switch (disposition) {\n            case 'ally':\n                dispositionValue = 1;\n                break;\n            case 'neutral':\n                dispositionValue = 0;\n                break;\n            case 'enemy':\n                dispositionValue = -1;\n                break;\n            default:\n                dispositionValue = null;\n        }\n        let options = {'includeIncapacitated': includeIncapacitated, 'includeToken': includeToken};\n        return MidiQOL.findNearby(dispositionValue, tokenDoc, range, options).filter(i => !i.document.hidden);\n    },\n    'addToRoll': async function _addToRoll(roll, addonFormula) {\n        let addonFormulaRoll = await new Roll('0 + ' + addonFormula).evaluate({async: true});\n        game.dice3d?.showForRoll(addonFormulaRoll);\n        for (let i = 1; i < addonFormulaRoll.terms.length; i++) {\n            roll.terms.push(addonFormulaRoll.terms[i]);\n        }\n        roll._total += addonFormulaRoll.total;\n        roll._formula = roll._formula + ' + ' + addonFormula;\n        return roll;\n    },\n    'getSpellDC': function _getSpellDC(item) {\n        let spellDC;\n        let scaling = item.system.save.scaling;\n        if (scaling === 'spell') {\n            spellDC = item.actor.system.attributes.spelldc;\n        } else  if (scaling != 'flat') {\n            spellDC = item.actor.system.abilities[scaling].dc;\n        } else {\n            spellDC = item.system.save.dc;\n            if (!spellDC) spellDC = 10;\n        }\n        return spellDC;\n    },\n    'getSpellMod': function _getSpellMod(item) {\n        let spellMod;\n        let scaling = item.system.save.scaling;\n        if (scaling === 'spell') {\n            spellMod = item.actor.system.abilities[item.actor.system.attributes.spellcasting].mod;\n        } else {\n            spellMod = item.actor.system.abilities[scaling].mod;\n        }\n        return spellMod;\n    },\n    'selectTarget': async function _selectTarget(title, buttons, targets, returnUuid, type, selectOptions, fixTargets, description, coverToken, reverseCover) {\n        let generatedInputs = [];\n        let isFirst = true;\n        let number = 1;\n        for (let i of targets) {\n            let name;\n            if (game.settings.get('chris-premades', 'Show Names')) {\n                name = i.document.name;\n            } else {\n                if (i.document.disposition <= 0) {\n                    name = 'Unknown Target (' + number + ')';\n                    number++;\n                } else {\n                    name = i.document.name;\n                }\n            }\n            if (coverToken && !reverseCover) {\n                name += ' [' + chris.checkCover(coverToken, i, undefined, true) + ']';\n            } else if (coverToken) {\n                name += ' [' + chris.checkCover(i, coverToken, undefined, true) + ']';\n            }\n            let texture = i.document.texture.src;\n            let html = `<img src=\"` + texture + `\" id=\"` + i.id + `\" style=\"width:40px;height:40px;vertical-align:middle;\"><span> ` + name + `</span>`;\n            let value = i.id;\n            if (returnUuid) value = i.document.uuid;\n            if (type === 'multiple') {\n                generatedInputs.push({\n                    'label': html,\n                    'type': 'checkbox',\n                    'options': false,\n                    'value': value\n                });\n            } else if (type === 'one') {\n                generatedInputs.push({\n                    'label': html,\n                    'type': 'radio',\n                    'options': ['group1', isFirst],\n                    'value': value\n                });\n                isFirst = false;\n            } else if (type === 'number') {\n                generatedInputs.push({\n                    'label': html,\n                    'type': 'number'\n                });\n            } else if (type === 'select') {\n                generatedInputs.push({\n                    'label': html,\n                    'type': 'select',\n                    'options': selectOptions,\n                    'value': value\n                });\n            } else return {'buttons': false};\n        }\n        if (fixTargets) {\n            generatedInputs.push({\n                'label': 'Skip Dead & Unconscious?',\n                'type': 'checkbox',\n                'options': true,\n                'value': true\n            });\n        }\n        if (description) generatedInputs.unshift({\n            'label': description,\n            'type': 'info'\n        });\n        function dialogRender(html) {\n            let trs = html[0].getElementsByTagName('tr');\n            if (type != 'select') {\n                for (let t of trs) {\n                    t.style.display = 'flex';\n                    t.style.flexFlow = 'row-reverse';\n                    t.style.alignItems = 'center';\n                    t.style.justifyContent = 'flex-end';\n                    if (type === 'one') t.addEventListener('click', function () {t.getElementsByTagName('input')[0].checked = true});\n                }\n            }\n            let ths = html[0].getElementsByTagName('th');\n            for (let t of ths) {\n                t.style.width = 'auto';\n                t.style.textAlign = 'left';\n            }\n            let tds = html[0].getElementsByTagName('td');\n            for (let t of tds) {\n                t.style.textAlign = 'center';\n                t.style.paddingRight = '5px';\n                if (t.attributes?.colspan?.value == 2) continue;\n                t.style.width = '50px';\n            }\n            let imgs = html[0].getElementsByTagName('img');\n            for (let i of imgs) {\n                i.style.border = 'none';\n                i.addEventListener('click', async function () {\n                    await canvas.ping(canvas.tokens.get(i.getAttribute('id')).document.object.center);\n                });\n                i.addEventListener('mouseover', function () {\n                    let targetToken = canvas.tokens.get(i.getAttribute('id'));\n                    targetToken.hover = true;\n                    targetToken.refresh();\n                });\n                i.addEventListener('mouseout', function () {\n                    let targetToken = canvas.tokens.get(i.getAttribute('id'));\n                    targetToken.hover = false;\n                    targetToken.refresh();\n                });\n            }\n        }\n        let config = {\n            'title': title,\n            'render': dialogRender\n        };\n        let selection = await warpgate.menu({'inputs': generatedInputs, 'buttons': buttons}, config);\n        if (!selection.buttons) return {'buttons': false};\n        if (description) selection.inputs?.shift();\n        if (type != 'number' && type != 'select') {\n            for (let i = 0; i < (!fixTargets ? selection.inputs.length : selection.inputs.length - 1); i++) {\n                if (selection.inputs[i]) selection.inputs[i] =  generatedInputs[description ? i + 1 : i].value;\n            }\n        }\n        return selection;\n    },\n    'checkTrait': function _checkTrait(actor, type, trait) {\n        return actor.system.traits[type].value.has(trait);\n    },\n    'functionToString': function _functiongToString(input) {\n        return `(${input.toString()})()`;\n    },\n    'getItemFromCompendium': async function _getItemFromCompendium(key, name, ignoreNotFound, packFolderId) {\n        const gamePack = game.packs.get(key);\n        if (!gamePack) {\n            ui.notifications.warn('Invalid compendium specified!');\n            return false;\n        }\n        let packIndex = await gamePack.getIndex({'fields': ['name', 'type', 'folder']});\n        let match = packIndex.find(item => item.name === name && (!packFolderId || (packFolderId && item.folder === packFolderId)));\n        if (match) {\n            return (await gamePack.getDocument(match._id))?.toObject();\n        } else {\n            if (!ignoreNotFound) ui.notifications.warn('Item not found in specified compendium! Check spelling?');\n            return undefined;\n        }\n    },\n    'raceOrType': function _raceOrType(entity) {\n        return MidiQOL.typeOrRace(entity);\n    },\n    'getItemDescription': function _getItemDescription(key, name) {\n        let journalEntry = game.journal.getName(key);\n        if (!journalEntry) {\n            ui.notifications.error('Item descriptions journal entry not found!');\n            return;\n        }\n        let page = journalEntry.pages.getName(name);\n        if (!page) {\n            ui.notifications.warn('Item description not found in journal!');\n            return;\n        }\n        let description = page.text.content;\n        return description;\n    },\n    'getDistance': function _getDistance(sourceToken, targetToken, wallsBlock) {\n        return MidiQOL.computeDistance(sourceToken, targetToken, wallsBlock);\n    },\n    'totalDamageType': function _totalDamageType(actor, damageDetail, type) {\n        let total = 0;\n        let immune = chris.checkTrait(actor, 'di', type);\n        if (immune) return 0;\n        for (let i of damageDetail) {\n            if (i.type.toLowerCase() === type.toLowerCase()) total += i.damage;\n        }\n        let resistant = chris.checkTrait(actor, 'dr', type);\n        if (resistant) total = Math.floor(total / 2);\n        return total;\n    },\n    'getEffectCastLevel': function _getEffectCastLevel(effect) {\n        return effect.flags['midi-qol']?.castData?.castLevel;\n    },\n    'getRollDamageTypes': function _getRollDamageTypes(damageRoll) {\n        let types = new Set();\n        for (let i of damageRoll.terms) {\n            if (i.flavor != '') types.add(i.flavor.toLowerCase());\n        }\n        return types;\n    },\n    'perTurnCheck': function _perTurnCheck(originItem, type, name, ownTurnOnly, tokenId) {\n        if (!chris.inCombat()) return true;\n        if (ownTurnOnly && (tokenId != game.combat.current.tokenId)) return false;\n        let currentTurn = game.combat.round + '-' + game.combat.turn;\n        let previousTurn = originItem.flags['chris-premades']?.[type]?.[name]?.turn;\n        if (currentTurn != previousTurn) return true;\n        return false;\n    },\n    'setTurnCheck': async function _setTurnCheck(originItem, type, name, reset) {\n        let turn = '';\n        if (chris.inCombat() && !reset) turn = game.combat.round + '-' + game.combat.turn;\n        await originItem.setFlag('chris-premades', type + '.' + name + '.turn', turn);\n    },\n    'tokenInTemplate': function _tokenInTemplate(token, template) {\n        let containedTokens = game.modules.get('templatemacro').api.findContained(template);\n        let foundToken = containedTokens.find(i => i === token.id);\n        return foundToken;\n    },\n    'tokenTemplates': function _tokenTemplates(token) {\n        return game.modules.get('templatemacro').api.findContainers(token);\n    },\n    'templateTokens': function _templateTokens(template) {\n        return game.modules.get('templatemacro').api.findContained(template);\n    },\n    'findGrids': function _findGrids(previousCoords, coords, templateDoc) {\n        return game.modules.get('templatemacro').api.findGrids(previousCoords, coords, templateDoc);\n    },\n    'inCombat': function _inCombat() {\n        return !(game.combat === null || game.combat === undefined || game.combat?.started === false);\n    },\n    'addTempItem': async function _addTempItem(actor, itemData, itemID, category, favorite, itemNumber) {\n        if (!itemData.flags['chris-premades']) itemData.flags['chris-premades'] = {}\n        itemData.flags['chris-premades'].tempItem = {\n            'source': itemID,\n            'itemNumber': itemNumber\n        }\n        if (category) itemData.flags['custom-character-sheet-sections'] = {\n            'sectionName': category\n        };\n        if (favorite) itemData.flags['tidy5e-sheet'] = {\n            'favorite': true\n        };\n        await actor.createEmbeddedDocuments('Item', [itemData]);\n    },\n    'removeTempItems': async function _removeTempItems(actor, itemID) {\n        let items = actor.items.filter(item => item.flags['chris-premades']?.tempItem?.source === itemID);\n        for (let i of items) {\n            await i.delete();\n        }\n    },\n    'getTempItem': function _getTempItem(actor, itemID, itemNumber) {\n        return actor.items.find(item => item.flags['chris-premades']?.tempItem?.source === itemID && item.flags['chris-premades']?.tempItem?.itemNumber === itemNumber);\n    },\n    'getCompendiumItemDescription': async function _getCompendiumItemDescription(name) {\n        let itemData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Item Compendium'), name, false);\n        if (itemData) return itemData.system.description.value;\n    },\n    'updateTargets': function _updateTargets(targets) {\n        game.user.updateTokenTargets(targets);\n    },\n    'increaseExhaustion': async function _increaseExhaustion(actor, originUuid) {\n        let effect = actor.effects.find(eff => eff.name.includes('Exhaustion'));\n        if (!effect) {\n            await chris.addCondition(actor, 'Exhaustion 1', false, originUuid);\n            return;\n        }\n        let level = Number(effect.name.substring(11));\n        if (isNaN(level)) return;\n        if (level >= 5) {\n            await chris.addCondition(actor, 'Dead', true, originUuid);\n            return;\n        }\n        let conditionName = effect.name.substring(0, 11) + (level + 1);\n        await chris.removeEffect(effect);\n        await chris.addCondition(actor, conditionName, false, originUuid);\n    },\n    'itemDuration': function _itemDuration(item) {\n        return DAE.convertDuration(item.system.duration, chris.inCombat());\n    },\n    'getCriticalFormula': function _getCriticalFormula(formula) {\n        return new CONFIG.Dice.DamageRoll(formula, {}, {'critical': true, 'powerfulCritical': game.settings.get('dnd5e', 'criticalDamageMaxDice'), 'multiplyNumeric': game.settings.get('dnd5e', 'criticalDamageModifiers')}).formula;\n    },\n    'getSize': function _getSize(actor, sizeToString) {\n        let sizeValue;\n        let sizeString;\n        switch (actor.system.traits.size) {\n            case 'tiny':\n                sizeValue = 0;\n                sizeString = 'tiny';\n                break;\n            case 'sm':\n                sizeValue = 1;\n                sizeString = 'small';\n                break;\n            case 'med':\n                sizeValue = 2;\n                sizeString = 'medium';\n                break;\n            case 'lg':\n                sizeValue = 3;\n                sizeString = 'large';\n                break;\n            case 'huge':\n                sizeValue = 4;\n                sizeString = 'huge';\n                break;\n            case 'grg':\n                sizeValue = 5;\n                sizeString = 'gargantuan'\n                break;\n        }\n        if (sizeToString) {\n            return sizeString;\n        } else {\n            return sizeValue;\n        }\n    },\n    'sizeStringValue': function _sizeStringValue(sizeString){\n        let sizeValue;\n        switch (sizeString.toLowerCase()) {\n            case 'tiny':\n                sizeValue = 0;\n                break;\n            case 'small':\n                sizeValue = 1;\n                break;\n            case 'medium':\n                sizeValue = 2;\n                break;\n            case 'large':\n                sizeValue = 3;\n                break;\n            case 'huge':\n                sizeValue = 4;\n                break;\n            case 'gargantuan':\n                sizeValue = 5;\n                break;\n            case 'sm':\n                sizeValue = 1;\n                break;\n            case 'med':\n                sizeValue = 2;\n                break;\n            case 'lg':\n                sizeValue = 3;\n                break;\n            case 'grg':\n                sizeValue = 5;\n                break;\n        }\n        return sizeValue;\n    },\n    'aimCrosshair': async function _aimCrosshair(token, maxRange, icon, interval, size) {\n        let distance = 0;\n        let ray;\n        let checkDistance = async (crosshairs) => {\n            while (crosshairs.inFlight) {\n                await warpgate.wait(100);\n                ray = new Ray(token.center, crosshairs);\n                distance = canvas.grid.measureDistances([{ray}], {'gridSpaces': true})[0];\n                if (token.checkCollision(ray.B, {'origin': ray.A, 'type': 'move', 'mode': 'any'}) || distance > maxRange) {\n                    crosshairs.icon = 'icons/svg/hazard.svg';\n                } else {\n                    crosshairs.icon = icon;\n                }\n                crosshairs.draw();\n                crosshairs.label = distance + '/' + maxRange + 'ft.';\n            }\n        }\n        let callbacks = {\n            'show': checkDistance\n        }\n        let options = {\n            'size': size,\n            'icon': icon,\n            'label': '0 ft.',\n            'interval': interval\n        }\n        if (!maxRange) return await warpgate.crosshairs.show(options);\n        return await warpgate.crosshairs.show(options, callbacks);\n    },\n    'getConfiguration': function _getConfiguration(item, key) {\n        let keyName = key.toLowerCase().split(' ').join('-').toLowerCase();\n        let keyItem = item.flags['chris-premades']?.configuration?.[keyName];\n        if (keyItem != undefined) return keyItem === '' ? undefined : keyItem;\n        let itemName = item.flags['chris-premades']?.info?.name ?? item.name;\n        let keyDefault = CONFIG.chrisPremades.itemConfiguration?.[itemName]?.text?.[keyName]?.default ?? CONFIG.chrisPremades.itemConfiguration?.[itemName]?.select?.[keyName]?.default ?? CONFIG.chrisPremades.itemConfiguration?.[itemName]?.checkbox?.[keyName]?.default ?? CONFIG.chrisPremades.itemConfiguration?.[itemName]?.number?.[keyName]?.default;\n        return keyDefault === '' ? undefined : keyDefault;\n    },\n    'setConfiguration': async function _setConfiguration(item, key, value) {\n        return await item.setFlag('chris-premades', 'configuration.' + key.toLowerCase().split(' ').join('-').toLowerCase(), value);\n    },\n    'updateCombatant': async function _updateCombatant(combatant, updates) {\n        if (game.user.isGM) {\n            await combatant.update(updates);\n        } else {\n            await socket.executeAsGM('updateCombatant', combatant.id, updates);\n        }\n    },\n    'getCombatant': function _getCombatant(token) {\n        return game.combat?.combatants?.find(i => i.tokenId === token.id);\n    },\n    'remoteDialog': async function _remoteDialog(title, options, userId, content) {\n        if (userId === game.user.id) return await chris.dialog(title, options, content);\n        return await socket.executeAsUser('remoteDialog', userId, title, options, content)\n    },\n    'firstOwner': function _firstOwner(document) {\n        return warpgate.util.firstOwner(document);\n    },\n    'jb2aCheck': function _jb2aCheck() {\n        let patreon = game.modules.get('jb2a_patreon')?.active;\n        let free = game.modules.get('JB2A_DnD5e')?.active;\n        if (patreon && free) {\n            ui.notifications.info('Both JB2A Modules are Active Please Disable the Free Version.');\n            return 'patreon';\n        }\n        if (patreon) return 'patreon';\n        if (free) return 'free';\n        ui.notifications.info('No JB2A Module Active');\n        return false;\n    },\n    'aseCheck': function _aseCheck() {\n        let cartoon = game.modules.get('animated-spell-effects-cartoon')?.active;\n        return cartoon;\n    },\n    'selectDocument': async function selectDocument(title, documents, useUuids) {\n        return await new Promise(async (resolve) => {\n            let buttons = {},\n                dialog;\n            for (let i of documents) {\n                buttons[i.name] = {\n                    label: `<img src='${i.img}' width='50' height='50' style='border: 0px; float: left'><p style='padding: 1%; font-size: 15px'> ${i.name} </p>`,\n                    callback: () => {\n                        if (useUuids) {\n                            resolve([i.uuid]);\n                        } else {\n                            resolve([i])\n                        }\n                    }\n                }\n            }\n            let height = (Object.keys(buttons).length * 56 + 46);\n            if (Object.keys(buttons).length > 14 ) height = 850;\n            dialog = new Dialog(\n                {\n                    title: title,\n                    buttons,\n                    close: () => resolve(false)\n                },\n                {\n                    height: height\n                }\n            );\n            await dialog._render(true);\n            dialog.element.find(\".dialog-buttons\").css({\n                \"flex-direction\": 'column',\n            })\n        });\n    },\n    'selectDocuments': async function selectDocuments(title, documents, useUuids) {\n        return await new Promise(async (resolve) => {\n            let buttons = {cancel: {'label': `Cancel`, callback: () => resolve(false)}, 'confirm': {'label': `Confirm`, callback: (html) => getDocuments(html, documents)}},\n                dialog;\n            let content = `<form>`;\n            content += `<datalist id = 'defaultNumbers'>`;\n            for (let i = 0; i < 33; i++) {\n                content += `<option value = '${i}'></option>`\n            }\n            content += `</datalist>`;\n            for (let i = 0; documents.length > i; i++) {\n                content += \n                    `<div class = 'form-group'>\n                        <input type='number' id='${i}' name='${documents[i].name}' placeholder='0' list='defaultNumbers' style='max-width: 50px; margin-left: 10px'/>\n                        <label> \n                            <img src='${documents[i].img}' width='50' height='50' style='border:1px solid gray; border-radius: 5px; float: left; margin-left: 20px; margin-right: 10px'>\n                            <p style='padding: 1%; text-align: center; font-size: 15px;'> ${documents[i].name}` + (documents[i].system?.details?.cr != undefined ? ` (CR ${chris.decimalToFraction(documents[i].system?.details?.cr)})` : ``) + `</p>\n                        </label>\n                    </div>\n                `;\n            }\n            content += `</form>`;\n            let height = (documents.length * 53 + 83);\n            if (documents.length > 14 ) height = 850;\n            dialog = new Dialog(\n                {\n                    title: title,\n                    content: content,\n                    buttons: buttons,\n                    close: () => resolve(false)\n                },\n                {\n                    height: height\n                }\n            );\n            await dialog._render(true);\n            function getDocuments(html, documents) {\n                let returns = [];\n                for (let i = 0; documents.length > i; i++) {\n                    let current = html[0].querySelector(`input[id='${i}']`)?.value;\n                    if (current > 0) {\n                        for (let j = 0; current > j; j++) {\n                            if (useUuids) {\n                                returns.push(documents[i].uuid);\n                            } else {\n                                returns.push(documents[i]);\n                            }\n                        }\n                    }\n                }\n                resolve(returns);\n            }\n        });\n    },\n    'remoteDocumentDialog': async function _remoteDocumentsDialog(userId, title, documents) {\n        if (userId === game.user.id) return await chris.selectDocument(title, documents);\n        let uuids = await socket.executeAsUser('remoteDocumentDialog', userId, title, documents.map(i => i.uuid));\n        if (!uuids) return false;\n        let returns = [];\n        for (let i of uuids) {\n            returns.push(await fromUuid(i));\n        }\n        return returns;\n    },\n    'remoteDocumentsDialog': async function _remoteDocumentsDialog(userId, title, documents) {\n        if (userId === game.user.id) return await chris.selectDocuments(title, documents);\n        let uuids = await socket.executeAsUser('remoteDocumentsDialog', userId, title, documents.map(i => i.uuid));\n        if (!uuids) return false;\n        let returns = [];\n        for (let i of uuids) {\n            returns.push(await fromUuid(i));\n        }\n        return returns;\n    },\n    'getItem': function _getItem(actor, name) {\n        return actor.items.find(i => i.flags['chris-premades']?.info?.name === name);\n    },\n    'rollRequest': async function _rollRequest(token, request, ability) {\n        let userID = chris.firstOwner(token).id;\n        let data = {\n            'targetUuid': token.document.uuid,\n            'request': request,\n            'ability': ability\n        };\n        return await MidiQOL.socket().executeAsUser('rollAbility', userID, data);\n    },\n    'remoteAimCrosshair': async function _remoteAimCrosshair(token, maxRange, icon, interval, size, userId) {\n        if (userId === game.user.id) return await chris.aimCrosshair(token, maxRange, icon, interval, size);\n        return await socket.executeAsUser('remoteAimCrosshair', userId, token.document.uuid, maxRange, icon, interval, size);\n    },\n    'menu': async function _menu(title, buttons, inputs, useSpecialRender, info, header, extraOptions = {}) {\n        function render(html) {\n            let ths = html[0].getElementsByTagName('th');\n            for (let t of ths) {\n                t.style.width = 'auto';\n                t.style.textAlign = 'left';\n            }\n            let tds = html[0].getElementsByTagName('td');\n            for (let t of tds) {\n                t.style.textAlign = 'center';\n                t.style.paddingRight = '5px';\n                if (t.attributes?.colspan?.value == 2) continue;\n                t.style.width = '50px';\n            }\n        }\n        let newInputs = duplicate(inputs);\n        if (header) newInputs.unshift({'label': header, 'type': 'header'});\n        if (info) newInputs.unshift({'label': info, 'type': 'info'});\n        let options = {'title': title};\n        options = mergeObject(options, extraOptions);\n        if (useSpecialRender) options.render = render;\n        let selection = await warpgate.menu({'inputs': newInputs, 'buttons': buttons}, options);\n        if (header) selection?.inputs?.shift();\n        if (info) selection?.inputs?.shift();\n        return selection;\n    },\n    'remoteMenu': async function _remoteMenu(title, buttons, inputs, useSpecialRender, userId, info, header, extraOptions) {\n        if (userId === game.user.id) return await chris.menu(title, buttons, inputs, useSpecialRender, info, header, extraOptions);\n        return await socket.executeAsUser('remoteMenu', userId, title, buttons, inputs, useSpecialRender, info, header, extraOptions);\n    },\n    'decimalToFraction': function _decimalToFraction(decimal) {\n        if (!decimal) return 0;\n        if (Number(decimal) >= 1) return Number(decimal);\n        return '1/' + 1 / Number(decimal);\n    },\n    'animationCheck': function _animationCheck(item) {\n        if (item.flags?.autoanimations?.isEnabled || item.flags['chris-Premades']?.info?.hasAnimation) return true;\n        let state = false;\n        let name = item.name;\n        let autorecSettings = {\n            melee: game.settings.get('autoanimations', 'aaAutorec-melee'),\n            range: game.settings.get('autoanimations', 'aaAutorec-range'),\n            ontoken: game.settings.get('autoanimations', 'aaAutorec-ontoken'),\n            templatefx: game.settings.get('autoanimations', 'aaAutorec-templatefx'),\n            aura: game.settings.get('autoanimations', 'aaAutorec-aura'),\n            preset: game.settings.get('autoanimations', 'aaAutorec-preset'),\n            aefx: game.settings.get('autoanimations', 'aaAutorec-aefx'),\n        }\n        Object.entries(autorecSettings).forEach(setting => setting[1].forEach(autoRec => name.toLowerCase().includes(autoRec.label.toLowerCase()) ? state = true : ''));\n        return state;\n    },\n    'createTemplate': async function _createTemplate(templateData, returnTokens) {\n        let [template] = await canvas.scene.createEmbeddedDocuments('MeasuredTemplate', [templateData]);\n        if (!returnTokens) return template;\n        await warpgate.wait(200);\n        let tokens = await game.modules.get('templatemacro').api.findContained(template).map(t => template.parent.tokens.get(t));\n        return {'template': template, 'tokens': tokens};\n    },\n    'placeTemplate': async function _placeTemplate(templateData, returnTokens) {\n        let templateDoc = new CONFIG.MeasuredTemplate.documentClass(templateData, {'parent': canvas.scene});\n        let template = new game.dnd5e.canvas.AbilityTemplate(templateDoc);\n        let finalTemplate = false;\n        try {\n            [finalTemplate] = await template.drawPreview();\n        } catch {};\n        if (!returnTokens) return finalTemplate;\n        if (!finalTemplate) return {'template': null, 'tokens': []};\n        await warpgate.wait(100);\n        let tokens = await game.modules.get('templatemacro').api.findContained(finalTemplate).map(t => finalTemplate.parent.tokens.get(t));\n        return {'template': finalTemplate, 'tokens': tokens};\n    },\n    'animationCheck': async function _animationCheck(item) {\n        if (item.flags?.autoanimations?.isEnabled || item.flags['chris-Premades']?.info?.hasAnimation) return true;\n        let name = item.name;\n        let autorecSettings = [\n            game.settings.get('autoanimations', 'aaAutorec-melee'),\n            game.settings.get('autoanimations', 'aaAutorec-range'),\n            game.settings.get('autoanimations', 'aaAutorec-ontoken'),\n            game.settings.get('autoanimations', 'aaAutorec-templatefx'),\n            game.settings.get('autoanimations', 'aaAutorec-aura'),\n            game.settings.get('autoanimations', 'aaAutorec-preset'),\n            game.settings.get('autoanimations', 'aaAutorec-aefx')\n        ]\n        return autorecSettings.some(setting => setting.some(autoRec => name.toLowerCase().includes(autoRec.label.toLowerCase())));\n    },\n    'pushToken': async function _pushToken(sourceToken, targetToken, distance) {\n        let knockBackFactor;\n        let ray;\n        let newCenter;\n        let hitsWall = true;\n        while (hitsWall) {\n            knockBackFactor = distance / canvas.dimensions.distance;\n            ray = new Ray(sourceToken.center, targetToken.center);\n            if (ray.distance === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                return;\n            }\n            newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n            hitsWall = targetToken.checkCollision(newCenter, {'origin': ray.A, 'type': 'move', 'mode': 'any'});\n            if (hitsWall) {\n                distance += distance > 0 ? -5 : 5;\n                if (distance === 0) {\n                    ui.notifications.info('Target is unable to be moved!');\n                    return;\n                }\n            }\n        }\n        newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x,\n                'y': newCenter.y\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': 'Move Token',\n            'description': 'Move Token'\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    },\n    'getGridBetweenTokens': function _getGridBetweenTokens(sourceToken, targetToken, distance) {\n        let knockBackFactor = distance / canvas.dimensions.distance;\n        let ray = new Ray(sourceToken.center, targetToken.center);\n        let extra = 1;\n        if (Math.abs(ray.slope) === 1) extra = 1.41;    //todo: Make this less dumb.\n        if (ray.distance === 0) return {'x': sourceToken.x, 'y': sourceToken.y};\n        let newCenter = ray.project(1 + ((canvas.dimensions.size * extra * knockBackFactor) / ray.distance));\n        let cornerPosition = canvas.grid.getTopLeft(newCenter.x, newCenter.y, 1);\n        return {'x': cornerPosition[0], 'y': cornerPosition[1]};\n    },\n    'addDamageDetailDamage': function _addDamageDetailDamage(targetToken, damageTotal, damageType, workflow) {\n        let targetDamage = workflow.damageList.find(t => t.tokenId === targetToken.id);\n        let targetActor = targetToken.actor;\n        if (chris.checkTrait(targetActor, 'di', damageType)) return;\n        if (chris.checkTrait(targetActor, 'dr', damageType)) damageTotal = Math.floor(damageTotal / 2);\n        targetDamage.damageDetail[0].push(\n            {\n                'damage': damageTotal,\n                'type': damageType\n            }\n        );\n        targetDamage.totalDamage += damageTotal;\n        if (workflow.defaultDamageType === 'healing') {\n            targetDamage.newHP += roll.total;\n            targetDamage.hpDamage -= damageTotal;\n            targetDamage.appliedDamage -= damageTotal;\n        } else {\n            targetDamage.appliedDamage += damageTotal;\n            targetDamage.hpDamage += damageTotal;\n            if (targetDamage.oldTempHP > 0) {\n                if (targetDamage.oldTempHP >= damageTotal) {\n                    targetDamage.newTempHP -= damageTotal;\n                } else {\n                    let leftHP = damageTotal - targetDamage.oldTempHP;\n                    targetDamage.newTempHP = 0;\n                    targetDamage.newHP -= leftHP;\n                }\n            } else {\n                targetDamage.newHP -= damageTotal;\n            }\n        }\n    },\n    'removeDamageDetailDamage': function _removeDamageDetailDamage(ditem, targetToken, reduction) {\n        let absorbed = Math.min(ditem.appliedDamage, reduction);\n        let keptDamage = ditem.appliedDamage - absorbed;\n        if (ditem.oldTempHP > 0) {\n            if (keptDamage > ditem.oldTempHP) {\n                ditem.newTempHP = 0;\n                keptDamage -= ditem.oldTempHP;\n                ditem.tempDamage = ditem.oldTempHP;\n            } else {\n                ditem.newTempHP = ditem.oldTempHP - keptDamage;\n                ditem.tempDamage = keptDamage;\n            }\n        }\n        let maxHP = targetToken.actor.system.attributes.hp.max;\n        ditem.hpDamage = Math.clamped(keptDamage, 0, maxHP);\n        ditem.newHP = Math.clamped(ditem.oldHP - keptDamage, 0, maxHP);\n        ditem.appliedDamage = keptDamage;\n        ditem.totalDamage = keptDamage;\n    },\n    'thirdPartyReactionMessage': async function _thirdPartyReactionMessage(user, dialogMessage, key = true) {\n        let playerName = user.name;\n        let lastMessage = game.messages.find(m => m.flags?.['chris-premades']?.thirdPartyReactionMessage);\n        let subMessage = dialogMessage ? 'a dialog selection' : 'a 3rd party reaction';\n        let message = '<hr>Waiting for a ' + subMessage + ' from:<br><b>' + playerName + '</b>';\n        if (lastMessage) {\n            await lastMessage.update({'content': message});\n        } else {\n            await ChatMessage.create({\n                'speaker': {'alias': 'Chris\\'s Premades'},\n                'content': message,\n                'whisper': game.users.filter(u => u.isGM).map(u => u.id),\n                'blind': false,\n                'flags': {\n                    'chris-premades': {\n                        'thirdPartyReactionMessage': key\n                    }\n                }\n            });\n        }\n    },\n    'clearThirdPartyReactionMessage': async function _clearThirdPartyReactionMessage(key = true) {\n        let lastMessage = game.messages.find(m => m.flags?.['chris-premades']?.thirdPartyReactionMessage === key && m.user.id === game.user.id);\n        if (lastMessage) await lastMessage.delete();\n    },\n    'lastGM': function _lastGM() {\n        return game.settings.get('chris-premades', 'LastGM');\n    },\n    'isLastGM': function _isLastGM() {\n        return game.user.id === chris.lastGM() ? true : false;\n    },\n    'nth': function _nth(number) {\n        return number + (['st','nd','rd'][((number+90)%100-10)%10-1]||'th');\n    },\n    'levelOrCR': function _levelOrCR(actor) {\n        return actor.type === 'character' ? actor.system.details.level : actor.system.details.cr ?? 0;\n    },\n    'titleCase': function _titleCase(inputString) {\n        return inputString.toLowerCase().replace(/\\b\\w/g, s => s.toUpperCase());\n    },\n    'checkCover': function _checkCover(token, target, item, displayName) {\n        let cover = MidiQOL.computeCoverBonus(token, target, item);\n        if (!displayName) return cover;\n        switch (cover) {\n            case 0:\n                return 'No Cover';\n            case 2:\n                return 'Half Cover';\n            case 5:\n                return 'Three-Quarters Cover';\n            case 999:\n                return 'Full Cover'\n            default:\n                return 'Unknown Cover';\n        }\n    },\n    'canSense': function _canSense(token, target) {\n        return MidiQOL.canSense(token, target);\n    },\n    'gmDialogMessage': async function _gmDialogMessage() {\n        let lastMessage = game.messages.find(m => m.flags?.['chris-premades']?.gmDialogMessage);\n        let message = '<hr>Waiting for GM dialogue selection...';\n        if (lastMessage) {\n            await lastMessage.update({'content': message});\n        } else {\n            ChatMessage.create({\n                'speaker': {'alias': name},\n                'content': message,\n                'whisper': game.users.filter(u => u.isGM).map(u => u.id),\n                'blind': false,\n                'flags': {\n                    'chris-premades': {\n                        'gmDialogMessage': true\n                    }\n                }\n            });\n        }\n    },\n    'clearGMDialogMessage': async function _clearThirdPartyReactionMessage() {\n        let lastMessage = game.messages.find(m => m.flags?.['chris-premades']?.gmDialogMessage && m.user.id === game.user.id);\n        if (lastMessage) await lastMessage.delete();\n    },\n    'rollItem': async function _rollItem(item, config, options) {\n        return await MidiQOL.completeItemUse(item, config, options);\n    },\n    'remoteRollItem': async function _remoteRollItem(item, config, options, userId) {\n        if (chris.firstOwner(item.actor).id === userId) return await chris.rollItem(item, config, options);\n        return await socket.executeAsUser('rollItem', userId, item.uuid, config, options);\n    },\n    'spawn': async function _spawn(sourceActor, updates = {}, callbacks = {}, summonerToken, range, animation = 'default') {\n        let tokenDocument = await sourceActor.getTokenDocument();\n        let options = {};\n        if (summonerToken?.actor) {\n            options = {\n                'controllingActor': summonerToken.actor,\n                'crosshairs': {\n                    'interval': tokenDocument.width % 2 === 0 ? 1 : -1\n                }\n            };\n        }\n        if (animation != 'none' && !callbacks.post) {\n            let callbackFunction = summonEffects[animation];\n            if (typeof callbackFunction === 'function' && chris.jb2aCheck() === 'patreon' && chris.aseCheck()) {\n                callbacks.post = callbackFunction;\n                setProperty(updates, 'token.alpha', 0);\n            }\n        }\n        if (!callbacks.show) {\n            callbacks.show = async (crosshairs) => {\n                let distance = 0;\n                let ray;\n                while (crosshairs.inFlight) {\n                    await warpgate.wait(100);\n                    ray = new Ray(summonerToken.center, crosshairs);\n                    distance = canvas.grid.measureDistances([{ray}], {'gridSpaces': true})[0];\n                    if (summonerToken.checkCollision(ray.B, {'origin': ray.A, 'type': 'move', 'mode': 'any'}) || distance > range) {\n                        crosshairs.icon = 'icons/svg/hazard.svg';\n                    } else {\n                        crosshairs.icon = tokenDocument.texture.src;\n                    }\n                    crosshairs.draw();\n                    crosshairs.label = distance + '/' + range + 'ft.';\n                }\n            }\n        }\n        return await warpgate.spawn(tokenDocument, updates, callbacks, options);\n    },\n    'safeMutate': async function _safeMutate(actor, updates, callbacks = {}, options = {}) {\n        let tokens = actor.getActiveTokens();\n        let tokenDoc;\n        let remove = false;\n        if (!tokens.length) {\n            if (actor.prototypeToken.actorLink) {\n                let doc = await actor.getTokenDocument({\n                    'x': 0,\n                    'y': 0\n                });\n                let tokenData = doc.toObject();\n                [tokenDoc] = await canvas.scene.createEmbeddedDocuments('Token', [tokenData]);\n                remove = true;\n            } else {\n                ui.notifications.warn('A mutation was attempted on a unlinked actor with no token and has been canceled!');\n                return false;\n            }\n        } else {\n            tokenDoc = tokens[0].document;\n        }\n        await warpgate.mutate(tokenDoc, updates, callbacks, options);\n        if (remove) await tokenDoc.delete();\n        return true;\n    },\n    'safeRevert': async function _safeRevert(actor, mutationName, options) {\n        let tokens = actor.getActiveTokens();\n        let tokenDoc;\n        let remove = false;\n        if (!tokens.length) {\n            if (actor.prototypeToken.actorLink) {\n                let doc = await actor.getTokenDocument({\n                    'x': 0,\n                    'y': 0\n                });\n                let tokenData = doc.toObject();\n                [tokenDoc] = await canvas.scene.createEmbeddedDocuments('Token', [tokenData]);\n                remove = true;\n            } else {\n                ui.notifications.warn('A mutation revert was attempted on a unlinked actor with no token and has been canceled!');\n                return false;\n            }\n        } else {\n            tokenDoc = tokens[0].document;\n        }\n        await warpgate.revert(tokenDoc, mutationName, options);\n        return true;\n    },\n    'vision5e': function _vision5e() {\n        return !!game.modules.get('vision-5e')?.active;\n    },\n    'checkForRoom': function _checkForRoom(token, distance) {\n        let point = {'x': token.center.x, 'y': token.center.y};\n        let padding = token.w / 2 - canvas.grid.size / 2;\n        let pixelDistance = distance * canvas.grid.size + padding;\n        function check(direction) {\n            let newPoint = duplicate(point);\n            switch (direction) {\n                case 'n':\n                    newPoint.y -= pixelDistance;\n                    break;\n                case 'e':\n                    newPoint.x += pixelDistance;\n                    break;\n                case 's':\n                    newPoint.y += pixelDistance;\n                    break;\n                case 'w':\n                    newPoint.x -= pixelDistance;\n                    break;\n            }\n            return token.checkCollision(newPoint, {'origin': point, 'type': 'move', 'mode': 'any'});\n        }\n        return {\n            'n': check('n'),\n            'e': check('e'),\n            's': check('s'),\n            'w': check('w')\n        };\n    },\n    'findDirection': function _findDirection(room) {\n        if (!room.s && !room.e) return 'se';\n        if (!room.n && !room.e) return 'ne';\n        if (!room.s && !room.w) return 'sw';\n        if (!room.w && !room.n) return 'nw';\n        return 'none';\n    },\n    'getCoordDistance': function _getCoordDistance(t1, targetPos) {\n        //Adapted from Midi-Qol\n        if (!canvas || !canvas.scene) return -1;\n        if (!canvas.grid || !canvas.dimensions) return -1;\n        let t2 = {\n            'document': {\n                'height': targetPos.height ?? t1.document.height,\n                'width': targetPos.width ?? t1.document.width,\n                'x': targetPos.x,\n                'y': targetPos.y,\n                'elevation': targetPos.elevation\n            }\n        }\n        if (!t1 || !t2) return -1;\n        if (!canvas || !canvas.grid || !canvas.dimensions) return -1;\n        let t1StartX = t1.document.width >= 1 ? 0.5 : t1.document.width / 2;\n        let t1StartY = t1.document.height >= 1 ? 0.5 : t1.document.height / 2;\n        let t2StartX = t2.document.width >= 1 ? 0.5 : t2.document.width / 2;\n        let t2StartY = t2.document.height >= 1 ? 0.5 : t2.document.height / 2;\n        let t1Elevation = t1.document.elevation ?? 0;\n        let t2Elevation = t2.document.elevation ?? 0;\n        let t1TopElevation = t1Elevation + Math.max(t1.document.height, t1.document.width) * (canvas?.dimensions?.distance ?? 5);\n        let t2TopElevation = t2Elevation + Math.min(t2.document.height, t2.document.width) * (canvas?.dimensions?.distance ?? 5);\n        let x, x1, y, y1, segments = [], rdistance, distance;\n        for (x = t1StartX; x < t1.document.width; x++) {\n            for (y = t1StartY; y < t1.document.height; y++) {\n                let origin = new PIXI.Point(...canvas.grid.getCenter(Math.round(t1.document.x + (canvas.dimensions.size * x)), Math.round(t1.document.y + (canvas.dimensions.size * y))));\n                for (x1 = t2StartX; x1 < t2.document.width; x1++) {\n                    for (y1 = t2StartY; y1 < t2.document.height; y1++) {\n                        let dest = new PIXI.Point(...canvas.grid.getCenter(Math.round(t2.document.x + (canvas.dimensions.size * x1)), Math.round(t2.document.y + (canvas.dimensions.size * y1))));\n                        let r = new Ray(origin, dest);\n                        segments.push({'ray': r});\n                    }\n                }\n            }\n        }\n        if (segments.length === 0) {\n            return -1;\n        }\n        function midiMeasureDistances(segments, options = {}) {\n            if (canvas?.grid?.grid.constructor.name !== \"BaseGrid\" || !options.gridSpaces) {\n                let distances = canvas?.grid?.measureDistances(segments, options);\n                return distances;\n            }\n            let rule = canvas?.grid.diagonalRule;\n            if (!configSettings.gridlessFudge || !options.gridSpaces || ![\"555\", \"5105\", \"EUCL\"].includes(rule)) return canvas?.grid?.measureDistances(segments, options);\n            let nDiagonal = 0;\n            let d = canvas?.dimensions;\n            let grid = canvas?.scene?.grid;\n            if (!d || !d.size) return 0;\n            let fudgeFactor = configSettings.gridlessFudge / d.distance;\n            return segments.map(s => {\n                let r = s.ray;\n                let nx = Math.ceil(Math.max(0, Math.abs(r.dx / d.size) - fudgeFactor));\n                let ny = Math.ceil(Math.max(0, Math.abs(r.dy / d.size) - fudgeFactor));\n                let nd = Math.min(nx, ny);\n                let ns = Math.abs(ny - nx);\n                nDiagonal += nd;\n                if (rule === \"5105\") {\n                    let nd10 = Math.floor(nDiagonal / 2) - Math.floor((nDiagonal - nd) / 2);\n                    let spaces = (nd10 * 2) + (nd - nd10) + ns;\n                    return spaces * d.distance;\n                }\n                else if (rule === \"EUCL\") {\n                    let nx = Math.max(0, Math.abs(r.dx / d.size) - fudgeFactor);\n                    let ny = Math.max(0, Math.abs(r.dy / d.size) - fudgeFactor);\n                    return Math.ceil(Math.hypot(nx, ny) * grid?.distance);\n                }\n                else return Math.max(nx, ny) * grid.distance;\n            });\n        }\n        rdistance = segments.map(ray => midiMeasureDistances([ray], {'gridSpaces': true }));\n        distance = Math.min(...rdistance);\n        let heightDifference = 0;\n        let t1ElevationRange = Math.max(t1.document.height, t1.document.width) * (canvas?.dimensions?.distance ?? 5);\n        if (Math.abs(t2Elevation - t1Elevation) < t1ElevationRange) {\n            heightDifference = 0;\n        } else if (t1Elevation < t2Elevation) {\n            heightDifference = t2Elevation - t1TopElevation;\n        } else if (t1Elevation > t2Elevation) {\n            heightDifference = t1Elevation - t2TopElevation;\n        }\n        let rule = canvas.grid.diagonalRule\n        if (['555', '5105'].includes(rule)) {\n            let nd = Math.min(distance, heightDifference);\n            let ns = Math.abs(distance - heightDifference);\n            distance = nd + ns;\n            let dimension = canvas?.dimensions?.distance ?? 5;\n            if (rule === '5105') distance = distance + Math.floor(nd / 2 / dimension) * dimension;\n        }\n        distance = Math.sqrt(heightDifference * heightDifference + distance * distance);\n        return distance;\n    }\n}","import {chris} from './helperFunctions.js';\nexport async function itemFeatures(item, updates, options, id) {\n    if (!item?.actor) return;\n    let chrisFeatures = item.flags?.['chris-premades']?.equipment;\n    if (!chrisFeatures) return;\n    let currentlyEquipped = updates.system?.equipped ?? item.system.equipped;\n    let currentlyAttuned = updates.system?.attunement ?? item.system.attunement;\n    let currentItems = item.actor.items.filter(i => i.flags?.['chris-premades']?.equipmentFeature?.id === item.id) || [];\n    if (!currentlyAttuned && !currentlyEquipped && currentItems.length === 0) return;\n    let previouslyEquipped = item.system?.equipped;\n    let previouslyAttuned = item.system?.attunement;\n    let previousState = previouslyEquipped && (previouslyAttuned === 0 || previouslyAttuned === 2);\n    let currentState = currentlyEquipped && (currentlyAttuned === 0 || currentlyAttuned === 2);\n    let currentSourceUuid = foundry.utils.getProperty(item, \"flags.core.sourceId\");\n    if (previousState === currentState) return;\n    if (previousState && !currentState) {\n        let removeItems = currentItems;\n        if (removeItems.length === 0) return;\n        let updates = {};\n        for (let i of removeItems) setProperty(updates, 'flags.chris-premades.equipment.uses.' + i.name, i.system.uses);\n        await item.update(updates);\n        await item.actor.deleteEmbeddedDocuments('Item', removeItems.map(i => i.id));\n    } else if (!previousState && currentState) {\n        let addItemsUniqueNames = currentItems.map(i => {return i.flags?.['chris-premades']?.equipmentFeature?.uniqueName});\n        let items = [];\n        for (let i of chrisFeatures.items) {\n            if(addItemsUniqueNames.includes(i.uniqueName)) continue;\n            let itemData = await chris.getItemFromCompendium(i.key, i.name);\n            if (!itemData) continue;\n            itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', i.name);\n            let uses = getProperty(item, 'flags.chris-premades.equipment.uses.' + i.name);\n            if (uses) setProperty(itemData, 'system.uses', uses);\n            setProperty(itemData, 'flags.chris-premades.equipmentFeature.id', item.id);\n            setProperty(itemData, 'flags.core.sourceId', item.uuid || currentSourceUuid);\n            setProperty(itemData, 'system.source.custom', item.name);\n            if (i.uniqueName) setProperty(itemData, 'flags.chris-premades.equipmentFeature.uniqueName', i.uniqueName);\n            else console.warn('chris-premades | You must set a uniqueName for the Chris Premades Equipment', i, item);\n            items.push(itemData);\n        }\n        if (!items.length) return;\n        await item.actor.createEmbeddedDocuments('Item', items);\n    }\n}\nexport async function itemFeaturesDelete(item, options, id) {\n    if (!item.actor) return;\n    let chrisFeatures = item.flags?.['chris-premades']?.equipment;\n    if (!chrisFeatures) return;\n    let currentlyEquipped = item.system.equipped;\n    let currentlyAttuned = item.system.attunement;\n    if (!currentlyEquipped && currentlyAttuned === 1) return;\n    let removeItems = item.actor.items.filter(i => i.flags?.['chris-premades']?.equipmentFeature?.id === item.id);\n    if (removeItems.length === 0) return;\n    await item.actor.deleteEmbeddedDocuments('Item', removeItems.map(i => i.id));\n}\nexport async function applyEquipmentFlag(uuid) {\n    let updates = {\n        'flags.chris-premades.equipment.items': [\n            {\n                'name': 'Crimson Mist',\n                'key': 'chris-premades.CPR Item Features',\n                'uniqueName': 'crimsonMist'\n            }\n        ]\n    };\n    let item = await fromUuid(uuid);\n    if (!item) return;\n    await item.update(updates);\n}","let autoRecs;\nfunction sortAutoRec() {\n    function addItems(setting) {\n        game.settings.get('autoanimations', setting).map(i => i.label.toLowerCase()).forEach(i => autoRecNames.add(i));\n    }\n    let settings = [\n        'aaAutorec-melee',\n        'aaAutorec-range',\n        'aaAutorec-ontoken',\n        'aaAutorec-templatefx',\n        'aaAutorec-aura',\n        'aaAutorec-preset',\n        'aaAutorec-aefx'\n    ];\n    let autoRecNames = new Set();\n    for (let setting of settings) addItems(setting);\n    autoRecs = Array.from(autoRecNames);\n}\nfunction titleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.aaItemSettings');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let isEnabled = object.flags?.autoanimations?.isEnabled ?? true;\n    let isCustomized = object.flags?.autoanimations?.isCustomized ?? false;\n    let itemName = app.object.name.toLowerCase();\n    let autoRec = false;\n    if (autoRecs.find(i => i.includes(itemName))) autoRec = true;\n    let color;\n    if (!isEnabled && !autoRec && !isCustomized) {\n        color = 'red';\n    } else if (isEnabled && isCustomized && !autoRec) {\n        color = 'green';\n    } else if (isEnabled && isCustomized && autoRec) {\n        color = 'dodgerblue';\n    } else if (isEnabled && !isCustomized && autoRec) {\n        color = 'orchid';\n    } else if (!isEnabled && autoRec) {\n        color = 'yellow';\n    } else if (isEnabled && !autoRec) {\n        color = 'orange';\n    } else return;\n    headerButton.style.color = color;\n}\nexport let automatedAnimations = {\n    'titleBarButton': titleBarButton,\n    'sortAutoRec': sortAutoRec,\n    'autoRecs': autoRecs\n}","function titleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.babonus');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let api = game.modules.get('babonus')?.api;\n    if (!api) return;\n    let bonuses = api.getIds(object).length > 0;\n    let effectBonus = !!object.effects.find(i => api.getIds(i).length > 0);\n    let color;\n    if (bonuses && !effectBonus) {\n        color = 'green';\n    } else if (!bonuses && effectBonus) {\n        color = 'dodgerblue';\n    } else if (bonuses && effectBonus) {\n        color = 'orchid';\n    } else return;\n    headerButton.style.color = color;\n}\nfunction daeTitleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.babonus');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let api = game.modules.get('babonus')?.api;\n    if (!api) return;\n    let bonuses = api.getIds(object).length > 0;\n    if (!bonuses) return;\n    headerButton.style.color = 'green';\n}\nfunction actorTitleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.babonus');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let api = game.modules.get('babonus')?.api;\n    if (!api) return;\n    let bonuses = api.getIds(object).length > 0;\n    if (!bonuses) return;\n    headerButton.style.color = 'green';\n}\nfunction spellFeature(item) {\n    return item.type === 'spell' || item.flags?.['chris-premades']?.spell?.castData;\n}\nlet filters = {\n    'spellFeature': spellFeature\n}\nfunction overlappingEffects(bonuses, object, details, hookType) {\n    if (!bonuses.length) return;\n    let overlappingAuras = new Set();\n    for (let i of bonuses) {\n        if (!i.aura.enabled) continue;\n        if (overlappingAuras.has(i.name)) continue;\n        if (i.bonus === '') continue;\n        let auras = bonuses.filter(b => b.name === i.name && i.bonuses.bonus != '');\n        if (auras.length > 1) overlappingAuras.add(i.name);\n    }\n    if (!overlappingAuras.size) return;\n    let removeUuids = [];\n    for (let i of Array.from(overlappingAuras)) {\n        let evaluatedBonuses = bonuses.filter(b => b.name === i && b.bonuses.bonus != '').map(j => ({'uuid': j.uuid, 'value': new Roll(j.bonuses.bonus, j.getRollData()).evaluate({'async': false, 'maximize': true}).total}));\n        let maxValue = Math.max(...evaluatedBonuses.map(i => i.value));\n        let selectedBonus = evaluatedBonuses.find(i => i.value === maxValue);\n        let removed = evaluatedBonuses.filter(i => i.uuid != selectedBonus.uuid);\n        removeUuids.push(...removed.map(i => i.uuid));\n    }\n    removeUuids.forEach(uuid => bonuses.findSplice(bonus => bonus.uuid === uuid));\n}\nexport let buildABonus = {\n    'titleBarButton': titleBarButton,\n    'daeTitleBarButton': daeTitleBarButton,\n    'actorTitleBarButtons': actorTitleBarButton,\n    'filters': filters,\n    'overlappingEffects': overlappingEffects\n}","import {chris} from '../../helperFunctions.js';\nlet animations = {\n    'abj': 'jb2a.magic_signs.circle.02.abjuration.complete.',\n    'con': 'jb2a.magic_signs.circle.02.conjuration.complete.',\n    'div': 'jb2a.magic_signs.circle.02.divination.complete.',\n    'enc': 'jb2a.magic_signs.circle.02.enchantment.complete.',\n    'evo': 'jb2a.magic_signs.circle.02.evocation.complete.',\n    'ill': 'jb2a.magic_signs.circle.02.illusion.complete.',\n    'nec': 'jb2a.magic_signs.circle.02.necromancy.complete.',\n    'trs': 'jb2a.magic_signs.circle.02.transmutation.complete.'\n}\nlet defaults = {\n    'abj': 'blue',\n    'con': 'yellow',\n    'div': 'blue',\n    'enc': 'pink',\n    'evo': 'red',\n    'ill': 'purple',\n    'nec': 'green',\n    'trs': 'yellow'\n};\nexport async function cast(workflow) {\n    if (!workflow.token || workflow.item?.type != 'spell') return;\n    let school = workflow.item.system.school;\n    if (!Object.keys(animations).includes(school)) return;\n    let color = chris.jb2aCheck() === 'patreon' ? game.settings.get('chris-premades', school + '_color') : defaults[school];\n    let animation = animations[school] + color;\n    new Sequence()\n        .effect()\n        .file(animation)\n        .atLocation(workflow.token)\n        .belowTokens()\n        .scaleToObject(2)\n        .playbackRate(2)\n        .play();\n    await warpgate.wait(2000);\n}","const advantageEffectData = {\n    'label': 'Save Advantage',\n    'icon': 'icons/magic/time/arrows-circling-green.webp',\n    'duration': {\n        'turns': 1\n    },\n    'changes': [\n        {\n            'key': 'flags.midi-qol.advantage.ability.save.all',\n            'value': '1',\n            'mode': 5,\n            'priority': 120\n        }\n    ]\n};\nconst disadvantageEffectData = {\n    'label': 'Save Disadvantage',\n    'icon': 'icons/magic/time/arrows-circling-green.webp',\n    'duration': {\n        'turns': 1\n    },\n    'changes': [\n        {\n            'key': 'flags.midi-qol.disadvantage.ability.save.all',\n            'value': '1',\n            'mode': 5,\n            'priority': 120\n        }\n    ]\n};\nfunction syntheticItemWorkflowOptions(targets, useSpellSlot, castLevel, consume) {\n    return [\n        {\n            'showFullCard': false,\n            'createWorkflow': true,\n            'consumeResource': consume ?? false,\n            'consumeRecharge': consume ?? false,\n            'consumeQuantity': consume ?? false,\n            'consumeUsage': consume ?? false,\n            'consumeSpellSlot': useSpellSlot ?? false,\n            'consumeSpellLevel': castLevel ?? false,\n            'slotLevel': castLevel ?? false\n        },\n        {\n            'targetUuids': targets,\n            'configureDialog': false,\n            'workflowOptions': {\n                'autoRollDamage': 'always',\n                'autoFastDamage': true\n            }\n        }\n    ];\n}\nlet damageTypes;\nfunction damageTypeMenu() {\n    if (!damageTypes) damageTypes = Object.entries(CONFIG.DND5E.damageTypes).filter(i => i[0] != 'midi-none').map(j => [j[1], j[0]]);\n    return damageTypes;\n}\nconst attacks = [\n    'mwak',\n    'rwak',\n    'msak',\n    'rsak'\n];\nconst meleeAttacks = [\n    'mwak',\n    'msak'\n];\nconst rangedAttacks = [\n    'rwak',\n    'rsak'\n];\nconst weaponAttacks = [\n    'mwak',\n    'rwak'\n];\nconst spellAttacks = [\n    'msak',\n    'rsak'\n];\nconst yesNo = [\n    ['Yes', true],\n    ['No', false]\n];\nconst okCancel = [\n    {\n        'label': 'Cancel',\n        'value': false\n    },\n    {\n        'label': 'Ok',\n        'value': true\n    }\n];\nconst yesNoButton = [\n    {\n        'label': 'No',\n        'value': false\n    },\n    {\n        'label': 'Yes',\n        'value': true\n    }\n];\nconst nonDamageTypes = [\n    'healing',\n    'temphp',\n    'midi-none'\n];\nexport let constants = {\n    'syntheticItemWorkflowOptions': syntheticItemWorkflowOptions,\n    'disadvantageEffectData': disadvantageEffectData,\n    'advantageEffectData': advantageEffectData,\n    'damageTypeMenu': damageTypeMenu,\n    'attacks': attacks,\n    'yesNo': yesNo,\n    'okCancel': okCancel,\n    'meleeAttacks': meleeAttacks,\n    'rangedAttacks': rangedAttacks,\n    'weaponAttacks': weaponAttacks,\n    'spellAttacks': spellAttacks,\n    'yesNoButton': yesNoButton,\n    'nonDamageTypes': nonDamageTypes\n}","import {constants} from './constants.js';\nimport {chris} from './helperFunctions.js';\nexport async function compendiumRender(doc, html, context) {\n    let ids = [\n        'chris-premades.CPR Spell Features',\n        'chris-premades.CPR Class Feature Items',\n        'chris-premades.CPR Monster Feature Items',\n        'chris-premades.CPR Summon Features',\n        'chris-premades.CPR Feat Features',\n        'chris-premades.CPR Homebrew Feature Items',\n        'chris-premades.CPR Race Feature Items',\n        'chris-premades.CPR Item Features'\n    ];\n    if (!ids.includes(doc.metadata.id)) return;\n    await chris.dialog('Chris\\'s Premades: Warning', [['OK', false]], 'This compendium is not intended to be accessed this way!<br>You do not need anything from here.');\n}\nexport async function additionalCompendiums() {\n    let ignorePacks = [\n        'chris-premades',\n        'gambits-premades',\n        'midi-item-showcase-community'\n    ];\n    let packs = game.packs.filter(i => !ignorePacks.some(j => i.metadata.id.includes(j)) && i.metadata.type === 'Item');\n    let oldSettings = game.settings.get('chris-premades', 'Additional Compendiums');\n    let inputs = packs.map(i => ({'label': i.metadata.label, 'type': 'checkbox', 'options': oldSettings.includes(i.metadata.id)}));\n    let selection = await chris.menu('Additional Compendiums', constants.okCancel, inputs, true);\n    if (!selection.buttons) return;\n    let newPacks = [];\n    for (let i = 0; selection.inputs.length > i; i++) {\n        if (!selection.inputs[i]) continue;\n        newPacks.push(packs[i].metadata.id);\n    }\n    await game.settings.set('chris-premades', 'Additional Compendiums', newPacks);\n}\nexport async function additionalCompendiumPriority() {\n    let packs = game.settings.get('chris-premades', 'Additional Compendiums');\n    let gambitItems = game.modules.get('gambits-premades')?.active ? !!game.settings.get('chris-premades', 'GPS Support') : false;\n    let miscItems = game.modules.get('midi-item-showcase-community')?.active ? !!game.settings.get('chris-premades', 'MISC Support') : false;\n    if (!packs.length && !gambitItems && !miscItems) {\n        ui.notifications.info('There are no compendiums selected in the \"Additional Compendiums\" setting!');\n        return;\n    }\n    let oldSettings = game.settings.get('chris-premades', 'Additional Compendium Priority');\n    let inputs = packs.map(i => ({'label': game.packs.get(i)?.metadata?.label ?? 'Unknown (' + i + ')', 'type': 'number', 'options': oldSettings[i] ?? 100}));\n    if (miscItems) inputs.unshift({'label': 'Midi Item Showcase', 'type': 'number', 'options': oldSettings['MISC'] ?? 2});\n    if (gambitItems) inputs.unshift({'label': 'Gambit\\'s Premades', 'type': 'number', 'options': oldSettings['GPS'] ?? 1});\n    inputs.unshift({'label': 'Chris\\'s Premades', 'type': 'number', 'options': oldSettings['CPR'] ?? 0});\n    let selection = await chris.menu('Additional Compendium Priority', constants.okCancel, inputs, true, 'Lower Number = Higher Priority');\n    if (!selection.buttons) return;\n    let newSettings = {};\n    let startNumber = 1;\n    if (gambitItems) startNumber++;\n    if (miscItems) startNumber++;\n    for (let i = startNumber; inputs.length - 1 > i; i++) newSettings[packs[i - startNumber]] = isNaN(selection.inputs[i]) ? 100 : selection.inputs[i];\n    newSettings['CPR'] = selection.inputs[0];\n    if (gambitItems && !miscItems) {\n        newSettings['GPS'] = selection.inputs[1];\n    } else if (!gambitItems && miscItems) {\n        newSettings['MISC'] = selection.inputs[1];\n    } else if (gambitItems && miscItems) {\n        newSettings['GPS'] = selection.inputs[1];\n        newSettings['MISC'] = selection.inputs[2];\n    }\n    await game.settings.set('chris-premades', 'Additional Compendium Priority', newSettings);\n}\nexport async function selectCompendium(setting) {\n    let packs = game.packs.filter(i => !i.metadata.id.includes('chris-premades.') && i.metadata.type === 'Item');\n    let inputs = packs.map(i => ({'label': i.metadata.label, 'type': 'radio'}));\n    let selection = await chris.menu('Select a Compendium', constants.okCancel, inputs, true);\n    if (!selection.buttons) return;\n    let pack = packs[selection.inputs.findIndex(i => i)];\n    if (!pack) return;\n    await game.settings.set('chris-premades', setting, pack.metadata.id);\n}","import {chris} from './helperFunctions.js';\nlet scaleData = {\n    'ranger': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'favored-foe',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 4\n                    },\n                    '6': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '14': {\n                        'number': 1,\n                        'faces': 8\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Favored Foe'\n        }\n    ],\n    'barbarian': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'rage-damage',\n                'type': 'number',\n                'scale': {\n                    '1': {\n                        'value': 2\n                    },\n                    '9': {\n                        'value': 3\n                    },\n                    '16': {\n                        'value': 4\n                    }\n                },\n                'distance': {\n                    'units': ''\n                }\n            },\n            'value': {},\n            'title': 'Rage Damage'\n        }\n    ],\n    'blood-hunter': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'crimson-rite',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 4\n                    },\n                    '5': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '11': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '17': {\n                        'number': 1,\n                        'faces': 10\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Crimson Rite'\n        }\n    ],\n    'bard': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'bardic-inspiration',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '5': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '10': {\n                        'number': 1,\n                        'faces': 10\n                    },\n                    '15': {\n                        'number': 1,\n                        'faces': 12\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Bardic Inspiration'\n        }\n    ],\n    'rogue': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'sneak-attack',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '3': {\n                        'number': 2,\n                        'faces': 6\n                    },\n                    '5': {\n                        'number': 3,\n                        'faces': 6\n                    },\n                    '7': {\n                        'number': 4,\n                        'faces': 6\n                    },\n                    '9': {\n                        'number': 5,\n                        'faces': 6\n                    },\n                    '11': {\n                        'number': 6,\n                        'faces': 6\n                    },\n                    '13': {\n                        'number': 7,\n                        'faces': 6\n                    },\n                    '15': {\n                        'number': 8,\n                        'faces': 6\n                    },\n                    '17': {\n                        'number': 9,\n                        'faces': 6\n                    },\n                    '19': {\n                        'number': 10,\n                        'faces': 6\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Sneak Attack'\n        }\n    ],\n    'battle-master': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'distance': {\n                    'units': ''\n                },\n                'identifier': 'combat-superiority-die',\n                'type': 'dice',\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '7': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '10': {\n                        'number': 1,\n                        'faces': 10\n                    },\n                    '15': {\n                        'number': 1,\n                        'faces': 10\n                    },\n                    '18': {\n                        'number': 1,\n                        'faces': 12\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Combat Superiority (Die)',\n            'icon': null\n        }\n    ],\n    'way-of-the-ascendant-dragon': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'breath-of-the-dragon',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '3': {\n                        'number': 2,\n                        'faces': 4\n                    },\n                    '5': {\n                        'number': 2,\n                        'faces': 6\n                    },\n                    '11': {\n                        'number': 3,\n                        'faces': 8\n                    },\n                    '17': {\n                        'number': 3,\n                        'faces': 10\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Breath of the Dragon'\n        }\n    ],\n    'artificer': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'arcane-jolt',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '9': {\n                        'number': 2,\n                        'faces': 6\n                    },\n                    '15': {\n                        'number': 4,\n                        'faces': 6\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Arcane Jolt'\n        }\n    ],\n    'monk': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'quickened-healing',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '4': {\n                        'number': 1,\n                        'faces': 4\n                    },\n                    '5': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '11': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '17': {\n                        'number': 1,\n                        'faces': 10\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Quickened Healing'\n        },\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'martial-arts',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '1': {\n                        'number': 1,\n                        'faces': 4\n                    },\n                    '5': {\n                        'number': 1,\n                        'faces': 6\n                    },\n                    '11': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '17': {\n                        'number': 1,\n                        'faces': 10\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Martial Arts'\n        }\n    ],\n    'fey-wanderer': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'dreadful-strikes',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '3': {\n                        'number': 1,\n                        'faces': 4\n                    },\n                    '11': {\n                        'number': 1,\n                        'faces': 6\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Dreadful Strikes'\n        }\n    ],\n    'circle-of-stars': [\n        {\n            'type': 'ScaleValue',\n            'configuration': {\n                'identifier': 'starry-form',\n                'type': 'dice',\n                'distance': {\n                    'units': ''\n                },\n                'scale': {\n                    '2': {\n                        'number': 1,\n                        'faces': 8\n                    },\n                    '10': {\n                        'number': 2,\n                        'faces': 8\n                    }\n                }\n            },\n            'value': {},\n            'title': 'Starry Form'\n        }\n    ]\n};\nasync function addScale(item) {\n    let identifier = item.system.identifier;\n    let options = scaleData[identifier].map(i => [i.title, i.configuration.identifier]);\n    let selection = await chris.dialog('⚖️ Add Scale', options);\n    if (!selection) return;\n    let itemData = duplicate(item.toObject());\n    let advancementData = itemData.system.advancement;\n    let scale = scaleData[identifier].find(i => i.configuration.identifier === selection);\n    if (!scale) return;\n    advancementData.push(scale);\n    await item.update({'system.advancement': advancementData});\n    ui.notifications.info(scale.title + ' scale added!');\n}\nexport let scale = {\n    'scaleData': scaleData,\n    'addScale': addScale\n}","import {constants} from './constants.js';\nimport {chris} from './helperFunctions.js';\nimport {scale} from './scale.js';\nexport function createHeaderButton(config, buttons) {\n    if (config.object instanceof Item && config.object?.actor) {\n        buttons.unshift({\n            'class': 'chris-premades-item',\n            'icon': 'fa-solid fa-kit-medical',\n            'onclick': () => itemConfig(config.object)\n        });\n    }\n}\nexport async function updateItemButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.chris-premades-item');\n    if (!headerButton) return;\n    let item = app.object;\n    if (!item) return;\n    let source = item.flags['chris-premades']?.info?.source;\n    function cpr(item) {\n        let automation = CONFIG.chrisPremades.automations[item.flags['chris-premades']?.info?.name ?? getItemName(item.name)];\n        if (!automation) return false;\n        let itemVersion = item.flags['chris-premades']?.info?.version;\n        if (!itemVersion) {\n            headerButton.style.color = 'yellow';\n            return true;\n        }\n        if (automation.version != itemVersion) {\n            headerButton.style.color = 'red';\n            return true;\n        }\n        if (CONFIG.chrisPremades.itemConfiguration[automation.name]) {\n            headerButton.style.color = 'dodgerblue';\n            return true;\n        } else {\n            headerButton.style.color = 'green';\n            return true;\n        }\n    }\n    async function gps(item) {\n        let automation = await game.modules.get('gambits-premades')?.medkitApi()?.automations?.[item.name];\n        if (!automation) return;\n        let itemVersion = item.flags['chris-premades']?.info?.gambit?.version;\n        if (!itemVersion) {\n            headerButton.style.color = 'yellow';\n            return;\n        }\n        if (automation.version != itemVersion) {\n            headerButton.style.color = 'orange';\n            return;\n        }\n        headerButton.style.color = 'orchid';\n    }\n    function misc(item) {\n        let automation = CONFIG['midi-item-showcase-community']?.automations?.[item.name];\n        if (!automation) return;\n        let itemVersion = item.flags['chris-premades']?.info?.misc?.version;\n        if (!itemVersion) {\n            headerButton.style.color = 'yellow';\n            return;\n        }\n        if (automation.version != itemVersion) {\n            headerButton.style.color = 'orange';\n            return;\n        }\n        headerButton.style.color = 'orchid';\n    }\n    if (source) {\n        switch(source) {\n            case 'CPR':\n                cpr(item);\n                return;\n            case 'GPS':\n                await gps(item);\n                return;\n            case 'MISC':\n                misc(item);\n                return;\n            default:\n                headerButton.style.color = 'pink';\n                return;\n        }\n    } else {\n        let found = cpr(item);\n        if (found) return;\n        let gambitAutomation;\n        let miscAutomation = CONFIG['midi-item-showcase-community']?.automations?.[item.name];;\n        if (game.modules.get('gambits-premades')?.active)  gambitAutomation = await game.modules.get('gambits-premades')?.medkitApi()?.automations?.[item.name]; \n        if (gambitAutomation || miscAutomation) headerButton.style.color = 'yellow';\n    }\n}\nexport function createActorHeaderButton(config, buttons) {\n    if (config.object instanceof Actor) {\n        buttons.unshift({\n            class: 'chris-premades-actor',\n            icon: 'fa-solid fa-kit-medical',\n            onclick: () => actorConfig(config.object)\n        });\n    }\n}\nasync function actorConfig(actor) {\n    if (!(actor.type === 'character' || actor.type === 'npc')) {\n        ui.notifications.info('This feature must be used on a character or npc!');\n        return;\n    }\n    let selection = await chris.dialog('Actor Updater', constants.yesNo, 'Apply all of Chris\\'s Premades automations to this actor?');\n    if (!selection) return;\n    let changes = await game.modules.get('ddb-importer').api.chris.adjustActor(actor);\n    if (changes && changes?.length) {\n        let list = '';\n        for (let i of changes.sort()) {\n            list += '- ' + i + '<br>'\n        }\n        ChatMessage.create({\n            'speaker': {'alias': 'Chris\\'s Premades'},\n            'whisper': [game.user.id],\n            'content': '<hr><b>Updated Items:</b><br><hr>' + list\n        });\n    }\n    ui.notifications.info('Actor update complete!');\n}\nasync function itemConfig(itemDocument) {\n    let replacerAccess = game.user.isGM || game.settings.get('chris-premades', 'Item Replacer Access');\n    let configurationAccess = game.user.isGM || game.settings.get('chris-premades', 'Item Configuration Access');\n    let configuration = CONFIG.chrisPremades.itemConfiguration[itemDocument.flags?.['chris-premades']?.info?.name ?? itemDocument.name];\n    if (replacerAccess && configurationAccess) {\n        let options = [['🔎 Update / Replace Item', 'update']];\n        if (configuration) options.push(['🛠️ Configure', 'configure']);\n        if (itemDocument.type === 'class' || itemDocument.type === 'subclass') {\n            let identifier = itemDocument.system.identifier;\n            if (scale.scaleData[identifier]) options.push(['⚖️ Add Scale', 'scale']);\n        }\n        let selection = await chris.dialog('Item Configuration: ' + itemDocument.name, options);\n        if (!selection) return;\n        if (selection === 'update') {\n            await updateItem(itemDocument);\n        } else if (selection === 'configure') {\n            await configureItem(itemDocument, configuration);\n        } else if (selection === 'scale') {\n            await scale.addScale(itemDocument);\n        }\n    } else if (replacerAccess && (!configurationAccess || !configuration)) {\n        if (itemDocument.type === 'class' || itemDocument.type === 'subclass') {\n            let identifier = itemDocument.system.identifier;\n            if (scale.scaleData[identifier]) {\n                let options = [['🔎 Update / Replace Item', 'update'], ['⚖️ Add Scale', 'scale']];\n                let selection = await chris.dialog('Item Configuration: ' + itemDocument.name, options);\n                if (!selection) return;\n                if (selection === 'update') {\n                    await updateItem(itemDocument);\n                } else if (selection === 'scale') {\n                    await scale.addScale(itemDocument);\n                }\n            }\n        } else {\n            await updateItem(itemDocument);\n        }\n    } else if (!replacerAccess && configurationAccess && configuration) {\n        await configureItem(itemDocument, configuration);\n    } else {\n        ui.notifications.info('Nothing to do!');\n    }\n}\nexport async function updateItem(itemDocument) {\n    let additionalCompendiums = game.settings.get('chris-premades', 'Additional Compendiums');\n    let additionalCompendiumPriority = game.settings.get('chris-premades', 'Additional Compendium Priority');\n    let flagName = itemDocument.flags?.['chris-premades']?.info?.name;\n    let automation = CONFIG.chrisPremades.automations[flagName ?? itemDocument.name];\n    let itemName = itemDocument.name;\n    if (automation && flagName) itemName = flagName;\n    let itemType = itemDocument.type;\n    let searchCompendiums = [];\n    let isNPC = false;\n    if (itemDocument.actor.type === 'npc') isNPC = true;\n    let compendiumItem;\n    let foundCompendiumName;\n    let gambitItems = game.modules.get('gambits-premades')?.active ? game.settings.get('chris-premades', 'GPS Support') : false;\n    let miscItems = game.modules.get('midi-item-showcase-community')?.active ? game.settings.get('chris-premades', 'MISC Support') : false;\n    itemName = getItemName(itemName);\n    let sourceModule;\n    if (!isNPC || itemType === 'spell') {\n        switch (itemType) {\n            case 'weapon':\n            case 'equipment':\n            case 'consumable':\n            case 'tool':\n            case 'backpack':\n            case 'loot':\n                searchCompendiums.push('chris-premades.CPR Items');\n                if (gambitItems) searchCompendiums.push('gambits-premades.gps-items');\n                if (gambitItems === 2) searchCompendiums.push('gambits-premades.gps-homebrew-items');\n                if (miscItems) searchCompendiums.push('midi-item-showcase-community.misc-items');\n                if (miscItems === 2 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-homebrew');\n                if (miscItems === 1 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-unearthed-arcana');\n                break;\n            case 'spell':\n                searchCompendiums.push('chris-premades.CPR Spells');\n                if (gambitItems) searchCompendiums.push('gambits-premades.gps-spells');\n                if (miscItems) searchCompendiums.push('midi-item-showcase-community.misc-spells');\n                if (miscItems === 2 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-homebrew');\n                if (miscItems === 1 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-unearthed-arcana');\n                break;\n            case 'feat':\n                searchCompendiums.push('chris-premades.CPR Race Features');\n                searchCompendiums.push('chris-premades.CPR Class Features');\n                searchCompendiums.push('chris-premades.CPR Feats');\n                searchCompendiums.push('chris-premades.CPR Actions');\n                if (gambitItems) {\n                    searchCompendiums.push('gambits-premades.gps-class-features');\n                    searchCompendiums.push('gambits-premades.gps-generic-features');\n                    if (gambitItems === 2) searchCompendiums.push('gambits-premades.gps-homebrew-features');\n                }\n                if (miscItems) {\n                    searchCompendiums.push('midi-item-showcase-community.misc-class-features');\n                    searchCompendiums.push('midi-item-showcase-community.misc-feats');\n                    searchCompendiums.push('midi-item-showcase-community.misc-race-features');\n                    if (miscItems === 2 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-homebrew');\n                    if (miscItems === 1 || miscItems === 4) searchCompendiums.push('midi-item-showcase-community.misc-unearthed-arcana');\n                }\n                break;\n        }\n        for (let i of additionalCompendiums) searchCompendiums.push(i);\n        let packs = [\n            'chris-premades.CPR Items',\n            'chris-premades.CPR Spells',\n            'chris-premades.CPR Race Features',\n            'chris-premades.CPR Class Features',\n            'chris-premades.CPR Feats',\n            'chris-premades.CPR Actions'\n        ];\n        let gambitPacks = [];\n        if (gambitItems && game.modules.get('gambits-premades')?.active) gambitPacks = Array.from(game.modules.get('gambits-premades').packs).map(i => i.id)\n        let miscPacks = [];\n        if (miscItems && game.modules.get('midi-item-showcase-community')?.active) miscPacks = Array.from(game.modules.get('midi-item-showcase-community').packs).map(i => i.id);\n        searchCompendiums.sort((a, b) => {\n            let numA = additionalCompendiumPriority[a] ?? 10;\n            let numB = additionalCompendiumPriority[b] ?? 10;\n            if (packs.includes(a)) numA = additionalCompendiumPriority['CPR'];\n            if (packs.includes(b)) numB = additionalCompendiumPriority['CPR'];\n            if (gambitPacks.includes(a)) numA = additionalCompendiumPriority['GPS'];\n            if (gambitPacks.includes(b)) numB = additionalCompendiumPriority['GPS'];\n            if (miscPacks.includes(a)) numA = additionalCompendiumPriority['MISC'];\n            if (miscPacks.includes(b)) numB = additionalCompendiumPriority['MISC'];\n            return numA - numB;\n        });\n        for (let compendiumId of searchCompendiums) {\n            let compendium = game.packs.get(compendiumId);\n            if (!compendium) continue;\n            compendiumItem = await chris.getItemFromCompendium(compendiumId, itemName, true);\n            if (compendiumItem) {\n                foundCompendiumName = compendium.metadata.label;\n                sourceModule = compendium.metadata.packageType === 'module' ? compendium.metadata.packageName : 'world';\n                break;\n            }\n        }\n    } else if (itemDocument.actor.type === 'npc') {\n        let itemActor = itemDocument.actor;\n        let monsterName = itemActor.name;\n        let sourceActor = game.actors.get(itemActor.id);\n        let monsterFolder = game.packs.get('chris-premades.CPR Monster Features').folders.getName(monsterName);\n        foundCompendiumName = 'Chris\\'s Premades';\n        if (sourceActor) monsterName = sourceActor.name;\n        if (!monsterFolder) {\n            ui.notifications.info('No available automation for this monster! (Or monster has a different name)');\n            return;\n        }\n        compendiumItem = await chris.getItemFromCompendium('chris-premades.CPR Monster Features', itemName, true, monsterFolder.id);\n    } else {\n        ui.notifications.info('Automation detection for this actor type is not supported!');\n    }\n    if (!compendiumItem) {\n        ui.notifications.info('No available automation! (Or the item has different name)');\n        return;\n    }\n    let selection = await chris.dialog('Item Updater', constants.yesNo, 'Automation found, apply it? (' + foundCompendiumName + ')');\n    if (!selection) return;\n    ChatMessage.create({\n        'speaker': {'alias': 'Chris\\'s Premades'},\n        'whisper': [game.user.id],\n        'content': '<hr><b>' + compendiumItem.name + ':</b><br><hr>' + compendiumItem.system.description.value\n    });\n    let originalItem = duplicate(itemDocument.toObject());\n    originalItem.name = compendiumItem.name;\n    originalItem.effects = compendiumItem.effects;\n    originalItem.system = compendiumItem.system;\n    let info;\n    if (compendiumItem.flags['chris-premades']?.info) info = duplicate(compendiumItem.flags['chris-premades'].info);\n    originalItem.system.description = itemDocument.system.description;\n    originalItem.system.chatFlavor = itemDocument.system.chatFlavor;\n    originalItem.system.uses = itemDocument.system.uses;\n    if (itemType === 'spell') {\n        originalItem.system.preparation = itemDocument.system.preparation;\n    }\n    if (itemType != 'spell' || itemType != 'feat') {\n        originalItem.system.attunement = itemDocument.system.attunement;\n        originalItem.system.equipped = itemDocument.system.equipped;\n    }\n    if (itemDocument.system.quantity) originalItem.system.quantity = itemDocument.system.quantity;\n    originalItem.flags = compendiumItem.flags;\n    if (itemDocument.flags['tidy5e-sheet']?.favorite) originalItem.flags['tidy5e-sheet'] = {\n        'favorite': true\n    }\n    if (itemDocument.flags['custom-character-sheet-sections']?.sectionName) originalItem.flags['custom-character-sheet-sections'] = {\n        'sectionName': itemDocument.flags['custom-character-sheet-sections'].sectionName\n    }\n    if (itemDocument.flags.ddbimporter) originalItem.flags.ddbimporter = itemDocument.flags.ddbimporter;\n    if (itemDocument.flags['chris-premades']) originalItem.flags['chris-premades'] = itemDocument.flags['chris-premades'];\n    if (info) setProperty(originalItem, 'flags.chris-premades.info', info);\n    switch (sourceModule) {\n        case 'midi-item-showcase-community':\n            setProperty(originalItem, 'flags.chris-premades.info.misc', CONFIG['midi-item-showcase-community']?.automations?.[itemName]);\n            setProperty(originalItem, 'flags.chris-premades.info.source', 'MISC');\n            break;\n        case 'gambits-premades':\n            let gambitAutomation = await game.modules.get('gambits-premades')?.medkitApi()?.automations?.[itemName]; \n            setProperty(originalItem, 'flags.chris-premades.info.gambit', gambitAutomation);\n            setProperty(originalItem, 'flags.chris-premades.info.source', 'GPS');\n            break;\n        case 'chris-premades':\n            setProperty(originalItem, 'flags.chris-premades.info.source', 'CPR');\n            break;\n        default:\n            setProperty(originalItem, 'flags.chris-premades.info.source', 'world');\n            break;\n    }\n    if (originalItem.img === 'icons/svg/item-bag.svg') originalItem.img = compendiumItem.img; \n    await itemDocument.actor.createEmbeddedDocuments('Item', [originalItem]);\n    await itemDocument.delete();\n    ui.notifications.info('Item updated!');\n}\nasync function configureItem(item, configuration) {\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '200px';\n            t.style.textAlign = 'right';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let generatedMenu = [];\n    let inputKeys = [];\n    for (let [key, value] of Object.entries(configuration)) {\n        switch (key) {\n            case 'checkbox':\n            case 'text':\n            case 'number':\n                for (let [key2, value2] of Object.entries(value)) {\n                    generatedMenu.push({\n                        'label': value2.label,\n                        'type': key,\n                        'options': item.flags['chris-premades']?.configuration?.[key2] ?? value2.default\n                    });\n                    inputKeys.push('flags.chris-premades.configuration.' + key2);\n                }\n                break;\n            case 'select':\n                for (let [key2, value2] of Object.entries(value)) {\n                    let current = item.flags['chris-premades']?.configuration?.[key2] ?? value2.default;\n                    let options = foundry.utils.duplicate(value2.values);\n                    options.forEach(item => {\n                        if (item.value === current) {\n                            item.selected = true;\n                        }\n                      });\n                    generatedMenu.push({\n                        'label': value2.label,\n                        'type': 'select',\n                        'options': options\n                    });\n                    inputKeys.push('flags.chris-premades.configuration.' + key2);\n                }\n                break;\n        }\n    }\n    let config = {\n        'title': 'Configure: ' + item.name,\n        'render': dialogRender\n    }\n    let selection = await warpgate.menu(\n        {\n            'inputs': generatedMenu,\n            'buttons': constants.okCancel\n        },\n        config\n    );\n    if (!selection.buttons) return;\n    let updates = {};\n    for (let i = 0; i < inputKeys.length; i++) {\n        if (selection.inputs[i] === '-') continue;\n        setProperty(updates, inputKeys[i], selection.inputs[i]);\n    }\n    await item.update(updates);\n}\nexport function getItemName(itemName) {\n    return CONFIG.chrisPremades.renamedItems[itemName] ?? itemName;\n}","async function early(workflow) {\n    workflow.workflowOptions.damageRollDSN = false;\n}\nasync function late(workflow) {\n    MidiQOL.displayDSNForRoll(workflow.damageRoll, 'damageRoll');\n    if(workflow.bonusDamageRoll) MidiQOL.displayDSNForRoll(workflow.bonusDamageRoll, 'damageRoll');\n}\nexport let diceSoNice = {\n    early: early,\n    late: late\n}","import {chris} from '../helperFunctions.js';\nlet autoRecs;\nfunction sortAutoRec() {\n    function addItems(setting) {\n        game.settings.get('autoanimations', setting).filter(i => i.metaData?.name === '5e Animations').filter(i => i.primary?.sound?.enable || i.secondary?.sound?.enable).forEach(i => autoRecNames.add({'name': i.label.toLowerCase(), 'soundOne': i.primary.sound, 'soundTwo': i.secondary.sound}));\n    }\n    let settings = [\n        'aaAutorec-melee',\n        'aaAutorec-range',\n        'aaAutorec-ontoken',\n        'aaAutorec-templatefx',\n        'aaAutorec-aura',\n        'aaAutorec-preset',\n        'aaAutorec-aefx'\n    ];\n    let autoRecNames = new Set();\n    for (let setting of settings) addItems(setting);\n    autoRecs = Array.from(autoRecNames);\n}\nfunction playItem(item) {\n    let playSound = chris.getConfiguration(item, 'playSound') ?? true;\n    if (!playSound) return;\n    let chrisName = item.flags?.['chris-premades']?.info?.name ?? item.name;\n    let specialSound = CONFIG.chrisPremades.automations[chrisName]?.specialSound ?? false;\n    if (specialSound) return;\n    let isEnabled = item.flags?.autoanimations?.isEnabled ?? true;\n    let isCustomized = item.flags?.autoanimations?.isCustomized ?? false;\n    let itemName = item.name.toLowerCase();\n    let autoRec = autoRecs.find(i => i.name.includes(itemName));\n    if (!autoRec) return;\n    let soundOneEnabled = autoRec.soundOne?.enable ?? false;\n    let soundTwoEnabled = autoRec.soundTwo?.enable ?? false;\n    if (!soundOneEnabled && !soundTwoEnabled) return;\n    if (isEnabled && !isCustomized && autoRec) return;\n    function playItemSound(soundDetails) {\n        new Sequence()\n            .sound()\n            .file(soundDetails.file)\n            .startTime(soundDetails.startTime)\n            .volume(soundDetails.volume)\n            .delay(soundDetails.delay)\n            .repeats(soundDetails.repeat, soundDetails.repeatDelay)\n            .play();\n    }\n    if (soundOneEnabled) playItemSound(autoRec.soundOne);\n    if (soundTwoEnabled) playItemSound(autoRec.soundTwo);\n}\nasync function attackDone(workflow) {\n    let playOnDamage = game.settings.get('autoanimations', 'playonDamage');\n    if (!workflow.item || workflow.item?.hasAreaTarget || (workflow.item?.hasDamage && playOnDamage)) return;\n    playItem(workflow.item);\n}\nasync function damageDone(workflow) {\n    let playOnDamage = game.settings.get('autoanimations', 'playonDamage');\n    if (!workflow.item || workflow.item?.hasAreaTarget || (!playOnDamage && workflow.item?.hasAttack)) return;\n    playItem(workflow.item);\n}\nasync function rollDone(workflow) {\n    if (!workflow.item || workflow.item?.hasAreaTarget || workflow.item?.hasAttack || workflow.item?.hasDamage) return;\n    playItem(workflow.item);\n}\nexport let dndAnimations = {\n    'sortAutoRec': sortAutoRec,\n    'attackDone': attackDone,\n    'damageDone': damageDone,\n    'rollDone': rollDone\n}","/**\n * Heap data structure a.k.a Priority Queue\n *\n * Used to get min or max values from a collection in constant time.\n *\n * @author Adrian Mejia <adrian@adrianmejia.com>\n */\nclass Heap {\n  constructor(comparator = (a, b) => a - b) {\n    this.array = [];\n    this.comparator = (i1, i2) => {\n      const value = comparator(this.array[i1], this.array[i2]);\n      if (Number.isNaN(value)) { throw new Error(`Comparator should evaluate to a number. Got ${value} when comparing ${this.array[i1]} with ${this.array[i2]}`); }\n      return value;\n    };\n  }\n\n  /**\n   * Insert element\n   * @runtime O(log n)\n   * @param {any} value\n   */\n  add(value) {\n    this.array.push(value);\n    this.bubbleUp();\n  }\n\n  /**\n   * Retrieves, but does not remove, the head of this heap\n   * @runtime O(1)\n   */\n  peek() {\n    return this.array[0];\n  }\n\n  /**\n   * Retrieves and removes the head of this heap, or returns null if this heap is empty.\n   * @runtime O(log n)\n   */\n  remove(index = 0) {\n    if (!this.size) return null;\n    this.swap(index, this.size - 1); // swap with last\n    const value = this.array.pop(); // remove element\n    this.bubbleDown(index);\n    return value;\n  }\n\n  /**\n   * Returns the number of elements in this collection.\n   * @runtime O(1)\n   */\n  get size() {\n    return this.array.length;\n  }\n\n  /**\n   * Move new element upwards on the heap, if it's out of order\n   * @runtime O(log n)\n   */\n  bubbleUp() {\n    let index = this.size - 1;\n    const parent = (i) => Math.ceil(i / 2) - 1;\n    while (parent(index) >= 0 && this.comparator(parent(index), index) > 0) {\n      this.swap(parent(index), index);\n      index = parent(index);\n    }\n  }\n\n  /**\n   * After removal, moves element downwards on the heap, if it's out of order\n   * @runtime O(log n)\n   */\n  bubbleDown(index = 0) {\n    let curr = index;\n    const left = (i) => 2 * i + 1;\n    const right = (i) => 2 * i + 2;\n    const getTopChild = (i) => (right(i) < this.size\n      && this.comparator(left(i), right(i)) > 0 ? right(i) : left(i));\n\n    while (left(curr) < this.size && this.comparator(curr, getTopChild(curr)) > 0) {\n      const next = getTopChild(curr);\n      this.swap(curr, next);\n      curr = next;\n    }\n  }\n\n  /**\n   * Swap elements on the heap\n   * @runtime O(1)\n   * @param {number} i1 index 1\n   * @param {number} i2 index 2\n   */\n  swap(i1, i2) {\n    [this.array[i1], this.array[i2]] = [this.array[i2], this.array[i1]];\n  }\n}\n\n// aliases\nHeap.prototype.poll = Heap.prototype.remove;\nHeap.prototype.offer = Heap.prototype.add;\nHeap.prototype.element = Heap.prototype.peek;\n\nexport default Heap;\n","import Heap from './heap.js';\n\nclass PriorityQueue extends Heap {\n  constructor(iterable = [], comparator = (a, b) => a[0] - b[0]) {\n    super(comparator);\n    Array.from(iterable).forEach((el) => this.add(el));\n  }\n\n  /**\n   * Add data to the Queue with Priority\n   * @param {[number, any]|any} value - Pair with [priority, value]\n   *  any object as value is also possible if a custom comparator is passed in.\n   * @returns {void}\n   */\n  enqueue(value) {\n    super.add(value);\n  }\n\n  /**\n   * Remove from the queue the element with the highest priority.\n   * @returns {[number, any]|any}\n   */\n  dequeue() {\n    return super.remove();\n  }\n}\n\nexport default PriorityQueue;","import Heap from '../heap/priority-queue.js';\nlet allQueues = {};\nfunction add(uuid, key, priority) {\n    if (!game.settings.get('chris-premades', 'Priority Queue')) return;\n    if (allQueues[uuid] === undefined) {\n        allQueues[uuid] = new Heap();\n    }\n    return allQueues[uuid].enqueue([priority, key]);\n}\nasync function wait(uuid, key) {\n    if (!game.settings.get('chris-premades', 'Priority Queue')) return true;\n    let currentKey = allQueues[uuid].peek()[1];\n    let stacks = 0;\n    while (currentKey != key) {\n        stacks++;\n        if (stacks >= 300) {\n            console.error('Chris | Queue time took too long and was removed!');\n            delete(allQueues[uuid]);\n            return false;\n        }\n        await warpgate.wait(1000);\n        currentKey = allQueues[uuid].peek()[1]\n    }\n    return true;\n}\nfunction remove(uuid) {\n    if (!game.settings.get('chris-premades', 'Priority Queue')) return;\n    allQueues[uuid]?.dequeue();\n    if (allQueues[uuid]?.size === 0) delete(allQueues[uuid]);\n    return true;\n}\nfunction state(uuid) {\n    if (!game.settings.get('chris-premades', 'Priority Queue')) return;\n    let queue = allQueues[uuid];\n    if (!queue) return false;\n    if (queue.size === 0) return false;\n    return allQueues[uuid].peek()[1];\n}\nfunction purge() {\n    allQueues = {};\n}\nasync function setup(uuid, key, priority) {\n    if (!game.settings.get('chris-premades', 'Priority Queue')) return true;\n    queue.add(uuid, key, priority);\n    await warpgate.wait(100);\n    return await queue.wait(uuid, key);\n}\nfunction status() {\n    return allQueues;\n}\nexport let queue = {\n    'add': add,\n    'wait': wait,\n    'remove': remove,\n    'state': state,\n    'purge': purge,\n    'setup': setup,\n    'status': status\n}\n/*\n001-100: Item attack roll and damage modifcation.\n101-200: Class & race feature attack roll and damage modifcation.\n201-300: On Hit Bonus Damage\n301-400: Damage Rewriting\n401:500: On Hit Triggers\n*/","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let pass = args[0].macroPass;\n    if (workflow.hitTargets.size === 0) return;\n    if (!(pass === 'postDamageRoll' || pass === 'preDamageApplication')) return;\n    let effect = chris.findEffect(workflow.actor, 'Celestial Revelation (Radiant Soul)');\n    if (!effect) effect = chris.findEffect(workflow.actor, 'Celestial Revelation (Radiant Consumption)');\n    if (!effect) return;\n    let feature = await fromUuid(effect.origin);\n    if (!feature) return;\n    let useFeature = chris.perTurnCheck(feature, 'feature', 'aasimarRadiantSoul', true, workflow.token.id);\n    if (!useFeature) return;\n    switch (pass) {\n        case 'postDamageRoll':\n            if (workflow.hitTargets.size != 1) return;\n            let queueSetup = await queue.setup(workflow.item.uuid, 'aasimarRadiantSoul', 249);\n            if (!queueSetup) return;\n            let selected = await chris.dialog(feature.name, constants.yesNo, 'Add extra damage from ' + feature.name + '?');\n            if (!selected) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            await chris.setTurnCheck(feature, 'feature', 'aasimarRadiantSoul');\n            let damageFormula = workflow.damageRoll._formula + ' + ' + workflow.actor.system.attributes.prof + '[radiant]';\n            let damageRoll = await new Roll(damageFormula).roll({async: true});\n            await workflow.setDamageRoll(damageRoll);\n            await feature.displayCard();\n            queue.remove(workflow.item.uuid);\n            return;\n        case 'preDamageApplication':\n            if (workflow.hitTargets.size <= 1) return;\n            let queueSetup2 = queue.setup(workflow.item.uuid, 'aasimarRadiantSoul', 249);\n            if (!queueSetup2) return;\n            let selection = await chris.selectTarget('Celestial Revelation: Add extra damage?', constants.yesNoButton, workflow.targets, true, 'one');\n            if (selection.buttons === false) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            await chris.setTurnCheck(feature, 'feature', 'aasimarRadiantSoul');\n            let targetTokenUuid = selection.inputs.find(i => i);\n            if (!targetTokenUuid) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let targetToken = await fromUuid(targetTokenUuid);\n            if (!targetToken) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            chris.addDamageDetailDamage(targetToken, workflow.actor.system.attributes.prof, 'radiant', workflow);\n            await feature.displayCard();\n            queue.remove(workflow.item.uuid);\n            return;\n    }\n}\nasync function combatEnd(origin) {\n    await chris.setTurnCheck(origin, 'feature', 'aasimarRadiantSoul', true);\n}\nexport let aasimarRadiantSoul = {\n    'attack': attack,\n    'combatEnd': combatEnd\n}","import {chris} from '../../../helperFunctions.js';\nexport async function whisperingAura(actor, origin) {\n    let incapacitatedEffect = chris.findEffect(actor, 'Incapacitated');\n    if (incapacitatedEffect) return;\n    let hp = actor.system.attributes.hp.value;\n    if (!hp) return;\n    await origin.use();\n}","import {whisperingAura} from './whisperingAura.js';\nexport let aberrantSpirit = {\n    'whisperingAura': whisperingAura\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.isFumble) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'acidArrow', 50);\n    if (!queueSetup) return;\n    workflow.isFumble = false;\n    let updatedRoll = await new Roll('-100').evaluate({async: true});\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 0) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'acidArrow', 50);\n    if (!queueSetup) return;\n    await chris.applyDamage([workflow.targets.first()], Math.floor(workflow.damageRoll.total / 2), 'acid');\n    queue.remove(workflow.item.uuid);\n}\nexport let acidArrow = {\n    'attack': attack,\n    'damage': damage\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function checkCover({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let reverseCover = workflow.targets.has(workflow.token);\n    let targets;\n    if (!workflow.targets.size || (workflow.targets.size === 1 && workflow.targets.has(workflow.token))) {\n        targets = game.canvas.scene.tokens.map(i => i.object).filter(j => chris.canSense(workflow.token, j) && j.document.uuid != workflow.token.document.uuid && !chris.findEffect(j.actor, 'Dead') && !chris.findEffect(j.actor, 'Unconscious'));\n    } else {\n        targets = Array.from(workflow.targets);\n    }\n    let text = reverseCover ? 'Your Cover:' : 'Target Cover:';\n    let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, targets, false, 'multiple', false, false, text, workflow.token, reverseCover);\n    if (!selection.buttons) return;\n    chris.updateTargets(selection.inputs);\n}","import {chris} from '../../helperFunctions.js';\nexport async function fall({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetToken = game.user.targets.first();\n    function render(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '50px';\n            t.style.textAlign = 'center';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let selection = await warpgate.menu({\n        'inputs': [\n            {\n                'label': 'Distance (ft):',\n                'type': 'number'\n            },\n            {\n                'label': 'Type of Fall:',\n                'type': 'select',\n                'options': [\n                    {\n                        'html': 'Onto Ground',\n                        'value': 'ground'\n                    },\n                    {\n                        'html': 'Into Water',\n                        'value': 'water'\n                    },\n                    {\n                        'html': 'Onto Another Creature',\n                        'value': 'creature'\n                    }\n                ]\n            }\n        ],\n        'buttons': [\n            {\n                'label': 'Cancel',\n                'value': false\n            },\n            {\n                'label': 'Ok',\n                'value': true\n            }\n        ]\n    },\n    {\n        'title': 'Fall Damage',\n        'render': render\n    });\n    if (!selection.buttons) return;\n    let diceNum = Math.min((Math.floor(selection.inputs[0] / 10) * 10), 200) / 10;\n    if (diceNum === 0) return;\n    let damageFormula = diceNum + 'd6[bludgeoning]';\n    async function ground(actor) {\n        if (chris.findEffect(actor, 'Prone') || chris.checkTrait(actor, 'ci', 'prone')) return;\n        await chris.addCondition(actor, 'Prone', false);\n    }\n    let otherTarget = false;\n    switch (selection.inputs[1]) {\n        case 'water':\n            if (chris.findEffect(workflow.actor, 'Reaction')) break;\n            let selection2 = await chris.dialog('Use reaction to to hit the surface head or feet first?', [['Yes (Acrobatics)', 'acr'], ['Yes (Athletics)', 'ath'], ['No', false]]);\n            if (!selection2) break;\n            let flavor = {\n                'acr': 'Acrobatics',\n                'ath': 'Athletics'\n            };\n            let check = await workflow.actor.rollSkill(selection2, {'flavor': flavor[selection2] + ' Skill Check (DC: 15)'});\n            if (check.total >= 15) damageFormula = 'floor(' + damageFormula + ' / 2)';\n            await chris.addCondition(workflow.actor, 'Reaction', false);\n            break;\n        case 'creature':\n            if (game.user.targets.size != 1) {\n                ui.notifications.info('Select one target and try again!');\n                return;\n            }\n            let targetSize = chris.getSize(targetToken.actor);\n            let sourceSize = chris.getSize(workflow.actor);\n            if (sourceSize === 0 || targetSize === 0) {\n                ui.notifications.info('One or both creatures are tiny!');\n                await ground(workflow.actor);\n                break;\n            }\n            let save = await targetToken.actor.rollAbilitySave('dex', {'flavor': 'Dexterity Saving Throw (DC: 15)', 'skipDialog': true});\n            if (save.total < 15) {\n                damageFormula = 'floor(' + damageFormula + ' / 2)';\n                otherTarget = true;\n                if (targetSize - sourceSize >= 2) break;\n                await ground(targetToken.actor);\n            }\n            break;\n    }\n    await ground(workflow.actor);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    if (otherTarget) await chris.applyDamage([targetToken], damageRoll.total, 'bludgeoning');\n}","function damageType(type) {\n    return CONFIG.DND5E.damageTypes[type].toLowerCase();\n}\nfunction healingType(type) {\n    return CONFIG.DND5E.healingTypes[type].toLowerCase();\n}\nfunction skills(skill) {\n    return CONFIG.DND5E.skills[skill].label;\n}\nfunction conditions(condition) {\n    return CONFIG.DND5E.conditionTypes[condition];\n}\nexport let translate = {\n    'damageType': damageType,\n    'healingType': healingType,\n    'skills': skills,\n    'conditions': conditions\n}","import {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nexport async function grapple({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    if (chris.getSize(targetActor) > (chris.getSize(workflow.actor) + 1)) {\n        ui.notifications.info('Target is too big to grapple!');\n        return;\n    }\n    let selection = await chris.remoteDialog(workflow.item.name, [[translate.skills('acr'), 'acr'], [translate.skills('ath'), 'ath'], ['Uncontested', false]], chris.firstOwner(targetToken).id, 'How would you like to contest the grapple?');\n    if (selection) {\n        let sourceRoll = await workflow.actor.rollSkill('ath');\n        let targetRoll = await chris.rollRequest(targetToken, 'skill', selection);\n        if (targetRoll.total >= sourceRoll.total) return;\n    }\n    if(game.modules.get('Rideable')?.active) {\n        game.Rideable.Mount([targetToken.document], workflow.token.document, {'Grappled': true, 'MountingEffectsOverride': ['Grappled']});\n    } else {\n        await chris.addCondition(targetActor, 'Grappled', false, workflow.item.uuid);\n    }\n}","import {chris} from '../../helperFunctions.js';\nexport async function help({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    if (targetToken.id === workflow.token.id) return;\n    let effectData;\n    let targetDisposition = targetToken.document.disposition;\n    let selfDisposition = workflow.token.document.disposition;\n    if (targetDisposition === selfDisposition) {\n        effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 3600\n            },\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.advantage.ability.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'isSkill'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        }\n    } else {\n        effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 12\n            },\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.grants.advantage.attack.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'isAttacked',\n                        'turnStartSource'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nexport async function nonLethal({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let validTypes = [\n        'mwak',\n        'msak'\n    ];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, 'Dead');\n    if (!effect) return;\n    if (!workflow.damageList.length) return;\n    if (workflow.damageList[0].newHP != 0 || workflow.damageList[0].oldHP === 0) return;\n    await chris.removeCondition(targetActor, 'Dead');\n    await chris.addCondition(targetActor, 'Unconscious', true);\n}","import {chris} from '../../helperFunctions.js';\nexport async function search({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('What Skill?', [['Perception', 'prc'], ['Investigation', 'inv']]);\n    if (!selection) return;\n    await workflow.actor.rollSkill(selection);\n}","import {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nexport async function shove({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let skipCheck = false;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    if (workflow.actor.uuid === targetActor.uuid) return;\n    if ((chris.getSize(targetActor)) > (chris.getSize(actor) + 1)) {\n        ui.notifications.info('Target is too big to shove!');\n        return;\n    }\n    let effect = chris.findEffect(targetActor, 'Incapacitated');\n    if (effect) skipCheck = true;\n    if (!skipCheck) {\n        let selection = await chris.remoteDialog(workflow.item.name, [[translate.skills('acr'), 'acr'], [translate.skills('ath'), 'ath'], ['Uncontested', false]], chris.firstOwner(targetToken).id, 'How would you like to contest the shove?');\n        if (selection) {\n            let sourceRoll = await workflow.actor.rollSkill('ath');\n            let targetRoll = await chris.rollRequest(targetToken, 'skill', selection);\n            if (targetRoll.total >= sourceRoll.total) return;\n        }\n    }\n    let selection = await chris.dialog('What do you want to do?', [['Move', 'move'], ['Knock Prone', 'prone']]);\n    if (!selection) return;\n    if (selection === 'prone') {\n        await chris.addCondition(targetActor, 'Prone', false, null);\n        return;\n    } else {\n        let distance = 5;\n        let knockBackFactor;\n        let ray;\n        let newCenter;\n        let hitsWall = true;\n        let targetToken = workflow.targets.first();\n        while (hitsWall) {\n            knockBackFactor = distance / canvas.dimensions.distance;\n            ray = new Ray(workflow.token.center, targetToken.center);\n            if (ray.distance === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n            hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n            if (hitsWall) {\n                distance -= 5;\n                if (distance === 0) {\n                    ui.notifications.info('Target is unable to be moved!');\n                    return;\n                }\n            }\n        }\n        newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x,\n                'y': newCenter.y\n            }\n        };\n        let options2 = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options2);\n    }\n}","export async function stealthCheck({speaker, actor, token, character, item, args, scope, workflow}) {\n    await workflow.actor.rollSkill('ste');\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    switch (workflow.item.system.actionType) {\n        case 'mwak':\n            if (workflow.actor.system.attributes.movement.swim > 0) return;\n            let validMeleeTypes = [\n                'dagger',\n                'javelin',\n                'shortsword',\n                'spear',\n                'trident'\n            ]\n            if (validMeleeTypes.includes(workflow.item.system.baseItem)) return;\n            break;;\n        case 'rwak':\n            let validRangedTypes = [\n                'lightcrossbow',\n                'handcrossbow',\n                'heavycrossbow',\n                'net',\n                'javelin',\n                'spear',\n                'trident',\n                'dart'\n            ]\n            if (validRangedTypes.includes(workflow.item.system.baseItem)) return;\n            break;\n        default:\n            return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'underwater', 1);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Underwater');\n    queue.remove(workflow.item.uuid);\n}\nasync function range({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    if (workflow.item.system.actionType != 'rwak') return;\n    let distance = chris.getDistance(workflow.token, workflow.targets.first());\n    if (distance <= workflow.item.system.range.value) return\n    ui.notifications.info('Target is too far away while underwater!')\n    return false;\n}\nexport let underwater = {\n    'attack': attack,\n    'range': range\n}","import {checkCover} from './checkCover.js';\nimport {fall} from './fall.js';\nimport {grapple} from './grapple.js';\nimport {help} from './help.js';\nimport {nonLethal} from './nonLethal.js';\nimport {search} from './search.js';\nimport {shove} from './shove.js';\nimport {stealthCheck} from './stealth.js';\nimport {underwater} from './underwater.js';\nexport let actions = {\n    'checkCover': checkCover,\n    'fall': fall,\n    'grapple': grapple,\n    'nonLethal': nonLethal,\n    'search': search,\n    'shove': shove,\n    'stealth': stealthCheck,\n    'underwater': underwater,\n    'help': help\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function sourceAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Rage');\n    if (!effect) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let originItem = chris.getItem(workflow.actor, 'Ancestral Protectors');\n    if (!originItem) return;\n    let useFeature = chris.perTurnCheck(originItem, 'feature', 'ancestralProtectors', true, workflow.token.id);\n    if (!useFeature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'ancestralProtectors', 450);\n    if (!queueSetup) return;\n    let effectData = {\n        'label': 'Ancestral Protectors Target',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'rounds': 2\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.ancestralProtectors.targetAttack,preAttackRoll',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.ancestralProtectors.targetDamage,postDamageRoll',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnStartSource'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n    await chris.setTurnCheck(originItem, 'feature', 'ancestralProtectors');\n    queue.remove(workflow.item.uuid);\n}\nasync function targetAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Ancestral Protectors Target');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    let originActorUuid = origin.actor.uuid;\n    let targetActorUuid = workflow.targets.first().actor.uuid;\n    if (originActorUuid === targetActorUuid) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'ancestralProtectors', 50);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Ancestral Protectors');\n    queue.remove(workflow.item.uuid);\n}\nasync function targetDamage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Ancestral Protectors Target');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    let originActorUuid = origin.actor.uuid;\n    let targetActorUuid = workflow.targets.first().actor.uuid;\n    if (originActorUuid === targetActorUuid) return;\n    let queueSetup =  await queue.setup(workflow.item.uuid, 'ancestralProtectors', 475);\n    if (!queueSetup) return;\n    let damageFormula = 'floor((' + workflow.damageRoll._formula + ') / 2)';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function combatEnd(origin) {\n    await chris.setTurnCheck(origin, 'feature', 'ancestralProtectors', true);\n}\nexport let ancestralProtectors = {\n    'sourceAttack': sourceAttack,\n    'targetAttack': targetAttack,\n    'targetDamage': targetDamage,\n    'combatEnd': combatEnd\n}","import {chris} from '../helperFunctions.js';\nimport {socket} from '../module.js';\nasync function spawn(sourceActors, updates, duration, originItem, useActorOrigin = false, groupInitiative = false, maxRange, casterToken, spawnAnimation, callbacks) {\n    async function effectMacro () {\n        let summons = effect.flags['chris-premades']?.summons?.ids[effect.name];\n        if (!summons) return;\n        for (let i of summons) {await warpgate.dismiss(i)};\n    }\n    let effect = chris.findEffect(originItem.actor, originItem.name);\n    if (!effect) {\n        let casterEffectData = {\n            'name': originItem.name,\n            'icon': originItem.img,\n            'duration': {\n                'seconds': duration\n            },\n            'origin': originItem.uuid,\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                },\n                'chris-premades': {\n                    'vae': {\n                        'button': 'Dismiss Summon'\n                    }\n                }\n            }\n        };\n        if (useActorOrigin) casterEffectData.origin = originItem.actor.uuid;\n        await chris.createEffect(originItem.actor, casterEffectData);\n        effect = chris.findEffect(originItem.actor, originItem.name);\n    }\n    if (!effect) return;\n    let effectData = {\n        'name': 'Summoned Creature',\n        'icon': originItem.img,\n        'duration': {\n            'seconds': duration\n        },\n        'origin': originItem.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + effect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect);'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    if (!updates) updates = {};\n    setProperty(updates, 'embedded.ActiveEffect.Summoned Creature', effectData);\n    let summonsIds = effect.flags['chris-premades']?.summons?.ids[originItem.name] ?? [];\n    let overwriteInitiative = chris.getConfiguration(originItem, 'overwriteInitiative');\n    let groupInitiativeValue;\n    for (let i of sourceActors) {\n        let updates2 = duplicate(updates);\n        if (originItem.actor.flags['chris-premades']?.feature?.undeadThralls && originItem.system.school === 'nec') { // Undead Thralls automation\n            let wizardLevels = originItem.actor.classes.wizard?.system?.levels;\n            if (wizardLevels) {\n                setProperty(updates2, 'actor.system.attributes.hp.formula', i.system.attributes.hp.formula + ' + ' + wizardLevels);\n                setProperty(updates2, 'actor.system.bonuses.mwak.damage', originItem.actor.system.attributes.prof);\n                setProperty(updates2, 'actor.system.bonuses.rwak.damage', originItem.actor.system.attributes.prof);\n            }\n        }\n        let spawnedTokens = await chris.spawn(i, updates2, callbacks, casterToken, maxRange, spawnAnimation);\n        if (!spawnedTokens) return;\n        let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n        if (!spawnedToken) return;\n        summonsIds.push(spawnedToken.id);\n        if (chris.inCombat()) {\n            let casterCombatant = game.combat.combatants.contents.find(combatant => combatant.actorId === originItem.actor.id);\n            if (casterCombatant) {\n                let initiative;\n                if (groupInitiative) {\n                    if (groupInitiativeValue) {\n                        await socket.executeAsGM('createCombatant', spawnedToken.id, spawnedToken.actor.id, canvas.scene.id, groupInitiativeValue);\n                    } else {\n                        await socket.executeAsGM('createCombatant', spawnedToken.id, spawnedToken.actor.id, canvas.scene.id, null);\n                        await spawnedToken.actor.rollInitiative();\n                        groupInitiativeValue = spawnedToken.actor.initiative;\n                    }\n                } else if (game.settings.get('chris-premades', 'Tasha Initiative') != overwriteInitiative) {\n                    initiative = casterCombatant.initiative - 0.01;\n                    await socket.executeAsGM('createCombatant', spawnedToken.id, spawnedToken.actor.id, canvas.scene.id, initiative)\n                } else {\n                    await socket.executeAsGM('createCombatant', spawnedToken.id, spawnedToken.actor.id, canvas.scene.id, null);\n                    await spawnedToken.actor.rollInitiative();\n                }\n            }\n        }\n    }\n    let effectUpdates = {\n        'flags': {\n            'chris-premades': {\n                'summons': {\n                    'ids': {\n                        [originItem.name]: summonsIds\n                    }\n                }\n            }\n        }\n    }\n    await chris.updateEffect(effect, effectUpdates);\n}\nexport let summons = {\n    'spawn': spawn,\n};","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function animateDead({speaker, actor, token, character, item, args, scope, workflow}) {\n    let zombieActor = game.actors.getName('CPR - Zombie');\n    let skeletonActor = game.actors.getName('CPR - Skeleton');\n    if (!zombieActor || !skeletonActor) {\n        ui.notifications.warn('Missing required sidebar actor!');\n        return;\n    }\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let totalSummons = 1 + (spellLevel - 3) * 2;\n    if (workflow.actor.flags['chris-premades']?.feature?.undeadThralls) totalSummons += 1;\n    if (!totalSummons || totalSummons < 1) return;\n    let sourceActors = await chris.selectDocuments('Select Summons (Max ' + totalSummons + ')', [zombieActor, skeletonActor]);\n    if (!sourceActors) return;\n    if (sourceActors.length > totalSummons) {\n        ui.notifications.info('Too many selected, try again!');\n        return;\n    }\n    let updates =  {\n        'token': {\n            'disposition': 1 \n        }\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? ((chris.jb2aCheck() === 'patreon' && chris.aseCheck()) ? 'shadow' : 'none');\n    await summons.spawn(sourceActors, updates, 86400, workflow.item, undefined, undefined, 10, workflow.token, animation);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Animate Dead - Command', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Animate Dead - Command');\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': workflow.item.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + '; await warpgate.revert(token.document, \"' + effect.name + '\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}","import {chris} from '../helperFunctions.js';\nimport {socket} from '../module.js';\nimport {queue} from './queue.js';\nasync function setupFolder() {\n    let folder = game.folders.find(i => i.name === 'Chris Premades' && i.type === 'Actor');\n    if (!folder) {\n        folder = await Folder.create({\n            'name': 'Chris Premades',\n            'type': 'Actor',\n            'color': '#348f2d'\n        });\n    }\n    let summonsCompendium = game.packs.get('chris-premades.CPR Summons');\n    if (!summonsCompendium) return;\n    let documents = await summonsCompendium.getDocuments();\n    if (documents.length === 0) return;\n    for (let actor of documents) {\n        let folderActor = folder.contents.find(act => act.name === actor.name);\n        let avatarImg;\n        let tokenImg;\n        let imageFlags;\n        if (folderActor) {\n            let folderVersion = folderActor.flags['chris-premades']?.version;\n            let documentVersion = actor.flags['chris-premades']?.version;\n            if (folderVersion && folderVersion === documentVersion) continue;\n            avatarImg = folderActor.img;\n            tokenImg = folderActor.prototypeToken.texture.src;\n            imageFlags = folderActor.flags['chris-premades']?.summon;\n            await folderActor.delete();\n        }\n        let actorData = actor.toObject();\n        actorData.folder = folder.id;\n        if (avatarImg) actorData.img = avatarImg;\n        if (tokenImg) actorData.prototypeToken.texture.src = tokenImg;\n        if (imageFlags) actorData.flags['chris-premades'].summon = imageFlags;\n        await Actor.create(actorData);\n    }\n}\nfunction getCR(prof) {\n    switch (prof) {\n        case 2:\n            return 0;\n        case 3:\n            return 5;\n        case 4:\n            return 9;\n        case 5:\n            return 13;\n        case 6:\n            return 17;\n        case 7:\n            return 21;\n        case 8:\n            return 25;\n        case 9:\n            return 29;\n    }\n}\nasync function spawn(sourceActor, updates = {}, duration, originItem, maxRange, casterToken, spawnAnimation, callbacks) {\n    async function effectMacro() {\n        let originActor = origin.actor;\n        await warpgate.dismiss(token.id);\n        let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n        if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n    }\n    let effectData = {\n        'name': 'Summoned Creature',\n        'icon': originItem.img,\n        'duration': {\n            'seconds': duration\n        },\n        'origin': originItem.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    if (!updates) updates = {};\n    setProperty(updates, 'embedded.ActiveEffect.Summoned Creature', effectData);\n    let spawnedTokens = await chris.spawn(sourceActor, updates, callbacks, casterToken, maxRange, spawnAnimation);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, 'Summoned Creature');\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': originItem.name,\n        'icon': originItem.img,\n        'duration': {\n            'seconds': duration\n        },\n        'origin': originItem.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect);'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    await chris.createEffect(originItem.actor, casterEffectData);\n    if (chris.inCombat()) {\n        let casterCombatant = game.combat.combatants.contents.find(combatant => combatant.actorId === originItem.actor.id);\n        if (casterCombatant) {\n            let initiative = casterCombatant.initiative - 0.01;\n            await socket.executeAsGM('createCombatant', spawnedToken.id, spawnedToken.actor.id, canvas.scene.id, initiative);\n        }\n    }\n    return spawnedToken;\n}\nasync function createCombatant(tokenId, actorId, sceneId, initiative) {\n    await game.combat.createEmbeddedDocuments('Combatant', [{\n        'tokenId': tokenId,\n        'sceneId': sceneId,\n        'actorId': actorId,\n        'hidden': false,\n        'initiative': initiative\n    }]);\n}\nasync function meleeAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let attackBonus = workflow.actor.flags['chris-premades']?.summon?.attackBonus?.melee;\n    if (!attackBonus) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'tashaMeleeAttack', 50);\n    if (!queueSetup) return;\n    let attackRoll = await chris.addToRoll(workflow.attackRoll, attackBonus);\n    await workflow.setAttackRoll(attackRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function rangedAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let attackBonus = workflow.actor.flags['chris-premades']?.summon?.attackBonus?.ranged;\n    if (!attackBonus) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'tashaRangedAttack', 50);\n    if (!queueSetup) return;\n    let attackRoll = await chris.addToRoll(workflow.attackRoll, attackBonus);\n    await workflow.setAttackRoll(attackRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let tashaSummon = {\n    'setupFolder': setupFolder,\n    'getCR': getCR,\n    'spawn': spawn,\n    'createCombatant': createCombatant,\n    'meleeAttack': meleeAttack,\n    'rangedAttack': rangedAttack\n};","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('What item size?', [['Large', 'lg'], ['Medium', 'med'], ['Small', 'sm'], ['Tiny','tiny']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Dancing Item');\n    if (!sourceActor) return;\n    let irrpressibleFormData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Irrepressible Dance', false);\n    if (!irrpressibleFormData) return;\n    irrpressibleFormData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Irrepressible Dance');\n    let immutableFormData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Immutable Form', false);\n    if (!immutableFormData) return;\n    immutableFormData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Immutable Form');\n    let forceEmpoweredSlamData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Force-Empowered Slam', false);\n    if (!forceEmpoweredSlamData) return;\n    forceEmpoweredSlamData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Force-Empowered Slam');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let bardLevel = workflow.actor.classes?.bard?.system?.levels;\n    if (!bardLevel) return;\n    let hpFormula = 10 + 5 * bardLevel;\n    let heightWidth;\n    let scale;\n    switch (selection) {\n        case 'tiny': \n            scale = '0.5';\n            heightWidth = '1';\n            break;  \n        case 'sm':\n            scale = '0.8';\n            heightWidth = '1';\n            break;\n        case 'med':\n            scale = '1';\n            heightWidth = '1';\n            break;\n        case 'lg':\n            scale = '1';\n            heightWidth = 2;\n            break;\n    }\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Dancing Item';\n    if (name === '') name = 'Dancing Item';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            },\n            'traits': {\n                'size': selection\n            },\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition,\n            'height': heightWidth,\n            'width': heightWidth,\n            'texture': {\n                'scaleX': scale,\n                'scaleY': scale\n            }\n        },\n        'embedded': {\n            'Item': {\n                [irrpressibleFormData.name]: irrpressibleFormData,\n                [immutableFormData.name]: immutableFormData,\n                [forceEmpoweredSlamData.name]: forceEmpoweredSlamData,\n                [dodgeData.name]: dodgeData,\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? (chris.jb2aCheck() === 'patreon' && chris.aseCheck()) ? 'default' : 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 30, workflow.token, animation);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Animating Performance - Command', false);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Animating Performance - Command');\n    if (!featureData) return;\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Dancing Item',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, 'Animating Performance');\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Dancing Item\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}\nasync function irrepressibleDance(token, origin) {\n    if (token.actor.system.attributes.hp.value === 0) return;\n    if (!game.combat.current.tokenId) return;\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 10) return;\n    let speedValue = 10;\n    let disposition = targetToken.document.disposition;\n    if (disposition === -1) speedValue = -10;\n    let effect = chris.findEffect(targetToken.actor, 'Irrepressible Dance');\n    if (effect) await chris.removeEffect(effect);\n    let effectData = {\n        'label': 'Irrepressible Dance',\n        'icon': origin.img,\n        'origin': origin.uuid,\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.walk',\n                'mode': 2,\n                'value': speedValue,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'combatEnd'\n                ],\n                'stackable': 'none',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}\nexport let animatingPerformance = {\n    'item': item,\n    'irrepressibleDance': irrepressibleDance,\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function antagonize({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.failedSaves.size) return;\n    let targetToken = workflow.targets.first();\n    let reaction = chris.findEffect(targetToken.actor, 'Reaction');\n    let nearbyTargets;\n    if (!reaction) {\n        nearbyTargets = chris.findNearby(targetToken, 5, 'ally', true);\n    }\n    if (reaction || !nearbyTargets.length) {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 12\n            },\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.disadvantage.attack.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'turnStartSource',\n                        '1Attack'\n                    ]\n                }\n            }\n        }\n        await chris.createEffect(targetToken.actor, effectData);\n    } else {\n        let weapons = targetToken.actor.items.filter(i => i.type === 'weapon' && i.system.equipped);\n        let weapon;\n        if (!weapons.length) {\n            chris.remoteDialog(workflow.item.name, [['Ok', true]], chris.lastGM(), 'Target does not have any weapons equipped!');\n            return;\n        } else if (weapons.length === 1) {\n            weapon = weapons[0];\n        } else {\n            await chris.gmDialogMessage();\n            [weapon] = await chris.remoteDocumentDialog(chris.lastGM(), 'What weapon is used to attack?', weapons);\n            await chris.clearGMDialogMessage();\n            if (!weapon) return;\n        }\n        let target;\n        if (nearbyTargets.length === 1) {\n            target = nearbyTargets[0].document;\n        } else {\n            let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, nearbyTargets, true, 'one', false, false, 'Who gets attacked?');\n            if (!selection.buttons) return;\n            let targetUuid = selection.inputs.find(i => i);\n            if (!targetUuid) return;\n            target = await fromUuid(targetUuid);\n        }\n        let [config , options] = constants.syntheticItemWorkflowOptions([target.uuid]);\n        await warpgate.wait(100);\n        let test = await chris.remoteRollItem(weapon, config, options, chris.firstOwner(target).id);\n        console.log(test);\n    }\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system?.properties?.mgc !== true && workflow.item.name !== 'Force-Empowered Rend') return;\n    let effect = chris.findEffect(workflow.actor, 'Arcane Jolt');\n    if (!effect) return;\n    let originFeature = await fromUuid(effect.origin);\n    if (!originFeature) return;\n    let scale = workflow.actor.system?.scale?.['battle-smith']?.['arcane-jolt'].formula; \n    if (!scale) {\n        scale = workflow.actor.flags['chris-premades']?.feature?.arcaneJoltScale;\n        if (!scale) return;\n    }\n    if (chris.inCombat()) {\n        let turnCheck = chris.perTurnCheck(originFeature, 'feature', 'arcaneJolt', false);\n        if (!turnCheck) return;\n    }\n    let selection = await chris.dialog('Use Arcane Jolt?', [['Yes', true], ['No', false]]);\n    if (!selection) return;\n    if (selection === false) return;\n    let selection2 = await chris.dialog('Harm or Heal?', [['Harm', 'harm'], ['Heal', 'heal']]);\n    if (!selection2) return;\n    if (selection2 === 'harm') {\n        let queueSetup = await queue.setup(workflow.item.uuid, 'arcaneJolt', 250);\n        if (!queueSetup) return;\n        if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feature.arcaneJolt.turn', game.combat.round + '-' + game.combat.turn);\n        let bonusDamageFormula = scale + '[force]';\n        if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n        let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n        let damageRoll = await new Roll(damageFormula).roll({async: true});\n        await workflow.setDamageRoll(damageRoll);\n        await originFeature.use();\n        queue.remove(workflow.item.uuid);\n    }\n    if (selection2 === 'heal') {\n        let targetToken = workflow.targets.first();\n        let nearbyTargets = chris.findNearby(targetToken, 30, 'enemy');\n        if (nearbyTargets.length === 0) return;\n        let buttons = [\n            {\n                'label': 'Yes',\n                'value': true\n            }, {\n                'label': 'No',\n                'value': false\n            }\n        ];\n        let queueSetup = await queue.setup(workflow.item.uuid, 'arcaneJolt', 450);\n        if (!queueSetup) return;\n        if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feature.arcaneJolt.turn', game.combat.round + '-' + game.combat.turn);\n        let selected = await chris.selectTarget('Who to heal?', buttons, nearbyTargets, true, 'one');\n        if (selected.buttons === false) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let healTargetTokenUuid = selected.inputs.find(id => id != false);\n        if (!healTargetTokenUuid) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let healTargetToken = await fromUuid(healTargetTokenUuid);\n        let damageDice = scale + '[healing]';\n        let diceRoll = await new Roll(damageDice).roll({async: true});\n        await chris.applyWorkflowDamage(workflow.token, diceRoll, 'healing', [healTargetToken], workflow.item.name, workflow.itemCardId);\n        await originFeature.use();\n        queue.remove(workflow.item.uuid);\n    }\n}\nasync function updateUses({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.actor.type === 'character') {\n        let effect = chris.findEffect(workflow.actor, 'Arcane Jolt');\n        if (!effect) return;\n        let originFeature = await fromUuid(effect.origin);\n        if (!originFeature) return;\n        let effect2 = chris.findEffect(workflow.actor, 'Steel Defender');\n        if (!effect2) return;\n        let spawnedTokenUuid = effect2.flags?.['chris-premades']?.feature?.steelDefender?.spawnedTokenUuid;\n        if (!spawnedTokenUuid) return;\n        let spawnedToken = await fromUuid(spawnedTokenUuid);\n        if (!spawnedToken) return;\n        let spawnedItem = spawnedToken.actor.items.getName('Arcane Jolt');\n        if (!spawnedItem) return;\n        await spawnedItem.update({'system.uses.value': originFeature.system?.uses?.value});\n    }\n    if (workflow.actor.type === 'npc') {\n        let effect3 = chris.findEffect(workflow.actor, 'Summoned Creature');\n        if (!effect3) return;\n        let origin = await fromUuid(effect3.origin);\n        if (!origin) return;\n        let itemToUpdate = origin.actor.items.getName('Arcane Jolt');\n        if (!itemToUpdate) return;\n        let originItem = workflow.actor.items.getName('Arcane Jolt');\n        if (!originItem) return;\n        await itemToUpdate.update({'system.uses.value': originItem.system?.uses?.value});\n    }\n}\nasync function combatEnd(origin) {\n    await origin.setFlag('chris-premades', 'feature.arcaneJolt.turn', '');\n}\nexport let arcaneJolt = {\n    'item': item,\n    'updateUses': updateUses,\n    'combatEnd': combatEnd,\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nimport {constants} from '../../../../constants.js';\nasync function damage(targetToken, {workflow, ditem}) {\n    if (ditem.newHP >= ditem.oldHP) return;\n    async function check(target) {\n        let effect = chris.findEffect(target.actor, 'Arcane Ward');\n        if (!effect) return;\n        if (!effect.origin) return;\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        let uses = originItem.system.uses.value;\n        if (uses === 0) return;\n        let absorbed = Math.min(ditem.appliedDamage, uses);\n        let keptDamage = ditem.appliedDamage - absorbed;\n        if (ditem.oldTempHP > 0) {\n            if (keptDamage > ditem.oldTempHP) {\n                ditem.newTempHP = 0;\n                keptDamage -= ditem.oldTempHP;\n                ditem.tempDamage = ditem.oldTempHP;\n            } else {\n                ditem.newTempHP = ditem.oldTempHP - keptDamage;\n                ditem.tempDamage = keptDamage;\n            }\n        }\n        let maxHP = target.actor.system.attributes.hp.max;\n        ditem.hpDamage = Math.clamped(keptDamage, 0, maxHP);\n        ditem.newHP = Math.clamped(ditem.oldHP - keptDamage, 0, maxHP);\n        ditem.appliedDamage = keptDamage;\n        ditem.totalDamage = keptDamage;\n        let updates = {\n            'embedded': {\n                'Item': {\n                    [originItem.name]: {\n                        'system.uses.value': uses - absorbed\n                    }\n                }\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': originItem.name,\n            'description': originItem.name\n        };\n        await warpgate.mutate(target.document, updates, {}, options);\n        return true;\n    }\n    let queueSetup = await queue.setup(workflow.uuid, 'arcaneWard', 350);\n    if (!queueSetup) return;\n    if (targetToken.actor.classes?.wizard?.subclass?.system?.identifier === 'school-of-abjuration') {\n        let shielded = await check(targetToken);\n        if (shielded) {\n            queue.remove(workflow.uuid);\n            return;\n        }\n    }\n    let tokens = chris.findNearby(targetToken, 30, 'ally').filter(i => i.actor.classes?.wizard?.subclass?.system?.identifier === 'school-of-abjuration' && i.actor.classes?.wizard?.system?.levels >= 6 && !chris.findEffect(i.actor, 'Reaction'));\n    if (tokens.length === 0) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    for (let token of tokens) {\n        let firstOwner = chris.firstOwner(token);\n        await chris.thirdPartyReactionMessage(firstOwner);\n        let message = 'Protect ' + targetToken.actor.name + ' with your arcane ward?';\n        if (firstOwner.isGM) message = '[' + token.actor.name + '] ' + message;\n        let selection = await chris.remoteDialog('Arcane Ward', constants.yesNo, firstOwner.id, message);\n        if (!selection) continue;\n        let shielded = check(token);\n        if (shielded) {\n            await chris.addCondition(token.actor, 'Reaction', false);\n            let effect = chris.findEffect(token.actor, 'Projected Ward');\n            if (!effect) break;\n            if (!effect.origin) break;\n            let originItem = await fromUuid(effect.origin);\n            if (!originItem) break;\n            await originItem.use();\n        }\n    }\n    await chris.clearThirdPartyReactionMessage();\n    queue.remove(workflow.uuid);\n}\nasync function spell({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell') return;\n    if (workflow.item.system.school != 'abj') return;\n    if (workflow.castData.castLevel === 0) return;\n    let effect = chris.findEffect(workflow.actor, 'Arcane Ward');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let maxUses = workflow.actor.classes.wizard.system.levels * 2 + workflow.actor.system.abilities.int.mod;\n    let add = workflow.castData.castLevel * 2;\n    if (!originItem.flags['chris-premades']?.feature?.arcaneWard?.firstUse) {\n        add = maxUses;\n        await originItem.setFlag('chris-premades', 'feature.arcaneWard.firstUse', true);\n    }\n    let uses = originItem.system.uses.value;\n    let updates = {\n        'embedded': {\n            'Item': {\n                [originItem.name]: {\n                    'system.uses.value': Math.clamped(uses + add, 0, maxUses),\n                    'system.uses.max': maxUses\n                }\n            }\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': originItem.name,\n        'description': originItem.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function longRest(actor, data) {\n    let effect = chris.findEffect(actor, 'Arcane Ward');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    await originItem.update({\n        'system.uses.value': 0,\n        'system.uses.max': actor.classes.wizard.system.levels * 2 + actor.system.abilities.int.mod,\n        'flags.chris-premades.feature.arcaneWard.firstUse': false\n    });\n}\nexport let arcaneWard = {\n    'damage': damage,\n    'spell': spell,\n    'longRest': longRest\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function guardianArmor({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Arcane Armor: Guardian Model');\n    if (effect) return;\n    let feature = chris.getItem(workflow.actor, 'Infiltrator Armor: Lightning Launcher');\n    if (feature) {\n        await feature.delete();\n    }\n    let fieldUses = workflow.actor.flags['chris-premades']?.feature?.defensiveField;\n    if (!fieldUses) fieldUses = workflow.actor.system.attributes.prof;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Guardian Armor: Defensive Field', false);\n    let featureData2 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Guardian Armor: Thunder Gauntlets', false);\n    if (!featureData || !featureData2) return;\n    featureData.system.uses.value = fieldUses;\n    featureData.system.uses.max = workflow.actor.system.attributes.prof;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Guardian Armor: Defensive Field');\n    setProperty(featureData, 'flags.chris-premades.info.name', 'Guardian Armor: Defensive Field');\n    setProperty(featureData2, 'flags.chris-premades.info.name', 'Guardian Armor: Thunder Gauntlets')\n    featureData2.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Guardian Armor: Thunder Gauntlets');\n    await workflow.actor.createEmbeddedDocuments('Item', [featureData, featureData2]);\n    let effectData = {\n        'name': 'Arcane Armor: Guardian Model',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid\n    };\n    await chris.createEffect(workflow.actor, effectData);\n    let effect2 = chris.findEffect(workflow.actor, 'Arcane Armor: Infiltrator Model');\n    if (effect2) await effect2.delete();\n}\nasync function infiltratorArmor({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Arcane Armor: Infiltrator Model');\n    if (effect) return;\n    let feature = chris.getItem(workflow.actor, 'Guardian Armor: Defensive Field');\n    if (feature) {\n        workflow.actor.setFlag('chris-premades', 'feature.defensiveField', feature.system.uses.value);\n        await feature.delete();\n    }\n    let feature2 = workflow.actor.items.getName('Guardian Armor: Thunder Gauntlets');\n    if (feature2) {\n        await feature2.delete();\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Infiltrator Armor: Lightning Launcher', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Infiltrator Armor: Lightning Launcher');\n    setProperty(featureData, 'flags.chris-premades.info.name', 'Infiltrator Armor: Lightning Launcher');\n    await workflow.actor.createEmbeddedDocuments('Item', [featureData]);\n    let effectData = {\n        'name': 'Arcane Armor: Infiltrator Model',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'system.attributes.movement.walk',\n                'value': '+5',\n                'mode': 2,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.advantage.skill.ste',\n                'value': 1,\n                'mode': 0,\n                'priority': 20\n            }\n        ]\n    };\n    await chris.createEffect(workflow.actor, effectData);\n    let effect2 = chris.findEffect(workflow.actor, 'Arcane Armor: Guardian Model');\n    if (effect2) await effect2.delete();\n}\nasync function lightningLauncher({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.isFumble) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lightningLauncher', 50);\n    if (!queueSetup) return;\n    let doExtraDamage = chris.perTurnCheck(workflow.item, 'feature', 'lightningLauncher', true, workflow.token.id);\n    if (!doExtraDamage) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selection = await chris.dialog('Lightning Launcher: Apply extra lightning damage?', [['Yes', true], ['No', false]]);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) await workflow.item.setFlag('chris-premades', 'feature.lightningLauncher.turn', game.combat.round + '-' + game.combat.turn);\n    let bonusDamageFormula = '1d6[lightning]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function thunderGauntlets({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    let effect = chris.findEffect(workflow.actor, 'Thunder Gauntlets');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    let originActorUuid = origin.actor.uuid;\n    let targetActorUuid = workflow.targets.first().actor.uuid;\n    if (originActorUuid === targetActorUuid) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'thunderGauntlets', 50);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Thunder Gauntlets');\n    queue.remove(workflow.item.uuid);\n}\nasync function longRest(actor, data) {\n    if (!data.longRest) return;\n    let item = actor.items.getName('Armorer');\n    if (!item) return;\n    if (item.type != 'subclass') return;\n    actor.setFlag('chris-premades', 'feature.defensiveField', actor.system.attributes.prof);\n}\nexport let armorModel = {\n    'guardianArmor': guardianArmor,\n    'infiltratorArmor': infiltratorArmor,\n    'lightningLauncher': lightningLauncher,\n    'thunderGauntlets': thunderGauntlets,\n    'longRest': longRest\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nimport {queue} from '../../utility/queue.js';\nasync function onHit(workflow, targetToken) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.meleeAttacks.includes(workflow.item?.system?.actionType)) return;\n    let effect = chris.findEffect(targetToken.actor, 'Armor of Agathys');\n    if (!effect) return;\n    let damage = effect.flags['midi-qol'].castData.castLevel * 5;\n    let queueSetup = await queue.setup(workflow.uuid, 'armorOfAgathys', 50);\n    if (!queueSetup) return;\n    let tempHP = targetToken.actor.system.attributes.hp.temp;\n    if (tempHP === 0) await chris.removeEffect(effect);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Armor of Agathys - Reflect');\n    if (!featureData) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Armor of Agathys - Reflect');\n    delete featureData._id;\n    featureData.system.damage.parts[0][0] = damage + '[' + translate.damageType('cold') + ']';\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.uuid);\n    //Animations by: eskiemoh\n    new Sequence()\n        .effect()\n        .file('jb2a.impact.004.blue')\n        .atLocation(targetToken)\n        .rotateTowards(workflow.token)\n        .scaleToObject(1.45)\n        .spriteScale({'x': 0.75, 'y': 1.0 })\n        .filter('ColorMatrix', {'saturate': -0.75, 'brightness': 1.5})\n        .spriteOffset({'x': -0.15}, {'gridUnits': true})\n\n        .effect()\n        .atLocation(targetToken)\n        .file('jb2a.side_impact.part.fast.ice_shard.blue')\n        .rotateTowards(workflow.token)\n        .scaleToObject(2)\n        .randomizeMirrorY()\n        .zIndex(2)\n\n        .effect()\n        .from(workflow.token)\n        .atLocation(workflow.token)\n        .fadeIn(100)\n        .fadeOut(100)\n        .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 175, 'pingPong': true, 'gridUnits': true})\n        .scaleToObject(workflow.token.document.texture.scaleX)\n        .duration(500)\n        .opacity(0.15)\n\n        .play()\n}\nasync function start(token) {\n    if (chris.jb2aCheck() != 'patreon') return;\n    //Animations by: eskiemoh\n    new Sequence()\n        .effect()\n        .file('jb2a.ward.rune.dark_purple.01')\n        .atLocation(token)\n        .scaleToObject(1.85)\n        .belowTokens()\n        .fadeOut(3000)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .filter('ColorMatrix', {'brightness': 2, 'saturate': -0.75, 'hue': -75})\n        \n        .effect()\n        .attachTo(token)\n        .delay(250)\n        .file('jb2a.magic_signs.rune.02.complete.06.blue')\n        .scaleToObject(0.75 * token.document.texture.scaleX)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .playbackRate(2.5)\n        .opacity(1)\n        .zIndex(3)\n        \n        .effect()\n        .attachTo(token)\n        .file('jb2a.extras.tmfx.border.circle.inpulse.01.fast')\n        .scaleToObject(1.5 * token.document.texture.scaleX)\n        .opacity(1)\n        .zIndex(3)\n        \n        .effect()\n        .attachTo(token)\n        .name('Armor of Agathys')\n        .file('jb2a.extras.tmfx.inflow.circle.01')\n        .scaleToObject(1 * token.document.texture.scaleX)\n        .randomRotation()\n        .fadeIn(1500)\n        .fadeOut(500)\n        .opacity(0.9)\n        .zIndex(2)\n        .extraEndDuration(1500)\n        .private()\n        .persist()\n        \n        .effect()\n        .attachTo(token)\n        .name('Armor of Agathys')\n        .file('jb2a.extras.tmfx.outflow.circle.01')\n        .scaleToObject(1.35 * token.document.texture.scaleX)\n        .randomRotation()\n        .fadeIn(1500)\n        .fadeOut(500)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .opacity(0.9)\n        .extraEndDuration(1500)\n        .zIndex(1)\n        .private()\n        .persist()\n        \n        .effect()   \n        .attachTo(token)\n        .name('Armor of Agathys')\n        .file('jb2a.template_circle.symbol.normal.snowflake.blue')\n        .scaleToObject(1.35 * token.document.texture.scaleX)\n        .randomRotation()\n        .fadeIn(1500)\n        .fadeOut(500)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .belowTokens()\n        .opacity(0.75)\n        .extraEndDuration(1500)\n        .zIndex(2)\n        .private()\n        .persist()\n        \n        .effect()\n        .attachTo(token)\n        .name('Armor of Agathys')\n        .file('jb2a.shield.01.loop.blue')\n        .scaleToObject(1.5 * token.document.texture.scaleX)\n        .opacity(0.75)\n        .fadeIn(1500)\n        .fadeOut(500)\n        .zIndex(1)\n        .persist()\n        \n        .waitUntilFinished(-1000)\n        .play();\n}\nasync function end(token) {\n    if (chris.jb2aCheck() != 'patreon') return;\n    Sequencer.EffectManager.endEffects({'name': 'Armor of Agathys', 'object': token});\n    new Sequence()\n        .effect()\n        .attachTo(token)\n        .file('jb2a.shield.01.outro_explode.blue')\n        .scaleToObject(1.5 * token.document.texture.scaleX)\n        .opacity(0.75)\n        .fadeOut(500)\n        .zIndex(1)\n\n        .play()\n}\nexport let armorOfAgathys = {\n    'onHit': onHit,\n    'start': start,\n    'end': end\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function armorOfMagicalStrength({speaker, actor, token, character, item, args, scope, workflow}) {\n    await chris.removeCondition(workflow.actor, 'Prone');\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function auraOfAlacrity(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    if (targetToken.document.disposition != token.document.disposition) return;\n    let distance = chris.getDistance(token, targetToken);\n    let auraDistance = 5;\n    if (token.actor.classes.paladin?.system?.levels >= 18) auraDistance = 10;\n    if (distance > auraDistance) return;\n    let effect = chris.findEffect(targetToken.actor, 'Aura of Alacrity');\n    if (effect) await chris.removeEffect(effect);\n    let effectData = {\n        'label': 'Aura of Alacrity',\n        'icon': origin.img,\n        'origin': origin.uuid,\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.walk',\n                'mode': 2,\n                'value': '+10',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function auraOfCourage(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    let originActor = originToken.actor;\n    if (!originActor) return;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Courage - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Courage',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.ci.value',\n                'mode': 0,\n                'value': 'frightened',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    }\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n    let frightenedEffect = chris.findEffect(token.actor, 'Frightened');\n    if (frightenedEffect) chris.removeEffect(frightenedEffect);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function auraOfDevotion(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Devotion - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Devotion',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.ci.value',\n                'mode': 0,\n                'value': 'charmed',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    }\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}","import {chris} from '../../../../helperFunctions.js';\nasync function aura(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Hate - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Hate',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.bonuses.mwak.damage',\n                'mode': 2,\n                'value': '+ ' + selectedAura.castLevel,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function special(sourceToken, targetToken) {\n    if (sourceToken.disposition === targetToken.disposition) return true;\n    let validTypes = [\n        'undead',\n        'fiend'\n    ];\n    if (validTypes.includes(chris.raceOrType(targetToken.actor))) return true;\n    return false;\n}\nexport let auraOfHate = {\n    'aura': aura,\n    'special': special\n}","import {chris} from '../../helperFunctions.js';\nimport {effectAuras} from '../../utility/effectAuras.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let flagAuras = {\n        'auraOfLife': {\n            'name': 'auraOfLife',\n            'castLevel': workflow.castData.castLevel,\n            'range': 30,\n            'disposition': 'ally',\n            'effectName': 'Aura of Life',\n            'macroName': 'auraOfLife'\n        }\n    }\n    effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n}\nasync function end(token) {\n    effectAuras.remove('auraOfLife', token.document.uuid);\n}\nfunction effect(effect, updates, options, user) {\n    if (!updates.changes || !effect.parent) return;\n    if (updates.changes.length === 0) return;\n    if (effect.parent.constructor.name != 'Actor5e') return;\n    if (!chris.findEffect(effect.parent, 'Aura of Life')) return;\n    let changed = false;\n    for (let i of updates.changes) {\n        if (i.key != 'system.attributes.hp.tempmax') continue;\n        let number = Number(i.value);\n        if (isNaN(number) || number > 0) continue;\n        i.value = 0;\n        changed = true;\n    }\n    if (!changed) return;\n    effect.updateSource({'changes': updates.changes});\n}\nasync function aura(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Life - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Life',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'necrotic',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function turns(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let effect = chris.findEffect(targetToken.actor, 'Aura of Life');\n    if (!effect) return;\n    if (effect.origin != origin.uuid) return;\n    if (targetToken.actor.system.attributes.hp.value > 0) return;\n    let deadEffect = chris.findEffect(targetToken.actor, 'Dead');\n    if (deadEffect) return;\n    await origin.displayCard();\n    await chris.applyDamage([targetToken], 1, 'healing');\n}\nexport let auraOfLife = {\n    'item': item,\n    'end': end,\n    'aura': aura,\n    'effect': effect,\n    'turns': turns\n}","import {chris} from '../../../helperFunctions.js';\nexport async function auraOfProtection(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Protection - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Protection',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.bonuses.abilities.save',\n                'mode': 2,\n                'value': '+' + selectedAura.castLevel,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nimport {effectAuras} from '../../utility/effectAuras.js';\nasync function move(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Purity - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Purity',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.ci.value',\n                'mode': 0,\n                'value': 'diseased',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'poison',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.blinded',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.charmed',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.deafened',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.frightened',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.paralyzed',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.poisoned',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.CR.stunned',\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let flagAuras = {\n        'auraOfPurity': {\n            'name': 'auraOfPurity',\n            'castLevel': workflow.castData.castLevel,\n            'range': 30,\n            'disposition': 'ally',\n            'effectName': 'Aura of Purity',\n            'macroName': 'auraOfPurity'\n        }\n    };\n    effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n}\nasync function end(token) {\n    effectAuras.remove('auraOfPurity', token.document.uuid);\n}\nexport let auraOfPurity = {\n    'move': move,\n    'item': item,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nexport async function auraOfVitality({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Aura of Vitality Healing', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Aura of Vitality Healing');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Aura of Vitality');\n    }\n    let effectData = {\n        'name': 'Aura of Vitality',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': featureData.name,\n        'origin': workflow.item.uuid\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function auraOfWarding(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Aura of Warding - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Aura of Warding',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.custom',\n                'mode': 2,\n                'value': 'Magical Damage',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    }\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function malfunction(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0) return;\n    if (targetToken.actor.system.attributes.hp.value === 0) return;\n    let appliedDamage = workflow.damageList.find(i => i.tokenId === targetToken.id)?.appliedDamage;\n    if (!appliedDamage) return;\n    if (appliedDamage < 15) return;\n    let roll = await new Roll('1d20').roll({async: true});\n    let total = roll.total;\n    let effect = chris.findEffect(targetToken.actor, 'Malfunction');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let originItem = await fromUuidSync(effect.origin);\n    if (!originItem) return;\n    let flavor = originItem.name + ': ';\n    let effectData = {\n        'label': originItem.name,\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 86400\n        }\n    }\n    let magicalDay = false;\n    if (10 > total) {\n        flavor += 'All Fine Here!'\n    } else if (13 > total) {\n        flavor += 'My Mind Is Going. I Can Feel It.';\n        effectData.duration.seconds = 60;\n        setProperty(effectData, 'changes', [{\n            'key': 'macro.CE',\n            'value': 'Incapacitated',\n            'mode': 0,\n            'priority': 20\n        }]);\n    } else if (15 >  total) {\n        flavor += 'You\\'ve Disarmed Me!';\n    } else if (17 > total) {\n        flavor += 'Who Turned Out the Lights?';\n        setProperty(effectData, 'changes', [{\n            'key': 'macro.CE',\n            'value': 'Blinded',\n            'mode': 0,\n            'priority': 20\n        },\n        {\n            'key': 'macro.CE',\n            'value': 'Deafened',\n            'mode': 0,\n            'priority': 20\n        }]);\n    } else {\n        flavor += 'Have a Magical Day!';\n        magicalDay = true;\n    }\n    roll.toMessage({\n        'rollMode': 'roll',\n        'speaker': {'alias': name},\n        'flavor': flavor\n    });\n    if (total < 11) return;\n    await chris.createEffect(targetToken.actor, effectData);\n    if (!magicalDay) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Have a Magical Day!', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Have a Magical Day!');\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    await warpgate.wait(100);\n    await feature.use();\n    await chris.applyDamage(targetToken, '10000', 'none');\n}","import {malfunction} from './malfunction.js';\nexport let autoGnome = {\n    'malfunction': malfunction\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function awakenedSpellbook({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    if (workflow.item.type != 'spell') {\n        if (workflow.item.type === 'feat') {\n            if (!workflow.item.flags['chris-premades']?.spell?.castData) return;\n        } else return;\n    }\n    let spellLevel = workflow.item.flags['chris-premades']?.spell?.castData?.castLevel ?? workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'awakenedSpellbook', 101);\n    if (!queueSetup) return;\n    let oldDamageRoll = workflow.damageRoll;\n    let oldFlavor = oldDamageRoll.terms?.map(term=>term?.flavor)\n    let spells = workflow.actor.items.filter(i => i.type === 'spell' && i.system?.level === spellLevel && i.system?.damage?.parts?.length > 0);\n    let values = [];\n    let effect = chris.findEffect(workflow.actor, 'Awakened Spellbook: Replace Damage');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    switch (spellLevel){\n        case 1:\n            if (actor.items.getName('Magic Missile') || chris.getConfiguration(originItem, 'magicmissile')) values.push('force');\n            if (actor.items.getName('Chromatic Orb') || chris.getConfiguration(originItem, 'chromaticorb')) values.push('acid', 'cold', 'fire', 'lightning', 'poison', 'thunder');\n            break;\n        case 2:\n            if (actor.items.getName('Dragon\\s Breath') || chris.getConfiguration(originItem, 'dragonsbreath')) values.push('acid', 'cold', 'fire', 'lightning', 'poison');\n            break;\n        case 3:\n            if (actor.items.getName('Protection from Energy') || chris.getConfiguration(originItem, 'protectionfromenergy')) values.push('acid', 'cold', 'fire', 'lightning', 'thunder');\n            if (actor.items.getName('Glyph of Warding') || chris.getConfiguration(originItem, 'glyphofwarding')) values.push('acid', 'cold', 'fire', 'lightning', 'thunder');\n            if (actor.items.getName('Spirit Shroud') || chris.getConfiguration(originItem, 'spiritshroud')) values.push('cold', 'necrotic', 'radiant');\n            if (actor.items.getName('Vampiric Touch') || chris.getConfiguration(originItem, 'vampirictouch')) values.push('necrotic');\n            break;\n        case 4:\n            if (actor.items.getName('Elemental Bane') || chris.getConfiguration(originItem, 'elementalbane')) values.push('acid', 'cold', 'fire', 'lightning', 'thunder');\n            break;\n        case 5:\n            if (actor.items.getName('Cloudkill') || chris.getConfiguration(originItem, 'cloudkill')) values.push('poison');\n            break;\n        case 7:\n            if (actor.items.getName('Prismatic Spray') || chris.getConfiguration(originItem, 'prismaticspray')) values.push('acid', 'cold', 'fire', 'lightning', 'poison');\n            break;\n        case 8:\n            if (actor.items.getName('Illusory Dragon') || chris.getConfiguration(originItem, 'illusorydragon')) values.push('acid', 'cold', 'fire', 'lightning', 'necrotic', 'poison');\n           break;\n        case 9:\n            if (actor.items.getName('Prismatic Wall') || chris.getConfiguration(originItem, 'prismaticwall')) values.push('acid', 'cold', 'fire', 'lightning', 'poison');\n            break;\n    }\n    values = values.filter(function(item, i, arr){return arr.indexOf(item) === i; });\n    for (let i = 0; spells.length > i; i++) {\n        let currentItem = spells[i];\n        for (let j = 0; currentItem.system.damage.parts.length > j; j++) {\n            let flavor = currentItem.system.damage.parts[j][1];\n            if (!flavor) break;\n            if (values.includes(flavor.toLowerCase()) === false && flavor != 'healing' && flavor != 'temphp' && flavor != 'none' && flavor != 'midi-none') values.push(flavor);\n        }\n    }\n    if (values.length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    function valuesToOptions(arr) {\n        let optionsPush = [];\n        for (let i = 0; arr.length > i; i++) {\n            if (typeof arr[i] != 'string') return;\n            optionsPush.push([arr[i].charAt(0).toUpperCase() + arr[i].slice(1), arr[i]]);\n        }\n        return optionsPush;\n    }\n    let options = valuesToOptions(values);\n    if (options.length < 2) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    options.push(['No', false]);\n    let selection = await chris.dialog('Change damage type for ' + workflow.item.name + '?', options);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    for (let i = 0; oldFlavor.length > i; i++) {\n        workflow.damageRoll.terms[i].options.flavor = selection;\n        if (oldFlavor[i]) {\n            workflow.damageRoll._formula = workflow.damageRoll._formula.replace(oldFlavor[i], selection);\n        }\n    }\n    await workflow.setDamageRoll(workflow.damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nexport async function balmOfPeace({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Balm of Peace', false);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Balm of Peace');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([]);\n    for (let targetToken of workflow.targets.values()) {\n        options.targetUuids = [targetToken.document.uuid];\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let classIdentifier = chris.getConfiguration(workflow.item, 'classidentifier') ?? 'bard';\n    let scaleIdentifier = chris.getConfiguration(workflow.item, 'scaleidentifier') ?? 'bardic-inspiration';\n    let scale = workflow.actor.system.scale[classIdentifier]?.[scaleIdentifier];\n    if (!scale) {\n        ui.notifications.warn('Actor does not appear to have a Bardic Inspiration scale set!');\n        return;\n    }\n    let effectData = {\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.bardicInspiration.attack,preCheckHits',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.label',\n                'mode': 5,\n                'value': 'Bardic Inspiration',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.save.all',\n                'mode': 5,\n                'value': scale.formula,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 600\n        },\n        'origin': workflow.item.uuid,\n        'name': workflow.item.name,\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'bardicInspiration': scale.formula\n                }\n            }\n        }\n    };\n    let moteOfPotentialeOfPotential = chris.getItem(workflow.actor, 'Mote of Potential');\n    if (moteOfPotentialeOfPotential) {\n        effectData.changes = effectData.changes.concat(\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.check.all',\n                'mode': 5,\n                'value': '2' + scale.die + 'kh',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.skill.all',\n                'mode': 5,\n                'value': '2' + scale.die + 'kh',\n                'priority': 20\n            } ,\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.macroToCall',\n                'mode': 5,\n                'value': 'function.chrisPremades.macros.moteOfPotential',\n                'priority': 20\n            }\n        );\n        setProperty(effectData, 'flags.chris-premades.feature.moteOfPotential', chris.getSpellDC(workflow.item));\n    } else {\n        effectData.changes = effectData.changes.concat(\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.check.all',\n                'mode': 5,\n                'value': scale.formula,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.optional.bardicInspiration.skill.all',\n                'mode': 5,\n                'value': scale.formula,\n                'priority': 20\n            }\n        );\n    }\n    let magicalInspiration = chris.getItem(workflow.actor, 'Magical Inspiration');\n    if (magicalInspiration) {\n        effectData.changes = effectData.changes.concat(\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.bardicInspiration.damage,preDamageApplication',\n                'priority': 20\n            }\n\n        );\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size || workflow.isFumble) return;\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.feature?.bardicInspiration);\n    if (!effect) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bardicInspiration', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(effect.name, constants.yesNo, 'Use ' + effect.name + '? (Attack Total: ' + workflow.attackTotal + ' )');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let bardDice = effect.flags['chris-premades'].feature.bardicInspiration;\n    await chris.removeEffect(effect);\n    let updatedRoll = await chris.addToRoll(workflow.attackRoll, bardDice);\n    workflow.setAttackRoll(updatedRoll);\n    let moteOfPotential = effect.flags['chris-premades'].feature.moteOfPotential;\n    if (moteOfPotential) {\n        let bardDie = updatedRoll.terms[updatedRoll.terms.length - 1].total;\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Mote of Potential Attack', false);\n        if (!featureData) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Mote of Potential Attack');\n        featureData.system.save.dc = moteOfPotential;\n        featureData.system.damage.parts = [\n            [\n                bardDie + '[thunder]',\n                'thunder'\n            ]\n        ];\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let newTargets = await chris.findNearby(workflow.targets.first(), 5, 'ally', false, true).map(i => i.document.uuid);\n        let [config, options] = constants.syntheticItemWorkflowOptions(newTargets);\n        await warpgate.wait(100);\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size || workflow.item.type != 'spell') return;\n    if ((workflow.item.system.actionType === 'rsak' || workflow.item.system.actionType === 'msak') && !workflow.hitTargets.size) return;\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.feature?.bardicInspiration);\n    if (!effect) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bardicInspiration', 150);\n    if (!queueSetup) return;\n    let selection = await chris.selectTarget('Use Magical Inspiration?', constants.yesNoButton, workflow.targets, false, 'one');\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let bardDice = effect.flags['chris-premades'].feature.bardicInspiration;\n    await chris.removeEffect(effect);\n    let targetTokenID = selection.inputs.find(i => i);\n    if (!targetTokenID) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetDamage = workflow.damageList.find(i => i.tokenId === targetTokenID);\n    let defaultDamageType = workflow.defaultDamageType;\n    let roll = await new Roll(bardDice + '[' + defaultDamageType + ']').roll({async: true});\n    roll.toMessage({\n        'rollMode': 'roll',\n        'speaker': {'alias': name},\n        'flavor': 'Magical Inspiration'\n    });\n    let targetActor = canvas.scene.tokens.get(targetDamage.tokenId).actor;\n    if (!targetActor) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let hasDI = chris.checkTrait(targetActor, 'di', defaultDamageType);\n    if (hasDI) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageTotal = roll.total;\n    let hasDR = chris.checkTrait(targetActor, 'dr', defaultDamageType);\n    if (hasDR) damageTotal = Math.floor(damageTotal / 2);\n    targetDamage.damageDetail[0].push(\n        {\n            'damage': damageTotal,\n            'type': defaultDamageType\n        }\n    );\n    targetDamage.totalDamage += damageTotal;\n    if (workflow.defaultDamageType === 'healing') {\n        targetDamage.newHP += roll.total;\n        targetDamage.hpDamage -= damageTotal;\n        targetDamage.appliedDamage -= damageTotal;\n    } else {\n        targetDamage.appliedDamage += damageTotal;\n        targetDamage.hpDamage += damageTotal;\n        if (targetDamage.oldTempHP > 0) {\n            if (targetDamage.oldTempHP >= damageTotal) {\n                targetDamage.newTempHP -= damageTotal;\n            } else {\n                let leftHP = damageTotal - targetDamage.oldTempHP;\n                targetDamage.newTempHP = 0;\n                targetDamage.newHP -= leftHP;\n            }\n        } else {\n            targetDamage.newHP -= damageTotal;\n        }\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let bardicInspiration = {\n    'item': item,\n    'attack': attack,\n    'damage': damage\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nimport {translate} from '../../translations.js';\nexport async function beaconOfHope(token, {item, workflow, ditem}) {\n    let effect = chris.findEffect(token.actor, 'Beacon of Hope');\n    if (!effect) return;\n    if (!workflow.damageRoll) return;\n    if (workflow.defaultDamageType != translate.healingType('healing')) return;\n    if (chris.checkTrait(token.actor, 'di', 'healing')) return;\n    let newHealingTotal = 0;\n    let queueSetup = await queue.setup(workflow.uuid, 'beaconOfHope', 351);\n    if (!queueSetup) return;\n    for (let i = 0; workflow.damageRoll.terms.length > i; i++) {\n        let flavor = workflow.damageRoll.terms[i].flavor;\n        let isDeterministic = workflow.damageRoll.terms[i].isDeterministic;\n        if (flavor.toLowerCase() === translate.healingType('healing') && !isDeterministic) {\n            newHealingTotal += workflow.damageRoll.terms[i].faces * workflow.damageRoll.terms[i].results.length;\n        } else {\n            if (!isNaN(workflow.damageRoll.terms[i].total)) {\n                newHealingTotal += workflow.damageRoll.terms[i].total;\n            }\n        }\n    }\n    if (chris.checkTrait(token.actor, 'dr', translate.healingType('healing'))) newHealingTotal = Math.floor(newHealingTotal / 2);\n    let maxHP = token.actor.system.attributes.hp.max;\n    ditem.hpDamage = -Math.clamped(newHealingTotal, 0, maxHP - ditem.oldHP);\n    ditem.newHP = Math.clamped(ditem.oldHP + newHealingTotal, 0, maxHP);\n    ditem.totalDamage = newHealingTotal;\n    queue.remove(workflow.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function beguilingTwist({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.failedSaves.size != 1) return;\n    let selection = await chris.dialog('What condition?', [['Charmed', 'Charmed'], ['Frightened', 'Frightened']]);\n    if (!selection) return;\n    let spellDC = chris.getSpellDC(workflow.item);\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.OverTime',\n                'mode': 0,\n                'value': 'label=' + workflow.item.name + ' (End of Turn),turn=end,saveDC=' + spellDC + ',saveAbility=wis,savingThrow=true',\n                'priority': 20\n            },\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': selection,\n                'priority': 20\n            }\n        ]\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}","import {chris} from '../../../../helperFunctions.js'\nexport async function bestialSoul({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog(workflow.item.name, [['Climbing', 'climb'], ['Jumping', 'jump'], ['Swimming', 'swim']], 'Which form?');\n    if (!selection) return;\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ]\n            }\n        }\n    };\n    if (selection != 'jump') {\n        effectData.changes = [\n            {\n                'key': 'system.attributes.movement.' + selection,\n                'mode': 4,\n                'value': '@attributes.movement.walk',\n                'priority': 20\n            }\n        ]\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bestowCurse', 50);\n    if (!queueSetup) return;\n    let choices  = [\n        ['Disadvantage on Ability Score', 'Ability'],\n        ['Disadvantage on Attacks', 'Attack'],\n        ['Waste Turn', 'Turn'],\n        ['Extra Damage', 'Damage'],\n        ['Other', 'Other']\n    ];\n    let selection = await chris.dialog('What curse do you bestow?', choices);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let castLevel = workflow.castData.castLevel;\n    let duration = 60;\n    let concentration = true;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Bestow Curse - ' + selection, false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bestow Curse - ' + selection, false);\n    let effectData;\n    switch (castLevel) {\n        case 4:\n            duration = 600;\n            featureData.system.duration = {\n                'units': 'minute',\n                'value': 10\n            };\n            break;\n        case 5:\n        case 6:\n            duration = 28800;\n            concentration = false;\n            featureData.system.duration = {\n                'units': 'hour',\n                'value': 8\n            };\n            break;\n        case 7:\n        case 8:\n            duration = 86400;\n            concentration = false;\n            featureData.system.duration = {\n                'units': 'day',\n                'value': 1\n            };\n            break;\n        case 9:\n            duration = 'forever';\n            concentration = false;\n            featureData.system.duration = {\n                'units': 'perm',\n                'value': ''\n            };\n            break;\n    }\n    if (!concentration) featureData.flags.midiProperties.concentration = false;\n    switch (selection) {\n        case 'Ability':\n            let abilityChoices = [\n                ['Strength', 'str'],\n                ['Dexterity', 'dex'],\n                ['Constitution', 'con'],\n                ['Intelligence', 'int'],\n                ['Wisdom', 'wis'],\n                ['Charisma', 'cha']\n            ];\n            let ability = await chris.dialog('What ability?', abilityChoices);\n            if (!ability) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            featureData.effects[0].changes[0].key += ability;\n            featureData.effects[0].changes[1].key += ability;\n            break;\n        case 'Damage':\n            effectData = {\n                'label': featureData.name,\n                'icon': featureData.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': null,\n                },\n                'changes': [\n                    {\n                        'key': 'flags.midi-qol.onUseMacroName',\n                        'mode': 0,\n                        'value': 'function.chrisPremades.macros.bestowCurse.damage,postDamageRoll',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.midi-qol.onUseMacroName',\n                        'mode': 0,\n                        'value': 'function.chrisPremades.macros.bestowCurse.damageApplication,preDamageApplication',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.spell.bestowCurse.damage.target',\n                        'mode': 5,\n                        'value': workflow.targets.first().id,\n                        'priority': 20\n                    }\n                ],\n                'flags': {\n                    'dae': {\n                        'transfer': true\n                    }\n                }\n            };\n            if (!isNaN(duration)) effectData.duration.seconds = duration;\n            await chris.createEffect(workflow.actor, effectData);\n            break;\n        case 'Attack':\n            featureData.effects[0].changes[0].value = workflow.token.actor.uuid;\n            break;\n        case 'Turn':\n            let saveDC = chris.getSpellDC(workflow.item);\n            featureData.effects[0].changes[0].value = 'turn=start,saveAbility=wis,saveMagic=true,saveRemove=false,saveDC=' + saveDC + ',label=\"Bestow Curse (Start of Turn)\"'\n            break;\n    }\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    let targetEffect = chris.findEffect(workflow.targets.first().actor, 'Bestow Curse - ' + selection);\n    if (!targetEffect) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.updateEffect(targetEffect,\n        {\n            'origin': workflow.item.uuid,\n            'flags': {\n                'chris-premades': {\n                    'spell': {\n                        'bestowCurse': {\n                            'level': castLevel,\n                            'type': selection\n                        }\n                    }\n                }\n            }\n        }\n    );\n    if (concentration) {\n        let concentrationEffect = chris.findEffect(workflow.actor, 'Concentrating');\n        if (!concentrationEffect) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        await chris.updateEffect(concentrationEffect, {'origin': workflow.item.uuid, 'flags.midi-qol.isConcentration': workflow.item.uuid});\n        await workflow.actor.setFlag('midi-qol', 'concentration-data.uuid', workflow.item.uuid);\n\n    }\n    queue.remove(workflow.item.uuid);\n\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.actor.flags['chris-premades']?.spell?.bestowCurse?.damage?.target != workflow.hitTargets.first().id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bestowCurse', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = '1d8[necrotic]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function damageApplication({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size < 2) return;\n    let targetId = workflow.actor.flags['chris-premades']?.spell?.bestowCurse?.damage.target;\n    if (!targetId) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bestowCurse', 250);\n    if (!queueSetup) return;\n    let targetDamage = workflow.damageList.find(i => i.tokenId === targetId);\n    if (!targetDamage) return;\n    let targetActor = canvas.scene.tokens.get(targetDamage.tokenId).actor;\n    if (!targetActor) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageRoll = await new Roll('1d8[necrotic]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: 'Bestow Curse Damage'\n    });\n    let hasDI = chris.checkTrait(targetActor, 'di', 'necrotic');\n    if (hasDI) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageTotal = damageRoll.total;\n    let hasDR = chris.checkTrait(targetActor, 'dr', 'necrotic');\n    if (hasDR) damageTotal = Math.floor(damageTotal / 2);\n    targetDamage.damageDetail[0].push(\n        {\n            'damage': damageTotal,\n            'type': 'necrotic'\n        }\n    );\n    targetDamage.totalDamage += damageTotal;\n    targetDamage.appliedDamage += damageTotal;\n    targetDamage.hpDamage += damageTotal;\n    if (targetDamage.oldTempHP > 0) {\n        if (targetDamage.oldTempHP >= damageTotal) {\n            targetDamage.newTempHP -= damageTotal;\n        } else {\n            let leftHP = damageTotal - targetDamage.oldTempHP;\n            targetDamage.newTempHP = 0;\n            targetDamage.newHP -= leftHP;\n        }\n    } else {\n        targetDamage.newHP -= damageTotal;\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    let targetUuid = workflow.actor.flags['chris-premades']?.spell?.bestowCurse?.attack.target;\n    if (!targetUuid) return;\n    if (targetUuid != workflow.targets.first().actor.uuid) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bestowCurse', 50);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Bestow Curse');\n    queue.remove(workflow.item.uuid);\n}\nasync function remove(effect, origin, token) {\n    let curseFlags = effect.flags['chris-premades']?.spell?.bestowCurse\n    if (!curseFlags) return;\n    await warpgate.wait(200);\n    if (curseFlags.type === 'Damage') {\n        let damageEffect = origin.actor.effects.find(eff => eff.name === 'Bestow Curse - Damage' && eff.changes?.[2]?.value === token.id);\n        if (damageEffect) await chris.removeEffect(damageEffect);\n    }\n    if (curseFlags.level < 5) {\n        let effect2 = chris.findEffect(origin.actor, 'Concentrating');\n        if (effect2) await chris.removeEffect(effect2);\n    }\n}\nexport let bestowCurse = {\n    'item': item,\n    'damage': damage,\n    'damageApplication': damageApplication,\n    'attack': attack,\n    'remove': remove\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function backbreaker({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'maul',\n        'warhammer'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Backbreaker');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'backbreaker', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Backbreaker?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {queue} from '../../../utility/queue.js';\nexport async function brace({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let validTypes = [\n        'glaive',\n        'heavycrossbow',\n        'longbow',\n        'pike',\n        'dart'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'brace', 350);\n    if (!queueSetup) return;\n    let damageFormula = 'max(' + workflow.damageRoll._formula + ', ' + workflow.damageRoll._formula + ')';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function cleave({speaker, actor, token, character, item, args, scope, workflow}) {\n    let validTypes = [\n        'battleaxe',\n        'greataxe',\n        'halberd',\n        'greatsword'\n    ];\n    let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && validTypes.includes(i.system.baseItem) && i.system.equipped);\n    if (!validWeapons.length) {\n        ui.notifications.info('No valid equipped weapons!');\n        return;\n    }\n    let weapon;\n    if (validWeapons.length === 1) weapon = validWeapons[0];\n    if (!weapon) [weapon] = await chris.selectDocument('What weapon?', validWeapons);\n    if (!weapon) return;\n    let nearbyFoes = chris.findNearby(workflow.token, weapon.system.range.value, 'enemy', true);\n    if (!nearbyFoes.length) {\n        ui.notifications.info('No nearby enemies found!');\n        return;\n    }\n    let targets;\n    if (nearbyFoes.length > 3) {\n        let selectedTargets = await chris.selectTarget('Choose your targets (Max: 3)', constants.okCancel, nearbyFoes, true, 'multiple');\n        if (!selectedTargets.buttons) return;\n        if (selectedTargets.inputs.filter(i => !!i).length > 3) {\n            ui.notifications.info('Too many targets selected!');\n            return;\n        }\n        targets = selectedTargets.inputs;\n    } else {\n        targets = nearbyFoes.map(i => i.document.uuid);\n    }\n    let featureData = duplicate(weapon.toObject());\n    featureData.system.target.value = 3;\n    delete featureData._id;\n    for (let i = 0; i < featureData.system.damage.parts.length; i++) {\n        featureData.system.damage.parts[i][0] = 'floor((' + featureData.system.damage.parts[i][0] + ') / 2)';\n    }\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions(targets);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'concussiveSmash', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function save({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let effectData = {\n        'label': 'Dazed',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.save.wis',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 18\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': 'await chrisPremades.macros.bg3.concussiveSmash.turn(effect);'\n                }\n            },\n            'chris-premades': {\n                'feature': {\n                    'concussiveSmash': 0\n                }\n            }\n        }\n    };\n    let armorTypes = [\n        'light',\n        'medium',\n        'heavy'\n    ];\n    let armor = workflow.targets.first().actor.items.find(i => armorTypes.includes(i.system.armor?.type) && i.system.equipped);\n    let dex = armor?.system?.armor?.dex ?? workflow.targets.first().actor.system.abilities.dex.mod\n    if (dex > 0) {\n        effectData.changes.push({\n            'key': 'system.attributes.ac.bonus',\n            'mode': 2,\n            'value': -dex,\n            'priority': 20\n        });\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'flail',\n        'greatclub',\n        'lighthammer',\n        'mace',\n        'maul',\n        'morningstar',\n        'warhammer',\n        'club'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Concussive Smash');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'concussiveSmash', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Concussive Smash?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.concussiveSmash ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.concussiveSmash': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let concussiveSmash = {\n    'item': item,\n    'save': save,\n    'attack': attack,\n    'turn': turn\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'maimingStrike', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n    if (workflow.targets.size != 1) return;\n    if (!workflow.targets.first().actor.system.attributes.movement.fly) return;\n    let effectData = {\n        'label': 'Flying Creature',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.con',\n                'mode': 2,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave.con'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function save({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let effectData = {\n        'label': 'Maimed',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.save.dex',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'system.attributes.movement.all',\n                'mode': 0,\n                'value': '*0',\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 18\n        },\n        'origin': null,\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'maimingStrike': 0\n                }\n            },\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': 'await chrisPremades.macros.bg3.maimingStrike.turn(effect);'\n                }\n            },\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'warpick',\n        'battleaxe',\n        'trident'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Maiming Strike');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'maimingStrike', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Maiming Strike?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.maimingStrike ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.maimingStrike': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let maimingStrike = {\n    'item': item,\n    'save': save,\n    'attack': attack,\n    'turn': turn\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function effect(effect) {\n    if (effect.flags['chris-premades']?.feature?.flourish) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.flourish': true\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'flourish', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let flourish = {\n    'effect': effect,\n    'item': item\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.hamstringShot ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.hamstringShot': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'rwak') return;\n    let validTypes = [\n        'shortbow',\n        'longbow'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Hamstring Shot');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hamstringShot', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Hamstring Shot?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    let targetWorkflow = await MidiQOL.completeItemUse(feature2, config, options);\n    if (targetWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Hamstrung');\n    if (effect) await chris.updateEffect(effect, {'origin': feature.uuid});\n    queue.remove(workflow.item.uuid);\n}\nexport let hamstringShot = {\n    'attack': attack,\n    'turn': turn\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'heartstopper', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n    if (workflow.targets.size != 1) return;\n    let race = chris.raceOrType(workflow.targets.first().actor);\n    if (!(race === 'undead' || race === 'construct')) return;\n    let effectData = {\n        'label': 'Invalid Creature',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.str',\n                'mode': 2,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave.con'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.heartstopper ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.heartstopper': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'morningstar'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Heartstopper');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'heartstopper', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Heartstopper?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}\nexport let heartstopper = {\n    'item': item,\n    'turn': turn,\n    'attack': attack\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lacerate', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n    if (workflow.targets.size != 1) return;\n    let race = chris.raceOrType(workflow.targets.first().actor);\n    if (!(race === 'undead' || race === 'construct')) return;\n    let effectData = {\n        'label': 'Invalid Creature',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.str',\n                'mode': 2,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave.con'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function turnStart(origin, token) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Homebrew Feature Items', 'Bleeding', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bleeding');\n    delete (featureData._id);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': origin.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function turnEnd(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.lacerate ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.lacerate': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'handaxe',\n        'scimitar',\n        'battleaxe',\n        'longsword',\n        'glaive',\n        'greataxe',\n        'greatsword',\n        'halberd',\n        'sickle'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Lacerate');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lacerate', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Lacerate?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    let targetWorkflow = await MidiQOL.completeItemUse(feature2, config, options);\n    if (targetWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Bleeding');\n    if (effect) await chris.updateEffect(effect, {'origin': feature.uuid});\n    queue.remove(workflow.item.uuid);\n}\nexport let lacerate = {\n    'item': item,\n    'turnStart': turnStart,\n    'turnEnd': turnEnd,\n    'attack': attack\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nimport {translate} from '../../../translations.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercingStrike', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n    if (workflow.targets.size != 1) return;\n    let race = chris.raceOrType(workflow.targets.first().actor);\n    if (!(race === 'undead' || race === 'construct')) return;\n    let effectData = {\n        'label': 'Invalid Creature',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.str',\n                'mode': 2,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave.con'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.piercingStrike ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.piercingStrike': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function strike({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'rapier',\n        'shortsword',\n        'trident',\n        'pike',\n        'dagger'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Piercing Strike');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercingstrike', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Piercing Strike?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let targetWorkflow = await MidiQOL.completeItemUse(feature2, config, options);\n    if (targetWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Gaping Wounds');\n    if (effect) await chris.updateEffect(effect, {'origin': feature.uuid});\n    queue.remove(workflow.item.uuid);\n}\nasync function shot({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'rwak') return;\n    let validTypes = [\n        'lightcrossbow',\n        'handcrossbow',\n        'heavycrossbow'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Piercing Shot');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercingShot', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Piercing Shot?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let targetWorkflow = await MidiQOL.completeItemUse(feature2, config, options);\n    if (targetWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Gaping Wounds');\n    if (effect) await chris.updateEffect(effect, {'origin': feature.uuid});\n    queue.remove(workflow.item.uuid);\n}\nasync function damage(workflow) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Gaping Wounds');\n    if (!effect) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercingStrike', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = '2[' + translate.damageType('piercing') + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let piercingStrike = {\n    'item': item,\n    'turn': turn,\n    'strike': strike,\n    'shot': shot,\n    'damage': damage\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'pommelStrike', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function save({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 1 && workflow.hitTargets.size === 1) {\n        let effectData = {\n            'label': 'Dazed',\n            'icon': workflow.item.img,\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.disadvantage.ability.save.wis',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'duration': {\n                'seconds': 12\n            },\n            'origin': workflow.item.uuid,\n            'flags': {\n                'effectmacro': {\n                    'onTurnEnd': {\n                        'script': 'await chrisPremades.macros.bg3.pommelStrike.turn(effect);'\n                    }\n                },\n                'chris-premades': {\n                    'feature': {\n                        'pommelStrike': 0\n                    }\n                }\n            }\n        };\n        let armorTypes = [\n            'light',\n            'medium',\n            'heavy'\n        ];\n        let armor = workflow.targets.first().actor.items.find(i => armorTypes.includes(i.system.armor?.type) && i.system.equipped);\n        let dex = armor?.system?.armor?.dex ?? workflow.targets.first().actor.system.abilities.dex.mod\n        if (dex > 0) {\n            effectData.changes.push({\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': -dex,\n                'priority': 20\n            });\n        }\n        await chris.createEffect(workflow.targets.first().actor, effectData);\n    }\n    if (workflow.hitTargets.size != 1 || workflow.damageList[0].newHP != 0 || workflow.damageList[0].oldHP === 0) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Dead');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n    await chris.addCondition(workflow.targets.first().actor, 'Unconscious', true);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.pommelStrike ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.pommelStrike': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let pommelStrike = {\n    'item': item,\n    'save': save,\n    'turn': turn\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function prepare({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.baseItem != 'greataxe') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'prepare', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = workflow.actor.system.abilities.str.mod + '[' + workflow.defaultDamageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'rushAttack', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.rushAttack ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.rushAttack': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let rushAttack = {\n    'item': item,\n    'turn': turn\n}","import {chris} from '../../../helperFunctions.js';\nimport {constants} from '../../../constants.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function tenacity({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!(workflow.targets.size === 1 && !workflow.hitTargets.size) || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'morningstar',\n        'greatclub',\n        'moul'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Tenacity');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'rushAttack', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Tenacity?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {constants} from '../../../constants.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'topple', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.item.system.actionType != 'mwak') return;\n    let validTypes = [\n        'quarterstaff'\n    ];\n    if (!validTypes.includes(workflow.item.system.baseItem)) return;\n    let feature = chris.getItem(workflow.actor, 'Topple');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'topple', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Topple?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': 0});\n    let featureData = duplicate(feature.toObject());\n    featureData.system.damage.parts = [];\n    delete (featureData._id);\n    let feature2 = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature2, config, options);\n    queue.remove(workflow.item.uuid);\n}\nexport let topple = {\n    'item': item,\n    'attack': attack\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'topple', 50);\n    if (!queueSetup) return;\n    if (workflow.actor.system.abilities.dex.save > workflow.actor.system.abilities.str.save) {\n        workflow.item = workflow.item.clone({'system.save.scaling': 'dex'}, {'keepId': true});\n        workflow.item.prepareData();\n        workflow.item.prepareFinalAttributes();\n    }\n    queue.remove(workflow.item.uuid);\n    if (workflow.targets.size != 1) return;\n    let weapons = workflow.targets.first().actor.items.filter(i => i.system.equipped && i.type === 'weapon');\n    if (weapons.length) return;\n    let effectData = {\n        'label': 'Invalid Creature',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.str',\n                'mode': 2,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave.con'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nasync function turn(effect) {\n    let turn = effect.flags['chris-premades']?.feature?.weakeningStrike ?? 0;\n    if (turn >= 1) {\n        await chris.removeEffect(effect);\n        return;\n    } \n    let updates = {\n        'flags.chris-premades.feature.weakeningStrike': turn + 1\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let weakeningStrike = {\n    'item': item,\n    'turn': turn\n}","import {chris} from '../../../helperFunctions.js';\nexport async function mobileShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let validTypes = [\n        'handcrossbow'\n    ];\n    let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && validTypes.includes(i.system.baseItem) && i.system.equipped);\n    if (!validWeapons.length) {\n        ui.notifications.info('No valid equipped weapons!');\n        return;\n    }\n    let weapon;\n    if (validWeapons.length === 1) weapon = validWeapons[0];\n    if (!weapon) [weapon] = await chris.selectDocument('What weapon?', validWeapons);\n    if (!weapon) return;\n    await weapon.use();\n}","import {backbreaker} from './backbreaker.js';\nimport {brace} from './brace.js';\nimport {cleave} from './cleave.js';\nimport {concussiveSmash} from './concussiveSmash.js';\nimport {maimingStrike} from './maimingStrike.js';\nimport {flourish} from './flourish.js';\nimport {hamstringShot} from './hamstringShot.js';\nimport {heartstopper} from './heartstopper.js';\nimport {lacerate} from './lacerate.js';\nimport {piercingStrike} from './piercingStrike.js';\nimport {pommelStrike} from './pommelStrike.js';\nimport {prepare} from './prepare.js';\nimport {rushAttack} from './rushAttack.js';\nimport {tenacity} from './tenacity.js';\nimport {topple} from './topple.js';\nimport {weakeningStrike} from './weakeningStrike.js';\nimport {mobileShot} from './mobileShot.js';\nimport {chris} from '../../../helperFunctions.js';\nlet weapons = {\n    'warhammer': [\n        'Backbreaker',\n        'Concussive Smash',\n        'Weakening Strike'\n    ],\n    'maul': [\n        'Backbreaker',\n        'Concussive Smash',\n        'Tenacity'\n    ],\n    'glaive': [\n        'Brace',\n        'Lacerate',\n        'Rush Attack'\n    ],\n    'pike': [\n        'Brace',\n        'Piercing Strike',\n        'Rush Attack'\n    ],\n    'longbow': [\n        'Brace',\n        'Hamstring Shot'\n    ],\n    'battleaxe': [\n        'Cleave',\n        'Lacerate',\n        'Maiming Strike'\n    ],\n    'greataxe': [\n        'Cleave',\n        'Lacerate',\n        'Prepare'\n    ],\n    'halberd': [\n        'Cleave',\n        'Lacerate',\n        'Rush Attack'\n    ],\n    'greatsword': [\n        'Cleave',\n        'Lacerate',\n        'Pommel Strike'\n    ],\n    'morningstar': [\n        'Concussive Smash',\n        'Heartstopper',\n        'Tenacity'\n    ],\n    'club': [\n        'Concussive Smash'\n    ],\n    'lighthammer': [\n        'Concussive Smash'\n    ],\n    'mace': [\n        'Concussive Smash'\n    ],\n    'greatclub': [\n        'Concussive Smash',\n        'Tenacity'\n    ],\n    'scimitar': [\n        'Flourish',\n        'Lacerate'\n    ],\n    'shortsword': [\n        'Flourish',\n        'Piercing Strike'\n    ],\n    'rapier': [\n        'Flourish',\n        'Piercing Strike',\n        'Weakening Strike'\n    ],\n    'shortbow': [\n        'Hamstring Shot'\n    ],\n    'handaxe': [\n        'Lacerate'\n    ],\n    'longsword': [\n        'Lacerate',\n        'Pommel Strike',\n        'Rush Attack'\n    ],\n    'handcrossbow': [\n        'Mobile Shot',\n        'Piercing Shot'\n    ],\n    'warpick': [\n        'Maiming Strike',\n        'Weakening Strike'\n    ],\n    'trident': [\n        'Maiming Strike',\n        'Piercing Strike',\n        'Rush Attack'\n    ],\n    'lightcrossbow': [\n        'Piercing Shot'\n    ],\n    'heavycrossbow': [\n        'Piercing Shot'\n    ],\n    'spear': [\n        'Rush Attack'\n    ],\n    'quarterstaff': [\n        'Topple'\n    ],\n    'sickle': [\n        'Lacerate'\n    ],\n    'dagger': [\n        'Piercing Strike'\n    ]\n};\nlet simpleWeapons = [\n    'club',\n    'dagger',\n    'greatclub',\n    'handaxe',\n    'javelin',\n    'lightcrossbow',\n    'lighthammer',\n    'mace',\n    'quarterstaff',\n    'shortbow',\n    'sickle',\n    'sling',\n    'spear'\n];\nlet martialWeapons = [\n    'battleaxe',\n    'blowgun',\n    'flail',\n    'glaive',\n    'greataxe',\n    'greatsword',\n    'halberd',\n    'handcrossbow',\n    'heavycrossbow',\n    'lance',\n    'longbow',\n    'longsword',\n    'maul',\n    'morningstar',\n    'net',\n    'pike',\n    'rapier',\n    'scimitar',\n    'shortsword',\n    'trident',\n    'warpick',\n    'warhammer',\n    'whip'\n];\nasync function addFeatures(item, updates, options, id) {\n    if (item.type != 'weapon') return;\n    let actor = item.actor;\n    if (!actor) return;\n    let baseItem = item.system.baseItem;\n    let proficient = item.system.proficient || item.actor.system.traits.weaponProf.value.has(baseItem);\n    if (!baseItem) return;\n    if (!proficient) {\n        if (simpleWeapons.includes(baseItem) && item.actor.system.traits.weaponProf.value.has('sim')) proficient = true;\n        if (martialWeapons.includes(baseItem) && item.actor.system.traits.weaponProf.value.has('mar')) proficient = true;\n    }\n    if (!proficient) return;\n    let currentlyEquipped = updates.system?.equipped ?? item.system.equipped;\n    let previouslyEquipped = item.system?.equipped;\n    if (currentlyEquipped === previouslyEquipped) return;\n    if (!currentlyEquipped) {\n        await removeFeatures(item);\n        return;\n    }\n    if (!weapons[baseItem]) return;\n    let items = [];\n    for (let i of weapons[baseItem]) {\n        if (chris.getItem(actor, i)) continue;\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Homebrew Feature Items', i, false);\n        if (!featureData) continue;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', i);\n        featureData.system.uses.value = getProperty(actor, 'flags.chris-premades.homebrew.bg3.' + i) ?? 1;\n        items.push(featureData);\n    }\n    if (item.length === 0) return;\n    await actor.createEmbeddedDocuments('Item', items);\n}\nasync function removeFeatures(item, options, id) {\n    if (item.type != 'weapon') return;\n    let actor = item.actor;\n    if (!actor) return;\n    let baseItem = item.system.baseItem;\n    if (!weapons[baseItem]) return;\n    let otherItems = actor.items.filter(i => i.system.baseItem === baseItem && i.system.equipped);\n    if (otherItems.length > 1) return;\n    let items = [];\n    let updates = {};\n    for (let i of weapons[baseItem]) {\n        let feature = chris.getItem(actor, i);\n        if (!feature) continue;\n        items.push(feature.id);\n        setProperty(updates, 'flags.chris-premades.homebrew.bg3.' + i, feature.system.uses.value);\n    }\n    if (!items.length) return;\n    await actor.deleteEmbeddedDocuments('Item', items);\n    await actor.update(updates);\n}\nasync function rest(actor, data) {\n    let updates = {\n        'flags': {\n            'chris-premades': {\n                'homebrew': {\n                    'bg3': {\n                        'Backbreaker': 1,\n                        'Brace': 1,\n                        'Cleave': 1,\n                        'Concussive Smash': 1,\n                        'Flourish': 1,\n                        'Hamstring Shot': 1,\n                        'Heartstopper': 1,\n                        'Lacerate': 1,\n                        'Maiming Strike': 1,\n                        'Mobile Shot': 1,\n                        'Piercing Strike': 1,\n                        'Piercing Shot': 1,\n                        'Pommel Strike': 1,\n                        'Prepare': 1,\n                        'Rush Attack': 1,\n                        'Tenacity': 1,\n                        'Topple': 1,\n                        'Weakening Strike': 1\n                    }\n                }\n            }\n        }\n    };\n    await actor.update(updates);\n}\nlet effects = [\n    'Crippled',\n    'Off Balance',\n    'Hamstrung',\n    'Bleeding',\n    'Gaping Wounds',\n];\nasync function healing(workflow) {\n    if (!workflow.targets.size) return;\n    if (workflow.defaultDamageType != 'healing') return;\n    for (let i of Array.from(workflow.targets)) {\n        for (let j of effects) {\n            let effect = chris.findEffect(i.actor, j);\n            if (effect) await chris.removeEffect(effect);\n        }\n    }\n}\nexport let bg3 = {\n    'backbreaker': backbreaker,\n    'brace': brace,\n    'cleave': cleave,\n    'concussiveSmash': concussiveSmash,\n    'maimingStrike': maimingStrike,\n    'flourish': flourish,\n    'heartstopper': heartstopper,\n    'lacerate': lacerate,\n    'piercingStrike': piercingStrike,\n    'pommelStrike': pommelStrike,\n    'prepare': prepare,\n    'rushAttack': rushAttack,\n    'tenacity': tenacity,\n    'topple': topple,\n    'weakeningStrike': weakeningStrike,\n    'hamstringShot': hamstringShot,\n    'mobileShot': mobileShot,\n    'removeFeatures': removeFeatures,\n    'addFeatures': addFeatures,\n    'rest': rest,\n    'healing': healing\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Bigby\\'s Hand');\n    if (!sourceActor) return;\n    let damageScale = ((workflow.castData.castLevel - 5) * 2)\n    let clenchedFistData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Clenched Fist', false);\n    if (!clenchedFistData) return;\n    clenchedFistData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Clenched Fist');\n    clenchedFistData.system.damage.parts[0][0] = (4 + damageScale) + 'd8[force]';\n    let forcefulHandData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Forceful Hand', false);\n    if (!forcefulHandData) return;\n    forcefulHandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Forceful Hand');\n    forcefulHandData.name = 'Forceful Hand (' + ((chris.getSpellMod(workflow.item) * 5) + 5) + ' feet)';\n    let graspingHandData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Grasping Hand', false);\n    if (!graspingHandData) return;\n    graspingHandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Grasping Hand');\n    let interposingHandData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Interposing Hand', false);\n    if (!interposingHandData) return;\n    interposingHandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Interposing Hand');\n    let hpFormula = workflow.actor.system.attributes.hp.max;\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Bigby\\'s Hand';\n    if (name === '') name = 'Bigby\\'s Hand';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + rangedAttackBonus.total\n                        }\n                    },\n                    'spell': {\n                        'damageScale': damageScale,\n                        'casterSpellMod': chris.getSpellMod(workflow.item)\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name\n        },\n        'embedded': {\n            'Item': {\n                [clenchedFistData.name]: clenchedFistData,\n                [forcefulHandData.name]: forcefulHandData,\n                [graspingHandData.name]: graspingHandData,\n                [interposingHandData.name]: interposingHandData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'earth';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 60, workflow.item, 120, workflow.token, animation);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Bigby\\'s Hand - Move', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bigby\\'s Hand - Move');\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Bigby\\'s Hand',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, 'Bigby\\'s Hand');\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Bigby\\'s Hand\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}\nasync function forcefulHand({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let hasAdvantage = (chris.getSize(targetActor) <= (chris.sizeStringValue('medium')));\n    await workflow.actor.rollSkill('ath', {advantage: hasAdvantage});\n    await targetActor.rollSkill('ath');\n}\nasync function graspingHand({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    if (chris.getSize(targetActor) > chris.sizeStringValue('huge')) {\n        ui.notifications.info('Target is too big!');\n        return;\n    }\n    let hasAdvantage = (chris.getSize(targetActor) <=  (chris.sizeStringValue('medium')));\n    let sourceRoll = await workflow.actor.rollSkill('ath', {'advantage': hasAdvantage});\n    let targetRoll;\n    if (targetActor.system.skills.acr.total >= targetActor.system.skills.ath.total) {\n        targetRoll = await targetActor.rollSkill('acr');\n    }\n    else {\n        targetRoll = await targetActor.rollSkill('ath');\n    }\n    if (targetRoll.total > sourceRoll.total) return;\n    await chris.addCondition(targetActor, 'Grappled', false, workflow.item.uuid);\n    let ghcFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Grasping Hand - Crush', false);\n    if (!ghcFeatureData) return;\n    let damageScale = workflow.actor.flags['chris-premades']?.spell?.damageScale;\n    if (!damageScale === undefined) return;\n    let spellMod = workflow.actor.flags['chris-premades']?.spell?.casterSpellMod;\n    if (!spellMod) return;\n    ghcFeatureData.system.damage.parts[0][0] = (2 + (damageScale)) + 'd6[bludgeoning] + ' + spellMod;\n    ghcFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Grasping Hand - Crush');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Grasping Hand - Crush');\n    }\n    let ghcEffectData = {\n        'label': ghcFeatureData.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': ghcFeatureData.name\n                }\n            }\n        }\n    };\n    let ghcUpdates = {\n        'embedded': {\n            'Item': {\n                [ghcFeatureData.name]: ghcFeatureData\n            },\n            'ActiveEffect': {\n                [ghcFeatureData.name]: ghcEffectData\n            }\n        }\n    };\n    let ghcOptions = {\n        'permanent': false,\n        'name': ghcFeatureData.name,\n        'description': ghcFeatureData.name\n    };\n    await warpgate.mutate(workflow.token.document, ghcUpdates, {}, ghcOptions);\n}\nasync function interposingHandOn({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    let effect = chris.findEffect(workflow.actor, 'Interposing Hand');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    let originActor = origin.actor;\n    let originActorUuid = originActor.uuid;\n    let targetActor = workflow.targets.first().actor;\n    let targetActorUuid = targetActor.uuid;\n    if (originActorUuid === targetActorUuid) return;\n    await chris.addCondition(targetActor, 'Cover (Half)');\n}\nasync function interposingHandOff({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    await chris.removeCondition(workflow.targets.first().actor, 'Cover (Half)');\n}\nexport let bigbysHand = {\n    'item': item,\n    'forcefulHand': forcefulHand,\n    'graspingHand': graspingHand,\n    'interposingHandOn': interposingHandOn,\n    'interposingHandOff': interposingHandOff\n}\n","import {chris} from '../../../../helperFunctions.js';\nexport async function binding({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let amplify = await chris.dialog('Amplify Blood Curse?', [['Yes', true], ['No', false]]);\n    if (!amplify) {\n        if (chris.getSize(workflow.targets.first()) > chris.sizeStringValue('large')) {\n            ui.notifications.info('Target is too big!');\n        }\n        return;\n    }\n    let damageDice = workflow.actor.system.scale['blood-hunter']['crimson-rite'];\n    if (!damageDice) {\n        ui.notifications.warn('Source actor does not appear to have a Crimson Rite scale!');\n        return;\n    }\n    let roll = await new Roll(damageDice + '[none]').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(workflow.token, roll.total, 'none');\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Blood Curse of Binding');\n    if (!effect) return;\n    let saveDC = chris.getSpellDC(workflow.item);\n    let updates = {\n        'changes': [\n            {\n                'key': 'system.attributes.movement.all',\n                'mode': 0,\n                'priority': 20,\n                'value': 0\n            },\n            {\n                'key': 'flags.midi-qol.overTime',\n                'mode': 0,\n                'priority': 20,\n                'value': 'turn=end, rollType=save, saveAbility=str, saveDC=' + saveDC + ', label=Blood Curse of Binding (End of Turn)'\n            }\n        ],\n        'duration': {\n            'duration': 60,\n            'label': '60 Seconds',\n            'remaining': 60,\n            'seconds': 60,\n            'type': 'seconds'\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': []\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.damageList) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let targetRace = chris.raceOrType(targetActor);\n    if (targetRace != 'undead') {\n        if (targetRace === 'construct') return;\n        let doHealing = false;\n        for (let i of workflow.damageList) {\n            if (i.oldHP != 0 && i.newHP === 0) {\n                doHealing = true;\n                break;\n            }\n        }\n        if (!doHealing) return;\n        let maxHP = targetActor.system.attributes.hp.max;\n        let currentTempHP = workflow.actor.system.attributes.hp.temp;\n        if (currentTempHP <= maxHP) await chris.applyDamage([workflow.token], maxHP, 'temphp');\n        let effect = chris.findEffect(workflow.actor, 'Devoured Soul');\n        if (effect) return;\n        let effectData = {\n            'label': 'Devoured Soul',\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 86400\n            },\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.advantage.attack.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.ability.save.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.ability.check.all',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.chris-premades.feature.onHit.blackrazor',\n                    'mode': 5,\n                    'value': 'true',\n                    'priority': 20\n                }\n            ],\n            'transfer': true\n        };\n        await chris.createEffect(workflow.actor, effectData);\n    } else {\n        let damageRoll = await new Roll('1d10[necrotic]').roll({async: true});\n        await chris.applyWorkflowDamage(workflow.token, damageRoll, 'necrotic', [workflow.token], workflow.item.name, workflow.itemCardId);\n        return;\n    }\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    if (chris.raceOrType(targetActor) != 'undead') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'blackrazor', 50);\n    if (!queueSetup) return;\n    let damageFormula = '1d10[healing]';\n    if (workflow.isCritical) damageFormula = chris.getCriticalFormula(damageFormula);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function onHit(workflow, targetToken) {\n    if (targetToken.actor.system.attributes.hp.temp != 0) return;\n    let effect = chris.findEffect(targetToken.actor, 'Devoured Soul');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let blackrazor = {\n    'item': item,\n    'damage': damage,\n    'onHit': onHit\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function bladeFlourish({speaker, actor, token, character, item, args, scope, workflow}) {\n    let itemName = workflow.item.name.toLowerCase()\n    if (itemName.includes('booming blade') || itemName.includes('green-flame blade')) return;\n    let sourceActor = workflow.actor;\n    let effect1 = chris.findEffect(sourceActor, 'Blade Flourish Movement');\n    if (workflow.item.type === 'weapon' && !effect1) {\n        let feature0 = sourceActor.items.getName('Blade Flourish Movement');\n        if (feature0) feature0.use();\n    }\n    if (workflow.item.type === 'weapon' && workflow.hitTargets.size === 1) {\n        let effect2 = chris.findEffect(sourceActor, 'Blade Flourish');\n        if (effect2) return;\n        let bardicInspiration = sourceActor.items.getName('Bardic Inspiration');\n        if (!bardicInspiration) bardicInspiration = sourceActor.items.getName('Bardic Inspiration & Magical Inspiration');\n        if (!bardicInspiration) {\n            ui.notifications.warn('Source actor does not appear to have a Bardic Inspiration feature!');\n            return;\n        }\n        let queueSetup = await queue.setup(workflow.item.uuid, 'bladeFlourish', 151);\n        if (!queueSetup) return;\n        let bardicInspirationUses = bardicInspiration.system.uses.value;\n        let classFeature = sourceActor.items.getName('Bard');\n        let skipUses = false;\n        if (classFeature) {\n            let levels = classFeature.system.levels;\n            if (levels >= 14) skipUses = await chris.dialog('Use d6 instead of Bardic Inspiration for Blade Flourish?', [['Yes', true], ['No', false]]);\n        }\n        if (bardicInspirationUses <= 0 && !skipUses) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let options = [\n            ['Defensive Flourish', 'DF'],\n            ['Mobile Flourish', 'MF'],\n            ['Slashing Flourish', 'SF'],\n            ['No', false]\n        ];\n        let selectedOption = await chris.dialog('Use a Blade Flourish?', options);\n        if (!selectedOption) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let effectData1 = {\n            'label': 'Blade Flourish',\n            'icon': 'icons/skills/melee/maneuver-sword-katana-yellow.webp',\n            'duration': {'turns': 1},\n            'origin': workflow.item.uuid,\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'combatEnd'\n                    ]\n                }\n            }\n        };\n        await chris.createEffect(sourceActor, effectData1);\n        if (!skipUses) bardicInspiration.update({'system.uses.value': bardicInspirationUses - 1});\n        let bardicInspirationDie = sourceActor.system.scale.bard['bardic-inspiration'];\n        if (skipUses) bardicInspirationDie = {'formula': '1d6'};\n        if (!bardicInspirationDie) {\n            ui.notifications.warn('Source actor does not appear to have a Bardic Inspiration scale!');\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let damageType = workflow.item.system.damage.parts[0][1];\n        let bonusDamageFormula = bardicInspirationDie.formula + '[' + damageType + ']'\n        if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n        let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n        let damageRoll = await new Roll(damageFormula).roll({async: true});\n        let bardicInspirationDieRoll = damageRoll.dice[damageRoll.dice.length - 1].total;\n        await workflow.setDamageRoll(damageRoll);\n        switch (selectedOption) {\n            case 'DF':\n                let feature2 = sourceActor.items.getName('Defensive Flourish');\n                if (feature2) feature2.use();\n                let effectData2 = {\n                    'label': 'Defensive Flourish',\n                    'icon': 'icons/skills/melee/swords-parry-block-blue.webp',\n                    'duration': {'rounds': 1},\n                    'changes': [\n                        {\n                            'key': 'system.attributes.ac.bonus',\n                            'mode': 2,\n                            'value': '+' + bardicInspirationDieRoll,\n                            'priority': 20\n                        }\n                    ],\n                    'origin': workflow.item.uuid,\n                    'flags': {\n                        'dae': {\n                            'specialDuration': [\n                                'combatEnd'\n                            ]\n                        }\n                    }\n                };\n                await chris.createEffect(sourceActor, effectData2);\n                break;\n            case 'MF':\n                let feature3 = sourceActor.items.getName('Mobile Flourish');\n                if (feature3) feature3.use();\n                break;\n            case 'SF':\n                let feature4 = await sourceActor.items.getName('Slashing Flourish');\n                if (feature4) feature4.use();\n                let nearbyTargets = chris.findNearby(workflow.token, 5, 'enemy');\n                let hitTokenId = workflow.hitTargets.first().id;\n                let removeIndex = nearbyTargets.findIndex(tok => tok.id === hitTokenId);\n                if (removeIndex != -1) nearbyTargets.splice(removeIndex, 1);\n                await chris.applyDamage([nearbyTargets], bardicInspirationDieRoll, damageType);\n                break;\n        }\n        queue.remove(workflow.item.uuid);\n    }\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function bladesong({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+' + workflow.actor.system.abilities.int.mod,\n                'priority': 20\n            },\n            {\n                'key': 'system.attributes.movement.walk',\n                'mode': 2,\n                'value': '+10',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.advantage.skill.acr',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.concentrationSaveBonus',\n                'mode': 2,\n                'value': '+' + workflow.actor.system.abilities.int.mod,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'bladesong': true\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'zeroHP',\n                    'combatEnd'\n                ]\n            }\n        }\n    };\n    let songOfVictory = chris.getItem(workflow.actor, 'Song of Victory');\n    if (songOfVictory) {\n        effectData.changes.push(\n            {\n                'key': 'system.bonuses.mwak.damage',\n                'mode': 2,\n                'value': '+' + workflow.actor.system.abilities.int.mod,\n                'priority': 20\n            }\n        );\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function onUse({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size || !workflow.damageRoll) return;\n    let itemType = workflow.item.type;\n    if (!(itemType === 'weapon' || (itemType === 'spell' && workflow.castData.castLevel === 0))) return;\n    let originItem = chris.getItem(workflow.actor, 'Blessed Strikes');\n    if (!originItem) return;\n    if (chris.inCombat()) {\n        let featureUsed = originItem.flags['chris-premades']?.feature?.blessedStrikes?.used;\n        if (featureUsed) return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'blessedStrikes', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originItem.name, constants.yesNo, 'Use Blessed Strikes?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula + ' + 1d8[radiant]';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    if (chris.inCombat()) await originItem.setFlag('chris-premades', 'feature.blessedStrikes.used', true);\n    queue.remove(workflow.item.uuid);\n}\nasync function turnStart(origin) {\n    await origin.setFlag('chris-premades', 'feature.blessedStrikes.used', false);\n}\nexport let blessedStrikes = {\n    'onUse': onUse,\n    'turnStart': turnStart\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function blessingOfTheForge({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let generatedMenu = [];\n    targetActor.items.forEach(item => {\n        if (!item.system.equipped ) return;\n        if (item.type === 'weapon' || item.system.armor) generatedMenu.push([item.name, item.id]);\n    });\n    if (generatedMenu.length === 0) return;\n    let selection = await chris.dialog('What item do you imbue?', generatedMenu);\n    if (!selection) return;\n    async function effectMacro() {\n        warpgate.revert(token.document, 'Blessing of the Forge');\n    }\n    let itemData = targetActor.items.get(selection).toObject();\n    if (itemData.type === 'weapon') {\n        itemData.system.attackBonus = Number(itemData.system.attackBonus) + 1;\n        itemData.system.damage.parts[0][0] += ' + 1';\n    } else {\n        itemData.system.armor.value += 1;\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ]\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [itemData.name]: itemData\n            },\n            'ActiveEffect': {\n                [workflow.item.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Blessing of the Forge',\n        'description': 'Blessing of the Forge'\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function blessingOfTheRavenQueen({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = workflow.actor.system?.details?.level;\n    if (level < 3) return;\n    let effect = chris.findEffect(workflow.actor, 'Blessing of the Raven Queen Resistance');\n    if (effect) await chris.removeEffect(effect);\n    let effectData = {\n        'label': 'Blessing of the Raven Queen Resistance',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'rounds': 1\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.all',\n                'mode': 0,\n                'value': 1,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource'\n                ],\n                'stackable': 'none',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'blight', 50);\n    if (!queueSetup) return;\n    let creatureType = chris.raceOrType(workflow.targets.first().actor);\n    let newDamageRoll = '';\n    if (creatureType === 'plant') {\n        let oldDamageRoll = workflow.damageRoll;\n        for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n            let flavor = oldDamageRoll.terms[i].flavor;\n            let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n            if (isDeterministic === true) {\n                newDamageRoll += oldDamageRoll.terms[i].formula;\n            } else {\n                newDamageRoll += '(' + oldDamageRoll.terms[i].number + '*' + oldDamageRoll.terms[i].faces + ')[' + flavor + ']';\n            }\n        }\n    } else if (creatureType === 'undead' || creatureType === 'construct') {\n        newDamageRoll = '0[' + workflow.defaultDamageType + ']';\n    } else {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageRoll = await new Roll(newDamageRoll).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function early({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let creatureType = chris.raceOrType(workflow.targets.first().actor);\n    if (creatureType != 'plant') return;\n    let effectData = {\n        'label': 'Condition Disadvantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.save.all',\n                'value': '1',\n                'mode': 5,\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nexport let blight = {\n    'early': early,\n    'damage': damage\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function blinkTurnStart(token, actor, origin, effect) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Blink Landing', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Blink Landing');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    await chris.removeEffect(effect);\n}\nasync function blinkTurnEnd(actor) {\n    let blinkRoll = await new Roll('1d20').roll({async: true});\n    blinkRoll.toMessage({\n        'rollMode': 'roll',\n        'speaker': {'alias': name},\n        'flavor': 'Blink'\n    });\n    if (blinkRoll.total < 11) return;\n    async function effectMacro() {\n        await chrisPremades.macros.blink.start(token, actor, origin, effect);\n    }\n    let blinkEffect = chris.findEffect(actor, 'Blink');\n    let originUuid = blinkEffect.origin;\n    let effectData = {\n        'name': 'Blinked Away',\n        'icon': origin.img,\n        'duration': {\n            'rounds': 2\n        },\n        'origin': originUuid,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.superSaver.all',\n                'value': '1',\n                'mode': 5,\n                'priority': 20\n            },\n            {\n                'key': 'system.attributes.ac.bonus',\n                'value': '100',\n                'mode': 5,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.min.ability.save.all',\n                'value': '100',\n                'mode': 5,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.fail.critical.all',\n                'value': '1',\n                'mode': 5,\n                'priority': 20\n            },\n            {\n                'key': 'macro.tokenMagic',\n                'value': 'spectral-body',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onTurnStart': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    if (chris.vision5e()) effectData.changes.push(\n        {\n            'key': 'macro.CE',\n            'value': 'Ethereal',\n            'mode': 0,\n            'priority': 20\n        }\n    );\n    await chris.createEffect(actor, effectData);\n}\nexport let blink = {\n    'start': blinkTurnStart,\n    'end': blinkTurnEnd\n}","import {chris} from '../../helperFunctions.js';\nexport async function bloodSpear({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let newHP = workflow.damageList[0].newHP;\n    if (newHP != 0) return;\n    let oldHP = workflow.damageList[0].oldHP;\n    if (newHP === oldHP) return;\n    let damageRoll = await new Roll('2d6[temphp]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(workflow.token, damageRoll.total, 'temphp');\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function auraOfAnnihilation(token, origin) {\n    if (token.actor.system.attributes.hp.value === 0) return;\n    if (!game.combat.previous.tokenId) return;\n    let targetToken = game.canvas.tokens.get(game.combat.previous.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    let type = chris.raceOrType(targetToken.actor);\n    if (type === 'fiend' || type === 'undead') return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let featureData = duplicate(origin.toObject());\n    featureData.system.activation.type = 'special';\n    featureData.system.target.type = 'creature';\n    featureData.system.damage.parts = [\n        [\n            '5[necrotic]',\n            'necrotic'\n        ]\n    ];\n    delete(featureData.effects);\n    featureData.system.duration = {\n        'units': 'inst',\n        'value': ''\n    };\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function deathGaze({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let targetToken = workflow.targets.first();\n    if (chris.checkTrait(targetToken.actor, 'ci', 'frightened')) return;\n    if ((workflow.saveResults[0].total + 5) > chris.getSpellDC(workflow.item)) return;\n    let targetHP = targetToken.actor.system.attributes.hp.value;\n    await chris.applyDamage([targetToken], targetHP, 'none');\n}","import {auraOfAnnihilation} from './auraOfAnnihilation.js';\nimport {deathGaze} from './deathGaze.js';\nexport let bodak = {\n    'deathGaze': deathGaze,\n    'auraOfauraOfAnnihilation': auraOfAnnihilation\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function bolsteringMagic({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let selection = await chris.dialog(workflow.item.name, [['Attack and Ability Bonus', 'd3'], ['Regain Spell Slot', 'spell']], 'Which option?');\n    if (!selection) return;\n    if (selection === 'd3') {\n        let effectData = {\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 600\n            },\n            'name': workflow.item.name,\n            'changes': [\n                {\n                    'key': 'system.bonuses.All-Attacks',\n                    'mode': 2,\n                    'value': '+1d3',\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.abilities.check',\n                    'mode': 2,\n                    'value': '+1d3',\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let roll = await new Roll('1d3').roll({async: true});\n        roll.toMessage({\n            rollMode: 'roll',\n            speaker: {'alias': name},\n            flavor: workflow.item.name\n        });\n        let checkNumber = roll.total;\n        while (checkNumber > 0) {\n            let value = targetActor.system.spells['spell' + checkNumber].value;\n            let max = targetActor.system.spells['spell' + checkNumber].max;\n            if (value < max) {\n                let updates = {\n                    'actor': {\n                        'system': {\n                            'spells': {\n                                ['spell' + checkNumber]: {\n                                    'value': value + 1\n                                }\n                            }\n                        }\n                    }\n                }\n                let options = {\n                    'permanent': true,\n                    'name': workflow.item.name,\n                    'description': workflow.item.name\n                };\n                await warpgate.mutate(targetToken.document, updates, {}, options);\n                ui.notifications.info('Spell slot regained!');\n                return;\n            } else {\n                checkNumber -= 1;\n            }\n            if (checkNumber === 0) ui.notifications.info('No spell slots to regain!');\n        }\n    }\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let weapons = workflow.actor.items.filter(i => i.type === 'weapon' && i.system.equipped && i.system.actionType === 'mwak');\n    if (!weapons.length) {\n        ui.notifications.info('No equipped weapons found!');\n        return;\n    }\n    let selection;\n    if (weapons.length === 1) selection = weapons[0];\n    if (!selection) [selection] = await chris.selectDocument('Attack with what weapon?', weapons);\n    if (!selection) return;\n    let level = chris.levelOrCR(workflow.actor);\n    let diceNumber = Math.floor((level + 1) / 6);\n    let weapon;\n    if (level > 4) {\n        let weaponData = duplicate(selection.toObject());\n        delete weaponData._id;\n        weaponData.system.damage.parts.push([diceNumber + 'd8[' + translate.damageType('thunder') + ']', 'thunder']);\n        weaponData.system.properties.mgc = true;\n        weapon = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n        weapon.prepareData();\n        weapon.prepareFinalAttributes();\n    } else {\n        weapon = selection;\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    let attackWorkflow = await MidiQOL.completeItemUse(weapon, config, options);\n    if (!attackWorkflow) return;\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'blue';\n    if (chris.jb2aCheck() != 'patreon' && animation != 'none') animation = 'blue';\n    if (animation != 'none') {\n        if (animation === 'random') {\n            let colors = [\n                'blue',\n                'blue02',\n                'dark_purple',\n                'dark_red',\n                'green',\n                'green02',\n                'orange',\n                'red',\n                'purple',\n                'yellow',\n                'blue'\n            ]\n            animation = colors[Math.floor(Math.random() * colors.length)];\n        }\n        new Sequence()\n            .effect()\n            .file('jb2a.static_electricity.01.' + animation)\n            .atLocation(workflow.targets.first())\n            .scaleToObject(1.5)\n            .play();\n    }\n    if (!attackWorkflow.hitTargets.size) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 12\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnStartSource'\n                ]\n            },\n            'chris-premades': {\n                'spell': {\n                    'boomingBlade': {\n                        'diceNumber': diceNumber + 1\n                    }\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(attackWorkflow.targets.first().actor, effectData.name);\n    if (effect) {\n        if (effect.flags['chris-premades']?.spell?.boomingBlade?.diceNumber > diceNumber) {\n            return;\n        } else {\n            await chris.removeEffect(effect);\n        }\n    }\n    await chris.createEffect(attackWorkflow.targets.first().actor, effectData);\n}\nasync function moved(token, changes) {\n    if (!chris.isLastGM()) return;\n    if (token.parent.id != canvas.scene.id) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    let effect = token.actor.effects.find(i => i.flags['chris-premades']?.spell?.boomingBlade);\n    if (!effect) return;\n    await token.object?._animation;\n    let selection = await chris.dialog(effect.name, constants.yesNo, 'Did ' + token.actor.name + ' move willingly?');\n    if (!selection) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Booming Blade - Movement', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Booming Blade - Movement');\n    delete featureData._id;\n    featureData.system.damage.parts = [\n        [\n            effect.flags['chris-premades'].spell.boomingBlade.diceNumber + 'd8[' + translate.damageType('thunder') + ']',\n            'thunder'\n        ]\n    ];\n    if (!effect.origin) return;\n    let originItem = await fromUuid(effect.origin);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    await chris.removeEffect(effect);\n}\nexport let boomingBlade = {\n    'item': item,\n    'moved': moved\n}","export function bootsOfElvenkind(skillId, options) {\n    return skillId != 'ste' ? false : {'label': 'This check relies on moving silently.', 'type': 'advantage'};\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function borrowedKnowledge({speaker, actor, token, character, item, args, scope, workflow}) {\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '50px';\n            t.style.textAlign = 'center';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let selection = await warpgate.menu({\n    'inputs': [\n        {\n            'label': 'Skill:',\n            'type': 'select',\n            'options': Object.entries(CONFIG.DND5E.skills).filter(([key, value]) => workflow.actor.system.skills[key].value < 1).map(([i, j]) => ({'value': i, 'html': j.label}))\n        },\n    ],\n    'buttons': constants.okCancel\n    }, {\n        'title': workflow.item.name,\n        'render': dialogRender\n    });\n    if (!selection.buttons) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 3600\n        },\n        'changes': [\n            {\n                'key': 'system.skills.' + selection.inputs[0] +'.value',\n                'mode': 4,\n                'value': 1,\n                'priority': 20\n            }\n        ]\n    };\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(workflow.actor, effectData);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function brandOfCastigation({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Brand of Castigation');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let damage = chris.getSpellMod(originItem);\n    if (originItem.actor.classes['blood-hunter'].system.levels >= 13) damage = damage * 2;\n    let applySelfDamage = false;\n    let targetToken = workflow.hitTargets.first();\n    if (!targetToken) return;\n    if (targetToken.actor.id === originItem.actor.id) {\n        applySelfDamage = true;\n    } else {\n        let nearbyTargets = chris.findNearby(targetToken, 5, null)\n        for (let i = 0; nearbyTargets.length > i; i++) {\n            if (nearbyTargets[i].actor.id === originItem.actor.id) {\n                applySelfDamage = true;\n                break;\n            }\n        }\n    }\n    if (!applySelfDamage) return;\n    await chris.applyDamage(workflow.token, damage, 'psychic')\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function breathOfTheDragon({speaker, actor, token, character, item, args, scope, workflow}) {\n    let ki = chris.getItem(workflow.actor, 'Ki Points');\n    let augmentBreath = chris.getItem(workflow.actor, 'Augment Breath');\n    let queueSetup = await queue.setup(workflow.item.uuid, 'breathOfTheDragon', 50);\n    if (!queueSetup) return;\n    let inputs = [\n        {\n            'type': 'select',\n            'label': 'Type:',\n            'options': [\n                {\n                    'html': 'Cone',\n                    'value': 'cone'\n                },\n                {\n                    'html': 'Line',\n                    'value': 'line'\n                }\n            ]\n        },\n        {\n            'type': 'select',\n            'label': 'Damage Type:',\n            'options': [\n                {\n                    'html': '🧪 Acid',\n                    'value': 'acid'\n                },\n                {\n                    'html': '❄️ Cold',\n                    'value': 'cold'\n                },\n                {\n                    'html': '🔥 Fire',\n                    'value': 'fire'\n                },\n                {\n                    'html': '⚡ Lightning',\n                    'value': 'lightning'\n                },\n                {\n                    'html': '☠️ Poison',\n                    'value': 'poison'\n                }\n            ]\n        }\n    ];\n    if (augmentBreath && ki?.system?.uses?.value) {\n        inputs.push(\n            {\n                'label': 'Augment (1 Ki):',\n                'type': 'checkbox',\n                'options': false\n            }\n        );\n    }\n    let selection = await chris.menu(workflow.item.name, constants.okCancel, inputs, true);\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let type = selection.inputs[0];\n    let damageType = selection.inputs[1];\n    let augment = augmentBreath ? selection.inputs[2] : false;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    let target = duplicate(workflow.item.system.target);\n    parts[0][0] += '[' + damageType + ']';\n    parts[0][1] = damageType;\n    if (type === 'line') {\n        target.type = 'line';\n        target.value = augment ? 90 : 30;\n        target.width = 5;\n    } else if (type === 'cone') {\n        target.value = augment ? 60 : 20;\n        target.type = 'cone'\n    }\n    target.units = 'ft';\n    if (augment) {\n        let scale = workflow.actor.system.scale['way-of-the-ascendant-dragon']?.['breath-of-the-dragon'];\n        if (!scale) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        parts[0][0] = (scale.number + 1) + 'd' + scale.faces + '[' + damageType + ']';\n        await augmentBreath.displayCard();\n        await ki.update({'system.uses.value': ki.system.uses.value - 1});\n    }\n    workflow.item = workflow.item.clone({'system.damage.parts': parts}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    let templateData = {\n        'user': game.user,\n        't': target.type === 'cone' ? 'cone' : 'ray',\n        'distance': target.value,\n        'width': target.type === 'cone' ? null : 5,\n        'fillColor': game.user.color,\n        'flags': {\n            'dnd5e': {\n                'origin': workflow.item.uuid\n            },\n            'midi-qol': {\n                'originUuid': workflow.item.uuid\n            }\n        }\n    };\n    let {template, tokens} = await chris.placeTemplate(templateData, true);\n    let targetIds = tokens.filter(i => i.uuid != workflow.token.document.uuid).map(i => i.id);\n    chris.updateTargets(targetIds);\n    let effectData = {\n        'origin': workflow.item.uuid,\n        'icon': workflow.item.img,\n        'label': workflow.item.name + ' Template',\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.dae.deleteUuid',\n                'value': template.uuid,\n                'mode': 5,\n                'priority': 20\n            }\n        ]\n    };\n    await chris.createEffect(workflow.actor, effectData);\n    queue.remove(workflow.item.uuid);\n    if (!chris.getConfiguration(workflow.item, 'animation') ?? true) return;\n    let file = '';\n    if (type === 'cone') {\n        switch (damageType) {\n            case 'acid':\n            case 'poison':\n                file = 'jb2a.breath_weapons.poison.cone.green';\n                break;\n            case 'cold':\n                file = 'jb2a.breath_weapons.cold.cone.blue';\n                break;\n            case 'fire':\n                file = 'jb2a.breath_weapons.fire.cone.orange.01';\n            case 'lightning':\n                if (chris.jb2aCheck() != 'patreon') return;\n                file = 'jb2a.breath_weapons.fire.cone.blue.02';\n                break;\n        }\n    } else {\n        switch (damageType) {\n            case 'acid':\n            case 'poison':\n                file = 'jb2a.breath_weapons.acid.line.green';\n                break;\n            case 'fire':\n                file = 'jb2a.breath_weapons.fire.line.orange';\n                break;\n            case 'lightning':\n                file = 'jb2a.breath_weapons.lightning.line.blue';\n                break;\n            case 'cold':\n                if (chris.jb2aCheck() != 'patreon') return;\n                file = 'jb2a.breath_weapons.fire.line.blue';\n                break;\n        }\n    }\n    new Sequence()\n        .effect()\n        .file(file)\n        .atLocation(template.object.position)\n        .stretchTo(template.object)\n        .play();\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function breathWeapon({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = Math.max(chris.levelOrCR(workflow.actor), 1);\n    if (level < 5) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'breathWeapon', 50);\n    if (!queueSetup) return;\n    let dice = level >= 17 ? 4 : level >= 11 ? 3 : 2;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    parts[0][0] = dice + 'd10[' + parts[0][1] + ']';\n    workflow.item = workflow.item.clone({'system.damage.parts': parts}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}","import {queue} from '../../../utility/queue.js';\nexport async function brute({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.system.actionType != 'mwak') return;\n    if (!workflow.damageRoll) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'brute', 101);\n    if (!queueSetup) return;\n    let damageFormula = workflow.damageRoll._formula;\n    let diceNum = Number(damageFormula.substring(0,1)) + 1;\n    let restOfFormula = damageFormula.substring(1);\n    let newFormula = diceNum + restOfFormula;\n    let damageRoll = await new Roll(newFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function surpriseAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!chris.inCombat()) return;\n    if (game.combat.round != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'surpriseAttack', 102);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('Is the target surpised?', [['Yes', true], ['No', false]]);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula + ' + 2d6[' + workflow.defaultDamageType + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {brute} from './brute.js';\nimport {surpriseAttack} from './surpriseAttack.js';\nexport let bugbear = {\n    'brute': brute,\n    'surpriseAttack': surpriseAttack\n}","import {constants} from '../../../constants.js';\n\nexport async function deadlyLeap({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let dexSaves = [];\n    let strSaves = [];\n    for (let targetToken of workflow.targets.values()) {\n        let targetActor = targetToken.actor;\n        if (targetActor.system.abilities.dex.save >= targetActor.system.abilities.str.save) {\n            dexSaves.push(targetToken.document.uuid);\n        } else {\n            strSaves.push(targetToken.document.uuid);\n        }\n    }\n    let areaFeatureData = duplicate(workflow.item.toObject());\n    delete(areaFeatureData.effects);\n    delete(areaFeatureData._id);\n    delete(areaFeatureData.flags['midi-qol'].onUseMacroName);\n    delete(areaFeatureData.flags['midi-qol'].onUseMacroParts);\n    delete(areaFeatureData.flags.itemacro);\n    areaFeatureData.system.actionType = 'save';\n    areaFeatureData.name = workflow.item.name + ': Dexterity';\n    areaFeatureData.system.damage.parts = [\n        ['3d6[bludgeoning] + 4', 'bludgeoning'],\n        ['3d6[slashing] + 4', 'slashing']\n    ];\n    areaFeatureData.system.save = {\n        'ability': 'dex',\n        'dc': 16,\n        'scaling': 'flat'\n    };\n    areaFeatureData.system.description.value = '';\n    areaFeatureData.effects = [\n        {\n            'changes': [\n                {\n                    'key': 'macro.CE',\n                    'mode': 0,\n                    'priority': 20,\n                    'value': 'Prone'\n                }\n            ],\n            'icon': workflow.item.img,\n            'label': workflow.item.name,\n            'transfer': false\n        }\n    ];\n    let areaFeatureData2 = duplicate(areaFeatureData);\n    areaFeatureData2.name = workflow.item.name + ': Strength';\n    areaFeatureData2.system.save.ability = 'str';\n    let areaFeature = new CONFIG.Item.documentClass(areaFeatureData, {'parent': workflow.actor});\n    let areaFeature2 = new CONFIG.Item.documentClass(areaFeatureData2, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions(dexSaves);\n    if (dexSaves.length > 0) await MidiQOL.completeItemUse(areaFeature, config, options);\n    options.targetUuids = strSaves;\n    if (strSaves.length > 0) await MidiQOL.completeItemUse(areaFeature2, config, options);\n}","import {deadlyLeap} from './deadlyLeap.js';\nexport let bulette = {\n    'deadlyLeap': deadlyLeap\n}","import {chris} from '../../helperFunctions.js';\nexport async function burningHands({speaker, actor, token, character, item, args, scope, workflow}) {\n\t//Animations by: eskiemoh\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (animation === 'none' || chris.jb2aCheck() === 'free') return;\n    if (!workflow.templateUuid) return;\n    let sourceToken = workflow.token;\n    let templateDoc = await fromUuid(workflow.templateUuid);\n    if (!templateDoc) return;\n    let template = templateDoc.object;\n    new Sequence()\n\t.effect()\n\t.file('jb2a.energy_strands.in.yellow.01.0')\n\t.atLocation(sourceToken) \n\t.anchor({'x':0.15})\n\t.scaleToObject(1.1) \n\t.rotateTowards(template, {'cacheLocation': true})\n\t.zIndex(1)\n\n\t.effect()\n\t.file('jb2a.magic_signs.circle.02.evocation.loop.yellow')\n\t.atLocation(sourceToken)\n\t.fadeIn(500)\n\t.fadeOut(500)\n\t.anchor({x:0.15})\n\t.scaleToObject(1.1)\n\t.duration(5000)\n\t.rotateTowards(template, {'cacheLocation': true})\n\t.loopProperty('sprite', 'rotation', {'from': 0, 'to': 360, 'duration': 1000})\n\t.scaleOut(0.1, 2000, {'ease': 'easeOutQuint', 'delay': -3000})\n\t.zIndex(2)\n\n\t.effect()\n\t.file('jb2a.particles.outward.orange.01.04')\n\t.atLocation(sourceToken)\n\t.fadeIn(500)\n\t.fadeOut(500)\n\t.anchor({x:0.15})\n\t.scaleToObject(1.1)\n\t.duration(5000)\n\t.rotateTowards(template, {'cacheLocation': true})\n\t.loopProperty('sprite', 'rotation', {'from': 0, 'to': 360, 'duration': 3000})\n\t.scaleOut(0.175, 5000, {'ease': 'easeOutQuint', 'delay': -3000})\n\t.waitUntilFinished(-4000)\n\t.zIndex(1)\n\n\t.effect()\n\t.file('jb2a.impact.010.orange')\n\t.atLocation(sourceToken) \n\t.anchor({x:0.15})\n\t.scaleToObject(1.1) \n\t.rotateTowards(template, {'cacheLocation': true})\n\t.zIndex(3)\n\n\t.effect()\n\t.file('jb2a.burning_hands.02.orange')\n\t.atLocation(template.position, {'cacheLocation': true})\n\t.stretchTo(template, {'cacheLocation': true})\n\t.zIndex(3)\n\t.play();\n}","import {chris} from '../../helperFunctions.js';\nexport async function callLightning({speaker, actor, token, character, item, args, scope, workflow}) {\n    let storming = await chris.dialog('Is it already storming?', [['Yes', true], ['No', false]]);\n    let spellLevel = workflow.castData.castLevel;\n    if (storming) spellLevel += 1;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Storm Bolt', false);\n    if (!featureData) return;\n    featureData.system.damage.parts = [\n        [\n            spellLevel + 'd10[lightning]',\n            'lightning'\n        ]\n    ];\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Storm Bolt');\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    }\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Storm Bolt');\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 600\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [workflow.item.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': featureData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {translate} from '../../../../translations.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let max = Math.max(workflow.actor.system.abilities.con.mod, 1);\n    if (workflow.targets.size > max) {\n        let buttons = [\n            {\n                'label': 'Ok',\n                'value': true\n            }, {\n                'label': 'Cancel',\n                'value': false\n            }\n        ];\n        let selection = await chris.selectTarget(workflow.item.name, buttons, Array.from(workflow.targets), false, 'multiple');\n        if (!selection.buttons) return;\n        let newTargets = selection.inputs.filter(i => i);\n        if (newTargets.length > max) {\n            ui.notifications.info('Too many targets selected!');\n            chris.updateTargets([]);\n            return;\n        }\n        chris.updateTargets(newTargets);\n    }\n}\nasync function late({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size || !workflow.token) return;\n    let damageRoll = await new Roll(workflow.targets.size * 5 + '[temphp]').roll({async: true});\n    await chris.applyWorkflowDamage(workflow.token, damageRoll, 'temphp', [workflow.token], workflow.item.name, workflow.itemCardId);\n    let effect = chris.findEffect(workflow.actor, 'Rage');\n    if (!effect) return;\n    let updates = {\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'callTheHunt': {\n                        'tokens': Array.from(workflow.targets).map(i => i.document.uuid)\n                    }\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.token) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Call the Hunt');\n    if (!effect) return;\n    let turnCheck = chris.perTurnCheck(effect, 'feature', 'callTheHunt', true, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'callTheHuntAttack', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('Call the Hunt', constants.yesNo, 'Apply Call the Hunt bonus damage?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) {\n        let updates = {\n            'flags': {\n                'chris-premades': {\n                    'feature': {\n                        'callTheHunt': {\n                            'turn': game.combat.round + '-' + game.combat.turn\n                        }\n                    }\n                }\n            }\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    let bonusDamageFormula = '1d8[' + workflow.defaultDamageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let oldFormula = workflow.damageRoll._formula;\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function rageEnd(effect) {\n    let tokens = effect.flags['chris-premades']?.feature?.callTheHunt?.tokens;\n    if (!tokens) return;\n    for (let i of tokens) {\n        let targetToken = await fromUuid(i);\n        if (!targetToken) continue;\n        let effect2 = chris.findEffect(targetToken.actor, 'Call the Hunt');\n        if (!effect2) continue;\n        await chris.removeEffect(effect2);\n    }\n}\nasync function combatEnd(effect) {\n    await effect.setFlag('chris-premades', 'feature.callTheHunt.turn', '');\n}\nexport let callTheHunt = {\n    'item': item,\n    'late': late,\n    'attack': attack,\n    'rageEnd': rageEnd,\n    'combatEnd': combatEnd\n}","import {chris} from '../../helperFunctions.js';\nexport async function cartomancer({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token || !workflow.actor) return;\n    let validTypes = [\n        'prepared',\n        'pact',\n        'always'\n    ]\n    let spells = workflow.actor.items.filter(i => i.type === 'spell' && i.system.activation.type === 'action' && validTypes.includes(i.system.preparation?.mode));\n    console.log(spells);\n    if (!spells.length) return;\n    let [selection] = await chris.selectDocument(workflow.item.name, spells);\n    if (!selection) return;\n    let spellData = duplicate(selection.toObject());\n    delete spellData._id;\n    setProperty(spellData, 'system.activation.type', 'bonus');\n    setProperty(spellData, 'system.uses', {'max': 1, 'per': 'lr', 'recovery': '', 'value': 1});\n    setProperty(spellData, 'system.preparation.mode', 'atwill');\n    setProperty(spellData, 'name', spellData.name + ' (' + workflow.item.name + ')');\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Cartomancer');\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ]\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': spellData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [spellData.name]: spellData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Cartomancer',\n        'description': 'Cartomancer'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function stench(token, origin, range, duration, monsterName, originItem) {\n    let targetToken = game.combat.scene.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > range) return;\n    let sourceActor = game.actors.get(token.document.actorId);\n    if (!sourceActor) return;\n    if (!monsterName) monsterName = sourceActor.name.split(' ').join('-').toLowerCase();\n    if (!originItem) originItem = origin;\n    let originEffectName = originItem.name;\n    let queueSetup = await queue.setup(origin.uuid, 'stench', 50);\n    if (!queueSetup) return;\n    if (targetToken.actor.flags['chris-premades']?.monster?.[monsterName]?.feature?.stenchImmune) {\n        queue.remove(origin.uuid);\n        return;\n    }\n    if (chris.findEffect(targetToken.actor, originEffectName)) {\n        queue.remove(origin.uuid);\n        return;\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.uuid]);\n    let featureWorkflow = await MidiQOL.completeItemUse(originItem, config, options);\n    if (featureWorkflow.failedSaves.size != 0) {\n        queue.remove(origin.uuid);\n        return;\n    }\n    let effectData = {\n        'label': originItem.name + ' Immune',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': duration\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.monster.' + monsterName + '.feature.stenchImmune',\n                'mode': 5,\n                'value': true,\n                'priority': 20\n            }\n        ]\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n    queue.remove(origin.uuid);\n}","import {stench} from '../troglodyte/stench.js';\nexport let catoblepas = {\n    'stench': stench\n}","import {chris} from '../../../helperFunctions.js';\nexport async function radiantMace({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let nearbyTargets = chris.findNearby(workflow.targets.first(), 10, 'enemy');\n    if (nearbyTargets.length === 0) return;\n    let targetToken;\n    if (nearbyTargets.length === 1) targetToken = nearbyTargets[0];\n    if (!targetToken) {\n        let buttons = [\n            {\n                'label': 'Ok',\n                'value': true\n            }, {\n                'label': 'Cancel',\n                'value': false\n            }\n        ];\n        let selection = await chris.selectTarget('Who gets temporary hit points?', buttons, nearbyTargets, true, 'one');\n        if (selection.buttons === false) return;\n        let targetTokenID = selection.inputs.find(id => id != false);\n        if (!targetTokenID) return;\n        targetToken = await fromUuid(targetTokenID);\n    }\n    let roll = await new Roll('1d10[temphp]').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage([targetToken], roll.total, 'temphp');\n}","import {radiantMace} from './radiantMace.js';\nexport let celestialSpirit = {\n    'radiantMace': radiantMace\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function chainLightning({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let maxTargets = workflow.castData.castLevel - 3;\n    let targetToken = workflow.targets.first();\n    let nearbyTokens = chris.findNearby(targetToken, 30, 'ally');\n    if (nearbyTokens.length === 0) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'chainLightning', 450);\n    if (!queueSetup) return;\n    let addedTargets = [];\n    let addedTargetUuids = [];\n    if (nearbyTokens.length > maxTargets) {\n        let buttons = [\n            {\n                'label': 'OK',\n                'value': true\n            }, {\n                'label': 'Cancel',\n                'value': false\n            }\n        ];\n        let selection = await chris.selectTarget('Where should the lightning bounce? Max: ' + maxTargets, buttons, nearbyTokens, true, 'multiple');\n        if (!selection.buttons) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        for (let i of selection.inputs) {\n            if (i) {\n                addedTargets.push(await fromUuid(i));\n                addedTargetUuids.push(i);\n            }\n        }\n        if (addedTargets.length > maxTargets) {\n            ui.notifications.info('Too many targets selected!');\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n    } else {\n        for (let i of nearbyTokens) {\n            addedTargets.push(i);\n            addedTargetUuids.push(i.document.uuid);\n        }\n    }\n    new Sequence().effect().atLocation(workflow.token).stretchTo(targetToken).file('jb2a.chain_lightning.secondary.blue').play();\n    let previousToken = targetToken;\n    for (let i of addedTargets) {\n        new Sequence().effect().atLocation(previousToken).stretchTo(i).file('jb2a.chain_lightning.secondary.blue').play();\n        previousToken = i;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Chain Lightning Leap', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Chain Lightning Leap');\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.system.damage.parts = [\n        [\n            workflow.damageTotal + '[lightning]',\n            'lightning'\n        ]\n    ];\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    }\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions(addedTargetUuids);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function charmAnimalsAndPlants({speaker, actor, token, character, item, args, scope, workflow}) {\n    let validTargets = Array.from(workflow.targets).filter(i => ['beast', 'plant'].includes(chris.raceOrType(i.actor))).map(i => i.id);\n    chris.updateTargets(validTargets);\n}\n","import {chris} from '../../helperFunctions.js';\nexport async function charmPerson({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    if (!chris.inCombat()) return;\n    let effectData = {\n        'name': 'Condition Advantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.advantage.ability.save.all',\n                'value': '1',\n                'mode': 5,\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ]\n            },\n            'chris-premades': {\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let targets = Array.from(workflow.targets);\n    for (let i of targets) await chris.createEffect(i.actor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function proboscis({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let damage = -chris.totalDamageType(targetActor, workflow.damageDetail, 'necrotic');\n    if (damage === 0) return;\n    let targetMaxHP = targetActor.system.attributes.hp.max;\n    let effect = chris.findEffect(targetActor, 'Proboscis');\n    if (!effect) {\n        let effectData = {\n            'label': 'Proboscis',\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 2628000\n            },\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'longRest'\n                    ]\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (Math.abs(damage) >= targetMaxHP) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (!unconscious) return;\n        await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {proboscis} from './proboscis.js';\nexport let chasme = {\n    'proboscis': proboscis\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function chillTouch({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let type = chris.raceOrType(workflow.actor);\n    if (type.toLowerCase() != 'undead') return;\n    let effect = chris.findEffect(workflow.actor, 'Chill Touch');\n    if (!effect) return;\n    let sourceActor = await fromUuid(effect.origin);\n    let sourceActorId = sourceActor.actor.id;\n    if (workflow.targets.first().actor.id != sourceActorId) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'chillTouch', 50);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Chill Touch');\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function chromaticOrb({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'chromaticOrb', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('What damage type?', [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['⚡ Lightning', 'lightning'], ['☠️ Poison', 'poison'], ['☁️ Thunder', 'thunder']]);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula.replace('none', selection);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n    let animation;\n    if (chris.jb2aCheck() === 'patreon') {\n        animation = 'jb2a.guiding_bolt.02.';\n        switch(selection) {\n            case 'acid':\n            case 'poison':\n                animation += 'greenorange';\n                break;\n            case 'cold':\n                animation += 'dark_bluewhite';\n                break;\n            case 'lightning':\n                animation +='yellow';\n                break;\n            case 'thunder':\n                animation += 'blueyellow';\n                break;\n            case 'fire':\n                animation += 'red';\n                break;\n            case 'lightning':\n                animation += 'yellow'\n        }\n    } else {\n        animation = 'jb2a.guiding_bolt.01.blueyellow';\n    }\n    new Sequence().effect().atLocation(workflow.token).stretchTo(workflow.targets.first()).file(animation).play();\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function circleOfMortality({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0 || !workflow.damageRoll) return;\n    for (let i of workflow.damageList) {\n        if (i.oldHP != 0) continue;\n        let targetActor = game.scenes.get(i.sceneId).tokens.get(i.tokenId).actor;\n        if (chris.checkTrait(targetActor, 'di', 'healing')) continue;\n        let newHealingTotal = 0;\n        for (let i = 0; workflow.damageRoll.terms.length > i; i++) {\n            let flavor = workflow.damageRoll.terms[i].flavor;\n            let isDeterministic = workflow.damageRoll.terms[i].isDeterministic;\n            if (flavor.toLowerCase() === 'healing' && !isDeterministic) {\n                newHealingTotal += workflow.damageRoll.terms[i].faces * workflow.damageRoll.terms[i].results.length;\n            } else {\n                if (!isNaN(workflow.damageRoll.terms[i].total)) {\n                    newHealingTotal += workflow.damageRoll.terms[i].total;\n                }\n            }\n        }\n        if (chris.checkTrait(targetActor, 'dr', 'healing')) newHealingTotal = Math.floor(newHealingTotal / 2);\n        let maxHP = targetActor.system.attributes.hp.max;\n        i.hpDamage = -Math.clamped(newHealingTotal, 0, maxHP - i.oldHP);\n        i.newHP = Math.clamped(i.oldHP + newHealingTotal, 0, maxHP);\n        i.totalDamage = newHealingTotal;\n    }\n}","import {chris} from '../../../helperFunctions.js';\nexport async function berserk(actor, origin, hp) {\n    if (!hp) hp = 60;\n    if (actor.system.attributes.hp.value > hp) return;\n    let effect = chris.findEffect(actor, 'Beserk');\n    if (effect) return;\n    let workflow = await MidiQOL.completeItemUse(origin);\n    if (workflow.damageTotal != 6) return;\n    let effectData = {\n        'label': 'Beserk',\n        'icon': origin.img,\n        'duration': {\n            'seconds': 86400\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(actor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function slam({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.failedSaves.size != 1) return;\n    let damage = -workflow.damageList[0].appliedDamage;\n    if (damage === 0) return;\n    let targetActor = workflow.targets.first().actor;\n    let targetMaxHP = targetActor.system.attributes.hp.max;\n    let effectName = targetActor.name + ' - ' + workflow.item.name;\n    let effect = chris.findEffect(targetActor, effectName);\n    if (!effect) {\n        let effectData = {\n            'label': effectName,\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 2628000\n            },\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (Math.abs(damage) >= targetMaxHP) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (!unconscious) return;\n        await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {berserk} from './berserk.js';\nimport {slam} from './slam.js';\nexport let clayGolem = {\n    'slam': slam,\n    'berserk': berserk\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function hit(workflow) {\n    if (workflow.hitTargets.size != 1 || workflow.item?.system?.actionType != 'mwak' || !workflow.damageList || !workflow.item) return;\n    let newHP = workflow.damageList[0].newHP;\n    if (newHP != 0) return;\n    if (workflow.targets.first().actor.items.getName('Minion')) return;\n    let oldHP = workflow.damageList[0].oldHP;\n    let leftoverDamage = workflow.damageList[0].totalDamage - (oldHP - newHP);\n    if (!leftoverDamage) return;\n    let fullHealthSetting = game.settings.get('chris-premades', 'DMG Cleave Full Health');\n    if (!fullHealthSetting) {\n        let targetMaxHP = workflow.targets.first().actor.system.attributes.hp.max;\n        if (oldHP != targetMaxHP) return;\n    }\n    let nearbyTargets = chris.findNearby(workflow.token, workflow.rangeDetails.range ?? 5, 'enemy');\n    if (!nearbyTargets.length) return;\n    let selection = await chris.selectTarget('Cleave', constants.yesNoButton, nearbyTargets, true, 'one', false, false, 'Cleave a nearby target?');\n    if (!selection.buttons) return;\n    let targetTokenID = selection.inputs.find(i => i);\n    if (!targetTokenID) return;\n    let weaponData = duplicate(workflow.item.toObject());\n    delete(weaponData._id);\n    if (!workflow.item.flags['chris-premades']?.mechanic?.cleave?.named) weaponData.name = workflow.item.name + ': Cleave';\n    weaponData.system.damage.parts = [[leftoverDamage + '[' + workflow.defaultDamageType + ']', workflow.defaultDamageType]];\n    weaponData.system.consume.amount = 0;\n    weaponData.flags['chris-premades'] = {\n        'mechanic': {\n            'cleave': {\n                'attack': workflow.attackRoll.total,\n                'damage': leftoverDamage + '[' + workflow.defaultDamageType + ']',\n                'named': true\n            }\n        }\n    };\n    let weaponAttack = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenID]);\n    await MidiQOL.completeItemUse(weaponAttack, config, options);\n}\nasync function attack(workflow) {\n    let flag = workflow.item?.flags?.['chris-premades']?.mechanic?.cleave;\n    if (!flag) return;\n    if (!flag.attack) return;\n    let roll = await new Roll(String(flag.attack)).evaluate({async: true});\n    await workflow.setAttackRoll(roll);\n}\nasync function damage(workflow) {\n    if (!workflow.damageRoll) return;\n    let flag = workflow.item?.flags?.['chris-premades']?.mechanic?.cleave;\n    if (!flag) return;\n    if (!flag.damage) return;\n    let roll = await new Roll(String(flag.damage)).evaluate({async: true});\n    await workflow.setDamageRoll(roll);\n}\nexport let cleave = {\n    'hit': hit,\n    'attack': attack,\n    'damage': damage\n}","import {chris} from '../../../helperFunctions.js';\nexport async function electrifiedBite(origin, token) {\n    let turnToken = game.combat.scene.tokens.get(game.combat.current.tokenId);\n    let turnActor = turnToken.actor;\n    let originActor = origin.actor;\n    if (originActor.id != turnActor.id) return;\n    let damageRoll = await new Roll('1d8[piercing] + 3 + 2d6[lightning]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: origin.name\n    });\n    await chris.applyDamage(token, damageRoll.total);\n}","import {electrifiedBite} from './electrifiedBite.js';\nexport let clockworkDefender = {\n    'electrifiedBite': electrifiedBite\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Cloud Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'cloudStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'cloudStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, constants.yesNo, 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.cloudStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d4[' + translate.damageType('thunder') + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let saveDC = Math.max(workflow.actor.system.abilities.con.dc, workflow.actor.system.abilities.str.dc);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Strike of the Giants: Cloud Strike', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Strike of the Giants: Cloud Strike');\n    featureData.system.save.dc = saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.hitTargets.first().document.uuid]);\n    await warpgate.wait(100);\n    let targetWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (targetWorkflow.failedSaves.size === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetEffect = chris.findEffect(targetWorkflow.failedSaves.first().actor, 'Strike of the Giants: Cloud Strike');\n    if (!targetEffect) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.updateEffect(targetEffect, {'origin': originFeature.uuid});\n    let effectData = {\n        'label': 'Strike of the Giants: Cloud Strike - Invisible',\n        'icon': originFeature.img,\n        'origin': originFeature.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.cloudStrike.selfAttack,postActiveEffects',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnStart'\n                ],\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'await chrisPremades.macros.cloudStrike.remove(effect);'\n                }\n            },\n            'chris-premades': {\n                'feat': {\n                    'cloudStrike': {\n                        'targetEffectUuid': targetEffect.uuid,\n                        'ignore': true\n                    }\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.cloudStrike.turn', '');\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    let validTypes = ['mwak', 'rwak', 'msak', 'rsak'];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Strike of the Giants: Cloud Strike');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let originItem = await fromUuid(effect.origin);\n    if (originItem.actor.uuid != workflow.targets.first().actor.uuid) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'cloudStrike', 150);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: ' + originItem.name);\n    queue.remove(workflow.item.uuid);\n}\nasync function remove(effect) {\n    let targetEffectUuid = effect.flags?.['chris-premades']?.feat?.cloudStrike?.targetEffectUuid;\n    if (!targetEffectUuid) return;\n    let effect2 = await fromUuid(targetEffectUuid);\n    if (!effect2) return;\n    await chris.removeEffect(effect2);\n}\nasync function selfAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let validTypes = ['mwak', 'rwak', 'msak', 'rsak'];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Strike of the Giants: Cloud Strike - Invisible');\n    if (!effect) return;\n    let ignore = effect.flags?.['chris-premades']?.feat?.cloudStrike?.ignore;\n    if (ignore) {\n        await effect.setFlag('chris-premades', 'feat.cloudStrike.ignore', false);\n        return;\n    }\n    await chris.removeEffect(effect);\n}\nexport let cloudStrike = {\n    'damage': damage,\n    'end': end,\n    'attack': attack,\n    'remove': remove,\n    'selfAttack': selfAttack\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'cloudkill',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'cloudkill',\n        'templateUuid': template.uuid,\n        'turn': 'start',\n        'ignoreMove': false\n    });\n    async function effectMacro() {\n        await chrisPremades.macros.cloudkill.move(effect, token);\n    }\n    let effectData = {\n        'label': 'Cloudkill',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 86400\n        },\n        'flags': {\n            'effectmacro': {\n                'onTurnStart': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'cloudkill': {\n                        'templateUuid': template.uuid\n                    }\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function trigger(token, trigger) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.cloudkill?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.cloudkill.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Cloudkill - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Cloudkill - Damage');\n    featureData.system.save.dc = trigger.saveDC;\n    featureData.system.damage.parts = [\n        [\n            trigger.castLevel + 'd8[' + translate.damageType('poison') + ']',\n            'poison'\n        ]\n    ];\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function move(effect, token) {\n    function getAllowedMoveLocation(casterToken, template, maxSquares) {\n        for (let i = maxSquares; i > 0; i--) {\n            let movePixels = i * canvas.grid.size;\n            let ray = new Ray(casterToken.center, template.object.center);\n            let newCenter = ray.project((ray.distance + movePixels)/ray.distance);\n            let isAllowedLocation = canvas.effects.visibility.testVisibility({'x': newCenter.x, 'y': newCenter.y}, {'object': template.Object});\n            if (isAllowedLocation) return newCenter;\n        }\n        return false;\n    }\n    let templateUuid = effect.flags['chris-premades']?.spell?.cloudkill?.templateUuid;\n    if (!templateUuid) return;\n    let template = await fromUuid(templateUuid);\n    if (!template) return;\n    let newCenter = getAllowedMoveLocation(token, template, 2);\n    if(!newCenter) {\n        ui.notifications.info('No room to move cloudkill!');\n        return;\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x, newCenter.y, 1);\n    await template.update({x: newCenter.x, y: newCenter.y});\n}\nexport let cloudkill = {\n    'item': item,\n    'trigger': trigger,\n    'move': move\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Compelled Duel - Target');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'compelledDuel', 50);\n    if (!queueSetup) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetUuid = workflow.targets.first().document.uuid;\n    let sourceUuid = effect.flags['chris-premades']?.spell?.compelledDuel?.sourceUuid;\n    if (!sourceUuid) return;\n    if (targetUuid === sourceUuid) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: ' + origin.name);\n    queue.remove(workflow.item.uuid);\n}\nasync function attacker({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token);\n    if (!workflow.targets.size) return;\n    let effect = chris.findEffect(workflow.actor, 'Compelled Duel - Source');\n    if (!effect) return;\n    let targetUuid = effect.flags['chris-premades']?.spell?.compelledDuel?.targetUuid;\n    if (!targetUuid) return;\n    let endSpell = false;\n    for (let i of Array.from(workflow.targets)) {\n        if (constants.attacks.includes(workflow.item.actionType)) {\n            if (i.document.uuid != targetUuid) {\n                endSpell = true;\n                break;\n            } else {\n                continue;\n            }\n        }\n        let disposition = i.document.disposition;\n        if (disposition != workflow.token.document.disposition) {\n            if (i.document.uuid != targetUuid) {\n                endSpell = true;\n                break;\n            }\n        }\n    }\n    if (!endSpell) return;\n    await chris.removeEffect(effect);\n    let targetToken = await fromUuid(targetUuid);\n    if (!targetToken) return;\n    let effect2 = chris.findEffect(targetToken.actor, 'Compelled Duel - Target');\n    if (!effect2) return;\n    await chris.removeEffect(effect2);\n}\nasync function attacked(workflow) {\n    if (!workflow.token || !workflow.targets.size) return;\n    for (let token of Array.from(workflow.targets)) {\n        let effect = chris.findEffect(token.actor, 'Compelled Duel - Target');\n        if (!effect) continue;\n        if (token.document.disposition === workflow.token.document.disposition) continue;\n        let sourceUuid = effect.flags['chris-premades']?.spell?.compelledDuel?.sourceUuid;\n        if (!sourceUuid) continue;\n        if (workflow.token.document.uuid === sourceUuid) continue;\n        await chris.removeEffect(effect);\n        let sourceToken = await fromUuid(sourceUuid);\n        if (!sourceToken) continue;\n        let effect2 = chris.findEffect(sourceToken.actor, 'Compelled Duel - Source');\n        if (!effect2) continue;\n        await chris.removeEffect(effect2);\n    }\n}\nasync function movement(token, updates, diff, id) {\n    if (!chris.isLastGM()) return;\n    if (token.parent.id != canvas.scene.id) return;\n    if (!updates.x && !updates.y && !updates.elevation || !diff.animate) return;\n    let effect = chris.findEffect(token.actor, 'Compelled Duel - Target');\n    if (!effect) return;\n    let sourceUuid = effect.flags['chris-premades']?.spell?.compelledDuel?.sourceUuid;\n    if (!sourceUuid) return;\n    let sourceToken = fromUuidSync(sourceUuid);\n    if (!sourceToken) return;\n    let fakeTargetToken = {\n        'width': token.width,\n        'height': token.height,\n        'x': diff['chris-premades'].coords.previous.x,\n        'y': diff['chris-premades'].coords.previous.y,\n        'elevation': diff['chris-premades'].coords.previous.elevation\n    };\n    let oldDistance = chris.getCoordDistance(sourceToken.object, fakeTargetToken);\n    await token.object?._animation;\n    let distance = chris.getDistance(sourceToken, token);\n    if (oldDistance >= distance || distance <= 30) return;\n    let turnCheck = chris.perTurnCheck(effect, 'spell', 'compelledDuel');\n    if (!turnCheck) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Compelled Duel - Moved', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Compelled Duel - Moved');\n    delete featureData._id;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    featureData.system.save.dc = chris.getSpellDC(originItem);\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let spellWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (!spellWorkflow.failedSaves.size) {\n        await chris.setTurnCheck(effect, 'spell', 'compelledDuel');\n        return;\n    }\n    await new Sequence()\n        .effect()\n            .file('jb2a.misty_step.01.blue')\n            .atLocation(token)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(750)\n        .animation()\n            .on(token)\n            .opacity(0.0)\n            .teleportTo(fakeTargetToken)\n            .wait(50)\n        .effect()\n            .file('jb2a.misty_step.02.blue')\n            .atLocation(token)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(1500)\n        .animation()\n            .on(token)\n            .opacity(1.0)\n        .play();\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    async function effectMacro() {\n        await chrisPremades.macros.compelledDuel.end(effect);\n    }\n    async function effectMacro2() {\n        await chrisPremades.macros.compelledDuel.turnEnd(effect, token, origin);\n    }\n    let effectDataTarget = {\n        'label': 'Compelled Duel - Target',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.compelledDuel.attack,preAttackRoll',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'compelledDuel': {\n                        'sourceUuid': workflow.token.document.uuid\n                    }\n                }\n            },\n            'effectmacro': {\n                'onCombatEnd': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let effectDataSource ={\n        'label': 'Compelled Duel - Source',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.compelledDuel.attacker,postActiveEffects',\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'compelledDuel': {\n                        'targetUuid': workflow.targets.first().document.uuid\n                    }\n                }\n            },\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectDataSource);\n    await chris.createEffect(workflow.targets.first().actor, effectDataTarget);\n}\nasync function end(effect) {\n    await chris.setTurnCheck(effect, 'spell', 'compelledDuel', true);\n}\nasync function turnEnd(effect, token, origin) {\n    let targetUuid = effect.flags['chris-premades']?.spell?.compelledDuel?.targetUuid\n    if (!targetUuid) return;\n    let targetToken = await fromUuid(targetUuid);\n    if (!targetToken) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance <= 30) return;\n    let selection = await chris.remoteDialog(origin.name, constants.yesNo, chris.lastGM(), 'Caster has ended their turn more than 30 feet away from their target. Remove effect?');\n    if (!selection) return;\n    await chris.removeEffect(effect);\n    let targetEffect = chris.findEffect(targetToken.actor, 'Compelled Duel - Target');\n    if (!targetEffect) return;\n    await chris.removeEffect(targetEffect);\n}\nexport let compelledDuel = {\n    'attack': attack,\n    'attacker': attacker,\n    'attacked': attacked,\n    'movement': movement,\n    'item': item,\n    'end': end,\n    'turnEnd': turnEnd\n}","import {chris} from '../../helperFunctions.js';\nlet effectData = {\n    'name': 'Condition Advantage',\n    'icon': 'icons/magic/time/arrows-circling-green.webp',\n    'duration': {\n        'turns': 1\n    },\n    'changes': [\n        {\n            'key': 'flags.midi-qol.advantage.ability.save.all',\n            'value': '1',\n            'mode': 5,\n            'priority': 120\n        }\n    ],\n    'flags': {\n        'chris-premades': {\n            'effect': {\n                'noAnimation': true\n            }\n        }\n    }\n};\nlet cleanUpList =[];\nexport async function conditionResistanceEarly(workflow) {\n    if (!workflow.targets.size) return;\n    if (workflow.item.system.save?.dc === null || workflow.item.system.save === undefined) return;\n    if (!workflow.item.effects.size) return;\n    let itemConditions = new Set();\n    workflow.item.effects.forEach(effect => {\n        effect.changes.forEach(element => {\n            if (element.key === 'macro.CE') itemConditions.add(element.value.toLowerCase());\n        });\n    });\n    if (!itemConditions.size) return;\n    workflow.targets.forEach(tokenDoc => {\n        itemConditions.forEach(async condition => {\n            if (tokenDoc.document.actor.flags['chris-premades']?.CR?.[condition] === 1) {\n                await chris.createEffect(tokenDoc.document.actor, effectData);\n                cleanUpList.push(tokenDoc.document.actor);\n            }\n        });\n    });\n}\nexport async function conditionResistanceLate(workflow) {\n    for (let i of cleanUpList) {\n        let effect = chris.findEffect(i, 'Condition Advantage');\n        if (effect) await chris.removeEffect(effect);\n    }\n    cleanUpList = [];\n}","import {chris} from '../../helperFunctions.js';\nlet effectData = {\n    'name': 'Condition Disadvantage',\n    'icon': 'icons/magic/time/arrows-circling-green.webp',\n    'duration': {\n        'turns': 1\n    },\n    'changes': [\n        {\n            'key': 'flags.midi-qol.disadvantage.ability.save.all',\n            'value': '1',\n            'mode': 5,\n            'priority': 120\n        }\n    ]\n};\nlet cleanUpList =[];\nexport async function conditionVulnerabilityEarly(workflow) {\n    if (!workflow.targets.size) return;\n    if (workflow.item.system.save?.dc === null || workflow.item.system.save === undefined) return;\n    if (!workflow.item.effects.size) return;\n    let itemConditions = new Set();\n    workflow.item.effects.forEach(effect => {\n        effect.changes.forEach(element => {\n            if (element.key === 'macro.CE') itemConditions.add(element.value.toLowerCase());\n        });\n    });\n    if (!itemConditions.size) return;\n    workflow.targets.forEach(tokenDoc => {\n        itemConditions.forEach(async condition => {\n            if (tokenDoc.document.actor.flags['chris-premades']?.CV?.[condition] === 1) {\n                await chris.createEffect(tokenDoc.document.actor, effectData);\n                cleanUpList.push(tokenDoc.document.actor);\n            }\n        });\n    });\n}\nexport async function conditionVulnerabilityLate(workflow) {\n    for (let i of cleanUpList) {\n        let effect = chris.findEffect(i, 'Condition Disadvantage');\n        if (effect) await chris.removeEffect(effect);\n    }\n    cleanUpList = [];\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureAnimals({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let totalSummons = Math.floor(1 * ((spellLevel - 1) / 2));\n    if (!totalSummons || totalSummons < 1) return;\n    let selection = await chris.dialog('How many beasts?', [\n        [totalSummons + ' beasts of CR 2 or lower', 2], \n        [(totalSummons * 2) + ' beasts of CR 1 or lower', 1], \n        [(totalSummons * 4) + ' beasts of CR 1/2 or lower', 0.5], \n        [(totalSummons * 8) + ' beasts of CR 1/4 or lower', 0.25]\n    ]);\n    if (!selection) return;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase() === 'beast').filter(i => i.system?.details?.cr <= selection);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentsDialog(userId, 'Select Summons (Max ' + (totalSummons * 2 / selection) + ')', actors);\n    if (!sourceActors) return;\n    if (sourceActors.length > (totalSummons * 2 / selection)) {\n        ui.notifications.info('Too many selected, try again!');\n        return;\n    }\n    let updates = {\n        'actor': {\n            'system': {\n                'details': {\n                    'type': {\n                        'value': 'fey'\n                    }\n                }\n            }\n        },\n        'token': {\n            'disposition': workflow.token.document.disposition \n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'nature';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, undefined, undefined, 60, workflow.token, animation);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureCelestial({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let cr = 4;\n    if (spellLevel === 9) cr = 5;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase() === 'celestial').filter(i => i.system?.details?.cr <= cr);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentDialog(userId, 'Select Summon', actors);\n    if (!sourceActors) return;\n    let updates = {\n        'token': {\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'celestial';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, undefined, undefined, 90, workflow.token, animation);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureElemental({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let cr = spellLevel;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase() === 'elemental').filter(i => i.system?.details?.cr <= cr);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentDialog(userId, 'Select Summon', actors);\n    if (!sourceActors) return;\n    let updates = {\n        'token': {\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, true, undefined, undefined, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (!effect) return;\n    async function effectMacro () {\n        let targetEffect = chrisPremades.helpers.findEffect(effect.parent, 'Conjure Elemental');\n        if (!targetEffect) return;\n        let summons = targetEffect.flags['chris-premades']?.summons?.ids['Conjure Elemental'];\n        if (!summons) return;\n        let updates = {\n            'token': {\n                'disposition': token.document.disposition * -1 \n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': 'Conjure Elemental - Hostile',\n            'description': 'Conjure Elemental - Hostile'\n        };\n        for (let i of summons) {\n            let token = canvas.scene.tokens.get(i);\n            if (token) await warpgate.mutate(token, updates, {}, options);\n        }\n    }\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureFey({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let cr = spellLevel;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase().includes(['fey', 'beast'])).filter(i => i.system?.details?.cr <= cr);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentDialog(userId, 'Select Summon', actors);\n    if (!sourceActors) return;\n    let updates = {\n        'token': {\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'nature';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, true, undefined, 90, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (!effect) return;\n    async function effectMacro () {\n        let targetEffect = chrisPremades.helpers.findEffect(effect.parent, 'Conjure Fey');\n        if (!targetEffect) return;\n        let summons = targetEffect.flags['chris-premades']?.summons?.ids['Conjure Fey'];\n        if (!summons) return;\n        let updates = {\n            'token': {\n                'disposition': token.document.disposition * -1 \n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': 'Conjure Fey - Hostile',\n            'description': 'Conjure Fey - Hostile'\n        };\n        for (let i of summons) {\n            let token = canvas.scene.tokens.get(i);\n            if (token) await warpgate.mutate(token, updates, {}, options);\n        }\n    }\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureMinorElementals({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let totalSummons = Math.floor(1 * ((spellLevel - 2) / 2));\n    if (!totalSummons || totalSummons < 1) return;\n    let selection = await chris.dialog('How many elementals?', [\n        [totalSummons + ' elementals of CR 2 or lower', 2], \n        [(totalSummons * 2) + ' elementals of CR 1 or lower', 1], \n        [(totalSummons * 4) + ' elementals of CR 1/2 or lower', 0.5], \n        [(totalSummons * 8) + ' elementals of CR 1/4 or lower', 0.25]\n    ]);\n    if (!selection) return;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase() === 'elemental').filter(i => i.system?.details?.cr <= selection);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentsDialog(userId, 'Select Summons (Max ' + (totalSummons * 2 / selection) + ')', actors);\n    if (!sourceActors) return;\n    if (sourceActors.length > (totalSummons * 2 / selection)) {\n        ui.notifications.info('Too many selected, try again!');\n        return;\n    }\n    let updates = {\n        'token': {\n            'disposition': workflow.token.document.disposition \n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, undefined, undefined, 90, workflow.token, animation);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function conjureWoodlandBeings({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let totalSummons = Math.floor(1 * ((spellLevel - 2) / 2));\n    if (!totalSummons || totalSummons < 1) return;\n    let selection = await chris.dialog('How many fey creatures?', [\n        [totalSummons + ' fey creatures of CR 2 or lower', 2], \n        [(totalSummons * 2) + ' fey creatures of CR 1 or lower', 1], \n        [(totalSummons * 4) + ' fey creatures of CR 1/2 or lower', 0.5], \n        [(totalSummons * 8) + ' fey creatures of CR 1/4 or lower', 0.25]\n    ]);\n    if (!selection) return;\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.value.toLowerCase() === 'fey').filter(i => i.system?.details?.cr <= selection);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentsDialog(userId, 'Select Summons (Max ' + (totalSummons * 2 / selection) + ')', actors);\n    if (!sourceActors) return;\n    if (sourceActors.length > (totalSummons * 2 / selection)) {\n        ui.notifications.info('Too many selected, try again!');\n        return;\n    }\n    let updates = {\n        'token': {\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'nature';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, undefined, undefined, 60, workflow.token, animation);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    await chris.addCondition(targetActor, 'Reaction', false, workflow.item.uuid);\n}\nasync function turnStart(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.document.disposition === token.document.disposition) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 10) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(origin, config, options);\n}\nexport let stoneLethargy = {\n    'item': item,\n    'turnStart': turnStart\n}","import {stoneLethargy} from './stonyLethargy.js';\nexport let constructSpirit = {\n    'stoneLethargy': stoneLethargy\n}","import {chris} from '../../../../helperFunctions.js';\nasync function early({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let effectData = {\n        'name': 'Invalid Target',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.all',\n                'value': 99,\n                'mode': 5,\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ]\n            },\n            'chris-premades': {\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    for (let i of Array.from(workflow.targets)) if (chris.raceOrType(i.actor) != 'undead') await chris.createEffect(i.actor, effectData);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let animation = chris.getConfiguration(workflow.item, 'animation');\n    if (chris.jb2aCheck() != 'patreon' || !animation) return;\n    //Animation by Eskimoh\n    if (!workflow.targets.size) return;\n    let targetToken = workflow.targets.first();\n    let failedSave = workflow.failedSaves.size;\n    new Sequence()\n        .effect()\n        .attachTo(workflow.token)\n        .file('jb2a.extras.tmfx.outflow.circle.01')\n        .scaleToObject(1.5 * workflow.token.document.texture.scaleX)\n        .opacity(1)\n        .belowTokens()\n        .randomRotation()\n        .filter('ColorMatrix', {'brightness': 0})\n        .fadeIn(500)\n        .fadeOut(500)\n\n        .effect()\n        .file('jb2a.magic_signs.rune.necromancy.intro.red')\n        .attachTo(targetToken)\n        .scaleToObject(0.5)\n        .scaleOut(0, 1000, {'ease': 'easeInBack'})\n        .fadeOut(500, {'ease': 'easeInCubic'})\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.markers.02.red')\n        .atLocation(workflow.token)\n        .rotateTowards(targetToken)\n        .spriteOffset({'x': -0.2}, {'gridUnits': true})\n        .spriteScale({'x': 0.8, 'y': 1})\n        .filter('ColorMatrix', {'saturate': 0.5, 'hue': -2})\n        .rotate(0)\n        .scaleToObject(1)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'position.x', {'from': -0.5, 'to': 0.05, 'duration': 1000, 'gridUnits': true, 'ease': 'easeOutBack', 'delay': 0})\n        .animateProperty('sprite', 'width', {'from': 0.8, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack', 'delay': 1500})\n        .animateProperty('sprite', 'height', {'from': 1, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack', 'delay': 1500})\n        .filter('Glow', {'color': 0x000000 })\n        .fadeOut(1000)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.particle_burst.01.circle.bluepurple')\n        .atLocation(workflow.token)\n        .rotateTowards(targetToken)\n        .spriteOffset({x:-0.2}, {'gridUnits': true})\n        .spriteScale({x:0.8,y:1})\n        .filter('ColorMatrix', {'saturate': 0.5, 'hue': -2})\n        .rotate(0)\n        .scaleToObject(1)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'position.x', {'from': -0.5, 'to': 0.05, 'duration': 1000, 'gridUnits': true, 'ease':'easeOutBack', 'delay': 0})\n        .tint('#e51e19')\n        .zIndex(0)\n\n        .effect()\n        .file('jb2a.particle_burst.01.circle.bluepurple')\n        .attachTo(targetToken)\n        .scaleToObject(1.5)\n        .filter('ColorMatrix', {'saturate': 0.5, 'hue': -2})\n        .tint('#e51e19')\n        .belowTokens()\n        .zIndex(0)\n\n        .effect()\n        .delay(550)\n        .file('jb2a.smoke.puff.centered.dark_black')\n        .attachTo(targetToken)\n        .scaleToObject(1.8)\n        .scaleOut(0, 1000, {'ease': 'easeInBack'})\n        .randomRotation()\n        .belowTokens()\n\n        .effect()\n        .delay(750)\n        .file('jb2a.particles.outward.red.01.03')\n        .atLocation(workflow.token)\n        .rotateTowards(targetToken)\n        .spriteOffset({'x': -0.5, 'y': -0.1}, {'gridUnits': true})\n        .filter('ColorMatrix', {'saturate':1, 'hue': -2})\n        .spriteScale({'x': 0.8,'y': 1})\n        .scaleToObject(2.5)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .tint('#e51e19')\n        .duration(1500)\n        .fadeOut(1500)\n        .waitUntilFinished(-1500)\n\n        .effect()\n        .name('Control Undead')\n        .from(targetToken)\n        .attachTo(targetToken,{'bindAlpha': false})\n        .opacity(0.75)\n        .mirrorX(targetToken.document.texture.scaleX != 0)\n        .scaleToObject(1, {'considerTokenScale': true})\n        .tint('#e51e19')\n        .fadeIn(500)\n        .fadeOut(500)\n        .duration(1000)\n        .playIf(failedSave)\n\n        .effect()\n        .delay(100)\n        .file('jb2a.particles.outward.white.01.03')\n        .attachTo(targetToken, {'offset': {'y': 0.2}, 'gridUnits': true, 'followRotation': false})\n        .scaleToObject()\n        .duration(1000)\n        .fadeOut(800)\n        .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'width', {'from': 0, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease':'easeOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': 1.0, 'duration': 1000, 'gridUnits': true, 'ease':'easeOutBack'})\n        .animateProperty('sprite', 'position.y', {'from': -0, 'to': -0.6, 'duration': 1000, 'gridUnits': true})\n        .tint('#e51e19')\n        .filter('Blur', {'blurX': 0, 'blurY': 5})\n        .opacity(0.8)\n        .zIndex(0.3)\n        .playIf(failedSave)\n\n        .effect()\n        .delay(750)\n        .file('jb2a.static_electricity.03.dark_red')\n        .atLocation(targetToken)\n        .size(1.25, {'gridUnits': true})\n        .opacity(1)\n        .playbackRate(1)\n        .randomRotation()\n        .zIndex(0.3)\n        .playIf(failedSave)\n\n        .effect()\n        .delay(500)\n        .name('Control Undead')\n        .file('jb2a.extras.tmfx.outflow.circle.01')\n        .attachTo(targetToken, {'cacheLocation': true, 'offset': {'y':0}, 'gridUnits': true, 'bindAlpha': false})\n        .scaleToObject(1.45, {'considerTokenScale': true})\n        .randomRotation()\n        .fadeIn(1000)\n        .fadeOut(500)\n        .belowTokens()\n        .opacity(0.45)\n        .loopProperty('alphaFilter', 'alpha', {'from': 0.75, 'to': 1, 'duration': 1500, 'pingPong': true, 'ease': 'easeOutSine'})\n        .filter('ColorMatrix', { 'brightness':0 })\n        .persist()\n        .playIf(failedSave)\n\n        .effect()\n        .delay(500)\n        .name('Control Undead')\n        .from(targetToken)\n        .attachTo(targetToken,{'bindAlpha': false})\n        .belowTokens()\n        .mirrorX(targetToken.document.texture.scaleX < 0)\n        .scaleToObject(1, {'considerTokenScale': true})\n        .loopProperty('alphaFilter', 'alpha', {'from': 0.75, 'to': 1, 'duration': 1500, 'pingPong': true, 'ease': 'easeOutSine'})\n        .filter('Glow', {'color': 0xe51e19, 'distance': 5, 'outerStrength':4, 'innerStrength': 0 })\n        .fadeIn(1000)\n        .fadeOut(500)\n        .persist()\n        .zIndex(0.1)\n        .playIf(failedSave)\n\n        .play()\n}\nasync function end(token, origin) {\n    let animation = chris.getConfiguration(origin, 'animation');\n    if (!animation) return;\n    await Sequencer.EffectManager.endEffects({'name': 'Control Undead', 'object': token});\n}\nexport let controlUndead = {\n    'early': early,\n    'item': item,\n    'end': end\n}","import {chris} from '../../../helperFunctions.js'\nexport async function reanimate(token, origin) {\n    let originActor = origin.actor;\n    if (!originActor) return;\n    let stenchEffect = chris.findEffect(originActor, 'Stench of Death Immunity');\n    if (!stenchEffect) return;\n    let originItem = await fromUuid(stenchEffect.origin);\n    await chrisPremades.macros.monster.hezrou.stench(token, origin, 10, 86400, 'corpse-flower', originItem);\n}","import {reanimate} from './reanimate.js';\nexport let corpseFlower = {\n    'reanimate': reanimate\n}","import {chris} from '../../../../../helperFunctions.js';\nasync function create({speaker, actor, token, character, item, args, scope, workflow}) {\n    let items = workflow.actor.items.filter(i => i.flags['chris-premades']?.feature?.createPactWeapon).map(j => j.id);\n    if (items.length) await dismiss({'workflow': workflow});\n    let pack = game.settings.get('chris-premades', 'Item Compendium');\n    if (!game.packs.get(pack)) {\n        ui.notifications.warn('Personal Item Compendium setting must be set!');\n        return\n    }\n    let weapons = [\n        'Club',\n        'Dagger',\n        'Greatclub',\n        'Handaxe',\n        'Javelin',\n        'Light Hammer',\n        'Mace',\n        'Quarterstaff',\n        'Sickle',\n        'Spear',\n        'Battleaxe',\n        'Flail',\n        'Glaive',\n        'Greataxe',\n        'Greatsword',\n        'Halberd',\n        'Lance',\n        'Longsword',\n        'Maul',\n        'Morningstar',\n        'Pike',\n        'Rapier',\n        'Scimitar',\n        'Shortsword',\n        'Trident',\n        'War Pick',\n        'Warhammer',\n        'Whip'\n    ];\n    let improvedPactWeapon = chris.getItem(workflow.actor, 'Eldritch Invocations: Improved Pact Weapon');\n    if (improvedPactWeapon) {\n        weapons = weapons.concat([\n            'Shortbow',\n            'Longbow',\n            'Crossbow, light',\n            'Crossbow, heavy'\n        ]);\n    }\n    let documents;\n    try {\n        documents = await Promise.all(weapons.map(async i => await chris.getItemFromCompendium(pack, i, true)));\n    } catch {\n        ui.notifications.warn('Personal Item Compendium is missing a required weapon for this feature!');\n        return;\n    }\n    if (!documents.length) {\n        ui.notifications.warn('Personal Item Compendium is missing the required weapons for this feature!');\n        return;\n    }\n    let selection = await chris.selectDocument('Select a Pact Weapon', documents, false);\n    if (!selection) return;\n    selection[0].name += ' (Pact Weapon)';\n    selection[0].system.proficient = true;\n    selection[0].system.properties.mgc = true;\n    let hexWarrior = chris.getItem(workflow.actor, 'Hex Warrior');\n    if (hexWarrior) {\n        let cha = workflow.actor.system.abilities.cha.mod;\n        let ability = (selection[0].system.ability === '' || selection[0].system.ability === null) ? 'str' : selection[0].system.ability;\n        let score = workflow.actor.system.abilities[ability].mod;\n        let dex = workflow.actor.system.abilities.dex.mod;\n        let changed = false;\n        if (selection[0].system.properties.fin) {\n            let mod = dex > score ? dex : score;\n            if (mod <= cha) {\n                ability = 'cha';\n                changed = true;\n            }\n        } else {\n            if (score <= cha) {\n                ability = 'cha';\n                changed = true;\n            }\n        }\n        if (changed) selection[0].system.ability = ability;\n    }\n    if (improvedPactWeapon) {\n        selection[0].system.attackBonus = 1;\n        selection[0].system.damage.parts[0][0] += ' + 1';\n    }\n    selection[0].system.equipped = true;\n    setProperty(selection[0], 'flags.chris-premades.feature.createPactWeapon', true);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Dismiss Pact Weapon');\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dismiss Pact Weapon');\n    setProperty(featureData, 'flags.chris-premades.feature.createPactWeapon', true);\n    selection.push(featureData);\n    await workflow.actor.createEmbeddedDocuments('Item', selection);\n}\nasync function dismiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    let items = workflow.actor.items.filter(i => i.flags['chris-premades']?.feature?.createPactWeapon).map(j => j.id);\n    if (!items.length) return;\n    await workflow.actor.deleteEmbeddedDocuments('Item', items);\n}\nexport let createPactWeapon = {\n    'create': create,\n    'dismiss': dismiss\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function crimsonRite({speaker, actor, token, character, item, args, scope, workflow}) {\n    let tokenDoc = workflow.token.document;\n    let targetActor = workflow.actor;\n    if (workflow.targets.size != 1) return;\n    let damageDice = targetActor.system.scale['blood-hunter']['crimson-rite'];\n    if (!damageDice) {\n        ui.notifications.warn('Source actor does not appear to have a Crimson Rite scale!');\n        return;\n    }\n    let generatedMenu = [];\n    let mutationStack = warpgate.mutationStack(tokenDoc);\n    targetActor.items.forEach(item => {\n        if (item.type === 'weapon' && item.system.equipped === true) {\n            let mutateItem = mutationStack.getName('Crimson Rite: ' + item.id);\n            if (!mutateItem) generatedMenu.push([item.name, item.id]);\n        }\n    });\n    let selection;\n    if (generatedMenu.length === 0) return;\n    if (generatedMenu.length === 1) selection = generatedMenu[0][1];\n    if (!selection) selection = await chris.dialog('What weapon?', generatedMenu);\n    if (!selection) return;\n    let riteMenu = [];\n    if (targetActor.items.getName('Crimson Rite: Rite of the Flame')) riteMenu.push(['Rite of the Flame', 'fire']);\n    if (targetActor.items.getName('Crimson Rite: Rite of the Frozen')) riteMenu.push(['Rite of the Frozen', 'cold']);\n    if (targetActor.items.getName('Crimson Rite: Rite of the Storm')) riteMenu.push(['Rite of the Storm', 'lightning']);\n    if (targetActor.items.getName('Crimson Rite: Rite of the Dead')) riteMenu.push(['Rite of the Dead', 'necrotic']);\n    if (targetActor.items.getName('Crimson Rite: Rite of the Oracle')) riteMenu.push(['Rite of the Oracle', 'psychic']);\n    if (targetActor.items.getName('Crimson Rite: Rite of the Roar')) riteMenu.push(['Rite of the Roar', 'thunder']);\n    if (targetActor.items.getName('Rite of the Dawn')) riteMenu.push(['Rite of the Dawn', 'radiant']);\n    let damageType;\n    if (riteMenu.length === 0) return;\n    if (riteMenu.length === 1) damageType = riteMenu[0][1];\n    if (!damageType) damageType = await chris.dialog('What Crimson Rite?', riteMenu);\n    if (!damageType) return;\n    let weaponData = targetActor.items.get(selection).toObject();\n    weaponData.system.damage.parts.push([damageDice + '[' + damageType + ']', damageType]);\n    weaponData.system.properties.mgc = true;\n    let effectData = {\n        'label': 'Crimson Rite: ' + weaponData.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'zeroHP',\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': \"warpgate.revert(token.document, '\" + 'Crimson Rite: ' + weaponData._id + \"');\"\n                }\n            }\n        }\n    };\n    if (damageType === 'radiant') {\n        effectData.changes = [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 2,\n                'value': 'necrotic',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': '20',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.riteOfTheDawn,postDamageRoll',\n                'priority': 20\n            }\n        ];\n        weaponData.flags['chris-premades'] = {\n            'feature': {\n                'rotd': true\n            }\n        };\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [weaponData.name]: weaponData\n            },\n            'ActiveEffect': {\n                ['Crimson Rite: ' + weaponData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Crimson Rite: ' + weaponData._id,\n        'description': 'Crimson Rite: ' + weaponData.name\n    };\n    await warpgate.mutate(tokenDoc, updates, {}, options);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nimport {queue} from '../../utility/queue.js';\nasync function critical({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.damageRoll || !workflow.isCritical) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'crusherCritical', 450);\n    if (!queueSetup) return;\n    if (!chris.getRollDamageTypes(workflow.damageRoll).has('bludgeoning')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let feature = chris.getItem(workflow.actor, 'Crusher: Critical');\n    if (!feature) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effetData = {\n        'name': feature.name,\n        'icon': feature.img,\n        'origin': feature.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.grants.advantage.attack.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.targets.first().actor, effetData);\n    await feature.use();\n    queue.remove(workflow.item.uuid);\n}\nasync function move({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || !workflow.damageRoll) return;\n    let targetToken = workflow.targets.first();\n    let targetSize = chris.getSize(targetToken.actor, false);\n    if (targetSize > (chris.getSize(workflow.actor, false) + 1)) return;\n    let feature = chris.getItem(workflow.actor, 'Crusher');\n    if (!feature) return;\n    let turnCheck = chris.perTurnCheck(feature, 'feat', 'crusher', false);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'crusherCritical', 450);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has(translate.damageType('bludgeoning'))) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Move target?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await workflow.actor.sheet.minimize();\n    let icon = targetToken.document.texture.src;\n    let interval = targetToken.document.width % 2 === 0 ? 1 : -1;\n    let position = await chris.aimCrosshair(targetToken, 5, icon, interval, targetToken.document.width);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let newCenter = canvas.grid.getSnappedPosition(position.x - targetToken.w / 2, position.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': feature.name,\n        'description': feature.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    await workflow.actor.sheet.maximize();\n    await feature.displayCard();\n    queue.remove(workflow.item.uuid);\n}\nexport let crusher = {\n    'critical': critical,\n    'move': move\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function crushingThrow({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.item.system.properties.thr) return;\n    if (!(workflow.item.system.ability === '' || workflow.item.system.ability === 'str')) return;\n    if (workflow.item.system.properties.fin && workflow.item.system.ability === '') {\n        if (workflow.actor.system.abilities.dex.mod > workflow.actor.system.abilities.str.mod) return;\n    }\n    let distance = chris.getDistance(workflow.token, workflow.targets.first());\n    let demiurgicColossus = chris.getItem(workflow.actor, 'Demiurgic Colossus');\n    if (distance <= (demiurgicColossus ? 15 : 10)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'crushingThrow', 250);\n    if (!queueSetup) return;\n    let bonusDamageFormula = workflow.actor.system.scale.barbarian?.['rage-damage']?.value;\n    if (!bonusDamageFormula) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let oldFormula = workflow.damageRoll._formula;\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let feature = chris.getItem(workflow.actor, 'Giant\\'s Havoc: Crushing Throw');\n    if (feature) await feature.displayCard();\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function heal({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.system.damage.parts[0][0] != '0[healing') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'crystalBladeHealing', 50);\n    if (!queueSetup) return;\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '50px';\n            t.style.textAlign = 'center';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let selection = await warpgate.menu({\n        'inputs': [\n            {\n                'label': 'Healing:',\n                'type': 'number'\n            }\n        ],\n        'buttons': [\n            {\n                'label': 'Cancel',\n                'value': false\n            },\n            {\n                'label': 'Ok',\n                'value': true\n            }\n        ]\n    },\n    {\n        'title': workflow.item.name,\n        'render': dialogRender,\n        'options': {\n            'width': '400px'\n        }\n    });\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (isNaN(selection.inputs[0])) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    let damageRoll = await new Roll(selection.inputs[0] + '[healing]').roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!chris.getConfiguration(workflow.item, 'healprompt') ?? true) return;\n    let healItem = workflow.actor.items.find(i => i.flags?.['chris-premades']?.equipmentFeature?.uniqueName === 'crystalBladeHeal');\n    if (!healItem) return;\n    let uses = healItem.system.uses.value;\n    if (!uses) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'crystalBlade', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, [['Yes,', true], ['No', false]], 'Use a charge to heal yourself?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let featureData = duplicate(healItem.toObject());\n    delete featureData._id;\n    featureData.system.damage.parts[0][0] = workflow.damageRoll.terms[4].total + '[healing]';\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    await healItem.update({'system.uses.value': uses - 1});\n    queue.remove(workflow.item.uuid);\n}\nasync function light({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect1 = chris.findEffect(workflow.actor, 'Crystal Blade - Bright Light');\n    let effect2 = chris.findEffect(workflow.actor, 'Crystal Blade - Dim Light');\n    let options = [];\n    if (!effect1) options.push(['Bright Light', 'bright']);\n    if (!effect2) options.push(['Dim Light', 'dim']);\n    if (effect1 || effect2) options.push(['Douse Light', 'douse']);\n    let selection = await chris.dialog(workflow.item.name, options, 'What type of light do you want?');\n    if (!selection) return;\n    let effectData;\n    switch (selection) {\n        case 'bright':\n            if (effect2) await chris.removeEffect(effect2);\n            effectData = {\n                'label': 'Crystal Blade - Bright Light',\n                'icon': workflow.item.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 86400\n                },\n                'changes': [\n                    {\n                        'key': 'ATL.light.dim',\n                        'mode': 4,\n                        'value': '60',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'ATL.light.bright',\n                        'mode': 4,\n                        'value': '30',\n                        'priority': 20\n                    }\n                ]\n            }\n            await chris.createEffect(workflow.actor, effectData);\n            return;\n        case 'dim':\n            if (effect1) await chris.removeEffect(effect1);\n            effectData = {\n                'label': 'Crystal Blade - Dim Light',\n                'icon': workflow.item.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 86400\n                },\n                'changes': [\n                    {\n                        'key': 'ATL.light.dim',\n                        'mode': 4,\n                        'value': '30',\n                        'priority': 20\n                    }\n                ]\n            }\n            await chris.createEffect(workflow.actor, effectData);\n            return;\n        case 'douse':\n            if (effect1) await chris.removeEffect(effect1);\n            if (effect2) await chris.removeEffect(effect2);\n            return;\n    }\n}\nexport let crystalBlade = {\n    'heal': heal,\n    'item': item,\n    'light': light\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Dancing Sword');\n    if (!sourceActor) return;\n    let effect = chris.findEffect(workflow.actor, 'Dancing Sword Passive');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    async function effectMacro() {\n        let originActor = origin.actor;\n        await warpgate.dismiss(token.id);\n        let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n        if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    let name = chris.getConfiguration(workflow.item, 'name') ?? originItem.name;\n    if (name === '') name = originItem.name;\n    let updates = {\n        'actor': {\n            'name': name,\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name\n        },\n        'embedded': {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    \n    let avatarImg = chris.getConfiguration(originItem, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(originItem, 'token');\n    if (!tokenImg) {\n        let weaponType = originItem.system.baseItem;\n        if (chris.jb2aCheck() && weaponType) {\n            try {\n                tokenImg = await Sequencer.Database.getEntry('jb2a.spiritual_weapon.' + weaponType + '.01.spectral.02.green').file;\n            } catch {}\n            if (!tokenImg) await Sequencer.Database.getEntry('jb2a.spiritual_weapon.greatsword.01.spectral.02.green').file;\n        }\n    }\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let options = {\n        'controllingActor': workflow.token.actor\n    };\n    let tokenDocument = await sourceActor.getTokenDocument();\n    let spawnedTokens = await warpgate.spawn(tokenDocument, updates, {}, options);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, workflow.item.name);\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.feature.dancingSword.tokenUuid',\n                'mode': 5,\n                'value': spawnedToken.uuid,\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect); await warpgate.revert(token.document, \"Dancing Sword\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dancing Sword - Attack'\n                }\n            }\n        }\n    };\n    let attackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Dancing Sword - Attack', false);\n    if (!attackFeatureData) return;\n    attackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dancing Sword - Attack');\n    attackFeatureData.system.ability = originItem.system.ability;\n    if (originItem.system.properties.fin && workflow.actor.system.abilities.dex.mod > workflow.actor.system.abilities.str.mod) attackFeatureData.system.ability = 'dex';\n    attackFeatureData.system.damage.parts = originItem.system.damage.parts;\n    attackFeatureData.img = originItem.img;\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [attackFeatureData.name]: attackFeatureData\n            },\n            'ActiveEffect': {\n                [casterEffectData.name]: casterEffectData\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Dancing Sword',\n        'description': 'Dancing Sword'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    let uses = workflow.item?.flags['chris-premades']?.feature?.dancingSword?.uses ?? 0;\n    uses += 1;\n    await workflow.item.setFlag('chris-premades', 'feature.dancingSword.uses', uses);\n    await workflow.item.setFlag('chris-premades', 'feature.dancingSword.position', {'x': workflow.token.document.x, 'y': workflow.token.document.y});\n    await workflow.actor.setFlag('chris-premades', 'mechanic.noFlanking', true);\n    let weaponTokenUuid = workflow.actor.flags['chris-premades']?.feature?.dancingSword?.tokenUuid;\n    if (!weaponTokenUuid) return;\n    let weaponToken = await fromUuid(weaponTokenUuid);\n    if (!weaponToken) return;\n    let position = canvas.grid.getSnappedPosition(weaponToken.x, weaponToken.y);\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n    workflow.flankingAdvantage = false; //Does not currently work.\n}\nasync function attackLate({speaker, actor, token, character, item, args, scope, workflow}) { \n    await workflow.actor.unsetFlag('chris-premades', 'mechanic.noFlanking');\n    let position = workflow.item.flags['chris-premades']?.feature?.dancingSword?.position;\n    if (!position) return;\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n    if (workflow.item?.flags['chris-premades']?.feature?.dancingSword?.uses === 4) {\n        let effect = chris.findEffect(workflow.actor, 'Dancing Sword - Toss');\n        if (!effect) return;\n        await chris.removeEffect(effect);\n    }\n}\nasync function equip(actor, origin, level) {\n    let itemData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Dancing Sword - Toss', false);\n    if (!itemData) return;\n    itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dancing Sword - Toss');\n    itemData.img = (origin).img;\n    await chris.addTempItem(actor, itemData, origin.id, 'Dancing Sword - Toss', false, 0);\n}\nasync function unequip(actor, origin) {\n    await chris.removeTempItems(actor, origin.id);\n}\nasync function deleted(actor, effect) {\n    if (effect.disabled) return;\n    let originArray = effect.origin.split('Item.');\n    if (originArray.length != 2) return;\n    let originID = originArray[1];\n    await chris.removeTempItems(actor, originID);\n}\nexport let dancingSword = {\n    'item': item,\n    'attackEarly': attackEarly,\n    'attackLate': attackLate,\n    'equip': equip,\n    'unequip': unequip,\n    'deleted': deleted\n}","import {chris} from '../../../helperFunctions.js';\nexport function dangerSense(saveId, options) {\n    let blinded = chris.findEffect(this, 'Blinded');\n    let deafened = chris.findEffect(this, 'Deafened');\n    let incapacitated = chris.findEffect(this, 'Incapacitated');\n    if (blinded || deafened || incapacitated) return;\n    return saveId != 'dex' ? false : {'label': 'This save from an effect you can see.', 'type': 'advantage'};\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function danseMacabre({speaker, actor, token, character, item, args, scope, workflow}) {\n    let zombieActor = game.actors.getName('CPR - Zombie');\n    let skeletonActor = game.actors.getName('CPR - Skeleton');\n    if (!zombieActor || !skeletonActor) return;\n    let nearbyTokens = await chris.findNearby(workflow.token, 60, 'all', true).filter(t => t.actor.system.attributes.hp.value === 0 && !chris.findEffect(t.actor, 'Unconscious'));\n    if (!nearbyTokens.length) return;\n    let options = [\n        'Ignore',\n        'Skeleton',\n        'Zombie'\n    ];\n    let bonusHP = 0;\n    let damageBonus;\n    if (workflow.actor.flags[\"chris-premades\"]?.feature?.undeadThralls) {\n        let wizardLevels = workflow.actor.classes.wizard?.system?.levels;\n        if (wizardLevels) bonusHP += wizardLevels;\n        damageBonus = workflow.actor.system.attributes.prof;\n    }\n    let maxTargets = 5 + ((workflow.castData.castLevel - 5) * 2);\n    let selection = await chris.selectTarget('Select your targets. (Max: ' + maxTargets + ')', constants.okCancel, nearbyTokens, true, 'select', options);\n    if (!selection.buttons) return;\n    let totalSelected = selection.inputs.filter(i => i != 'Ignore').length;\n    if (totalSelected > maxTargets) {\n        ui.notifications.info('Too many targets selected!');\n        return;\n    }\n    let zombieActorUpdates = zombieActor.toObject();\n    delete zombieActorUpdates.token;\n    delete zombieActorUpdates.items;\n    delete zombieActorUpdates.effects;\n    delete zombieActorUpdates.type;\n    delete zombieActorUpdates.flags;\n    delete zombieActorUpdates.folder;\n    zombieActorUpdates.name = 'Zombie';\n    zombieActorUpdates.system.attributes.hp.value += bonusHP;\n    zombieActorUpdates.system.attributes.hp.max += bonusHP;\n    zombieActorUpdates.system.attributes.hp.formula += ' + ' + bonusHP;\n    delete zombieActorUpdates.sort;\n    delete zombieActorUpdates._id;\n    delete zombieActorUpdates._stats;\n    delete zombieActorUpdates.ownership;\n    setProperty(zombieActorUpdates, 'ownership.' + game.user.id, CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER);\n    let zombieTokenUpdates = (await zombieActor.getTokenDocument()).toObject();\n    zombieTokenUpdates.actorLink = false;\n    delete zombieTokenUpdates.actorId;\n    delete zombieTokenUpdates.x;\n    delete zombieTokenUpdates.y;\n    delete zombieTokenUpdates._id;\n    zombieTokenUpdates.disposition = workflow.token.document.disposition;\n    let zombieItems = zombieActor.getEmbeddedCollection('Item').reduce( (acc, element) => {acc[element.id] = element.toObject(); return acc;}, {});\n    let skeletonActorUpdates = skeletonActor.toObject();\n    delete skeletonActorUpdates.token;\n    delete skeletonActorUpdates.items;\n    delete skeletonActorUpdates.effects;\n    delete skeletonActorUpdates.type;\n    delete skeletonActorUpdates.flags;\n    delete skeletonActorUpdates.folder;\n    skeletonActorUpdates.name = 'Skeleton';\n    skeletonActorUpdates.system.attributes.hp.value += bonusHP;\n    skeletonActorUpdates.system.attributes.hp.max += bonusHP;\n    skeletonActorUpdates.system.attributes.hp.formula += ' + ' + bonusHP;\n    delete skeletonActorUpdates.sort;\n    delete skeletonActorUpdates._id;\n    delete skeletonActorUpdates._stats;\n    delete skeletonActorUpdates.ownership;\n    setProperty(skeletonActorUpdates, 'ownership.' + game.user.id, CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER);\n    let skeletonTokenUpdates = (await skeletonActor.getTokenDocument()).toObject();\n    skeletonTokenUpdates.actorLink = false;\n    delete skeletonTokenUpdates.actorId;\n    delete skeletonTokenUpdates.x;\n    delete skeletonTokenUpdates.y;\n    delete skeletonTokenUpdates._id;\n    skeletonTokenUpdates.disposition = workflow.token.document.disposition;\n    let skeletonItems = skeletonActor.getEmbeddedCollection('Item').reduce( (acc, element) => {acc[element.id] = element.toObject(); return acc;}, {});\n    let mutationName = 'Danse Macabre';\n    let mutateOptions =  {\n        'name': mutationName,\n        'permanent': false,\n        'comparisonKeys': {\n            'Item': 'id'\n        }\n    };\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Danse Macabre');\n        if (actor.type === 'character') await chrisPremades.helpers.addCondition(actor, 'Dead', true);\n    }\n    let spellMod = '+ ' + chris.getSpellMod(workflow.item);\n    if (damageBonus) spellMod += ' + ' + damageBonus;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'system.bonuses.All-Damage',\n                'mode': 2,\n                'value': spellMod,\n                'priority': 20\n            },\n            {\n                'key': 'system.bonuses.All-Attacks',\n                'mode': 2,\n                'value': spellMod,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        },\n        'transfer': true\n    };\n    let targetTokens = [];\n    for (let i = 0; nearbyTokens.length > i; i++) {\n        if (selection.inputs[i] === 'Ignore') continue;\n        let turnToken = nearbyTokens[i];\n        targetTokens.push(turnToken.document.uuid);\n        if (turnToken.actor.type === 'character') await chris.removeCondition(turnToken.actor, 'Dead');\n        let newItems;\n        let updates;\n        let itemUpdates;\n        if (selection.inputs[i] === 'Zombie') {\n            newItems = zombieItems;\n            itemUpdates = turnToken.actor.items.reduce( (acc, val) => {acc[val.id] = warpgate.CONST.DELETE; return acc;}, newItems);\n            updates = {\n                'token': zombieTokenUpdates,\n                'actor': zombieActorUpdates,\n                'embedded': {\n                    'Item': itemUpdates,\n                    'ActiveEffect': {\n                        [effectData.name]: effectData\n                    }\n                }\n            };\n        } else if (selection.inputs[i] === 'Skeleton') {\n            newItems = skeletonItems;\n            itemUpdates = turnToken.actor.items.reduce( (acc, val) => {acc[val.id] = warpgate.CONST.DELETE; return acc;}, newItems);\n            updates = {\n                'token': skeletonTokenUpdates,\n                'actor': skeletonActorUpdates,\n                'embedded': {\n                    'Item': itemUpdates,\n                    'ActiveEffect': {\n                        [effectData.name]: effectData\n                    }\n                }\n            };\n        }\n        await warpgate.mutate(turnToken.document, updates, {}, mutateOptions);\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Danse Macabre - Command Undead', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Danse Macabre - Command Undead');\n    async function effectMacro2 () {\n        let targetTokens = effect.flags['chris-premades']?.spell?.danseMacabre;\n        if (targetTokens) {\n            for (let i of targetTokens) {\n                let targetToken = await fromUuid(i);\n                if (!targetToken) continue;\n                let targetEffect = chrisPremades.helpers.findEffect(targetToken.actor, 'Danse Macabre');\n                if (targetEffect) chrisPremades.helpers.removeEffect(targetEffect);\n            }\n        }\n        await warpgate.revert(token.document, 'Danse Macabre - Command Undead');\n    }\n    let effectData2 = {\n        'name': workflow.item.name + ' - Caster',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'danseMacabre': targetTokens\n                }\n            }\n        }\n    };\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData2.name]: effectData2\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Danse Macabre - Command Undead',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function darkOnesBlessing({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size === 0 || !workflow.damageList) return;\n    let doHealing = false;\n    for (let i of workflow.damageList) {\n        if (i.oldHP != 0 && i.newHP === 0) {\n            doHealing = true;\n            break;\n        }\n    }\n    if (!doHealing) return;\n    let effect = chris.findEffect(workflow.actor, 'Dark One\\'s Blessing');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    await originItem.use();\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function darknessItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.templateId) return;\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.update({\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'darkness': true\n                }\n            },\n            'limits': {\n                'sight': {\n                    'basicSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'ghostlyGaze': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'lightPerception': {\n                        'enabled': true,\n                        'range': 0\n                    }\n                },\n                'light': {\n                    'enabled': true,\n                    'range': 0\n                }\n            },\n            'walledtemplates': {\n                'wallRestriction': 'move',\n                'wallsBlock': 'recurse'\n            }\n        }\n    });\n    let attachToken = await chris.dialog('Attach to self?', [['Yes', true], ['No', false]]) || false;\n    if (attachToken) {\n        let tokenObject = workflow.token;\n        await template.update(\n            {\n                'x': tokenObject.center.x,\n                'y': tokenObject.center.y\n            }\n        );\n        await tokenAttacher.attachElementsToToken([template], tokenObject, false);\n    };\n    let xray = game.settings.get('chris-premades', 'Show Limits Animations');\n    if(game.modules.get('walledtemplates')?.active) {\n        new Sequence().effect().file('jb2a.darkness.black').scaleToObject().aboveLighting().opacity(0.5).xray(xray).mask(template).persist(true).attachTo(template).play();\n    } else {\n        new Sequence().effect().file('jb2a.darkness.black').scaleToObject().aboveLighting().opacity(0.5).xray(xray).persist(true).attachTo(template).play();\n    }\n}\nasync function darknessHook(workflow) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first().document;\n    if (!targetToken) return;\n    let sourceToken = workflow.token.document;\n    let sourceTemplates = game.modules.get('templatemacro').api.findContainers(sourceToken);\n    let sourceInDarkness = false;\n    for (let i = 0; sourceTemplates.length > i; i++) {\n        let testTemplate = canvas.scene.collections.templates.get(sourceTemplates[i]);\n        if (!testTemplate) continue;\n        let darkness = testTemplate.flags['chris-premades']?.spell?.darkness;\n        if (darkness) {\n            sourceInDarkness = true;\n            break;\n        }\n    }\n    let targetInDarkness = false;\n    let targetTemplates = game.modules.get('templatemacro').api.findContainers(targetToken);\n    for (let i = 0; targetTemplates.length > i; i++) {\n        let testTemplate = canvas.scene.collections.templates.get(targetTemplates[i]);\n        if (!testTemplate) continue;\n        let darkness = testTemplate.flags['chris-premades']?.spell?.darkness;\n        if (darkness) {\n            targetInDarkness = true;\n            break;\n        }\n    }\n    if (!sourceInDarkness && !targetInDarkness) return;\n    let distance = chris.getDistance(sourceToken, targetToken);\n    let sourceCanSeeTarget = false;\n    let targetCanSeeSource = false;\n    let sourceActor = sourceToken.actor;\n    let targetActor = targetToken.actor;\n    let sourceDS = sourceActor.flags['chris-premades']?.feature?.devilsight;\n    let targetDS = targetActor.flags['chris-premades']?.feature?.devilsight;\n    let sourceSenses = sourceToken.actor.system.attributes.senses;\n    let targetSenses = targetToken.actor.system.attributes.senses;\n    if ((sourceDS && distance <= 120) || (sourceSenses.tremorsense >= distance) || (sourceSenses.blindsight >= distance) || (sourceSenses.truesight >= distance)) sourceCanSeeTarget = true;\n    if ((targetDS && distance <= 120) || (targetSenses.tremorsense >= distance) || (targetSenses.blindsight >= distance) || (targetSenses.truesight >= distance)) targetCanSeeSource = true;\n    if (sourceCanSeeTarget && targetCanSeeSource) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'darkness', 50);\n    if (!queueSetup) return;\n    if (sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.attackAdvAttribution.add('Darkness: Target Can\\'t See Source');\n    }\n    if (!sourceCanSeeTarget && targetCanSeeSource) {\n        workflow.disadvantage = true;\n        workflow.flankingAdvantage = false;\n        workflow.attackAdvAttribution.add('Darkness: Source Can\\'t See Target');\n    }\n    if (!sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.disadvantage = true;\n        workflow.attackAdvAttribution.add('Darkness: Target And Source Can\\'t See Eachother');\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let darkness = {\n    'item': darknessItem,\n    'hook': darknessHook\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'dawn',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'dawn',\n        'templateUuid': template.uuid,\n        'turn': 'end',\n        'ignoreMove': true\n    });\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Dawn - Move', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dawn - Move');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Dawn');\n    }\n    let effectData = {\n        'name': 'Dawn',\n        'icon': workflow.item.img,\n        'transfer': false,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': effectData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function trigger(token, trigger) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Dawn - End Turn', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dawn - End Turn');\n    featureData.system.save.dc = trigger.saveDC;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let dawn = {\n    'item': item,\n    'trigger': trigger\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function deathWard(token, {item, workflow, ditem}) {\n    let effect = chris.findEffect(token.actor, 'Death Ward');\n    if (!effect) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'deathWard', 390);\n    if (!queueSetup) return;\n    if (ditem.newHP != 0) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    ditem.newHP = 1;\n    ditem.hpDamage = Math.abs(ditem.newHP - ditem.oldHP);\n    await chris.removeEffect(effect);\n    queue.remove(workflow.uuid);\n}","export function stoneCamouflage(skillId, options) {\n    return skillId != 'ste' ? false : {'label': 'Hiding in rocky terrain?', 'type': 'advantage'};\n}","import {stoneCamouflage} from './stoneCamouflage.js'\nexport let deepGnome = {\n    'stoneCamouflage': stoneCamouflage\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function destructiveWave({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'destructiveWave', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('What damage type?', [['Radiant', 'radiant'], ['Necrotic', 'necrotic']]);\n    if (!selection) selection = 'radiant';\n    let animation = 'jb2a.thunderwave.center.blue';\n    if (chris.jb2aCheck() === 'patreon') {\n        if (selection === 'necrotic') {\n            animation = 'jb2a.thunderwave.center.dark_purple';\n        } else {\n            animation = 'jb2a.thunderwave.center.orange'\n        }\n    }\n    new Sequence().effect().atLocation(workflow.token).file(animation).scale(2.2).playbackRate(0.5).play();\n    let damageFormula = workflow.damageRoll._formula.replace('none', selection);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {queue} from '../../../../utility/queue.js';\nexport async function destructiveWrath({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'destructiveWrath', 351);\n    if (!queueSetup) return;\n    let oldDamageRoll = workflow.damageRoll;\n    if (oldDamageRoll.terms.length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let newDamageRoll = '';\n    for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n        let flavor = oldDamageRoll.terms[i].flavor;\n        let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n        if (!(flavor.toLowerCase() === 'lightning' || flavor.toLowerCase() === 'thunder') || isDeterministic === true) {\n            newDamageRoll += oldDamageRoll.terms[i].formula;\n        } else {\n            newDamageRoll += '(' + oldDamageRoll.terms[i].number + '*' + oldDamageRoll.terms[i].faces + ')[' + flavor + ']';\n        }\n    }\n    let damageRoll = await new Roll(newDamageRoll).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nasync function detectThoughtsProbeItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Detect Thoughts');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n    await chris.removeCondition(workflow.actor, 'Concentrating');\n}\nasync function detectThoughtsItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Detect Thoughts - Probe Deeper', false);\n    if (!featureData) return;\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Detect Thoughts - Probe Deeper');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Detect Thoughts - Probe Deeper');\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [workflow.item.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': featureData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nexport let detectThoughts = {\n    'item': detectThoughtsItem,\n    'probe': detectThoughtsProbeItem\n}","import {chris} from '../../helperFunctions.js';\n\nexport async function disintegrate({speaker, actor, token, character, item, args, scope, workflow}) {\n    //Animations by: eskiemoh\n    if (!workflow.targets.size) return;\n    let target = workflow.targets.first();\n    let targetDeath = workflow.damageList[0].newHP === 0;\n    if (targetDeath && target.actor.type === 'character') await chris.addCondition(target.actor, 'Dead', true);\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (animation === 'none' || chris.jb2aCheck() === 'free' || !chris.aseCheck()) return;\n    let centerX =  target.x + canvas.grid.size / 2;\n    let centerY =  target.y + canvas.grid.size / 2;\n    new Sequence()\n        .effect()\n        .atLocation(workflow.token)\n        .file('jb2a.magic_signs.circle.02.transmutation.loop.dark_green')\n        .scaleToObject(1.25)\n        .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n        .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n        .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n        .belowTokens()\n        .fadeOut(2000)\n        .zIndex(0)\n\n        .effect()\n        .atLocation(workflow.token)\n        .file('jb2a.magic_signs.circle.02.transmutation.loop.dark_green')\n        .scaleToObject(1.25)\n        .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n        .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n        .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n        .belowTokens(true)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10 })\n        .zIndex(1)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 500})\n        .fadeOut(300, {'ease': 'linear'})\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.particles.outward.white.01.02')\n        .scaleIn(0, 1000, {'ease': 'easeOutQuint'})\n        .delay(500)\n        .fadeOut(1000)\n        .atLocation(workflow.token)\n        .duration(1000)\n        .size(1.75, {'gridUnits': true})\n        .animateProperty('spriteContainer', 'position.y', {'from':0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.particles.outward.white.01.02')\n        .scaleIn(0, 1000, {'ease': 'easeOutQuint'})\n        .delay(500)\n        .fadeOut(1000)\n        .atLocation(workflow.token)\n        .duration(1000)\n        .size(1.75, {'gridUnits': true})\n        .animateProperty('spriteContainer', 'position.y', {'from': 0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n        .zIndex(1)\n        .mirrorX()\n\n        .wait(1000)\n\n        .effect()\n        .file('jb2a.extras.tmfx.border.circle.inpulse.01.fast')\n        .atLocation(workflow.token)\n        .tint('#d9df53')\n        .scaleToObject(1.5)\n\n        .wait(500)\n\n        .effect()\n        .file('jb2a.disintegrate.green')\n        .atLocation(workflow.token)\n        .stretchTo(target)\n        .missed(workflow.failedSaves.size === 0)\n        .zIndex(1)\n\n        .wait(500)\n\n        //Death Effect\n        .animation()\n        .on(target)\n        .opacity(0)\n        .playIf(targetDeath)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.smoke.97')\n        .atLocation(target, {'offset': {'y':-0.25}, 'gridUnits': true})\n        .fadeIn(1000)\n        .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n        .delay(1000)\n        .duration(10000)\n        .fadeOut(500)\n        .scaleToObject(0.5)\n        .filter('ColorMatrix', {'brightness': 0})\n        .zIndex(0.1)\n        .belowTokens()\n        .playIf(targetDeath)\n\n        .effect()\n        .file('jb2a.spirit_guardians.green.particles')\n        .atLocation(target)\n        .duration(7500)\n        .fadeOut(3000)\n        .scaleToObject(0.35)\n        .filter('ColorMatrix', {'hue': -25})\n        .belowTokens()\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'fillColor': '#FF0000',\n            'radius': 0.15,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n            \n        })\n        .duration(1500)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.2,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4},            \n        })\n        .duration(1800)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n                \n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.25,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n        })\n        .duration(2000)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.3,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n        })\n        .duration(2200)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.35,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n        })   \n        .duration(2400)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.4,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n        })\n        .duration(2600)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.45,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.1, 'y': -canvas.grid.size * 0.4}, \n        })    \n        .duration(2800)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'fillColor': '#FF0000',\n            'radius': 0.15,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n            \n        })\n        .duration(500)\n        .fadeOut(1000)\n        .playIf(targetDeath)       \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.2,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3},           \n        })\n        .duration(700)\n        .fadeOut(1000)\n        .playIf(targetDeath)               \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.25,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        })\n        .duration(900)\n        .fadeOut(1000)\n        .playIf(targetDeath)   \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.3,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        })\n        .duration(1100)\n        .fadeOut(1000)\n        .playIf(targetDeath)    \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.35,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        })   \n        .duration(1300)\n        .fadeOut(1000)\n        .playIf(targetDeath)    \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.4,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        })\n        .duration(1500)\n        .fadeOut(1000)\n        .playIf(targetDeath)  \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.45,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        })   \n        .duration(1700)\n        .fadeOut(1000)\n        .playIf(targetDeath)  \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.5,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y': canvas.grid.size * 0.3}, \n        }) \n        .duration(1900)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.55,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': -canvas.grid.size * 0.4, 'y' :canvas.grid.size * 0.3}, \n        })\n        .duration(2100)\n        .fadeOut(1000)\n        .playIf(targetDeath) \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'fillColor': '#FF0000',\n            'radius': 0.15,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size*0.5, 'y': canvas.grid.size*0.4}, \n        })\n        .duration(1500)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX) \n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.2,\n            'radius': 0.25,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.5, 'y': canvas.grid.size * 0.4},  \n        })\n        .duration(1900)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.3,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.5, 'y': canvas.grid.size * 0.4}, \n        })\n        .duration(2100)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.35,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.5, 'y': canvas.grid.size * 0.4}, \n        })   \n        .duration(2300)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n        \n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.4,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.5, 'y': canvas.grid.size * 0.4}, \n        })\n        .duration(2500)\n        .fadeOut(1000)    \n\n        .effect()\n        .atLocation({'x': centerX, 'y': centerY})\n        .from(target)\n        .scaleToObject(target.document.texture.scaleX)\n        .shape('circle', {\n            'lineSize': 25,\n            'lineColor': '#FF0000',\n            'radius': 0.45,\n            'gridUnits': true,\n            'name': 'test',\n            'isMask': true,\n            'offset': {'x': canvas.grid.size * 0.5, 'y': canvas.grid.size * 0.4}, \n        })    \n        .duration(2700)\n        .fadeOut(1000)\n        .playIf(targetDeath)\n\n        .wait(1500)\n\n        .thenDo(async function() {\n            if( targetDeath == true){    \n                let updates = {'token': {'hidden': true}};\n                let options = {\n                    'permanent': true,\n                    'name': workflow.item.name,\n                    'description': workflow.item.name\n                };\n                await warpgate.mutate(target.document, updates, {}, options);\n            }\n        })\n\n        .play()\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.type != 'weapon') return;\n    let effect = chris.findEffect(workflow.actor, 'Rage');\n    if (!effect) return;\n    let divineEffect = chris.findEffect(workflow.actor, 'Divine Fury');\n    if (!divineEffect) return;\n    let originItem = await fromUuid(divineEffect.origin);\n    if (!originItem) return;\n    let classLevels = workflow.actor.classes.barbarian?.system?.levels;\n    if (!classLevels) return;\n    let barbDamage = Math.floor(classLevels / 2);\n    let damageType = workflow.actor.flags['chris-premades']?.feature?.divineFury?.damageType;\n    if (!damageType) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'divineFury', 250);\n    if (!queueSetup) return;\n    let doExtraDamage = chris.perTurnCheck(originItem, 'feature', 'divineFury', true, workflow.token.id);\n    if (!doExtraDamage) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.setTurnCheck(originItem, 'feature', 'divineFury');\n    let bonusDamage = '1d6[' + damageType + '] + ' + barbDamage;\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamage;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await chris.setTurnCheck(origin, 'feature', 'divineFury', true);\n}\nexport let divineFury = {\n    'attack': attack,\n    'end': end\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function divineSmite({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.name === 'Unarmed Strike' && !game.settings.get('chris-premades', 'Unarmed Strike Smite')) return;\n    let validTypes = ['martialM', 'simpleM'];\n    if (game.settings.get('chris-premades', 'Ranged Smite')) {\n        validTypes.push('martialR');\n        validTypes.push('simpleR');\n    }\n    if (!validTypes.includes(workflow.item.system.weaponType)) return;\n    let feature = chris.getItem(workflow.actor, 'Divine Smite');\n    if (!feature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'divineSmite', 250);\n    if (!queueSetup) return;\n    let spells = workflow.actor.system.spells;\n    let pactSlots = spells.pact.value;\n    let pactLevel = spells.pact.level;\n    let spell1 = spells.spell1.value;\n    let spell2 = spells.spell2.value;\n    let spell3 = spells.spell3.value;\n    let spell4 = spells.spell4.value;\n    let spell5 = spells.spell5.value;\n    let spell6 = spells.spell6.value;\n    let spell7 = spells.spell7.value;\n    let spell8 = spells.spell8.value;\n    let spell9 = spells.spell9.value;\n    if (pactSlots + spell1 + spell2 + spell3 + spell4 + spell5 + spell6 + spell7 + spell8 + spell9 === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let menuOptions = [];\n    if (pactSlots > 0) menuOptions.push(['Pact (' + pactLevel + ')', 'p']);\n    if (spell1 > 0) menuOptions.push(['1st Level', 1]);\n    if (spell2 > 0) menuOptions.push(['2nd Level', 2]);\n    if (spell3 > 0) menuOptions.push(['3rd Level', 3]);\n    if (spell4 > 0) menuOptions.push(['4th Level', 4]);\n    if (spell5 > 0) menuOptions.push(['5th Level', 5]);\n    if (spell6 > 0) menuOptions.push(['6th Level', 6]);\n    if (spell7 > 0) menuOptions.push(['7th Level', 7]);\n    if (spell8 > 0) menuOptions.push(['8th Level', 8]);\n    if (spell9 > 0) menuOptions.push(['9th Level', 9]);\n    menuOptions.push(['No', false]);\n    let selectedOption = await chris.dialog(feature.name, menuOptions, 'Use ' + feature.name + '?');\n    if (!selectedOption) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let update = {};\n    let damageDiceNum;\n    switch (selectedOption) {\n        case 'p':\n            update = {'system.spells.pact.value': pactSlots - 1};\n            damageDiceNum = pactLevel + 1;\n            break;\n        case 1:\n            update = {'system.spells.spell1.value': spell1 - 1};\n            damageDiceNum = 2;\n            break;\n        case 2:\n            update = {'system.spells.spell2.value': spell2 - 1};\n            damageDiceNum = 3;\n            break;\n        case 3:\n            update = {'system.spells.spell3.value': spell3 - 1};\n            damageDiceNum = 4;\n            break;\n        case 4:\n            update = {'system.spells.spell4.value': spell4 - 1};\n            damageDiceNum = 5;\n            break;\n        case 5:\n            update = {'system.spells.spell5.value': spell5 - 1};\n            damageDiceNum = 5;\n            break;\n        case 6:\n            update = {'system.spells.spell6.value': spell6 - 1};\n            damageDiceNum = 5;\n            break;\n        case 7:\n            update = {'system.spells.spell7.value': spell7 - 1};\n            damageDiceNum = 5;\n            break;\n        case 8:\n            update = {'system.spells.spell8.value': spell8 - 1};\n            damageDiceNum = 5;\n            break;\n        case 9:\n            update = {'system.spells.spell9.value': spell9 - 1};\n            damageDiceNum = 5;\n            break;\n    }\n    await workflow.actor.update(update);\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let type = chris.raceOrType(targetActor);\n    if (type === 'undead' || type === 'fiend') damageDiceNum += 1;\n    let damageDice = damageDiceNum + 'd8[radiant]';\n    if (workflow.isCritical) damageDice = chris.getCriticalFormula(damageDice);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + damageDice;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    await feature.displayCard();\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.isFumble || workflow.item.type != 'weapon') return;\n    let feature = chris.getItem(workflow.actor, 'Divine Strike')\n    if (!feature) return;\n    let doExtraDamage = chris.perTurnCheck(feature, 'feature', 'divineStrike', true, workflow.token.id);\n    if (!doExtraDamage) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'divineStrike', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Divine Strike: Apply extra damage?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) await feature.setFlag('chris-premades', 'feature.divineStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let diceNumber = 1;\n    let classLevels = workflow.actor.classes.cleric?.system?.levels;\n    let subClassIdentifier = workflow.actor.classes.cleric?.subclass?.identifier;\n    if (!classLevels || !subClassIdentifier) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageType = chris.getConfiguration(feature, 'damagetype');\n    if (!damageType || damageType === 'default') {\n        switch (subClassIdentifier) {\n            case 'death-domain':\n                damageType = 'necrotic';\n                break;\n            case 'forge-domain':\n                damageType = 'fire';\n                break;\n            case 'light-domain':\n                damageType = 'radiant';\n                break;\n            case 'nature-domain':\n                damageType = await chris.dialog('What damage type?', [['Acid', 'acid'], ['Cold', 'cold'], ['Fire', 'fire'], ['Lightning', 'lightning'], ['Thunder', 'thunder']]);\n                if (!damageType) {\n                    queue.remove(workflow.item.uuid);\n                    return;\n                }\n                break;\n            case 'order-domain':\n                damageType = 'psychic';\n                break;\n            case 'tempest-domain':\n                damageType = 'thunder';\n                break;\n            case 'trickery-domain':\n                damageType = 'poison';\n                break;\n            case 'war-domain':\n                damageType = workflow.defaultDamageType;\n                break;\n            default:\n                damageType = 'radiant';\n                break;\n        }\n    }\n    if (classLevels >= 14) diceNumber += 1;\n    let bonusDamageFormula = diceNumber + 'd8[' + damageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function combatEnd(origin) {\n    await origin.setFlag('chris-premades', 'feature.divineStrike.turn', '');\n}\nexport let divineStrike = {\n    'item': item,\n    'combatEnd': combatEnd\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function breathWeapon({speaker, actor, token, character, item, args, scope, workflow}) {\n    let dragonType = workflow.actor.flags['chris-premades']?.draconicSpirit?.type;\n    if (!dragonType) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'breathWeapon', 50);\n    if (!queueSetup) return;\n    let options;\n    switch (dragonType) {\n        case 'Chromatic':\n        case 'Metallic':\n            options = [['Acid', 'acid'], ['Cold', 'cold'], ['Fire', 'fire'], ['Lightning', 'lightning'], ['Poison', 'poison']];\n            break;\n        case 'Gem':\n            options = [['Force', 'force'], ['Necrotic', 'necrotic'], ['Psychic', 'psychic'], ['Radiant', 'radiant'], ['Thunder', 'thunder']];\n            break;\n    }\n    let selection = await chris.dialog('What damage type?', options);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula + '[' + selection + ']';\n    let diceRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(diceRoll);\n    queue.remove(workflow.item.uuid);\n}","import {breathWeapon} from './breathWeapon.js';\nexport let draconicSpirit = {\n    'breathWeapon': breathWeapon\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function draconicStrike({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size) return;\n    let unarmedStrike = chris.getItem(workflow.actor, 'Unarmed Strike (Monk)');\n    if (!unarmedStrike) return;\n    if (workflow.item.uuid != unarmedStrike.uuid) return;\n    let feature = chris.getItem(workflow.actor, 'Draconic Strike');\n    if (!feature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'draconicStrike', 50);\n    if (!queueSetup) return;\n    let options = [\n        ['🧪 Acid', 'acid'],\n        ['❄️ Cold', 'cold'],\n        ['🔥 Fire', 'fire'],\n        ['⚡ Lightning', 'lightning'],\n        ['☠️ Poison', 'poison'],\n        ['Unchanged', false]\n    ];\n    let selection = await chris.dialog(feature.name, options, 'Change ' + workflow.item.name + '\\'s damage type?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageRoll = workflow.damageRoll\n    damageRoll.terms[0].options.flavor = selection;\n    damageRoll.terms[2].options.flavor = selection;\n    damageRoll._formula = damageRoll._formula.replace(workflow.defaultDamageType, selection);\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nexport async function dragonVessel({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = workflow.actor.flags['chris-premades']?.item?.dragonVessel?.level;\n    if (level === undefined) return;\n    let options = [\n        ['Ale', false],\n        ['Olive Oil', false],\n        ['Potion of Healing (Normal)', 'Potion of Healing (Normal)'],\n        ['Potion of Climbing', 'Potion of Climbing']\n    ];\n    if (level > 0) {\n        options.push(['Mead', false]);\n        options.push(['Potion of Fire Breath', 'Potion of Fire Breath']);\n        options.push(['Potion of Healing (Greater)', 'Potion of Healing (Greater)']);\n    }\n    if (level > 1) {\n        options.push(['Wine', false]);\n        options.push(['Potion of Flying', 'Potion of Flying']);\n        options.push(['Potion of Healing (Superior)', 'Potion of Healing (Superior)']);\n    }\n    if (level > 2) {\n        options.push(['Whiskey', false]);\n        options.push(['Potion of Healing (Supreme)', 'Potion of Healing (Supreme)']);\n        options.push(['Potion of Dragon\\'s Majesty', 'Potion of Dragon\\'s Majesty']);\n    }\n    let selection = await chris.dialog('What item?', options);\n    if (!selection) return;\n    let itemData;\n    if (selection === 'Potion of Fire Breath') {\n        itemData = await chris.getItemFromCompendium('chris-premades.CPR Items', 'Potion of Fire Breath', false);\n        if (!itemData) return;\n        itemData.system.description.value = await chris.getCompendiumItemDescription('Potion of Fire Breath');\n    }\n    if (!itemData) itemData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Item Compendium'), selection, false);\n    if (!itemData) return;\n    itemData.name = workflow.item.name + ': ' + itemData.name;\n    itemData.flags['tidy5e-sheet'] = {\n        'favorite': true\n    }\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Dragon Vessel');\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [itemData.name]: itemData\n            },\n            'ActiveEffect': {\n                [itemData.name]: effectData\n            }\n        }\n    };\n    let optionsW = {\n        'permanent': false,\n        'name': 'Dragon Vessel',\n        'description': itemData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, optionsW);\n}","import {chris} from '../../helperFunctions.js';\nexport async function dragonsBreath({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let damageType = await chris.dialog(workflow.item.name, [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['⚡ Lightning', 'lightning'], ['☠️ Poison', 'poison']], 'What damage type?');\n    if (!damageType) damageType = 'fire';\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Dragon Breath', false);\n    if (!featureData) return;\n    let diceNumber = workflow.castData.castLevel + 1;\n    featureData.system.damage.parts = [\n        [\n            diceNumber + 'd6[' + damageType + ']',\n            damageType\n        ]\n    ];\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dragon Breath');\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    };\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Dragon Breath');\n    }\n    let effectData = {\n        'name': featureData.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [featureData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Dragon Breath',\n        'description': 'Dragon Breath'\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let damageType = workflow.item.system.damage.parts[1][1];\n    if (workflow.d20AttackRoll === 20) {\n        let animation = workflow.actor.flags['chris-premades']?.item?.dragonsWrathWeapon?.animation;\n        if (!animation) return;\n        let nearbyTargets = await chris.findNearby(targetToken, 5, 'ally');\n        new Sequence().wait(1250).effect().file(animation).atLocation(targetToken).belowTokens(true).play();\n        if (nearbyTargets.length != 0) await chris.applyDamage(nearbyTargets, 5, damageType);\n    }\n}\nasync function equip(actor, origin, level) {\n    let charges = origin.flags['chris-premades']?.item?.dragonsWrath?.charges;\n    if (charges === undefined) charges = 1;\n    let itemData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Dragon\\'s Wrath Breath', false);\n    if (!itemData) return;\n    let damageType = origin.system.damage.parts[1][1];\n    let damageDice = '8d6';\n    if (level === 1) {\n        damageDice = '12d6';\n        itemData.system.target.value = 60;\n        itemData.system.save.dc = 18;\n    }\n    itemData.system.damage.parts = [\n        [\n            damageDice + '[' + damageType + ']',\n            damageType\n        ]\n    ];\n    itemData.system.uses.value = charges;\n    itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dragon\\'s Wrath Breath');\n    await chris.addTempItem(actor, itemData, origin.id, 'Dragon\\'s Wrath Weapon', false, 0);\n}\nasync function unequip(actor, origin) {\n    let charges = 1;\n    let tempItem = chris.getTempItem(actor, origin.id, 0);\n    if (tempItem) charges = tempItem.system.uses.value;\n    await origin.setFlag('chris-premades', 'item.dragonsWrath.charges', charges);\n    await chris.removeTempItems(actor, origin.id);\n}\nasync function deleted(actor, effect) {\n    if (effect.disabled) return;\n    let originArray = effect.origin.split('Item.');\n    if (originArray.length != 2) return;\n    let originID = originArray[1];\n    await chris.removeTempItems(actor, originID);\n}\nexport let dragonsWrath = {\n    'item': item,\n    'equip': equip,\n    'unequip': unequip,\n    'deleted': deleted\n}","export async function dreadAmbusher(origin) {\n    if (game.combat.round != 1) return;\n    await origin.use();\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {effectAuras} from '../../../../utility/effectAuras.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Dread Lord Shadow Attack', false);\n    if (!featureData) return;\n    delete featureData._id;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dread Lord Shadow Attack');\n    let effectData = {\n        'name': 'Dread Lord',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.name',\n                'mode': 5,\n                'value': 'Dread Lord',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.range',\n                'mode': 5,\n                'value': 30,\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.disposition',\n                'mode': 5,\n                'value': 'ally',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.effectName',\n                'mode': 5,\n                'value': 'Dread Lord\\'s Shadow',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.macroName',\n                'mode': 5,\n                'value': 'dreadLord',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.aura.dreadLord.self',\n                'mode': 5,\n                'value': false,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.grants.disadvantage.attack.all',\n                'value': 1,\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'await chrisPremades.macros.dreadLord.end(token, origin);'\n                },\n                'onEachTurn': {\n                    'script': 'await chrisPremades.macros.dreadLord.turnStart(token, origin);'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Dread Lord',\n        'description': 'Dread Lord'\n    };\n    let flagAuras = {\n        'dreadLord': {\n            'name': 'dreadLord',\n            'range': 30,\n            'disposition': 'ally',\n            'effectName': 'Dread Lord\\'s Shadow',\n            'macroName': 'dreadLord',\n            'self': false\n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation');\n    if (chris.jb2aCheck() != 'patreon') animation = false;\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (avatarImg) setProperty(updates, 'actor.img', avatarImg);\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    if (!animation) {\n        await warpgate.mutate(workflow.token.document, updates, {}, options);\n        effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n    } else {\n        //Animation by Eskimoh\n        new Sequence()\n            .effect()\n            .file('jb2a.energy_strands.in.red.01')\n            .attachTo(workflow.token)\n            .scaleToObject(9, {'considerTokenScale': true})\n            .filter('ColorMatrix', {'brightness': 0})\n            .randomRotation()\n            .belowTokens()\n            .zIndex(0.1)\n\n            .effect()\n            .file('jb2a.token_border.circle.static.purple.004')\n            .name('Dread Lord')\n            .attachTo(workflow.token)\n            .opacity(0.6)\n            .scaleToObject(1.7, {'considerTokenScale': true})\n            .fadeIn(500)\n            .fadeOut(500)\n            .duration(2500)\n            .filter('ColorMatrix', {'saturate': 0.5, 'hue': -5})\n            .tint('#e51e19')\n            .belowTokens()\n            .zIndex(2)\n\n            .effect()\n            .file(canvas.scene.background.src)\n            .filter('ColorMatrix', {'brightness': 0.3})\n            .atLocation({'x': canvas.dimensions.width / 2, 'y': canvas.dimensions.height / 2})\n            .size({'width': canvas.scene.width / canvas.grid.size, 'height': canvas.scene.height / canvas.grid.size}, {'gridUnits': true})\n            .spriteOffset({'x': 0}, {'gridUnits': true})\n            .duration(7000)\n            .fadeIn(500)\n            .fadeOut(1000)\n            .belowTokens()\n\n            .effect()\n            .file('jb2a.particles.outward.red.01.03')\n            .attachTo(workflow.token, {'offset': {'y': 0.1}, 'gridUnits': true, 'followRotation': false})\n            .size(0.5 * workflow.token.document.width, {'gridUnits': true})\n            .duration(1000)\n            .fadeOut(800)\n            .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n            .animateProperty('sprite', 'width', {'from': 0, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack'})\n            .animateProperty('sprite', 'height', {'from': 0, 'to': 1.0, 'duration': 1000, 'gridUnits': true, 'ease': 'easeOutBack'})\n            .animateProperty('sprite', 'position.y', {'from': 0, 'to': -0.6, 'duration': 1000, 'gridUnits': true})\n            .filter('ColorMatrix', {'saturate': 1, 'hue': 20})\n            .zIndex(0.3)\n\n            .effect()\n            .file('jb2a.flames.04.complete.purple')\n            .attachTo(workflow.token, {'offset': {'y': -0.35}, 'gridUnits': true, 'followRotation': true})\n            .scaleToObject(1.5 * workflow.token.document.texture.scaleX)\n            .tint('#e51e19')\n            .fadeOut(500)\n            .scaleOut(0, 500, {'ease': 'easeOutCubic'})\n            .duration(2500)\n            .zIndex(1)\n            .waitUntilFinished(-500)\n\n            .effect()\n            .file('jb2a.impact.ground_crack.dark_red.01')\n            .atLocation(workflow.token)\n            .belowTokens()\n            .filter('ColorMatrix', {'hue': -15, 'saturate': 1})\n            .size(7, {'gridUnits': true})\n            .tint('#e51e19')\n            .zIndex(0.1)\n\n            .thenDo(async function(){\n                await warpgate.mutate(workflow.token.document, updates, {}, options);\n                effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n            })\n\n            .canvasPan()\n            .shake({'duration': 3000, 'strength': 2, 'rotation': false, 'fadeOut': 3000})\n\n            .effect()\n            .file('jb2a.token_border.circle.static.purple.004')\n            .name('Dread Lord')\n            .attachTo(workflow.token)\n            .opacity(0.6)\n            .scaleToObject(1.7, {'considerTokenScale': true})\n            .fadeIn(250)\n            .fadeOut(500)\n            .duration(2500)\n            .filter('ColorMatrix', {'saturate': 0.5, 'hue': -5})\n            .tint('#e51e19')\n            .persist()\n            .zIndex(2)\n\n            .effect()\n            .name('Dread Lord')\n            .file('jb2a.energy_strands.complete.dark_red.01')\n            .attachTo(workflow.token)\n            .scaleToObject(2, {'considerTokenScale': true})\n            .opacity(1)\n            .filter('ColorMatrix', {'brightness': 0})\n            .scaleIn(0, 1000, {'ease': 'easeOutBack'})\n            .belowTokens()\n            .persist()\n            .zIndex(3)\n\n            .effect()\n            .name('Dread Lord')\n            .file('jb2a.energy_strands.overlay.dark_red.01')\n            .attachTo(workflow.token)\n            .scaleToObject(2, {'considerTokenScale': true})\n            .filter('ColorMatrix', {'brightness': 0})\n            .scaleIn(0, 1000, {'ease': 'easeOutBack'})\n            .belowTokens()\n            .persist()\n            .zIndex(3)\n\n            .effect()\n            .name('Dread Lord')\n            .file('jb2a.template_circle.aura.01.complete.small.bluepurple')\n            .attachTo(workflow.token, {'offset': {'y': 0}, 'gridUnits': true, 'followRotation': true})\n            .size(7.5, {'gridUnits': true})\n            .opacity(0.7)\n            .scaleIn(0, 250, {'ease': 'easeOutBack'})\n            .scaleOut(0, 6500, {'ease': 'easeInSine'})\n            .filter('ColorMatrix', {'saturate': 0.5, 'hue': -2})\n            .tint('#e51e19')\n            .randomRotation()\n            .belowTokens()\n            .persist()\n            .zIndex(0.3)\n\n            .effect()\n            .name('Dread Lord')\n            .file('jb2a.extras.tmfx.outflow.circle.02')\n            .attachTo(workflow.token, {'offset': {'y': 0}, 'gridUnits': true, 'followRotation': true})\n            .size(13, {'gridUnits': true})\n            .opacity(0.65)\n            .scaleIn(0, 250, {'ease': 'easeOutBack'})\n            .scaleOut(0, 6500, {'ease': 'easeInSine'})\n            .filter('ColorMatrix', {'brightness': 0})\n            .belowTokens()\n            .persist()\n            .zIndex(0.2)\n\n            .effect()\n            .name('Dread Lord')\n            .file('jb2a.extras.tmfx.outflow.circle.01')\n            .attachTo(workflow.token, {'offset': {'y': 0}, 'gridUnits': true, 'followRotation': true})\n            .size(13, {'gridUnits': true})\n            .opacity(0.7)\n            .scaleIn(0, 250, {'ease': 'easeOutBack'})\n            .scaleOut(0, 6500, {'ease': 'easeInSine'})\n            .filter('ColorMatrix', {'brightness': 0})\n            .rotate(90)\n            .loopProperty('sprite', 'rotation', {'from': 0, 'to': 360, 'duration': 20000})\n            .belowTokens()\n            .persist()\n            .zIndex(0.3)\n\n            .effect()\n            .file('jb2a.impact.003.dark_red')\n            .attachTo(workflow.token, {'offset': {'y': 0.1}, 'gridUnits': true, 'followRotation': true})\n            .scaleToObject(1, {'considerTokenScale': true})\n            .zIndex(2)\n\n            .play()\n    }\n}\nasync function aura(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Dread Lord');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Dread Lord\\'s Shadow',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.grants.disadvantage.attack.all',\n                'value': 1,\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let feature = chris.getItem(workflow.actor, 'Dread Lord');\n    if (!feature) return;\n    let animation = chris.getConfiguration(feature, 'animation');\n    if (chris.jb2aCheck() != 'patreon' || !animation) return;\n    let target = workflow.targets.first();\n    //Animation by Eskimoh\n    new Sequence()\n        .effect()\n        .file('jb2a.melee_generic.piercing.two_handed')\n        .atLocation(target)\n        .spriteOffset({'x': -5.6, 'y': 0.1}, {'gridUnits': true})\n        .size(8, {'gridUnits': true})\n        .rotateTowards(workflow.token)\n        .playbackRate(0.8)\n        .randomizeMirrorY()\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 0})\n        .rotate(180)\n        .zIndex(1)\n        \n        .effect()\n        .from(target)\n        .attachTo(target)\n        .fadeIn(500)\n        .fadeOut(500)\n        .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 55, 'pingPong': true, 'gridUnits': true})\n        .filter(\"ColorMatrix\", {'saturate': -1, 'brightness': 0.5})\n        .scaleToObject(1, {'considerTokenScale': true})\n        .opacity(0.65)\n        .zIndex(0.1)\n        \n        .play();\n}\nasync function end(token, origin) {\n    await warpgate.revert(token.document, 'Dread Lord');\n    effectAuras.remove('dreadLord', token.document.uuid);\n    if (chris.getConfiguration(origin, 'animation')) Sequencer.EffectManager.endEffects({'name': 'Dread Lord', 'object': token});\n}\nasync function turnStart(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.document.disposition === token.document.disposition) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let effect = targetToken.effects.find(i => i.name === 'Frightened' && i.origin === token.document.uuid);\n    if (!effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Dread Lord - Turn Start', false);\n    if (!featureData) return;\n    delete featureData._id;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dread Lord - Turn Start');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    let queueSetup = await queue.setup(origin.uuid, 'dreadLord', 50);\n    if (!queueSetup) return;\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(origin.uuid);\n}\nexport let dreadLord = {\n    'item': item,\n    'attack': attack,\n    'end': end,\n    'turnStart': turnStart,\n    'aura': aura\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': 'Frightened',\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'dreadfulAspect': {\n                        'sourceTokenUuid': workflow.token.document.uuid\n                    }\n                }\n            },\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': 'await chrisPremades.macros.dreadfulAspect.turnEnd(effect, origin, token);'\n                }\n            }\n        }\n    };\n    for (let i of Array.from(workflow.failedSaves)) {\n        let effect = chris.findEffect(i.actor, workflow.item.name);\n        if (effect) await chris.removeEffect(effect);\n        await chris.createEffect(i.actor, effectData);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation');\n    if (chris.jb2aCheck() != 'patreon' || !animation) return;\n    //Animation by Eskimoh\n    await new Sequence()\n        .effect()\n        .file('jb2a.extras.tmfx.border.circle.inpulse.01.fast')\n        .attachTo(workflow.token)\n        .scaleToObject(2, {'considerTokenScale': true})\n        .filter('ColorMatrix', {'brightness': 0})\n\n        .effect()\n        .file('jb2a.token_border.circle.static.purple.004')\n        .attachTo(workflow.token)\n        .name('Dreadful Aspect')\n        .opacity(0.6)\n        .scaleToObject(1.7,{'considerTokenScale': true})\n        .fadeIn(500)\n        .fadeOut(500)\n        .duration(2500)\n        .filter('ColorMatrix', {'saturate': 0.5, 'hue': -5})\n        .tint('#e51e19')\n        .belowTokens()\n        .zIndex(2)\n\n        .effect()\n        .file(canvas.scene.background.src)\n        .filter('ColorMatrix', {'brightness': 0.3})\n        .atLocation({'x': canvas.dimensions.width / 2, 'y': canvas.dimensions.height / 2})\n        .size({'width': canvas.scene.width / canvas.grid.size, 'height': canvas.scene.height / canvas.grid.size}, {'gridUnits': true})\n        .spriteOffset({'x': -0}, {'gridUnits': true})\n        .duration(3000)\n        .fadeIn(500)\n        .fadeOut(1000)\n        .belowTokens()\n\n        .effect()\n        .file('jb2a.particles.outward.red.01.03')\n        .attachTo(workflow.token, {'offset': {'y': 0.1}, 'gridUnits': true, 'followRotation': false})\n        .size(0.5  * workflow.token.document.width, {'gridUnits': true})\n        .duration(1000)\n        .fadeOut(800)\n        .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'width', {'from': 0, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': 1.0, 'duration': 1000, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'position.y', {'from': 0, 'to': -0.6, 'duration': 1000, 'gridUnits': true})\n        .filter('ColorMatrix', {'saturate': 1, 'hue': 20})\n        .zIndex(0.3)\n\n        .effect()\n        .file('jb2a.flames.04.complete.purple')\n        .attachTo(workflow.token, {'offset': {'y': -0.35}, 'gridUnits': true, 'followRotation': true})\n        .scaleToObject(1.5 * workflow.token.document.texture.scaleX)\n        .tint('#e51e19')\n        .fadeOut(500)\n        .scaleOut(0, 500, {'ease': 'easeOutCubic'})\n        .duration(2500)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.cast_generic.ice.01.blue')\n        .attachTo(workflow.token, {'offset': {'y': 0.15}, 'gridUnits': true, 'followRotation': true})\n        .opacity(1.5)\n        .playbackRate(1.5)\n        .scaleToObject(1.5, {'considerTokenScale': true})\n        .filter('ColorMatrix', {'brightness': 0})\n        .waitUntilFinished(-200)\n\n        .effect()\n        .file('jb2a.template_circle.aura.01.complete.small.bluepurple')\n        .attachTo(workflow.token, {'offset': {'y':0}, 'gridUnits': true, 'followRotation': true})\n        .scaleToObject(4, {'considerTokenScale': true})\n        .scaleIn(0, 250, {'ease': 'easeOutBack'})\n        .scaleOut(0, 6500, {'ease': 'easeInSine'})\n        .filter('ColorMatrix', {'saturate': 0.5, 'hue': -2})\n        .tint('#e51e19')\n        .randomRotation()\n        .belowTokens()\n        .zIndex(3)\n\n        .canvasPan()\n        .shake({'duration': 1500, 'strength': 2, 'rotation': false, 'fadeOut': 1500})\n\n        .effect()\n        .attachTo(workflow.token)\n        .file('jb2a.extras.tmfx.outflow.circle.01')\n        .scaleToObject(1.5 * workflow.token.document.texture.scaleX)\n        .opacity(1)\n        .belowTokens()\n        .randomRotation()\n        .filter('ColorMatrix', {'brightness': 0})\n        .fadeIn(500)\n        .fadeOut(500)\n\n        .effect()\n        .file('jb2a.impact.003.dark_red')\n        .attachTo(workflow.token, {'offset': {'y': 0.1}, 'gridUnits': true, 'followRotation': true})\n        .scaleToObject(1, {'considerTokenScale': true})\n        .zIndex(2)\n\n        .effect()\n        .file('jb2a.impact.004.dark_red')\n        .attachTo(workflow.token, {'offset': {'y': 0}, 'gridUnits': true, 'followRotation': true})\n        .scaleToObject(7.5, {considerTokenScale: true})\n        .randomRotation()\n        .filter('ColorMatrix', {'brightness': 0})\n        .opacity(0.75)\n        .scaleIn(0, 1400, {'ease': 'easeOutCubic'})\n        .fadeOut(1000)\n        .belowTokens()\n        .zIndex(2)\n\n        .effect()\n        .file('jb2a.extras.tmfx.outpulse.circle.02.fast')\n        .attachTo(workflow.token, {'offset': {'y': 0}, 'gridUnits': true, 'followRotation': true})\n        .size(13, {'gridUnits': true})\n        .opacity(0.5)\n        .filter('ColorMatrix', {'brightness': 0})\n        .tint('#e51e19')\n        .waitUntilFinished()\n        .play();\n\n        Array.from(workflow.targets).forEach(target => {   \n            new Sequence()\n                .effect()\n                .file('jb2a.toll_the_dead.red.skull_smoke')\n                .attachTo(target)\n                .scaleToObject(1.65, {'considerTokenScale': true})\n                .filter('ColorMatrix', {'saturate': 0.25, 'hue': -2})\n                .zIndex(1)\n\n                .effect()\n                .from(target)\n                .attachTo(target)\n                .fadeIn(500)\n                .fadeOut(2000)\n                .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 55, 'pingPong': true, 'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': -1, 'brightness': 0.5})\n                .scaleToObject(1, {'considerTokenScale': true})\n                .duration(5000)\n                .opacity(0.65)\n                .zIndex(0.1)\n\n                .effect()\n                .file('jb2a.particles.outward.red.01.03')\n                .attachTo(target, {'offset': {'y': 0.1}, 'gridUnits': true, 'followRotation': false})\n                .size(1 * target.document.width, {'gridUnits': true})\n                .duration(1000)\n                .fadeOut(800)\n                .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n                .animateProperty('sprite', 'width', {'from': 0, 'to': 0.25, 'duration': 500, 'gridUnits': true, 'ease': 'easeOutBack'})\n                .animateProperty('sprite', 'height', {'from': 0, 'to': 1.0, 'duration': 1000, 'gridUnits': true, 'ease': 'easeOutBack'})\n                .animateProperty('sprite', 'position.y', {'from': 0, 'to': -0.6, 'duration': 1000, 'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': 1, 'hue': 20})\n                .zIndex(0.3)\n\n                .play()\n        }\n    )\n}\nasync function turnEnd(effect, origin, token) {\n    let sourceTokenUuid = effect.flags['chris-premades']?.feature?.dreadfulAspect?.sourceTokenUuid;\n    if (!sourceTokenUuid || !token) return;\n    let sourceToken = await fromUuid(sourceTokenUuid);\n    if (sourceToken) {\n        if (chris.getDistance(sourceToken.object, token) < 30) return;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Dreadful Aspect - End of Turn');\n    if (!featureData) return;\n    delete featureData._id;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dreadful Aspect - End of Turn');\n    featureData.system.save.dc = chris.getSpellDC(origin);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': sourceToken.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let queueSetup = await queue.setup(origin.uuid, 'dreadfulAspect', 50);\n    if (!queueSetup) return;\n    await warpgate.wait(100);\n    let workflow = await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(origin.uuid);\n    if (workflow.failedSaves.size) return;\n    await chris.removeEffect(effect);\n}\nexport let dreadfulAspect = {\n    'item': item,\n    'turnEnd': turnEnd\n}","import {chris} from '../../../helperFunctions.js';\nexport async function engulfingNightmare(origin, token) {\n    let turnToken = game.combat.scene.tokens.get(game.combat.current.tokenId);\n    let turnActor = turnToken.actor;\n    let originActor = origin.actor;\n    if (originActor.id != turnActor.id) return;\n    let damageRoll = await new Roll('3d6[psychic]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: origin.name\n    });\n    await chris.applyDamage(token, damageRoll.total);\n}","import {engulfingNightmare} from './engulfingNightmare.js';\nexport let dreamEater = {\n    'engulfingNightmare': engulfingNightmare\n}","import {chris} from '../../../helperFunctions.js';\nexport async function handCrossbow({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1 || workflow.hitTargets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    if (workflow.saveResults[0].total + 5 > workflow.item.system.save.dc) return;\n    let isImmune = chris.checkTrait(targetActor, 'ci', 'poisoned');\n    if (isImmune) return;\n    await chris.addCondition(targetActor, 'Unconscious', true, workflow.item.uuid);\n}","import {handCrossbow} from './handCrossbow.js';\nexport let drow = {\n    'handCrossbow': handCrossbow\n}","import {chris} from '../../helperFunctions.js';\nexport async function dualWielder(item, updates, options, userId) {\n    if (item.type != 'weapon' && item.type != 'equipment') return;\n    let actor = item.actor;\n    if (!actor) return;\n    let effect = chris.findEffect(actor, 'Dual Wielder');\n    if (!effect) return;\n    let items = actor.items.filter(i => i.type==='weapon' && i.system.equipped);\n    console.log(items);\n    let shields = actor.items.filter(i => i.system.armor?.type === 'shield' && i.system.equipped);\n    console.log(shields);\n    if (shields.length) {\n        if (!effect.disabled) await effect.update({'disabled': true});\n        return;\n    }\n    if (items.length > 1 && effect.disabled) await effect.update({'disabled': false});\n    if (items.length <= 1 && !effect.disabled) await effect.update({'disabled': true});\n}","import {chris} from '../../../helperFunctions.js';\nexport async function mindMastery({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, 'Reaction');\n    if (effect) return;\n    await chris.addCondition(targetActor, 'Reaction', false);\n}","import {translate} from '../../../translations.js';\nimport {chris} from '../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let piercing = translate.damageType('piercing');\n    let psychic = translate.damageType('psychic');\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Hide', false);\n    if (!featureData) return;\n    featureData.system.activation.type = 'bonusaction';\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Hide');\n    let updates = {\n        'embedded': {\n            'Item': {\n                ['Mind-Poison Dagger']: {\n                    'system': {\n                        'damage': {\n                            'parts': [\n                                [\n                                    '1[' + piercing + ']',\n                                    piercing\n                                ],\n                                [\n                                    '3d6[' + psychic + ']',\n                                    psychic\n                                ]\n                            ]\n                        }\n                    }\n                },\n                [featureData.name]: featureData\n            }\n        }\n    }\n    let options = {\n        'permanent': false,\n        'name': 'Reduce',\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function end(token) {\n    await warpgate.revert(token.document, 'Reduce');\n}\nexport let reduce = {\n    'item': item,\n    'end': end\n}","import {mindMastery} from './mindMastery.js';\nimport {reduce} from './reduce.js';\nexport let duergarMindMaster = {\n    'reduce': reduce,\n    'mindMastery': mindMastery\n}","import {queue} from '../../../utility/queue.js';\nexport async function enlarge({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.type != 'weapon') return;\n    if (workflow.item.system.properties?.fin) {\n        let str = workflow.actor.system.abilities.str.value;\n        let dex = workflow.actor.system.abilities.dex.value;\n        if (str < dex) return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'enlarge', 50);\n    if (!queueSetup) return;\n    let diceNum = workflow.damageRoll.terms[0].number * 2;\n    let damageFormula = diceNum + workflow.damageRoll._formula.substring(1);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {enlarge} from './enlarge.js';\nexport let duergar = {\n    'enlarge': enlarge\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function durableMagic({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!(workflow.item.system.components?.concentration || workflow.item.flags.midiProperties?.concentration)) return;\n    let effect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (!effect) return;\n    if (effect.flags['chris-premades']?.feature?.durableMagic) return;\n    let updates = {\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+2',\n                'priority': 20\n            },\n            {\n                'key': 'system.bonuses.abilities.save',\n                'mode': 2,\n                'value': '+2',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'durableMagic': true\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function tentacle({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.failedSaves.size != 1) return;\n    let damageRoll = await new Roll('1d6').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    let damage = -damageRoll.total;\n    let targetActor = workflow.targets.first().actor;\n    let targetMaxHP = targetActor.system.attributes.hp.max;\n    let effect = chris.findEffect(targetActor, 'Dybbuk - Tentacle');\n    if (!effect) {\n        let effectData = {\n            'label': 'Dybbuk - Tentacle',\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 2628000\n            },\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'shortRest'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (Math.abs(damage) >= targetMaxHP) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (!unconscious) return;\n        await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {tentacle} from './tentacle.js';\nexport let dybbuk = {\n    'tentacle': tentacle\n}","import {chris} from '../../../helperFunctions.js';\nexport async function eladrinSeason({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let currentSeason = workflow.actor.flags['chris-premades']?.race?.eladrin?.season;\n    let generatedMenu = [];\n    if (currentSeason != 'Autumn') generatedMenu.push(['🍂 Autumn', 'Autumn']);\n    if (currentSeason != 'Winter') generatedMenu.push(['❄️ Winter', 'Winter']);\n    if (currentSeason != 'Spring') generatedMenu.push(['🌼 Spring', 'Spring']);\n    if (currentSeason != 'Summer') generatedMenu.push(['☀️ Summer', 'Summer']);\n    let selection = await chris.dialog('What season?', generatedMenu);\n    if (!selection) return;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Eladrin Season');\n    }\n    let effectData = {\n        'name': 'Eladrin Season',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.race.eladrin.season',\n                'mode': 5,\n                'value': selection,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'dae': {\n                'selfTarget': true,\n                'selfTargetAlways': false,\n                'stackable': 'none',\n                'durationExpression': '',\n                'macroRepeat': 'none',\n                'specialDuration': [\n                    'longRest'\n                ],\n                'transfer': true\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chrisPremades.helpers.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    let hideIcon = chris.getConfiguration(workflow.item, 'showicon') ?? false;\n    if (hideIcon) effectData.icon = '';\n    let updates = {\n        'embedded': {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) setProperty(updates, 'actor.img', avatarImg);\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    if (workflow.actor.system.details.level >= 3) {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Race Feature Items', 'Fey Step (' + selection + ')', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fey Step (' + selection + ')');\n        featureData.system.save.dc = chris.getSpellDC(workflow.item);\n        updates.embedded.Item = {\n            [featureData.name]: featureData\n        }\n    }\n    let options = {\n        'permanent': false,\n        'name': 'Eladrin Season',\n        'description': 'Eladrin Season'\n    };\n    let effect = chris.findEffect(workflow.actor, 'Eladrin Season');\n    if (effect)  await chris.removeEffect(effect);\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function breakConcentration({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let conEffect = chris.findEffect(targetActor, 'Concentrating');\n    if (!conEffect) return;\n    let conOriginUuid = conEffect.flags['midi-qol']?.isConcentration;\n    if (!conOriginUuid) return;\n    let effect = targetActor.effects.find(eff => eff.flags['midi-qol']?.castData?.itemUuid === conOriginUuid);\n    if (!effect) return;\n    let castLevel = chris.getEffectCastLevel(effect);\n    if (!castLevel) return;\n    let damageFormula = castLevel + 'd4[psychic]';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await chris.removeEffect(effect);\n    await chris.removeEffect(conEffect);\n    await workflow.setDamageRoll(damageRoll);\n}","import {chris} from '../../../helperFunctions.js';\nasync function saveItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.failedSaves.size === 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Psychic Link');\n    let damageRoll = await new Roll('3d6[psychic]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: 'Psychic Link'\n    });\n    await chris.applyDamage(workflow.token, damageRoll.total, 'psychic');\n    if (effect) chris.removeEffect(effect);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Break Psychic Link', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Break Psychic Link');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Break Psychic Link');\n    }\n    let effectData = {\n        'name': 'Psychic Link',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': featureData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.targets.first().document, updates, {}, options);\n}\nasync function sever({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Psychic Link');\n    if (effect) await chris.removeEffect(effect);\n}\nasync function pulse({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let nearbyTokens = chris.findNearby(targetToken, 30, 'ally');\n    await chris.applyDamage(nearbyTokens, workflow.damageRoll.total, 'psychic');\n}\nexport let psychicLink = {\n    'item': item,\n    'saveItem': saveItem,\n    'sever': sever,\n    'pulse': pulse\n}","import {breakConcentration} from './breakConcentration.js';\nimport {psychicLink} from './psychicLink.js';\nexport let elderBrain = {\n    'breakConcentration': breakConcentration,\n    'psychicLink': psychicLink\n}","import {chris} from '../../../helperFunctions.js';\nexport async function eatMemories({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let diceSize = '1d4';\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor,'Eat Memories');\n    if (effect) {\n        diceSize = effect.changes[0].value;\n        switch (diceSize) {\n            case '1d4':\n                diceSize = '1d6';\n                break;\n            case '1d6':\n                diceSize = '1d8';\n                break;\n            case '1d8':\n                diceSize = '1d10';\n                break;\n            case '1d10':\n                diceSize = '1d12';\n                break;\n            case '1d12':\n                diceSize = '1d20';\n                break;\n            case '1d20':\n                let condition = chris.findEffect(targetActor, 'Unconscious');\n                if (!condition) await chris.addCondition(targetActor, 'Unconscious', true, workflow.item.uuid);\n                return;\n        }\n        let changes = effect.changes;\n        changes[0].value = diceSize;\n        changes[1].value = '-' + diceSize;\n        changes[2].value = '-' + diceSize;\n        await chris.updateEffect(effect, {changes});\n    } else {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 604800\n            },\n            'changes': [\n                {\n                    'key': 'flags.chris-premades.feature.eatmemories',\n                    'mode': 5,\n                    'value': diceSize,\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.All-Attacks',\n                    'mode': 2,\n                    'value': '-' + diceSize,\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.abilities.check',\n                    'mode': 2,\n                    'value': '-' + diceSize,\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'longRest',\n                        'shortRest'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n        let skillEffect = chris.findEffect(workflow.actor, workflow.item.name + ' Skills');\n        let changes;\n        if (skillEffect) {\n            changes = skillEffect.changes;\n        } else {\n            changes = [];\n        }\n        for (let [key, value] of Object.entries(targetActor.system.skills)) {\n            if (value.proficient > workflow.actor.system.skills[key].proficient) {\n                changes.push({\n                    'key': 'system.skills.' + key + '.value',\n                    'mode': 5,\n                    'value': value.proficient,\n                    'priority': 20\n                });\n            }\n        }\n        for (let i of Array.from(targetActor.system.traits.languages.value)) {\n            if (!workflow.actor.system.traits.languages.value.has(i)) {\n                changes.push({\n                    'key': 'system.traits.languages.value',\n                    'mode': 2,\n                    'value': i,\n                    'priority': 20\n                });\n            }\n        }\n        if (!skillEffect) {\n            let skillEffectData = {\n                'label': workflow.item.name + ' Skills',\n                'icon': 'icons/magic/symbols/circled-gem-pink.webp',\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 2628000\n                },\n                'changes': changes\n            }\n            await chris.createEffect(workflow.actor, skillEffectData);\n        } else {\n            let updates = {changes};\n            await chris.updateEffect(skillEffect, updates);\n        }\n    }\n}","import {eatMemories} from './eatMemories.js';\nexport let elderOblex = {\n    'eatMemories': eatMemories\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let color = chris.getConfiguration(workflow.item, 'color') ?? 'purple';\n    if (color === 'none') return;\n    let colors = [\n        'dark_green',\n        'dark_red',\n        'green',\n        'lightblue',\n        'lightgreen',\n        'orange',\n        'pink',\n        'rainbow',\n        'yellow',\n        'purple'\n    ]\n    if (color === 'cycle') {\n        let lastColor = workflow.item.flags['chris-premades']?.spell?.eldritchBlast?.lastColor ?? Math.floor(Math.random() * colors.length);\n        color = colors[lastColor];\n        lastColor += 1;\n        if (lastColor >= colors.length) lastColor = 0;\n        await workflow.item.setFlag('chris-premades', 'spell.eldritchBlast.lastColor', lastColor);\n    } else if (color === 'random') {\n        color = colors[Math.floor(Math.random() * colors.length)];\n    }\n    let animation = 'jb2a.eldritch_blast.' + color;\n    new Sequence().effect().atLocation(workflow.token).stretchTo(workflow.targets.first()).file(animation).missed(workflow.hitTargets.size === 0).play();\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.damageRoll) return;\n    let agonizingBlast = workflow.actor.flags['chris-premades']?.feature?.agonizingBlast ?? chris.getConfiguration(workflow.item, 'agonizingblast');\n    if (!agonizingBlast) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'agonizingBlast', 50);\n    if (!queueSetup) return;\n    let bonusDamage = Math.max(workflow.actor.system.abilities.cha.mod, 0);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamage;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let eldritchBlast = {\n    'item': item,\n    'damage': damage\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function eldritchSmite({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.weaponAttacks.includes(workflow.item.system.actionType)) return;\n    let feature = chris.getItem(workflow.actor, 'Eldritch Smite');\n    if (!feature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'eldritchSmite', 250);\n    if (!queueSetup) return;\n    let pactSlots = workflow.actor.system.spells.pact.value;\n    if (pactSlots === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let pactLevel = workflow.actor.system.spells.pact.level;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use Eldritch Smite?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let updates = {\n        'system.spells.pact.value': pactSlots - 1\n    }\n    await workflow.actor.update(updates);\n    let bonusDamage = (1 + pactLevel) + 'd8[force]';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamage;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    await feature.displayCard();\n    let targetActor = workflow.targets.first().actor;\n    let targetSize = chris.getSize(targetActor, false);\n    let effect = chris.findEffect(targetActor, 'Prone');\n    if (targetSize > 4 || effect) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selection2 = await chris.dialog(feature.name, constants.yesNo, 'Knock target prone?');\n    if (!selection2 || chris.checkTrait(targetActor, 'ci', 'prone')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.addCondition(targetActor, 'Prone', false, null);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function early(workflow) {\n    if (workflow.targets.size === 0) return;\n    let spellFlag = workflow.item.flags['chris-premades']?.spell;\n    if (!(workflow.item.type === 'spell' || spellFlag)) return;\n    let values = [];\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.acid) values.push('acid');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.cold) values.push('cold');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.fire) values.push('fire');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.lightning) values.push('lightning');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.thunder) values.push('thunder');\n    if (values.length === 0) return;\n    let changes = [];\n    for (let i of values) {\n        changes.push({\n            'key': 'system.traits.dv.value',\n            'mode': 0,\n            'value': i,\n            'priority': 20\n        });\n    }\n    let effectData = {\n        'label': 'Elemental Adept',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.actor.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': changes,\n        'transfer': true\n    }\n    workflow.targets.forEach(async function(token, key, set) {\n        for (let i of values) {\n            if (chris.checkTrait(token.actor, 'dr', i)) {\n                await chris.createEffect(token.actor, effectData);\n                break;\n            }\n        }\n    });\n}\nasync function late(workflow) {\n    if (workflow.targets.size === 0) return;\n    workflow.targets.forEach(async function(token, key, set) {\n        let effect = chris.findEffect(token.actor, 'Elemental Adept');\n        if (effect) await chris.removeEffect(effect);\n    });\n}\nasync function damage(workflow) {\n    if (workflow.targets.size === 0) return;\n    let spellFlag = workflow.item.flags['chris-premades']?.spell;\n    if (!(workflow.item.type === 'spell' || spellFlag)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'elementalAdept', 320);\n    if (!queueSetup) return;\n    let values = [];\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.acid) values.push('acid');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.cold) values.push('cold');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.fire) values.push('fire');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.lightning) values.push('lightning');\n    if (workflow.actor.flags['chris-premades']?.feat?.elementalAdept?.thunder) values.push('thunder');\n    if (values.length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let oldDamageRoll = workflow.damageRoll;\n    let newDamageRoll = '';\n    for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n        let flavor = oldDamageRoll.terms[i].flavor;\n        let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n        if (!values.includes(flavor.toLowerCase()) || isDeterministic === true) {\n            newDamageRoll += oldDamageRoll.terms[i].formula;\n        } else {\n            newDamageRoll += oldDamageRoll.terms[i].expression + 'min2[' + flavor + ']'\n        }\n    }\n    let damageRoll = await new Roll(newDamageRoll).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let elementalAdept = {\n    'early': early,\n    'late': late,\n    'damage': damage\n}","import {chris} from '../../../../helperFunctions.js';\nasync function mutate(workflow, selected) {\n    let damageType = await chris.dialog(workflow.item.name, [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['☁️ Thunder', 'thunder'], ['⚡ Lightning', 'lightning']], 'What damage type?');\n    if (!damageType) return;\n    let parts = duplicate(selected.system.damage.parts);\n    for (let i = 0; i < parts.length; i++) {\n        parts[i][0] = parts[i][0].replaceAll(parts[i][1], damageType);\n        parts[i][1] = damageType;\n    }\n    let versatile = duplicate(selected.system.damage.versatile);\n    let demiurgicColossus = chris.getItem(workflow.actor, 'Demiurgic Colossus');\n    let bonusDice = demiurgicColossus ? 2 : 1;\n    parts.push([bonusDice + 'd6[' + damageType + ']', damageType]);\n    if (selected.system.damage.parts.length) versatile.replaceAll(selected.system.damage.parts[0][1], selected);\n    if (versatile != '') versatile += ' + ' + bonusDice + 'd6[' + damageType + ']';\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Elemental Cleaver');\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Elemental Cleaver: Change Damage Type', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Elemental Cleaver: Change Damage Type');\n    let effectData = {\n        'name': 'Elemental Cleaver',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                },\n                'feature': {\n                    'elementalCleaver': {\n                        'weapon': selected.id\n                    }\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [selected.name]: {\n                    'system': {\n                        'damage': {\n                            'parts': parts,\n                            'versatile': versatile\n                        },\n                        'properties': {\n                            'thr': true\n                        },\n                        'range': {\n                            'long': 60,\n                            'value': 20\n                        }\n                    }\n                },\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [featureData.name]: effectData\n            }\n        }\n    }\n    let options = {\n        'permanent': false,\n        'name': 'Elemental Cleaver',\n        'description': 'Elemental Cleaver'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.actor || !workflow.token) return;\n    let weapons = workflow.actor.items.filter(i => i.type === 'weapon' && i.system.equipped && i.flags['chris-premades']?.info?.name != 'Unarmed Strike');\n    if (!weapons.length) return;\n    let selected;\n    if (weapons.length === 1) {\n        selected = weapons[0];\n    } else {\n        [selected] = await chris.selectDocument(workflow.item.name, weapons, false);\n    }\n    if (!selected) return;\n    await mutate(workflow, selected);\n}\nasync function change({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Elemental Cleaver');\n    if (!effect) return;\n    let weaponId = effect.flags['chris-premades']?.feature?.elementalCleaver?.weapon;\n    if (!weaponId) return;\n    let selected = workflow.actor.items.get(weaponId);\n    if (!selected) return;\n    await chris.removeEffect(effect);\n    await mutate(workflow, selected);\n}\nexport let elementalCleaver = {\n    'item': item,\n    'change': change,\n    'mutate': mutate\n}","import {chris} from '../../helperFunctions.js';\nexport async function elementalWeapon({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let weapons = targetActor.items.filter(i => i.type === 'weapon' && !i.system.properties?.mgc && i.system.equipped);\n    if (!weapons.length) {\n        ui.notifications.warn('Target has no valid non-magical equipped weapons!');\n        return;\n    }\n    let selection;\n    if (weapons.length === 1) {\n        selection = [weapons[0]];\n    } else {\n        selection = await chris.selectDocument(workflow.item.name, weapons);\n        if (!selection) return;\n    }\n    let damageType = await chris.dialog(workflow.item.name, [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['⚡ Lightning', 'lightning'], ['☁️ Thunder', 'thunder']], 'What damage type?');\n    if (!damageType) return;\n    let castLevel = workflow.castData.castLevel;\n    let bonus = 1;\n    if (castLevel >= 5 && castLevel < 7) {\n        bonus = 2;\n    } else if (castLevel > 7) {\n        bonus = 3;\n    }\n    let damageParts = duplicate(selection[0].system.damage.parts);\n    damageParts.push([bonus + 'd4[' + damageType + ']', damageType]);\n    let versatile = duplicate(selection[0].system.damage.versatile);\n    if (versatile != '') versatile += ' + ' + bonus + 'd4[' + damageType + ']';\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Elemental Weapon');\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': selection[0].name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [selection[0].name]: {\n                    'system': {\n                        'damage': {\n                            'parts': damageParts,\n                            'versatile': versatile\n                        },\n                        'attackBonus': bonus\n                    }\n                }\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Elemental Weapon',\n        'description': 'Elemental Weapon'\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}\n","import {chris} from '../../helperFunctions.js';\nexport async function elixirOfHealth({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    await chris.removeCondition(targetActor, 'Blinded');\n    await chris.removeCondition(targetActor, 'Deafened');\n    await chris.removeCondition(targetActor, 'Paralyzed');\n    await chris.removeCondition(targetActor, 'Poisoned');\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function effectMacro() {\n    await chrisPremades.macros.emboldeningBond.remove(token);\n}\nlet effectData = {\n    'name': 'Emboldening Bond Bonus',\n    'changes': [\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.count',\n            'mode': 0,\n            'value': '1',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.label',\n            'mode': 0,\n            'value': 'Emboldening Bond',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.save.all',\n            'mode': 0,\n            'value': '+ 1d4',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.attack.all',\n            'mode': 0,\n            'value': '+ 1d4',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.check.all',\n            'mode': 0,\n            'value': '+ 1d4',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.optional.emboldeningBond.skill.all',\n            'mode': 0,\n            'value': '+ 1d4',\n            'priority': 20\n        },\n        {\n            'key': 'system.attributes.init.bonus',\n            'mode': 2,\n            'value': '+ 1d4',\n            'priority': 20\n        }\n    ],\n    'flags': {\n        'effectmacro': {\n            'onDelete': {\n                'script': chris.functionToString(effectMacro)\n            }\n        }\n    }\n};\nasync function turn(token, origin, effect) {\n    let effect2 = chris.findEffect(token.actor, 'Emboldening Bond Bonus');\n    if (effect2) return;\n    let distance = effect.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond ?? 30;\n    let nearbyTargets = chris.findNearby(token, distance, 'all', true).concat(token).filter(t => t.actor.effects.find(e => e.origin === origin.uuid && e.name === 'Emboldening Bond'));\n    if (nearbyTargets.length < 2) return;\n    let effectData2 = duplicate(effectData);\n    setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.sourceTokenUuid', token.document.uuid);\n    setProperty(effectData2, 'origin', origin.uuid);\n    setProperty(effectData2, 'icon', origin.img);\n    setProperty(effectData2, 'duration.seconds', effect.duration.seconds);\n    if (token.actor.flags['chris-premades']?.feature?.expansiveBond) setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.expansiveBond', 60);\n    await chris.createEffect(token.actor, effectData2);\n}\nasync function checkBonus(effect) {\n    if (!effect.origin) return;\n    let tokens = canvas.scene.tokens.filter(t => t.actor.effects.find(e => e.name == 'Emboldening Bond' && e.origin === effect.origin));\n    for (let token of tokens) {\n        let effect3 = chris.findEffect(token.actor, 'Emboldening Bond');\n        let distance = effect3.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond ?? 30;\n        let nearbyTargets = chris.findNearby(token.object, distance, 'all', true).concat(token.object).filter(t => t.actor.effects.find(e => e.name === 'Emboldening Bond'));\n        let effect2 = chris.findEffect(token.actor, 'Emboldening Bond Bonus');\n        if (nearbyTargets.length < 2) {\n            if (effect2) {\n                await chris.updateEffect(effect2, {'disabled': true});\n                await chris.removeEffect(effect2);\n            }\n        } else {\n            if (effect2) continue;\n            if (chris.inCombat()) {\n                let currentTurn = game.combat.round + '-' + game.combat.turn;\n                let previousTurn = effect3.flags['chris-premades']?.feature?.emboldeningBond.turn;\n                if (currentTurn === previousTurn) continue;\n            }\n            let effectData2 = duplicate(effectData);\n            setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.sourceTokenUuid', effect3.flags['chris-premades']?.feature?.emboldeningBond?.sourceTokenUuid);\n            setProperty(effectData2, 'origin', effect3.origin);\n            setProperty(effectData2, 'icon', effect3.icon);\n            setProperty(effectData2, 'duration.seconds', effect3.duration.seconds);\n            if (effect3.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond) setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.expansiveBond', 60);\n            await chris.createEffect(token.actor, effectData2);\n        }\n    }\n}\nasync function move(token, changes) {\n    if (!chris.isLastGM()) return;\n    if (token.parent.id != canvas.scene.id) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    let effect = chris.findEffect(token.actor, 'Emboldening Bond');\n    if (!effect) return;\n    await token.object?._animation;\n    checkBonus(effect);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let effectData2 = duplicate(effectData);\n    setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.sourceTokenUuid', token.document.uuid);\n    setProperty(effectData2, 'origin', workflow.item.uuid);\n    setProperty(effectData2, 'icon', workflow.item.img);\n    setProperty(effectData2, 'duration.seconds', 600)\n    async function effectMacro() {\n        await chrisPremades.macros.emboldeningBond.turn(token, origin, effect);\n    }\n    async function effectMacro2() {\n        await chrisPremades.macros.emboldeningBond.removeBonus(token);\n    }\n    let effectData3 = {\n        'name': 'Emboldening Bond',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 600,\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onEachTurn': {\n                    'script': chris.functionToString(effectMacro)\n                },\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'feature': {\n                    'emboldeningBond': {\n                        'sourceTokenUuid': workflow.token.document.uuid\n                    }\n                }\n            }\n        }\n    };\n    if (workflow.actor.flags['chris-premades']?.feature?.expansiveBond) {\n        setProperty(effectData2, 'flags.chris-premades.feature.emboldeningBond.expansiveBond', 60);\n        setProperty(effectData3, 'flags.chris-premades.feature.emboldeningBond.expansiveBond', 60);\n    }\n    if (workflow.actor.flags['chris-premades']?.feature?.emboldeningBond?.protectiveBond) {\n        setProperty(effectData3, 'flags.chris-premades.feature.emboldeningBond.protectiveBond', true);\n    }\n    for (let token of Array.from(workflow.targets)) {\n        await chris.createEffect(token.actor, effectData3);\n        await chris.createEffect(token.actor, effectData2);\n    }\n}\nasync function remove(token) {\n    let effect = chris.findEffect(token.actor, 'Emboldening Bond');\n    if (!effect) return;\n    await effect.setFlag('chris-premades', 'feature.emboldeningBond.turn', game.combat.round + '-' + game.combat.turn);\n}\nasync function damage(targetToken, {workflow, ditem}) {\n    if (!workflow) return;\n    if (workflow.defaultDamageType === 'healing' || workflow.defaultDamageType === 'temphp') return;\n    if (workflow.item?.flags?.['chris-premades']?.feature?.protectiveBond) return;\n    let effect = chris.findEffect(targetToken.actor, 'Emboldening Bond');\n    if (!effect) return;\n    if (!effect.flags['chris-premades']?.feature?.emboldeningBond?.protectiveBond) return;\n    if (chris.findEffect(targetToken.actor, 'Reaction')) return;\n    let distance = effect.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond ?? 30;\n    let nearbyTargets = chris.findNearby(targetToken, distance, 'all', true).filter(t => t.actor.effects.find(e => e.origin === effect.origin && e.name === 'Emboldening Bond') && !chris.findEffect(t.actor, 'Reaction'));\n    if (nearbyTargets.length === 0) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'protectiveBond', 400);\n    if (!queueSetup) return;\n    for (let token of nearbyTargets) {\n        let owner = chris.firstOwner(token.document);\n        if (!owner) continue;\n        let title = 'Protective Bond: Protect Target?';\n        if (owner.isGM) title = '[' + token.actor.name + '] ' + title;\n        let firstOwner = chris.firstOwner(token.document).id;\n        await chris.thirdPartyReactionMessage(firstOwner);\n        let selection = await chris.remoteDialog('Protective Bond', constants.yesNo, firstOwner, title);\n        if (!selection) continue;\n        let featureDamage = 0;\n        let damages = {};\n        for (let term of workflow.damageRoll.terms) {\n            if (isNaN(term.total)) continue;\n            let flavor = term.flavor.toLowerCase();\n            if (!damages[flavor]) damages[flavor] = 0;\n            damages[flavor] += term.total;\n        }\n        let forceDR = !!effect.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond;\n        for (let [key, value] of Object.entries(damages)) {\n            if (chris.checkTrait(token.actor, 'di', key)) continue;\n            let dr = chris.checkTrait(token.actor, 'dr', key);\n            if (forceDR) dr = true;\n            let dv = chris.checkTrait(token.actor, 'dv', key);\n            if (dr && !dv) featureDamage += Math.floor(value / 2);\n            if (!dr && dv) featureDamage += value * 2;\n            if (!dr && !dv) featureDamage += value;\n        }\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Protective Bond - Damage', false);\n        if (!featureData) {\n            queue.remove(workflow.uuid);\n            return;\n        }\n        delete featureData._id;\n        if (effect.flags['chris-premades']?.feature?.emboldeningBond?.expansiveBond) setProperty(featureData, 'flags.autoanimations.data.options.range', 60);\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Protective Bond - Damage');\n        featureData.system.damage.parts = [\n            [\n                featureDamage,\n                'none'\n            ]\n        ];\n        setProperty(featureData, 'flags.chris-premades.feature.protectiveBond', true);\n        async function effectMacro() {\n            await chrisPremades.macros.emboldeningBond.teleport(token);\n        }\n        let effectData = {\n            'name': featureData.name,\n            'icon': featureData.img,\n            'duration': {\n                'seconds': 1\n            },\n            'origin': workflow.item.uuid,\n            'flags': {\n                'effectmacro': {\n                    'onCreate': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                }\n            }\n        };\n        let updates = {\n            'embedded': {\n                'Item': {\n                    [featureData.name]: featureData\n                },\n                'ActiveEffect': {\n                    [effectData.name]: effectData\n                }\n            }\n        };\n        let options = {\n            'permanent': false,\n            'name': featureData.name,\n            'description': featureData.name\n        };\n        await warpgate.mutate(token.document, updates, {}, options);\n        ditem.appliedDamage = 0;\n        ditem.hpDamage = 0;\n        ditem.newHP = ditem.oldHP;\n        ditem.newTempHP = ditem.oldTempHP;\n        ditem.newVitality = ditem.oldVitality;\n        ditem.tempDamage = 0;\n        ditem.totalDamage = 0;\n        break;\n    }\n    await chris.clearThirdPartyReactionMessage();\n    queue.remove(workflow.uuid);\n}\nasync function teleport(token) {\n    let feature = token.actor.items.find(i => i.flags['chris-premades']?.feature?.protectiveBond);\n    if (feature) await feature.use();\n    await warpgate.revert(token.document, 'Protective Bond - Damage');\n}\nasync function removeBonus(token) {\n    let effect = chris.findEffect(token.actor, 'Emboldening Bond Bonus');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let emboldeningBond = {\n    'turn': turn,\n    'move': move,\n    'item': item,\n    'remove': remove,\n    'damage': damage,\n    'teleport': teleport,\n    'removeBonus': removeBonus\n}","import {chris} from '../../../../helperFunctions.js';\nexport function enhancedBond(actor) {\n    let effect = chris.findEffect(actor, 'Summon Wildfire Spirit');\n    return !!effect;\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let infusionId = workflow.item.flags['chris-premades']?.feature?.infusion?.enhancedWeapon?.id;\n    if (!infusionId) {\n        let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && !i.system.properties?.mgc);\n        if (chris.getItem(actor, 'Armor Modifications')) {\n            let gauntlets = chris.getItem(workflow.actor, 'Guardian Armor: Thunder Gauntlets');\n            if (gauntlets) validWeapons.push(gauntlets);\n            let launcher = chris.getItem(workflow.actor, 'Infiltrator Armor: Lightning Launcher');\n            if (launcher) validWeapons.push(launcher);\n        }\n        if (validWeapons.length === 0) {\n            ui.notifications.info('No valid weapon to infuse!');\n            return;\n        }\n        let [selection] = await chris.selectDocument('Infuse what weapon?', validWeapons, false);\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.enhancedWeapon.id', selection.id);\n    } else {\n        let selection = await chris.dialog(workflow.item.name, [['Yes', true], ['No', false]], 'Remove enhanced weapon infusion?');\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.enhancedWeapon.id', null);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let originItem = chris.getItem(workflow.actor, 'Enhanced Weapon, +2') ?? chris.getItem(workflow.actor, 'Enhanced Weapon, +1');\n    if (!originItem) return;\n    if (workflow.item.id != originItem.flags['chris-premades']?.feature?.infusion?.enhancedWeapon?.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'enhancedWeapon', 150);\n    if (!queueSetup) return;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    let level = chris.getConfiguration(originItem, 'level') ?? 1;\n    parts[0][0] = parts[0][0] + ' + ' + level;\n    let properties = duplicate(workflow.item.system.properties);\n    let attackBonus = duplicate(workflow.item.system.attackBonus);\n    attackBonus = level;\n    properties.mgc = true;\n    workflow.item = workflow.item.clone({'system.damage.parts': parts, 'system.properties': properties, 'system.attackBonus': attackBonus}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nexport let enhancedWeapon = {\n    'item': item,\n    'attack': attack\n}","import {chris} from '../../helperFunctions.js';\nasync function enlargeAnimation(token, updates, name, callbacks) {\n    //Animations by: eskiemoh\n    let scale = 1;\n    let size = chris.getSize(token.actor, true);\n    switch (size) {\n        case 'small':\n            scale = 0.8;\n            break;\n        case 'tiny':\n            scale = 0.5;\n            break;\n    }\n    await new Sequence()\n        .effect()\n        .file('jb2a.static_electricity.03.orange')\n        .atLocation(token)\n        .duration(3000)\n        .scaleToObject(1)\n        .fadeIn(250)\n        .fadeOut(250)\n        .zIndex(2)\n        \n        .effect()\n        .from(token)\n        .atLocation(token)\n        .scaleToObject(2)\n        .duration(500)\n        .scaleIn(0.25,500)\n        .fadeIn(250)\n        .fadeOut(250)\n        .repeats(3, 500, 500)\n        .opacity(0.2)\n        .zIndex(1)\n        \n        .animation()\n        .on(token)\n        .opacity(0)\n        \n        .effect()\n        .from(token)\n        .atLocation(token)\n        .loopProperty('sprite', 'position.x', {'from': -40, 'to': 40, 'duration': 75, 'pingPong': true, 'delay': 200})\n        .scaleToObject(scale)\n        .duration(2000)\n        .waitUntilFinished(-200)\n        .zIndex(0)\n        \n        .thenDo(async () => {\n            let options = {\n                'permanent': false,\n                'name': name,\n                'description': name,\n                'updateOpts': {'token': {'animate': false}}\n            };\n            await warpgate.mutate(token.document, updates, callbacks, options);\n        })\n        \n        .wait(200)\n        \n        .effect()\n        .from(token)\n        .atLocation(token)\n        .scaleToObject(1)\n        .duration(3000)\n        .scaleIn(0.25,700, {'ease': 'easeOutBounce'})\n        \n        .effect()\n        .file('jb2a.extras.tmfx.outpulse.circle.01.fast')\n        .atLocation(token)\n        .belowTokens()\n        .opacity(0.75)\n        .scaleToObject(2)\n        .zIndex(1)\n        \n        .effect()\n        .file('jb2a.impact.ground_crack.orange.02')\n        .atLocation(token)\n        .belowTokens()\n        .scaleToObject(2)\n        .zIndex(0)\n        \n        .effect()\n        .file('jb2a.particles.outward.orange.01.04')\n        .scaleIn(0.25, 500, {'ease': 'easeOutQuint'})\n        .fadeIn(500)\n        .fadeOut(1000)\n        .atLocation(token)\n        .randomRotation()\n        .duration(3000)\n        .scaleToObject(1.5)\n        .zIndex(4)\n        \n        .effect()\n        .file('jb2a.static_electricity.03.orange')\n        .atLocation(token)\n        .duration(5000)\n        .scaleToObject(1)\n        .fadeIn(250)\n        .fadeOut(250)\n        .waitUntilFinished(-3000)\n        \n        .animation()\n        .on(token)\n        .opacity(1)\n        \n        .play();\n}\nasync function reduceAnimation(token, updates, name) {\n    //Animations by: eskiemoh\n    let scale = 1;\n    let size = chris.getSize(token.actor, true);\n    switch (size) {\n        case 'medium':\n            scale = 0.8;\n            break;\n        case 'small':\n            scale = 0.5;\n            break;\n        case 'tiny':\n            scale = 0.25;\n            break;\n    }\n    await new Sequence()\n        .effect()\n        .file('jb2a.static_electricity.03.orange')\n        .atLocation(token)\n        .duration(3000)\n        .scaleToObject(1)\n        .fadeIn(250)\n        .fadeOut(250)\n        .zIndex(2)\n\n        .effect()\n        .from(token)\n        .atLocation(token)\n        .scaleToObject(2)\n        .duration(500)\n        .scaleIn(0.25,500)\n        .fadeIn(250)\n        .fadeOut(250)\n        .repeats(3, 500, 500)\n        .opacity(0.2)\n        .zIndex(1)\n\n        .animation()\n        .on(token)\n        .opacity(0)\n\n        .effect()\n        .from(token)\n        .atLocation(token)\n        .loopProperty('sprite', 'rotation', {'from': -10, 'to': 10, 'duration': 75, 'pingPong': true, 'delay': 200})\n        .duration(2000)\n        .waitUntilFinished(-200)\n        .zIndex(0)\n\n        .thenDo(async () => {\n            let options = {\n                'permanent': false,\n                'name': name,\n                'description': name,\n                'updateOpts': {'token': {'animate': false}}\n            };\n            await warpgate.mutate(token.document, updates, {}, options);\n        })\n\n        .wait(200)\n\n        .effect()\n        .from(token)\n        .atLocation(token)\n        .scaleToObject(scale)\n        .duration(3000)\n        .scaleIn(0.25, 700, {'ease': 'easeOutBounce'})\n\n        .effect()\n        .file('jb2a.extras.tmfx.outpulse.circle.01.fast')\n        .atLocation(token)\n        .opacity(0.75)\n        .scaleToObject(2)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.energy_strands.in.yellow.01.2')\n        .atLocation(token)\n        .belowTokens()\n        .scaleToObject(2)\n        .zIndex(0)\n\n        .effect()\n        .file('jb2a.particles.outward.orange.01.04')\n        .scaleIn(0.25, 500, {'ease': 'easeOutQuint'})\n        .fadeIn(500)\n        .fadeOut(1000)\n        .atLocation(token)\n        .randomRotation()\n        .duration(3000)\n        .scaleToObject(1.5)\n        .zIndex(4)\n\n        .effect()\n        .file('jb2a.static_electricity.03.orange')\n        .atLocation(token)\n        .duration(5000)\n        .scaleToObject(1)\n        .fadeIn(250)\n        .fadeOut(250)\n        .waitUntilFinished(-3000)\n\n        .animation()\n        .on(token)\n        .opacity(1)\n\n        .play()\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let animate = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    let selection = await chris.dialog(workflow.item.name, [['Enlarge', 'enlarge'], ['Reduce', 'reduce']], 'Enlarge or Reduce?');\n    if (!selection) return;\n    let targetToken = workflow.targets.first();\n    if (selection === 'enlarge') {\n        async function effectMacro() {\n            await chrisPremades.macros.enlargeReduce.end(token);\n        }\n        let effectData = {\n            'name': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 60\n            },\n            'changes': [\n                {\n                    'key': 'system.bonuses.mwak.damage',\n                    'mode': 2,\n                    'value': '+1d4',\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.rwak.damage',\n                    'mode': 2,\n                    'value': '+1d4',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.ability.check.str',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.ability.save.str',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                },\n                'chris-premades': {\n                    'spell': {\n                        'enlargeReduce': selection\n                    }\n                }\n            }\n        };\n        let token = {};\n        let actor = {};\n        let doGrow = true;\n        let targetSize = targetToken.actor.system.traits.size;\n        if (targetSize != 'tiny' || targetSize != 'sm') {\n            let room = chris.checkForRoom(targetToken, 1);\n            let direction = chris.findDirection(room);\n            switch(direction) {\n                case 'none':\n                    doGrow = false;\n                    break;\n                case 'ne':\n                    setProperty(token, 'y', targetToken.y - canvas.grid.size);\n                    break;\n                case 'sw':\n                    setProperty(token, 'x', targetToken.x - canvas.grid.size);\n                    break;\n                case 'nw':\n                    setProperty(token, 'x', targetToken.x - canvas.grid.size);\n                    setProperty(token, 'y', targetToken.y - canvas.grid.size);\n                    break;\n            }\n        }\n        if (doGrow) {\n            switch (targetSize) {\n                case 'tiny':\n                    setProperty(token, 'texture.scaleX', '0.8');\n                    setProperty(token, 'texture.scaleY', '0.8');\n                    setProperty(actor, 'system.traits.size', 'sm');\n                    break;\n                case 'sm':\n                    setProperty(token, 'texture.scaleX', '1');\n                    setProperty(token, 'texture.scaleY', '1');\n                    setProperty(actor, 'system.traits.size', 'med');\n                    break;\n                case 'med':\n                    setProperty(token, 'height', targetToken.document.height + 1);\n                    setProperty(token, 'width', targetToken.document.width + 1);\n                    setProperty(actor, 'system.traits.size', 'lg');\n                    break;\n                case 'lg':\n                    setProperty(token, 'height', targetToken.document.height + 1);\n                    setProperty(token, 'width', targetToken.document.width + 1);\n                    setProperty(actor, 'system.traits.size', 'huge');\n                    break;\n                case 'huge':\n                    setProperty(token, 'height', targetToken.document.height + 1);\n                    setProperty(token, 'width', targetToken.document.width + 1);\n                    setProperty(actor, 'system.traits.size', 'grg');\n                    break;\n                case 'grg':\n                    setProperty(token, 'height', targetToken.document.height + 1);\n                    setProperty(token, 'width', targetToken.document.width + 1);\n                    break;\n            }\n        }\n        let updates = {\n            'token': token,\n            'actor': actor,\n            'embedded': {\n                'ActiveEffect': {\n                    [effectData.name]: effectData\n                }\n            }\n        };\n        let callbacks = {\n            'delta': (delta, tokenDoc) => {\n                if ('x' in delta.token) delete delta.token.x;\n                if ('y' in delta.token) delete delta.token.y;\n            }\n        };\n        if (animate) {\n            await enlargeAnimation(targetToken, updates, 'Enlarge/Reduce', callbacks);\n        } else {\n            let options = {\n                'permanent': false,\n                'name': 'Enlarge/Reduce',\n                'description': 'Enlarge/Reduce'\n            };\n            await warpgate.mutate(targetToken.document, updates, callbacks, options);\n        }\n    } else {\n        async function effectMacro() {\n            await chrisPremades.macros.enlargeReduce.end(token);\n        }\n        let effectData = {\n            'name': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 60\n            },\n            'changes': [\n                {\n                    'key': 'system.bonuses.mwak.damage',\n                    'mode': 2,\n                    'value': '-1d4',\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.rwak.damage',\n                    'mode': 2,\n                    'value': '-1d4',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.disadvantage.ability.check.str',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.disadvantage.ability.save.str',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                },\n                'chris-premades': {\n                    'spell': {\n                        'enlargeReduce': selection\n                    }\n                }\n            }\n        };\n        let token = {};\n        let actor = {};\n        let targetSize = targetToken.actor.system.traits.size;\n        switch (targetSize) {\n            case 'tiny':\n                setProperty(token, 'texture.scaleX', '0.25');\n                setProperty(token, 'texture.scaleY', '0.25');\n            case 'sm':\n                setProperty(token, 'texture.scaleX', '0.5');\n                setProperty(token, 'texture.scaleY', '0.5');\n                setProperty(actor, 'system.traits.size', 'tiny');\n                break;\n            case 'med':\n                setProperty(token, 'texture.scaleX', '0.8');\n                setProperty(token, 'texture.scaleY', '0.8');\n                setProperty(actor, 'system.traits.size', 'sm');\n                break;\n            case 'lg':\n                setProperty(token, 'height', targetToken.document.height - 1);\n                setProperty(token, 'width', targetToken.document.width - 1);\n                setProperty(actor, 'system.traits.size', 'med');\n                break;\n            case 'huge':\n                setProperty(token, 'height', targetToken.document.height - 1);\n                setProperty(token, 'width', targetToken.document.width - 1);\n                setProperty(actor, 'system.traits.size', 'lg');\n                break;\n            case 'grg':\n                setProperty(token, 'height', targetToken.document.height - 1);\n                setProperty(token, 'width', targetToken.document.width - 1);\n                setProperty(actor, 'system.traits.size', 'huge');\n                break;\n        }\n        let updates = {\n            'token': token,\n            'actor': actor,\n            'embedded': {\n                'ActiveEffect': {\n                    [effectData.name]: effectData\n                }\n            }\n        };\n        if (animate) {\n            await reduceAnimation(targetToken, updates, 'Enlarge/Reduce');\n        } else {\n            let options = {\n                'permanent': false,\n                'name': 'Enlarge/Reduce',\n                'description': 'Enlarge/Reduce'\n            };\n            await warpgate.mutate(targetToken.document, updates, {}, options);\n        }\n    }\n}\nasync function end(token, origin) {\n    await warpgate.revert(token.document, 'Enlarge/Reduce', {'updateOpts': {'token': {'animate': true}}});\n}\nexport let enlargeReduce = {\n    'enlargeAnimation': enlargeAnimation,\n    'reduceAnimation': reduceAnimation,\n    'item': item,\n    'end': end\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function experimentalElixir({speaker, actor, token, character, item, args, scope, workflow}) {\n    let roll = await new Roll('1d6').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: 'Experimental Elixir'\n    });\n    let itemName;\n    switch (roll.total) {\n        case 1:\n            itemName = 'Experimental Elixir - Healing';\n            break;\n        case 2:\n            itemName = 'Experimental Elixir - Swiftness';\n            break;\n        case 3:\n            itemName = 'Experimental Elixir - Resilience';\n            break;\n        case 4:\n            itemName = 'Experimental Elixir - Boldness';\n            break;\n        case 5:\n            itemName = 'Experimental Elixir - Flight';\n            break;\n        case 6:\n            itemName = 'Experimental Elixir - Transformation';\n            break;\n    }\n    let feature = workflow.actor.items.getName(itemName);\n    if (feature) {\n        feature.update({\n            'system.quantity': item.system.quantity + 1\n        });\n    } else {\n        let itemData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', itemName, false);\n        if (!itemData) return;\n        itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', itemName);\n        if (itemName === 'Experimental Elixir - Healing') {\n            itemData.system.damage.parts = [\n                [\n                    '2d4[healing] + ' + workflow.actor.system.abilities.int.mod,\n                    'healing'\n                ]\n            ];\n        }\n        if (workflow.actor.classes.artificer?.system?.levels >= 9) {\n            if (!itemData.system.damage.parts) itemData.system.damage.parts = [];\n            itemData.system.damage.parts.push([\n                '2d6[temphp] + ' + workflow.actor.system.abilities.int.mod,\n                'temphp'\n            ]);\n        }\n        let effectData = {\n            'name': itemData.name + ' Item',\n            'icon': '', //Blank to avoid showing up as a status icon.\n            'duration': {\n                'seconds': 604800\n            },\n            'origin': workflow.item.uuid,\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': \"warpgate.revert(token.document, '\" + itemData.name + \" Item');\"\n                    }\n                },\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'longRest'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        };\n        let updates = {\n            'embedded': {\n                'Item': {\n                    [itemData.name]: itemData\n                },\n                'ActiveEffect': {\n                    [effectData.name]: effectData\n                }\n            }\n        };\n        let options = {\n            'permanent': false,\n            'name': effectData.name,\n            'description': effectData.name\n        };\n        await warpgate.mutate(workflow.token.document, updates, {}, options);\n    }\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function expertDivination({speaker, actor, token, character, item, args, scope, workflow}) {\n    let type = workflow.item.type;\n    if (type != 'spell') return;\n    let school = workflow.item.system.school;\n    if (school != 'div') return;\n    let level = workflow.item.system.level;\n    if (level < 2) return;\n    let missingFirst = workflow.actor.system.spells.spell1.max - workflow.actor.system.spells.spell1.value;\n    let missingSecond = workflow.actor.system.spells.spell2.max - workflow.actor.system.spells.spell2.value;\n    let missingThird = workflow.actor.system.spells.spell3.max - workflow.actor.system.spells.spell3.value;\n    let missingFourth = workflow.actor.system.spells.spell4.max - workflow.actor.system.spells.spell4.value;\n    let missingFifth = workflow.actor.system.spells.spell5.max - workflow.actor.system.spells.spell5.value;\n    let menu = [];\n    if (level > 1 && missingFirst > 0) menu.push(['1st Level', 1]);\n    if (level > 2 && missingSecond > 0) menu.push(['2nd Level', 2]);\n    if (level > 3 && missingThird > 0) menu.push(['3rd Level', 3]);\n    if (level > 4 && missingFourth > 0) menu.push(['4th Level', 4]);\n    if (level > 5 && missingFifth > 0) menu.push(['5th Level', 5]);\n    if (menu.length === 0) return;\n    let slot = await chris.dialog('What level spell slot do you want to regain?', menu);\n    if (!slot) return;\n    let updateString;\n    let updateValue;\n    let messageString;\n    switch (slot) {\n        case 1:\n            updateString = 'system.spells.spell1.value';\n            updateValue = workflow.actor.system.spells.spell1.value + 1;\n            messageString = 'Regained a 1st level spell slot!'\n            break;\n        case 2:\n            updateString = 'system.spells.spell2.value';\n            updateValue = workflow.actor.system.spells.spell2.value + 1;\n            messageString = 'Regained a 2nd level spell slot!'\n            break;\n        case 3:\n            updateString = 'system.spells.spell3.value';\n            updateValue = workflow.actor.system.spells.spell3.value + 1;\n            messageString = 'Regained a 3rd level spell slot!'\n            break;\n        case 4:\n            updateString = 'system.spells.spell4.value';\n            updateValue = workflow.actor.system.spells.spell4.value + 1;\n            messageString = 'Regained a 4th level spell slot!'\n            break;\n        case 5:\n            updateString = 'system.spells.spell5.value';\n            updateValue = workflow.actor.system.spells.spell5.value + 1;\n            messageString = 'Regained a 5th level spell slot!'\n            break;\n    }\n    workflow.actor.update({[updateString]: updateValue});\n    let effect = chris.findEffect(workflow.actor, 'Expert Divination');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    let tempItem = duplicate(originItem.toObject());\n    tempItem.system.description.value = tempItem.system.description.value + '\\n<hr><p>' + messageString + '</p>'\n    let feature = new CONFIG.Item.documentClass(tempItem, {'parent': workflow.actor});\n    await feature.use();\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function explodingHeals(workflow) {\n    if (!workflow.damageRoll) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'explodingHeals', 350);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has('healing')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let newFormula = '';\n    for (let i of workflow.damageRoll.terms) {\n        if (i.isDeterministic) {\n            newFormula += i.expression;\n        } else {\n            if (i.flavor === 'healing' && !i.expression.toLowerCase().includes('x')) {\n                newFormula += i.expression + 'x[' + i.flavor + ']';\n            } else {\n                newFormula += i.formula;\n            }\n        }\n    }\n    let damageRoll = await new Roll(newFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","export function eyesOfMinuteSeeing(skillId, options) {\n    return skillId != 'inv' ? false : {'label': 'This check relies on searching or studying and object.', 'type': 'advantage'};\n}","export function eyesOfTheEagle(skillId, options) {\n    return skillId != 'prc' ? false : {'label': 'This check relies on sight.', 'type': 'advantage'};\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    //Animations by: eskiemoh\n    if (!workflow.templateUuid) return;\n    let color = chris.getConfiguration(workflow.item, 'animation') ?? 'green';\n    if (color === 'none' || chris.jb2aCheck() === 'free' || !chris.aseCheck()) return;\n    let tintColor;\n    let hue;\n    switch (color) {\n        case 'blue':\n            tintColor = '0x91c5d2';\n            hue = '160';\n            break;\n        case 'green':\n            tintColor = '0xd3eb6a';\n            hue = '45';\n            break;\n        case 'purple':\n            tintColor = '0xdcace3';\n            hue = '250';\n    }\n    let templateDoc = await fromUuid(workflow.templateUuid);\n    if (!templateDoc) return;\n    let template = templateDoc.object;\n    let position = template.ray.project(0.5);\n    new Sequence()\n        .effect()\n        .file('animated-spell-effects-cartoon.flash.25')\n        .atLocation(position)\n        .scale(0.05)\n        .playbackRate(1)\n        .duration(1500)\n        .opacity(0.75)\n        .scaleIn(0, 1000, {'ease': 'easeOutCubic'})\n        .filter('ColorMatrix', {'brightness': 0, 'hue': hue})\n        .filter('Blur', {'blurX': 5, 'blurY': 10 })\n        .animateProperty('sprite', 'width', {'from': 0, 'to': -0.25, 'duration': 2500, 'gridUnits': true, 'ease': 'easeInOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': -0.25, 'duration': 2500, 'gridUnits': true, 'ease': 'easeInOutBack'})\n        .belowTokens()\n\n        .effect()\n        .file('jb2a.particles.outward.white.01.03')\n        .atLocation(position)\n        .scale(0.025)\n        .playbackRate(1)\n        .duration(1500)\n        .fadeIn(1500)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .filter('ColorMatrix', {'hue': hue})\n        .animateProperty('sprite', 'width', {'from': 0, 'to': 0.5, 'duration': 2500, 'gridUnits' :true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': 1, 'duration': 2500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'position.y', {'from': 0, 'to': -0.45, 'duration': 2500, 'gridUnits': true})\n\n        .effect()\n        .file('jb2a.sacred_flame.target.' + color)\n        .atLocation(position)\n        .scale(0.05)\n        .playbackRate(1)\n        .duration(1500)\n        .scaleIn(0, 1500, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'width', {'from': 0, 'to': 0.5, 'duration': 2500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'height', {'from': 0, 'to': 0.5, 'duration': 2500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .animateProperty('sprite', 'position.y', {'from': 0, 'to': -0.25, 'duration': 2500, 'gridUnits': true, 'ease': 'easeOutBack'})\n        .waitUntilFinished(-200)\n\n        .effect()\n        .file('jb2a.impact.010.' + color)\n        .atLocation(position, {'offset': {'y':-0.25}, 'gridUnits': true})\n        .scale(0.45)\n        .randomRotation()\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.particles.outward.white.01.03')\n        .scaleIn(0, 500, {'ease': 'easeOutQuint'})\n        .fadeOut(1000)\n        .atLocation(position, {'offset': {'y':-0.25}, 'gridUnits': true})\n        .randomRotation()\n        .duration(2500)\n        .size(3, {'gridUnits': true})\n        .filter('Glow', {'color': tintColor, 'distance': 10})\n        .zIndex(2)\n\n        .effect()\n        .file('jb2a.fireflies.{{Pfew}}.02.' + color)\n        .atLocation(position, {'randomOffset': 0.25})\n        .scaleToObject(1.8)\n        .randomRotation()\n        .duration(750)\n        .fadeOut(500)\n        .setMustache({\n            'Pfew': ()=> {\n                let Pfews = ['few','many'];\n                return Pfews[Math.floor(Math.random()*Pfews.length)];\n            }\n        })\n        .repeats(10, 75, 75)\n        .zIndex(1)\n\n        .effect()\n        .file('animated-spell-effects-cartoon.energy.pulse.yellow')\n        .atLocation(position, {'offset': {'y':-0.25}, 'gridUnits': true})\n        .size(5, {'gridUnits': true})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness':2, 'hue': hue})\n        .fadeOut(250)\n        .filter('Blur', {'blurX': 10, 'blurY': 10})\n        .zIndex(0.5)\n\n        .effect()\n        .delay(50)\n        .file('animated-spell-effects-cartoon.energy.pulse.yellow')\n        .atLocation(position, {'offset': {'y':-0.25}, 'gridUnits': true})\n        .size(5, {'gridUnits': true})\n        .filter('ColorMatrix', {'hue': hue})\n        .zIndex(0.5)\n\n        .play();\n    if (!workflow.failedSaves.size) return;\n    await (warpgate.wait(1000));\n    for (let i of workflow.failedSaves) {\n        new Sequence()\n            .effect()\n            .file('jb2a.fireflies.many.01.' + color)\n            .attachTo(i)\n            .scaleToObject(1.4)\n            .persist()\n            .randomRotation()\n            .fadeIn(500, {'delay':500})\n            .fadeOut(1500, {'ease': 'easeInSine'})\n            .name('Faerie Fire')\n            .private()\n\n            .effect()\n            .from(i)\n            .belowTokens()\n            .attachTo(i)\n            .scaleToObject(i.document.texture.scaleX)\n            .spriteRotation(i.document.texture.rotation*-1)\n            .filter('Glow', {'color': tintColor, 'distance': 20})\n            .persist()\n            .fadeIn(1500, {'delay' :500})\n            .fadeOut(1500, {'ease': 'easeInSine'})\n            .zIndex(0.1)\n            .name('Faerie Fire')\n            .play();\n    }\n}\nasync function animationEnd(token, origin) {\n    let color = chris.getConfiguration(origin, 'animation') ?? 'green';\n    if (color === 'none' || chris.jb2aCheck() === 'free' || !chris.aseCheck()) return;\n    Sequencer.EffectManager.endEffects({'name': 'Faerie Fire', object: token});\n}\nexport let faerieFire = {\n    'item': item,\n    'animationEnd': animationEnd\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function fallenPuppet({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let amplify = await chris.dialog('Amplify Blood Curse?', [['Yes', true], ['No', false]]);\n    if (!amplify) return;\n    let damageDice = workflow.actor.system.scale['blood-hunter']['crimson-rite'];\n    if (!damageDice) {\n        ui.notifications.warn('Source actor does not appear to have a Crimson Rite scale!');\n        return;\n    }\n    let roll = await new Roll(damageDice + '[none]').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(workflow.token, roll.total, 'none');\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Blood Curse of the Fallen Puppet');\n    if (!effect) return;\n    let modifier = chris.getSpellMod(workflow.item);\n    let updates = {\n        'changes': [\n            {\n                'key': 'system.bonuses.All-Attacks',\n                'mode': 2,\n                'priority': 20,\n                'value': '+' + modifier\n            }\n        ]\n    };\n    await chris.updateEffect(effect, updates);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token || !workflow.actor) return;\n    let queueSetup = queue.setup(workflow.item.uuid, 'farStep', 50);\n    if (!queueSetup) return;\n    await workflow.actor.sheet.minimize();\n    await teleport(workflow.item, workflow.token, true);\n    await workflow.actor.sheet.maximize();\n    queue.remove(workflow.item.uuid);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Far Step - Teleport', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Far Step - Teleport');\n    async function effectMacro() {\n        await chrisPremades.macros.farStep.end(token, origin);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Far Step',\n        'description': 'Far Step'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function teleport(item, token, passive) {\n    let interval = token.document.width % 2 === 0 ? 1 : -1;\n    let position = await chris.aimCrosshair(token, 60, token.document.texture.src, interval, token.document.width);\n    if (position.cancelled) return;\n    let animation = chris.getConfiguration(item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon') animation === 'simple';\n    if (animation === 'simple') {\n        await new Sequence()\n            .effect()\n            .file('jb2a.misty_step.01.blue')\n            .atLocation(token)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(750)\n            .animation()\n            .on(token)\n            .opacity(0.0)\n            .waitUntilFinished()\n            .play();\n        let newCenter = canvas.grid.getSnappedPosition(position.x - token.w / 2, position.y - token.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x,\n                'y': newCenter.y\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': 'Far Step Teleport',\n            'description': 'Far Step Teleport',\n            'updateOpts': {'token': {'animate': false}}\n        };\n        await warpgate.mutate(token.document, targetUpdate, {}, options);\n        await new Sequence()\n            .effect()\n            .file('jb2a.misty_step.02.blue')\n            .atLocation(token)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(1500)\n            .animation()\n            .on(token)\n            .opacity(1.0)\n            .play();\n    } else {\n        let selected = token.document;\n        //Animations by: eskiemoh\n        new Sequence()\n            .effect()\n            .file('jb2a.explosion.07.bluewhite')\n            .atLocation(position)\n            .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n            .fadeOut(1000)\n            .scale({'x': selected.width / 4, 'y': selected.height / 4})\n            \n            .animation()\n            .on(selected)\n            .opacity(0)\n            \n            .effect()\n            .file('jb2a.energy_strands.range.standard.blue.04')\n            .atLocation(selected)\n            .stretchTo(position)\n            .waitUntilFinished(-2000)\n            .playbackRate(1.25)\n            \n            .effect()\n            .file('jb2a.explosion.07.bluewhite')\n            .atLocation(position)\n            .scale({'x': selected.width / 4, 'y': selected.height / 4})\n            .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n            .fadeOut(1000)\n            \n            .animation()\n            .on(selected)\n            .teleportTo(position)\n            .snapToGrid()\n            .offset({'x': -1, 'y': -1 })\n            .waitUntilFinished()\n            \n            .animation()\n            .on(selected)\n            .opacity(1)\n            .waitUntilFinished()\n            \n            .play();\n\n        if (passive) new Sequence()            \n            .effect()\n            .file('jb2a.token_border.circle.spinning.blue.001')\n            .name('Far Step')\n            .scaleIn(0, 1000, {'ease': 'easeOutElastic'})\n            .persist()\n            .scaleOut(0, 500, {'ease': 'easeOutElastic'})\n            .atLocation(selected)\n            .attachTo(selected, {'bindAlpha': false})\n            .scaleToObject(2)\n            .play();\n    }\n    await warpgate.wait(1000);\n}\nasync function end(token, origin) {\n    await warpgate.revert(token.document, 'Far Step');\n    let animation = chris.getConfiguration(origin, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon') animation === 'simple';\n    if (animation === 'simple') return;\n    await Sequencer.EffectManager.endEffects({'name': 'Far Step'});\n}\nasync function bonus({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token || !workflow.actor) return;\n    let queueSetup = queue.setup(workflow.item.uuid, 'farStepBonus', 50);\n    if (!queueSetup) return;\n    let feature = chris.getItem(workflow.actor, 'Far Step');\n    if (!feature) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await workflow.actor.sheet.minimize();\n    await teleport(workflow.item, workflow.token, false);\n    await workflow.actor.sheet.maximize();\n    queue.remove(workflow.item.uuid);\n}\nexport let farStep = {\n    'item': item,\n    'end': end,\n    'teleport': teleport,\n    'bonus': bonus\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function extraDamage(workflow) {\n    let damageFormula = workflow.damageRoll._formula;\n    let scale = workflow.actor.system.scale?.ranger?.['favored-foe']?.formula;\n    if (!scale) return;\n    let bonusDamageFormula = scale + '[' + workflow.defaultDamageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n}\nexport async function favoredFoe({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let originItem = chris.getItem(workflow.actor, 'Favored Foe');\n    if (!originItem) return;\n    let turnCheck = chris.perTurnCheck(originItem, 'feature', 'favoredFoe', true, workflow.token.id);\n    if (!turnCheck) return;\n    let targetToken = workflow.targets.first();\n    let effect = targetToken.actor.effects.find(e => e.name === 'Favored Foe' && e.origin === originItem.uuid);\n    let queueSetup = await queue.setup(workflow.item.uuidk, 'favoredFoe', 250);\n    if (!queueSetup) return;\n    if (effect) {\n        await extraDamage(workflow);\n        if (chris.inCombat()) await chris.setTurnCheck(originItem, 'feature', 'favoredFoe');\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let uses = originItem.system.uses.value;\n    if (!uses) return;\n    let selection = await chris.dialog(originItem.name, constants.yesNo, 'Use Favored Foe?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(originItem, config, options);\n    await originItem.update({'system.uses.value': uses - 1});\n    await extraDamage(workflow);\n    if (chris.inCombat()) await chris.setTurnCheck(originItem, 'feature', 'favoredFoe');\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function feyPresence({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 0) return;\n    let selection = await chris.dialog('What condition?', [['Charmed', 'Charmed'], ['Frightened', 'Frightened']]);\n    if (!selection) selection = 'Charmed';\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': selection,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnEndSource'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    for (let token of workflow.failedSaves) {\n        await chris.createEffect(token.actor, effectData);\n    }\n}","export async function fuming({speaker, actor, token, character, item, args, scope, workflow}) {\n    let feature = workflow.actor.items.getName('Fuming');\n    if (!feature) return;\n    await feature.use();\n}","import {chris} from '../../../helperFunctions.js';\nexport async function tricksy({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.templateId) return;\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.update({\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'darkness': true\n                }\n            },\n            'limits': {\n                'sight': {\n                    'basicSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'ghostlyGaze': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'lightPerception': {\n                        'enabled': true,\n                        'range': 0\n                    }\n                },\n                'light': {\n                    'enabled': true,\n                    'range': 0\n                }\n            },\n            'walledtemplates': {\n                'wallRestriction': 'move',\n                'wallsBlock': 'recurse'\n            }\n        }\n    });\n\n    let xray = game.settings.get('chris-premades', 'Show Limits Animations');\n    new Sequence().effect().file('jb2a.darkness.black').scaleToObject(1.25).aboveLighting().opacity(0.5).xray(xray).persist(true).attachTo(template).play();\n    let effect = chris.findEffect(workflow.actor, workflow.item.name + ' Template');\n    if (!effect) return;\n    if (!chris.inCombat()) return;\n    await effect.update({\n        'name': effect.name + ' (' + game.combat.round + '-' + game.combat.turn + ')',\n        'origin': workflow.actor.uuid,\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnEndSource'\n                ]\n            }\n        }\n    });\n}","import {fuming} from './fuming.js';\nimport {tricksy} from './tricksy.js';\nexport let feySpirit = {\n    'tricksy': tricksy,\n    'fuming': fuming\n}","import {chris} from '../../../helperFunctions.js';\nexport async function claws({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('Use teleportation?', [['Yes', true], ['No', false]]);\n    if (!selection) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Claws (Yugoloth Only) - Teleport', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Claws (Yugoloth Only) - Teleport');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    await feature.use();\n}","export async function deathThroes(origin) {\n    await origin.use();\n}","import {claws} from './claws.js';\nimport {deathThroes} from './deathThroes.js';\nexport let fiendishSpirit = {\n    'deathThroes': deathThroes,\n    'claws': claws\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? 'Familiars';\n    if (folder === '') folder = 'Familiars';\n    let actors = game.actors.filter(i => i.folder?.name === folder);\n    if (actors.length < 1) {\n        ui.notifications.warn('No actors found in familiars folder! (Default named \"Familiars\")');\n        return;\n    }\n    let sourceActor = await chris.selectDocument('Choose Familiar', actors);\n    if (!sourceActor) return;\n    let creatureType = await chris.dialog('What creature type?', [['Celestial', 'celestial'], ['Fey', 'fey'], ['Fiend', 'fiend']]);\n    if (!creatureType) return;\n    let name = await chris.getConfiguration(workflow.item, 'name');\n    if (!name || name === '') name = sourceActor[0].name + ' Familiar';\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'type': {\n                        'value': creatureType\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let attackData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Find Familiar - Attack', false);\n    if (!attackData) return;\n    attackData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Find Familiar - Attack');\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [attackData.name]: attackData\n            }\n        }\n    }\n    let updates3 = {\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'findFamiliar': true\n                },\n                'vae': {\n                    'button': attackData.name\n                }\n            }\n        }\n    }\n    if (chris.getItem(workflow.actor, 'Eldritch Invocations: Investment of the Chain Master')) { \n        let movement = await chris.dialog('Which Movement Type?', [['Flying', 'fly'], ['Swimming', 'swim']]);\n        let weaponItems = sourceActor[0].items.filter(i => i.type === 'weapon');\n        let saveItems = sourceActor[0].items.filter(i => i.system.save.dc != null);\n        for (let i of weaponItems) {\n            setProperty(updates, 'embedded.Item.' + i.name + '.system.properties.mgc', true);\n        }\n        let saveDC = chris.getSpellDC(workflow.item);\n        for (let i of saveItems) {\n            setProperty(updates, 'embedded.Item.' + i.name + '.system.save.dc', saveDC);\n        }\n        setProperty(updates, 'actor.system.attributes.movement.' + movement, 40);\n        let commandData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Investment of the Chain Master - Command', false);\n        if (!commandData) return;\n        commandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investment of the Chain Master - Command');\n        let resistanceData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Investment of the Chain Master - Familiar Resistance', false);\n        if (!resistanceData) return;\n        resistanceData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investment of the Chain Master - Familiar Resistance');\n        setProperty(updates, 'embedded.Item.Investment of the Chain Master - Familiar Resistance', resistanceData);\n        setProperty(updates2, 'embedded.Item.Investment of the Chain Master - Command', commandData);\n        setProperty(updates3, 'flags.effectmacro.onTurnStart.script', 'chrisPremades.macros.investmentOfTheChainMaster.turnStart(effect)');\n    }\n    let options = {\n        'permanent': false,\n        'name': 'Find Familiar',\n        'description': 'Find Familiar'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let defaultAnimations = {\n        'celestial': 'celestial',\n        'fey': 'nature',\n        'fiend': 'fire'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + creatureType) ?? defaultAnimations[creatureType];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActor, updates, 86400, workflow.item, undefined, undefined, 10, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    setProperty(updates3, 'flags.effectmacro.onDelete.script', effect.flags.effectmacro?.onDelete?.script + '; await warpgate.revert(token.document, \"Find Familiar\");');\n    await chris.updateEffect(effect, updates3);\n}\nasync function attackApply({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = workflow.actor.effects.find((e) => e?.flags['chris-premades']?.spell?.findFamiliar === true);\n    if (!effect) return;\n    let familiarId = effect.flags['chris-premades']?.summons?.ids[effect.name][0];\n    if (!familiarId) return;\n    let familiarToken = canvas.scene.tokens.get(familiarId);\n    if (!familiarToken) return;\n    if (chris.getDistance(workflow.token, familiarToken) > 100) {\n        ui.notifications.info('Familiar Too Far Away!');\n        return;\n    }\n    let effectData = {\n        'name': 'Find Familiar Attack',\n        'icon': workflow.item.img,\n        'origin': effect.origin.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.rangeOverride.attack.all',\n                'mode': 0,\n                'value': 1,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'priority': 20,\n                'value': 'function.chrisPremades.macros.findFamiliar.attackEarly,preambleComplete'\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    '1Attack'\n                ]\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n    await chris.createEffect(familiarToken.actor, effectData);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell' || workflow.item.system.range.units != 'touch') {\n        ui.notifications.info('Invalid Spell Type!');\n        return false;\n    }\n    let effect = workflow.actor.effects.find((e) => e.value?.flags['chris-premades']?.spell?.findFamiliar === true);\n    if (!effect) return;\n    let familiarId = effect.flags['chris-premades']?.summons?.ids[effect.name][0];\n    if (!familiarId) return;\n    let familiarToken = canvas.scene.tokens.get(familiarId);\n    if (!familiarToken) return;\n    await chris.addCondition(familiarToken.actor, 'Reaction');\n}\nexport let findFamiliar = {\n    'item': item,\n    'attackApply': attackApply,\n    'attackEarly': attackEarly\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? 'Greater Steeds';\n    if (folder === '') folder = 'Greater Steeds';\n    let actors = game.actors.filter(i => i.folder?.name === folder);\n    if (actors.length < 1) {\n        ui.notifications.warn('No actors found in steeds folder! (Default named \"Greater Steeds\")');\n        return;\n    }\n    let sourceActor = await chris.selectDocument('Choose Greater Steed', actors);\n    if (!sourceActor) return;\n    let creatureType = await chris.dialog('What creature type?', [['Celestial', 'celestial'], ['Fey', 'fey'], ['Fiend', 'fiend']]);\n    if (!creatureType) return;\n    let languageOptions = (Array.from(workflow.actor.system.traits.languages.value).map(i => [i.charAt(0).toUpperCase() + i.slice(1), i]));\n    if (!languageOptions) return;\n    let languageSelected = new Set(await chris.dialog('What language?', languageOptions));\n    if (!languageSelected) return;\n    let sourceActorIntelligence = sourceActor[0].system.abilities.int.value;\n    if (sourceActorIntelligence < 6) sourceActorIntelligence = 6;\n    let name = await chris.getConfiguration(workflow.item, 'name') ?? sourceActor[0].name + ' Greater Steed';\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'abilities': {\n                    'int': {\n                        'value': sourceActorIntelligence\n                    }\n                },\n                'details': {\n                    'type': {\n                        'value': creatureType\n                    }\n                },\n                'traits': {\n                    'languages': languageSelected\n                }\n            },\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let updates2 = {\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'priority': 20,\n                'value': 'function.chrisPremades.macros.findGreaterSteed.onUse,preambleComplete'\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'findGreaterSteed': true\n                }\n            }\n        }\n    };\n    let defaultAnimations = {\n        'celestial': 'celestial',\n        'fey': 'nature',\n        'fiend': 'fire'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + creatureType) ?? defaultAnimations[creatureType];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActor, updates, 86400, workflow.item, undefined, undefined, 30, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    await chris.updateEffect(effect, updates2);\n}\nasync function onUse({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell') return;\n    if (workflow.targets.size != 1) return;\n    if (workflow.targets.first().id != workflow.token.id) return;\n    let effect = Array.from(workflow.actor.effects).find((e) => e.flags['chris-premades']?.spell?.findGreaterSteed === true);\n    if (!effect) return;\n    let steedId = effect.flags['chris-premades']?.summons?.ids[effect.name][0];\n    if (!steedId) return;\n    let steedToken = canvas.scene.tokens.get(steedId).object;\n    if (!steedToken) return;\n    if (chris.getDistance(workflow.token, steedToken) > 5) return;\n    if (await chris.dialog('Find Greater Steed', [['Yes', false], ['No', true]], 'Target Steed as well? (If mounted)')) return;\n    let newTargets = [workflow.token.id, steedId];\n    chris.updateTargets(newTargets);\n}\nexport let findGreaterSteed = {\n    'item': item,\n    'onUse': onUse\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? 'Steeds';\n    if (folder === '') folder = 'Steeds';\n    let actors = game.actors.filter(i => i.folder?.name === folder);\n    if (actors.length < 1) {\n        ui.notifications.warn('No actors found in steeds folder! (Default named \"Steeds\")');\n        return;\n    }\n    let sourceActor = await chris.selectDocument('Choose Steed', actors);\n    if (!sourceActor) return;\n    let creatureType = await chris.dialog('What creature type?', [['Celestial', 'celestial'], ['Fey', 'fey'], ['Fiend', 'fiend']]);\n    if (!creatureType) return;\n    let languageOptions = (Array.from(workflow.actor.system.traits.languages.value).map(i => [i.charAt(0).toUpperCase() + i.slice(1), i]));\n    if (!languageOptions) return;\n    let languageSelected = new Set(await chris.dialog('What language?', languageOptions));\n    if (!languageSelected) return;\n    let sourceActorIntelligence = sourceActor[0].system.abilities.int.value;\n    if (sourceActorIntelligence < 6) sourceActorIntelligence = 6;\n    let name = await chris.getConfiguration(workflow.item, 'name') ?? sourceActor[0].name + ' Steed';\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'abilities': {\n                    'int': {\n                        'value': sourceActorIntelligence\n                    }\n                },\n                'details': {\n                    'type': {\n                        'value': creatureType\n                    }\n                },\n                'traits': {\n                    'languages': languageSelected\n                }\n            },\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let updates2 = {\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'priority': 20,\n                'value': 'function.chrisPremades.macros.findSteed.onUse,preambleComplete'\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'findSteed': true\n                }\n            }\n        }\n    };\n    let defaultAnimations = {\n        'celestial': 'celestial',\n        'fey': 'nature',\n        'fiend': 'fire'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + creatureType) ?? defaultAnimations[creatureType];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActor, updates, 86400, workflow.item, undefined, undefined, 30, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    await chris.updateEffect(effect, updates2);\n}\nasync function onUse({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell') return;\n    if (workflow.targets.size != 1) return;\n    if (workflow.targets.first().id != workflow.token.id) return;\n    let effect = Array.from(workflow.actor.effects).find((e) => e.flags['chris-premades']?.spell?.findSteed === true);\n    if (!effect) return;\n    let steedId = effect.flags['chris-premades']?.summons?.ids[effect.name][0];\n    if (!steedId) return;\n    let steedToken = canvas.scene.tokens.get(steedId).object;\n    if (!steedToken) return;\n    if (chris.getDistance(workflow.token, steedToken) > 5) return;\n    if (await chris.dialog('Find Steed', [['Yes', false], ['No', true]], 'Target Steed as well? (If mounted)')) return;\n    let newTargets = [workflow.token.id, steedId];\n    chris.updateTargets(newTargets);\n}\nexport let findSteed = {\n    'item': item,\n    'onUse': onUse\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function fireForm(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0) return;\n    if (!(workflow.item.system.actionType === 'mwak' || workflow.item.system.actionType === 'msak')) return;\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance > 5) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Fire Form', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fire Form');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport async function douseFire({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Fire Form');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport async function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Douse Fire');\n    if (effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Douse Fire', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Douse Fire');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Douse Fire');\n    }\n    let effectData = {\n        'name': 'Douse Fire',\n        'icon': featureData.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': featureData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}\nexport async function effectEnd(actor) {\n    let effect = chris.findEffect(actor, 'Douse Fire');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function touch({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Douse Fire');\n    if (effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Douse Fire', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Douse Fire');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Douse Fire');\n    }\n    let effectData = {\n        'name': 'Douse Fire',\n        'icon': featureData.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n        }\n    };\n    let effects = {[effectData.name]: effectData};\n    let effect2 = chris.findEffect(targetActor, 'Fire Form');\n    if (!effect2) {\n        let effect2Data = {\n            'name': 'Fire Form',\n            'icon': 'icons/magic/fire/projectile-embers-orange.webp',\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.OverTime',\n                    'mode': 0,\n                    'value': 'turn=start,\\ndamageRoll=1d10,\\ndamageType=fire,\\nlabel=Fire Form (Start of Turn)',\n                    'priority': 20\n                },\n                {\n                    'key': 'macro.tokenMagic',\n                    'mode': 0,\n                    'value': 'fire',\n                    'priority': 20\n                }\n            ],\n            'duration': {\n                'seconds': 604800\n            },\n            'origin': workflow.item.uuid,\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': 'await chrisPremades.macros.monster.fireElemental.effectEnd(actor);'\n                    }\n                }\n            }\n        }\n        effects[effect2Data.name] = effect2Data;\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': effects\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': featureData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}","import {fireForm, douseFire, item, effectEnd} from './fireForm.js';\nimport {touch} from './touch.js';\nexport let fireElemental = {\n    'fireForm': fireForm,\n    'douseFire': douseFire,\n    'fireFormItem': item,\n    'effectEnd': effectEnd,\n    'touch': touch\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let queueSetup = queue.setup(workflow.item.uuid, 'fireShield', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, [['Warm Shield', 'fire'], ['Cold Shield', 'cold']], 'What kind of shield?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Fire Shield - Dismiss', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fire Shield - Dismiss');\n    async function effectMacro() {\n        await chrisPremades.macros.fireShield.end(token, origin);\n    }\n    let resistance = {\n        'fire': 'cold',\n        'cold': 'fire'\n    };\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 600\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': resistance[selection],\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.feature.onHit.fireShield',\n                'mode': 5,\n                'value': true,\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.dim',\n                'mode': 4,\n                'value': '20',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': '10',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'fireShield': selection\n                },\n                'vae': {\n                    'button': featureData.name\n                }\n            },\n            'autoanimations': {\n                'isEnabled': false,\n                'version': 5\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Fire Shield',\n        'description': 'Fire Shield'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    queue.remove(workflow.item.uuid);\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return;\n    await animation(workflow.token, selection, 'Fire Shield');\n}\nasync function animation(token, selection, name) {\n    let colors = {\n        'fire': 'orange',\n        'cold': 'blue'\n    };\n    let altColors = {\n        'fire': 'yellow',\n        'cold': 'blue'\n    };\n    //Animations by: eskiemoh\n    new Sequence()\n        .effect()\n        .file('jb2a.impact.ground_crack.' + colors[selection] + '.01')\n        .atLocation(token)\n        .belowTokens()\n        .scaleToObject(3)\n\n        .effect()\n        .file('jb2a.particles.outward.' + colors[selection] + '.01.03')\n        .atLocation(token)\n        .delay(200)\n        .scaleIn(0.5, 250)\n        .fadeOut(3000)\n        .duration(15000)\n        .scaleToObject(2.75)\n        .playbackRate(1)\n        .zIndex(2)\n\n        .effect()\n        .file('jb2a.energy_strands.in.' + altColors[selection] + '.01.2')\n        .atLocation(token)\n        .delay(200)\n        .scaleIn(0.5, 250)\n        .duration(2000)\n        .belowTokens()\n        .scaleToObject(2.75)\n        .playbackRate(1)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.token_border.circle.spinning.' + colors[selection] + '.004')\n        .atLocation(token)\n        .scaleToObject(2.2)\n        .playbackRate(1)\n        .attachTo(token)\n        .persist()\n        .name(name)\n\n        .effect()\n        .file('jb2a.shield_themed.below.fire.03.' + colors[selection])\n        .atLocation(token)\n        .delay(1000)\n        .persist()\n        .fadeIn(500)\n        .attachTo(token)\n        .fadeOut(200)\n        .belowTokens()\n        .scaleToObject(1.7)\n        .playbackRate(1)\n        .name(name)\n\n        .effect()\n        .file('jb2a.shield_themed.above.fire.03.' + colors[selection])\n        .atLocation(token)\n        .persist()\n        .fadeIn(3500)\n        .attachTo(token)\n        .fadeOut(200)\n        .scaleToObject(1.7)\n        .zIndex(0)\n        .playbackRate(1)\n        .name(name)\n\n        .play();\n}\nasync function end(token, origin) {\n    await warpgate.revert(token.document, 'Fire Shield');\n    let animation = chris.getConfiguration(origin, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return;\n    await Sequencer.EffectManager.endEffects({'name': 'Fire Shield', 'object': token});\n}\nasync function stop({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.spell?.fireShield);\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nasync function onHit(workflow, targetToken) {\n    if (!workflow.hitTargets.size) return;\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance > 5) return;\n    if (!constants.meleeAttacks.includes(workflow.item.system.actionType)) return;\n    let effect = targetToken.actor.effects.find(i => i.flags['chris-premades']?.spell?.fireShield);\n    if (!effect) return;\n    let type = effect.flags['chris-premades'].spell.fireShield;\n    let featureNames = {\n        'cold': 'Chill Shield',\n        'fire': 'Warm Shield'\n    };\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', featureNames[type], false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', featureNames[type]);\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    let queueSetup = await queue.setup(workflow.item.uuid, 'fireShield', 50);\n    if (!queueSetup) return;\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nexport let fireShield = {\n    'item': item,\n    'end': end,\n    'stop': stop,\n    'onHit': onHit,\n    'animation': animation\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function heatedBody(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0) return;\n    if (!(workflow.item.system.actionType === 'mwak' || workflow.item.system.actionType === 'msak')) return;\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance > 5) return;\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Heated Body');\n    if (!effect) return;\n    let feature = await fromUuid(effect.origin);\n    if (!feature) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {heatedBody} from './heatedBody.js';\nexport let fireSnake = {\n    'heatedBody': heatedBody\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function fireStorm({speaker, actor, token, character, item, args, scope, workflow}) {\n    let playAnimation = chris.getConfiguration(workflow.item, 'animation') ?? true;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'fireStorm', 50);\n    if (!queueSetup) return;\n    let templateData = {\n        't': 'rect',\n        'user': game.user,\n        'distance': 14.14,\n        'direction': 45,\n        'x': 3080,\n        'y': 1680,\n        'fillColor': game.user.color,\n        'flags': {\n            'dnd5e': {\n                'origin': workflow.item.uuid\n            }\n        },\n        'width': 10,\n        'angle': 0\n    };\n    let templateDoc = new CONFIG.MeasuredTemplate.documentClass(templateData, {'parent': canvas.scene});\n    let templates = [];\n    await workflow.actor.sheet.minimize();\n    ui.notifications.info('Place up to 10 templates. Right click to finish.');\n    for (let i = 0; i < 10; i++) {\n        let template = new game.dnd5e.canvas.AbilityTemplate(templateDoc);\n        try{\n            let [finalTemplate] = await template.drawPreview();\n            templates.push(finalTemplate);\n        } catch {}\n        if (templates.length != i + 1) break;\n    }\n    await workflow.actor.sheet.maximize();\n    if (!templates.length) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targets = new Set();\n    for (let i of templates) {\n        let position = i.object.ray.project(0.5);\n        if (playAnimation) {\n            new Sequence()\n                .effect()\n                .file('jb2a.explosion.01.orange')\n                .atLocation(position)\n                .scale(2)\n                .play();\n        }\n        let tokens = chris.templateTokens(i);\n        if (!tokens.length) continue;\n        for (let j of tokens) targets.add(j);\n    }\n    chris.updateTargets(Array.from(targets));\n    async function effectMacro() {\n        let templates = effect.flags['chris-premades']?.spell?.fireStorm?.templates;\n        if (!templates) return;\n        for (let i of templates) {\n            let template = await fromUuid(i);\n            if (!template) continue;\n            await template.delete();\n        }\n    }\n    let effectData = {\n        'label': workflow.item.name + ' Templates',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1,\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'fireStorm': {\n                        'templates': templates.map(i => i.uuid)\n                    }\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Fire Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'fireStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'fireStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, [['Yes', true], ['No', false]], 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.fireStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d10[' + translate.damageType('fire') + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    await originFeature.displayCard();\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.fireStrike.turn', '');\n}\nexport let fireStrike = {\n    'damage': damage,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nfunction setup(enabled) {\n    if (enabled) {\n        CONFIG.DND5E.weaponIds['firearmCR'] = 'chris-premades.CPR Item Features.rOfrToXtvyjWSD8B';\n        CONFIG.DND5E.featureTypes.class.subtypes.trickShot = 'Trick Shot';\n        Hooks.on('midi-qol.preItemRoll', status);\n        Hooks.on('midi-qol.preCheckHits', misfire);\n        Hooks.on('midi-qol.RollComplete', grit);\n        Hooks.on('midi-qol.RollComplete', critical);\n    } else {\n        delete CONFIG.DND5E.weaponIds['firearmCR'];\n        delete CONFIG.DND5E.featureTypes.class.subtypes.trickShot;\n        Hooks.off('midi-qol.preItemRoll', status);\n        Hooks.off('midi-qol.preCheckHits', misfire);\n        Hooks.off('midi-qol.RollComplete', grit);\n        Hooks.off('midi-qol.RollComplete', critical);\n    }\n}\nasync function reload({speaker, actor, token, character, item, args, scope, workflow}) {\n    let ammunition = workflow.actor.items.filter(i => i.system.consumableType === 'ammo' && i.system.quantity);\n    if (!ammunition.length) {\n        ui.notifications.info('You have no ammunition!');\n        return;\n    }\n    let weapons = workflow.actor.items.filter(i => i.system.baseItem === 'firearmCR' && i.system.uses.value != i.system.uses.max);\n    if (!weapons.length) {\n        ui.notifications.info('You have no firearms to reload!');\n        return;\n    }\n    let weapon;\n    if (weapons.length === 1) {\n        weapon = weapons[0];\n    } else {\n        [weapon] = await chris.selectDocument(workflow.item.name, weapons);\n    }\n    if (!weapon) return;\n    let ammo;\n    if (ammunition.length === 1) {\n        ammo = ammunition[0];\n    } else {\n        [ammo] = await chris.selectDocument(workflow.item.name, ammunition);\n    }\n    if (!ammo) return;\n    let usesLeft = ammo.system.quantity;\n    let clip = weapon.system.uses.value;\n    let clipSize = weapon.system.uses.max;\n    let ammoRestored = Math.min(usesLeft, clipSize - clip);\n    await weapon.update({'system.uses.value': clip + ammoRestored});\n    await ammo.update({'system.quantity': usesLeft - ammoRestored});\n}\nasync function status(workflow) {\n    if (!workflow.item) return;\n    let status = chris.getConfiguration(workflow.item, 'status');\n    if (!status) return;\n    ui.notifications.info('This firearm must be repaired first!');\n    return false;\n}\nasync function misfire(workflow) {\n    if (!workflow.item) return;\n    let baseItem = workflow.item.system.baseItem;\n    if (baseItem != 'firearmCR') return;\n    let proficient = workflow.item.system.proficient || workflow.item.actor.system.traits.weaponProf.value.has(baseItem);\n    let misfireScore = chris.getConfiguration(workflow.item, 'misfire') ?? 1;\n    if (!proficient) misfireScore += 1;\n    if (workflow.attackRoll.terms[0].total > misfireScore) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'misfire', 50);\n    if (!queueSetup) return;\n    await ChatMessage.create({\n        'speaker': {'alias': name},\n        'content': workflow.item.name + ' has misfired!'\n    });\n    if (workflow.item.id) {\n        let updates = {\n            'flags.chris-premades.configuration.status': 1,\n            'name': workflow.item.name += ' (Damaged)'\n        }\n        await workflow.item.update(updates);\n    }\n    queue.remove(workflow.item.uuid);\n    let effectData = {\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'name': 'Misfire',\n        'changes': [\n            {\n                'key': 'flags.midi-qol.fail.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    '1Attack'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function repair({speaker, actor, token, character, item, args, scope, workflow}) {\n    let repairFirearms = workflow.actor.items.filter(i => chris.getConfiguration(i, 'status') === 1);\n    if (!repairFirearms.length) {\n        ui.notifications.info('You have no firearms to repair!');\n        return;\n    }\n    let weapon;\n    if (repairFirearms.length === 1) weapon = repairFirearms[0];\n    if (!weapon) weapon = await chris.selectDocument(workflow.item.name, repairFirearms);\n    if (!weapon) return;\n    let tinker = workflow.actor.items.find(i => i.system.baseItem === 'tinker');\n    if (!tinker) {\n        ui.notifications.info('You have no Tinker\\'s Tools to make the repair with!');\n        return;\n    }\n    let roll = await workflow.actor.rollToolCheck('tinker');\n    let misfireDC = 8 + (chris.getConfiguration(weapon, 'misfire') ?? 1);\n    let updates;\n    if (roll.total >= misfireDC) {\n        updates = {\n            'flags.chris-premades.configuration.status': 0,\n            'name': weapon.name.replace(' (Damaged)', '')\n        }\n    } else {\n        updates = {\n            'flags.chris-premades.configuration.status': 2,\n            'name': weapon.name.replace(' (Damaged)', ' (Broken)')\n        }\n    }\n    await weapon.update(updates);\n}\nasync function grit(workflow) {\n    if (!workflow.item) return;\n    if (workflow.hitTargets.size != 1) return;\n    let baseItem = workflow.item.system.baseItem;\n    if (baseItem != 'firearmCR') return;\n    let regain = 0;\n    if (workflow.d20AttackRoll === 20 || (chris.getItem(workflow.actor, 'Vicious Intent') && workflow.d20AttackRoll === 19)) {\n        regain++;\n    }\n    if (workflow.damageItem) {\n        let oldHP = workflow.damageItem.oldHP;\n        let newHP = workflow.damageItem.newHP;\n        if (oldHP != 0 && newHP === 0) regain++;\n    }\n    if (!regain) return;\n    let feature = chris.getItem(workflow.actor, 'Adept Marksman');\n    if (!feature) return;\n    let max = feature.system.uses.max;\n    let value = feature.system.uses.value ?? 0;\n    if (value === max) return;\n    let clamped = Math.clamped(value + regain, 0, max);\n    await feature.update({'system.uses.value': clamped});\n    ui.notifications.info('Grit regained! (+' + regain + ')');\n}\nasync function critical(workflow) {\n    if (!workflow.item) return;\n    let baseItem = workflow.item.system.baseItem;\n    if (baseItem != 'firearmCR') return;\n    if (!workflow.isCritical || !workflow.damageRoll || workflow.targets.size != 1) return;\n    let feature = chris.getItem(workflow.actor, 'Hemorrhaging Critical');\n    if (!feature) return;\n    let damage = Math.floor(workflow.damageItem.appliedDamage / 2);\n    let effectData = {\n        'label': feature.name,\n        'icon': feature.img,\n        'origin': feature.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.OverTime',\n                'mode': 0,\n                'value': 'turn=end,damageRoll=' + damage + ',damageType=' + workflow.defaultDamageType + ',label=Hemorrhaging Critical',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnEnd'\n                ]\n            }\n        }\n    }\n    await feature.displayCard();\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nexport let firearm = {\n    'setup': setup,\n    'reload': reload,\n    'status': status,\n    'misfire': misfire,\n    'repair': repair,\n    'grit': grit,\n    'critical': critical\n}","import {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nexport async function flameBlade({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Flame Blade Scimitar', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Flame Blade Scimitar');\n    let featureData2 = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Evoke Flame Blade', false);\n    if (!featureData2) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Evoke Flame Blade');\n    let damageDice = 3;\n    switch (workflow.castData.castLevel) {\n        case 4:\n        case 5:\n            damageDice = 4\n            break;\n        case 6:\n        case 7:\n            damageDice = 5\n            break;\n        case 8:\n        case 9:\n            damageDice = 6;\n            break;\n    }\n    featureData.system.damage.parts[0][0] = damageDice + 'd6[' + translate.damageType('fire') + ']';\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Flame Blade');\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 600\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'ATL.light.dim',\n                'mode': 4,\n                'value': '20',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': '10',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData,\n                [featureData2.name]: featureData2\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Flame Blade',\n        'description': 'Flamde Blade'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {chris} from '../../helperFunctions.js';\nasync function animationStart(token, origin) {\n    //Animations by: eskiemoh\n    let animation = chris.getConfiguration(origin, 'animation') ?? 'default';\n    if (animation === 'none' || !chris.aseCheck()) return;\n    new Sequence()\n\t.effect()\n\t.file('animated-spell-effects-cartoon.air.puff.03')\n\t.atLocation(token)\n\t.scaleToObject(1.75)\n\t.belowTokens()\n\n\t.animation()\n\t.on(token)\n\t.opacity(0)\n\n\t.effect()\n\t.from(token)\n\t.name('Fly')\n\t.atLocation(token)   \n\t.opacity(1)\n\t.duration(800)\n\t.anchor({'x': 0.5, 'y': 0.7})\n\t.animateProperty('sprite', 'position.y', {'from': 30, 'to': 0, 'duration': 500})\n\t.loopProperty('sprite', 'position.y', {'from':0 , 'to':-30, 'duration': 2500, 'pingPong': true, 'delay':500})\n\t.attachTo(token, {'bindAlpha': false})\n\t.zIndex(2)\n\t.persist()\n\n\t.effect()\n\t.from(token)\n\t.name('Fly')\n\t.atLocation(token)\n\t.scaleToObject(0.9)\n\t.duration(1000)\n\t.opacity(0.5)\n\t.belowTokens()\n\t.filter('ColorMatrix', {'brightness': -1 })\n\t.filter('Blur', {'blurX': 5, 'blurY': 10 })\n\t.attachTo(token, {'bindAlpha': false})\n\t.zIndex(1)\n\t.persist()\n\n\t.play();\n}\nasync function animationEnd(token, origin) {\n    let animation = chris.getConfiguration(origin, 'animation') ?? 'default';\n    if (animation === 'none' || !chris.aseCheck) return;\n    await Sequencer.EffectManager.endEffects({'name': 'Fly', 'object': token });\n    new Sequence()\n        .animation()\n        .on(token)\n        .opacity(1)\n\n        .play();\n}\nexport let fly = {\n    'animationStart': animationStart,\n    'animationEnd': animationEnd\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function focusedAim({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.isFumble) return;\n    let feature = chris.getItem(workflow.actor, 'Ki Points');\n    if (!feature) return;\n    let featureUses = feature.system.uses.value;\n    if (!featureUses) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'focusedAim', 151);\n    if (!queueSetup) return;\n    let attackTotal = workflow.attackTotal;\n    let target = workflow.targets.first();\n    let targetAC = target.actor.system.attributes.ac.value;\n    if (targetAC <= attackTotal) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let featureMenu = [['Yes (1 Ki / +2 to hit)', 2]];\n    if (featureUses >= 2) featureMenu.push(['Yes (2 Ki / +4 to hit)', 4]);\n    if (featureUses >= 3) featureMenu.push(['Yes (3 Ki / +6 to hit)', 6]);\n    featureMenu.push(['No', false]);\n    let useFeature = await chris.dialog(feature.name, featureMenu, 'Attack roll (' + attackTotal + ') missed.  Use Focused Aim?');\n    if (!useFeature) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let updatedRoll = await chris.addToRoll(workflow.attackRoll, useFeature);\n    workflow.setAttackRoll(updatedRoll);\n    feature.update({'system.uses.value': featureUses - (useFeature / 2)});\n    let originItem = chris.getItem(workflow.actor, 'Focused Aim');\n    if (originItem) await originItem.use();\n    queue.remove(workflow.item.uuid);\n}\n","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let templateData = {\n        't': 'circle',\n        'user': game.user,\n        'distance': workflow.castData.castLevel * 20,\n        'direction': 0,\n        'fillColor': game.user.color,\n        'flags': {\n            'dnd5e': {\n                'origin': workflow.item.uuid\n            },\n            'midi-qol': {\n                'originUuid': workflow.item.uuid\n            },\n            'chris-premades': {\n                'spell': {\n                    'fogCloud': true\n                }\n            },\n            'limits': {\n                'sight': {\n                    'basicSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'devilsSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'lightPerception': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'seeAll': {\n                        'enabled': true,\n                        'range': 0\n                    }\n                }\n            },\n            'walledtemplates': {\n                'wallRestriction': 'move',\n                'wallsBlock': 'recurse',\n            }\n        },\n        'angle': 0\n    };\n    await workflow.actor.sheet.minimize();\n    let template = await chris.placeTemplate(templateData);\n    await workflow.actor.sheet.maximize();\n    if (!template) return;\n    let xray = game.settings.get('chris-premades', 'Show Limits Animations');\n    let path = 'jb2a.fog_cloud.01.white';\n    if (game.modules.get('jb2a_patreon')?.active) {\n        if (isNewerVersion('0.6.1', game.modules.get('jb2a_patreon').version)) path = 'jb2a.fog_cloud.1.white';\n    }\n    if (game.modules.get('walledtemplates')) {\n        new Sequence().effect().file(path).scaleToObject().aboveLighting().opacity(0.5).mask(template).xray(xray).persist(true).attachTo(template).play();\n    } else {\n        new Sequence().effect().file(path).scaleToObject().aboveLighting().opacity(0.5).xray(xray).persist(true).attachTo(template).play();\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'flags.dae.deleteUuid',\n                'mode': 5,\n                'priority': 20,\n                'value': template.uuid\n            }\n        ],\n        'duration': {\n            'seconds': chris.itemDuration(workflow.item).seconds\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function hook(workflow) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first().document;\n    if (!targetToken) return;\n    let sourceToken = workflow.token.document;\n    let sourceTemplates = game.modules.get('templatemacro').api.findContainers(sourceToken);\n    let sourceInFogCloud = false;\n    for (let i = 0; sourceTemplates.length > i; i++) {\n        let testTemplate = canvas.scene.collections.templates.get(sourceTemplates[i]);\n        if (!testTemplate) continue;\n        let fogCloud = testTemplate.flags['chris-premades']?.spell?.fogCloud;\n        if (fogCloud) {\n            sourceInFogCloud = true;\n            break;\n        }\n    }\n    let targetInFogCloud = false;\n    let targetTemplates = game.modules.get('templatemacro').api.findContainers(targetToken);\n    for (let i = 0; targetTemplates.length > i; i++) {\n        let testTemplate = canvas.scene.collections.templates.get(targetTemplates[i]);\n        if (!testTemplate) continue;\n        let darkness = testTemplate.flags['chris-premades']?.spell?.fogCloud;\n        if (darkness) {\n            targetInFogCloud = true;\n            break;\n        }\n    }\n    if (!sourceInFogCloud && !targetInFogCloud) return;\n    let distance = chris.getDistance(sourceToken, targetToken);\n    let sourceCanSeeTarget = false;\n    let targetCanSeeSource = false;\n    let sourceSenses = sourceToken.actor.system.attributes.senses;\n    let targetSenses = targetToken.actor.system.attributes.senses;\n    if ((sourceSenses.tremorsense >= distance) || (sourceSenses.blindsight >= distance)) sourceCanSeeTarget = true;\n    if ((targetSenses.tremorsense >= distance) || (targetSenses.blindsight >= distance)) targetCanSeeSource = true;\n    if (sourceCanSeeTarget && targetCanSeeSource) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'fogCloud', 50);\n    if (!queueSetup) return;\n    if (sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.attackAdvAttribution.add('Fog Cloud: Target Can\\'t See Source');\n    }\n    if (!sourceCanSeeTarget && targetCanSeeSource) {\n        workflow.disadvantage = true;\n        workflow.flankingAdvantage = false;\n        workflow.attackAdvAttribution.add('Fog Cloud: Source Can\\'t See Target');\n    }\n    if (!sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.disadvantage = true;\n        workflow.attackAdvAttribution.add('Fog Cloud: Target And Source Can\\'t See Eachother');\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let fogCloud = {\n    'item': item,\n    'hook': hook\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let feature = chris.getItem(workflow.actor, 'Form of Dread: Fear');\n    let feature2 = chris.getItem(workflow.actor, 'Form of Dread');\n    if (!feature || !feature2) return;\n    let useFeature = chris.perTurnCheck(feature2, 'feature', 'formOfDread', true, workflow.token.id);\n    if (!useFeature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'formOfDread', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Attempt to fear target?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) await feature2.setFlag('chris-premades', 'feature.formOfDread.turn', game.combat.round + '-' + game.combat.turn);\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feature.formOfDread.turn', '');\n}\nexport let formOfDread = {\n    'attack': attack,\n    'end': end\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function formOfTheBeast({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.appliedDamage === 0) return;\n    if (!chris.perTurnCheck(workflow.item, 'feature', 'formOfTheBeast', true, workflow.token.id)) return;\n    let maxHP = workflow.actor.system.attributes.hp.max;\n    let currentHP = workflow.actor.system.attributes.hp.value;\n    if (Math.ceil(maxHP / 2) <= currentHP) return;\n    await chris.applyDamage([workflow.token], workflow.actor.system.attributes.prof, 'healing');\n    await chris.setTurnCheck(workflow.item, 'feature', 'formOfTheBeast');\n}","import {chris} from '../../../helperFunctions.js';\nexport async function psionicRevitalization({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let damageRoll = await new Roll('1d6[psychic]').roll({async: true});\n    let nearbyTargets = await chris.findNearby(workflow.targets.first(), 10, 'all');\n    if (nearbyTargets.length === 0) return;\n    await chris.applyWorkflowDamage(workflow.token, damageRoll, 'psychic', nearbyTargets, workflow.item.name, workflow.itemCardId);\n}","import {psionicRevitalization} from './psionicRevitalization.js';\nexport let fragmentOfKrokulmar = {\n    'psionicRevitalization': psionicRevitalization\n}","export async function frostFingers({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = await fromUuid(workflow.templateUuid);\n    await new Sequence()\n        .effect()\n            .file('jb2a.cone_of_cold.blue')\n            .attachTo(template, {offset: {x: 1.5}, local: true, gridUnits: true})\n            .scaleToObject(1)\n            .scale({x: 1.25, y: 1.5})\n            .playbackRate(.7)\n            .belowTokens()\n            .waitUntilFinished(-5000)\n        .play();\n    for (let i of workflow.targets) {\n        new Sequence()\n            .effect()\n                .file('jb2a.markers.snowflake.blue.01')\n                .atLocation(i)\n                .scaleToObject(1.5)\n                .delay(150)\n                .fadeIn(500)\n                .fadeOut(500)\n                .playbackRate(2)\n            .play();\n    }\n    Hooks.once('midi-qol.postCheckSaves', async function() {\n        await warpgate.wait(2000);\n        for (let i of workflow.failedSaves) {\n            new Sequence()\n                .effect()\n                    .file('jb2a.impact_themed.ice_shard.blue')\n                    .atLocation(i)\n                    .scaleToObject(1.5)\n                    .delay(200)\n                    .playbackRate(0.75)\n                .play();\n        }\n        for (let i of workflow.saves) {\n            new Sequence()\n                .effect()\n                    .file('jb2a.energy_field.02.above.blue')\n                    .duration(3000)\n                    .startTime(1200)\n                    .atLocation(i)\n                    .scaleToObject(1)\n                    .playbackRate(2)\n                .play();\n        }\n    })\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Frost Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'frostStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'frostStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, [['Yes', true], ['No', false]], 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.frostStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d6[' + translate.damageType('cold') + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let saveDC = Math.max(workflow.actor.system.abilities.con.dc, workflow.actor.system.abilities.str.dc);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Strike of the Giants: Frost Strike', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Strike of the Giants: Frost Strike');\n    featureData.system.save.dc = saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.hitTargets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.frostStrike.turn', '');\n}\nexport let frostStrike = {\n    'damage': damage,\n    'end': end\n}","import {chris} from '../../../helperFunctions.js';\nexport async function sufferingEchoes({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 0) {\n        new Sequence().effect().atLocation(workflow.token).stretchTo(workflow.targets.first()).file('jb2a.eldritch_blast.purple.30ft').play();\n        return;\n    }\n    let nearbyTargets = chris.findNearby(workflow.targets.first(), 30, 'ally');\n    if (nearbyTargets.length === 0) return;\n    let buttons = [\n        {\n            'label': 'OK',\n            'value': true\n        }, {\n            'label': 'Cancel',\n            'value': false\n        }\n    ];\n    if (nearbyTargets.length > 3) {\n        let selection = await chris.selectTarget('What additional targets? Max: 3', buttons, nearbyTargets, true, 'multiple');\n        if (!selection.buttons) return;\n        nearbyTargets = [];\n        for (let i of selection.inputs) {\n            if (i) nearbyTargets.push(await fromUuid(i));\n        }\n        if (nearbyTargets.length > 3) {\n            ui.notifications.info('Too many targets selected!');\n            return;\n        }\n    }\n    let damageRoll = await new Roll('3d8[psychic]').roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(nearbyTargets, damageRoll.total, 'psychic');\n    new Sequence().effect().atLocation(workflow.token).stretchTo(workflow.targets.first()).file('jb2a.eldritch_blast.purple').play();\n    await warpgate.wait(1000);\n    for (let i of nearbyTargets) {\n        new Sequence().effect().atLocation(workflow.targets.first()).stretchTo(i).file('jb2a.eldritch_blast.purple').play();\n    }\n}","import {sufferingEchoes} from './sufferingEchoes.js';\nexport let gallowsSpeaker = {\n    'sufferingEchoes': sufferingEchoes\n}","import {chris} from '../../../../helperFunctions.js';\nlet states = {};\nasync function loop(token) {\n    while (states[token.id].state != 'stopped') {\n        let effect = 'jb2a.' + states[token.id].animation + '.loop.01.' + states[token.id].color;\n        switch (states[token.id].state) {\n            case 'ready':\n                await new Sequence()\n                    .effect()\n                        .atLocation(token)\n                        .file(effect)\n                        .attachTo(token)\n                        .scaleToObject(2)\n                        .name('swarm-' + token.id)\n                        .fadeIn(100)\n                        .fadeOut(100)\n                        .waitUntilFinished(-100)\n                    .play();\n                break;\n            case 'attack':\n                await new Sequence()\n                    .effect()\n                        .atLocation(token)\n                        .file(effect)\n                        .scaleToObject(2)\n                        .scaleOut(1.5, 500, {'delay': -500})\n                        .fadeIn(100)\n                        .fadeOut(100)\n                        .moveTowards(states[token.id].target, {'ease': 'easeInOutSine'})\n                        .waitUntilFinished(-100)\n                    .effect()\n                        .atLocation(states[token.id].target)\n                        .file('jb2a.' + states[token.id].animation + '.inward.01.' + states[token.id].color)\n                        .scaleToObject(2)\n                    .effect()\n                        .atLocation(states[token.id].target)\n                        .file(effect)\n                        .scaleToObject(4)\n                        .fadeIn(100)\n                        .fadeOut(100)\n                        .duration(3000)\n                        .waitUntilFinished(-100)\n                    .effect()\n                        .atLocation(states[token.id].target)\n                        .file(effect)\n                        .scaleToObject(4)\n                        .scaleOut(0.375, 500, {'delay': -2000})\n                        .fadeIn(100)\n                        .fadeOut(100)\n                        .moveTowards(token, {'ease': 'easeInOutSine'})\n                        .waitUntilFinished(-100)\n                    .play();\n                states[token.id].state = 'ready';\n                break;\n        }\n    }\n}\nfunction start(token, animation, color) {\n    setProperty(states, token.id, {'animation': animation, 'color': color, 'state': 'ready', 'target': null});\n    loop(token);\n}\nfunction stop(token) {\n    setProperty(states, token.id, {'animation': states[token.id]?.animation, 'color': states[token.id]?.color, 'state': 'stopped', 'target': null});\n}\nfunction attack(token, target) {\n    setProperty(states, token.id, {'animation': states[token.id]?.animation, 'color': states[token.id]?.color, 'state': 'attack', 'target': target});\n}\nlet stateMachine = {\n    'start': start,\n    'stop': stop,\n    'attack': attack,\n    'loop': loop\n}\nexport let gatheredSwarm = {\n    'animation': {\n        'stateMachine': stateMachine\n    }\n}","import {chris} from '../../../helperFunctions.js';\nexport async function autoGrapple({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    await chris.addCondition(workflow.targets.first().actor, 'Grappled', false, workflow.item.uuid);\n}","export async function regeneration(actor, origin) {\n    if (actor.system.attributes.hp.value != 0) await origin.use();\n}","import {queue} from '../../../utility/queue.js';\nexport async function swarmDamage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let hp = workflow.actor.system.attributes.hp.value;\n    let maxhp = workflow.actor.system.attributes.hp.max;\n    if (hp > Math.floor(maxhp / 2)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'swarmDamage', 50);\n    if (!queueSetup) return;\n    let damageFormula = workflow.damageRoll._formula;\n    let diceNum = Number(damageFormula.substring(0,1)) / 2;\n    let restOfFormula = damageFormula.substring(1);\n    let newFormula = diceNum + restOfFormula;\n    let damageRoll = await new Roll(newFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function prone({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.failedSaves.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, 'Prone');\n    if (effect) return;\n    await chris.addCondition(targetActor, 'Prone', false, workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function parry({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.actor) return;\n    let bonus = chris.getConfiguration(workflow.item, 'acbonus') ?? false;\n    console.log(bonus);\n    if (!bonus) return;\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1,\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+ ' + bonus,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    '1Reaction'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}","import {grapple} from '../../actions/grapple.js';\nimport {autoGrapple} from './autoGrapple.js';\nimport {regeneration} from './regeneration.js';\nimport {search} from '../../actions/search.js';\nimport {shove} from '../../actions/shove.js';\nimport {stealthCheck} from '../../actions/stealth.js';\nimport {swarmDamage} from './swarm.js';\nimport {prone} from './prone.js';\nimport {fall} from '../../actions/fall.js';\nimport {underwater} from '../../actions/underwater.js';\nimport {nonLethal} from '../../actions/nonLethal.js';\nimport {parry} from './parry.js';\nexport let generic = {\n    'autoGrapple': autoGrapple,\n    'swarmDamage': swarmDamage,\n    'regeneration': regeneration,\n    'stealthCheck': stealthCheck,\n    'search': search,\n    'grapple': grapple,\n    'shove': shove,\n    'prone': prone,\n    'fall': fall,\n    'underwater': underwater,\n    'nonLethal': nonLethal,\n    'parry': parry\n}","import {stench} from '../troglodyte/stench.js';\nexport let ghast = {\n    'stench': stench\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nasync function allTurns(token, origin, range) {\n    let targetToken = game.combat.scene.tokens.get(game.combat.current.tokenId);\n    if (!targetToken || targetToken?.id === token.id) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > range) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.uuid]);\n    await MidiQOL.completeItemUse(origin, config, options);\n}\nasync function effectCreation(origin) {\n    let roll = await new Roll('1d8').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: origin.name\n    });\n}\nexport let gibbering = {\n    'allTurns': allTurns,\n    'effectCreation': effectCreation\n}","import {gibbering} from './gibbering.js';\nexport let gibberingMouther = {\n    'gibbering': gibbering\n}","import {chris} from '../../helperFunctions.js';\nasync function chromaticInfusion({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetWeapons = targetToken.actor.items.filter(i => i.type === 'weapon' && i.system.equipped);\n    if (targetWeapons.length === 0) return;\n    let selection;\n    if (targetWeapons.length === 1) selection = targetWeapons[0];\n    if (!selection) selection = await chris.selectDocument('Which weapon gets infused?', targetWeapons);\n    if (!selection) return;\n    let damageType = await chris.dialog(workflow.item.name, [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['⚡ Lightning', 'lightning'], ['☠️ Poision', 'poison']], 'Which damage type?');\n    if (!damageType) return;\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Chromatic Infusion');\n    }\n    let effectData = {\n        'name': 'Chromatic Infusion',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let damageParts = selection[0].system.damage.parts;\n    damageParts.push(['1d4[' + damageType + ']', damageType]);\n    let updates = {\n        'embedded': {\n            'Item': {\n                [selection[0].name]: {\n                    'system': {\n                        'damage.parts': damageParts,\n                    }\n                }\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Chromatic Infusion',\n        'description': 'Chromatic Infusion'\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}\nasync function reactiveResistance({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog(workflow.item.name, [['🧪 Acid', 'acid'], ['❄️ Cold', 'cold'], ['🔥 Fire', 'fire'], ['⚡ Lightning', 'lightning'], ['☠️ Poision', 'poison']], 'What damage type?');\n    if (!selection) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': selection,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    '1Reaction'\n                ],\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}\nexport let giftOfTheChromaticDragon = {\n    'chromaticInfusion': chromaticInfusion,\n    'reactiveResistance': reactiveResistance\n}","function initiate(skillId, options) {\n    return skillId != 'ath' ? false : {'label': 'Attempting to initiate a grapple.', 'type': 'advantage'};\n}\nfunction escape(skillId, options) {\n    return !['ath', 'acr'].includes(skillId) ? false : {'label': 'Attempting to escape a grapple.', 'type': 'advantage'};\n    \n}\nexport let grapple = {\n    'escape': escape,\n    'initiate': initiate\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nlet position = null;\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.token || !workflow.damageRoll) return;\n    if (constants.nonDamageTypes.includes(workflow.defaultDamageType)) return;\n    let targetToken = workflow.targets.first();\n    if (chris.getDistance(workflow.token, targetToken) > 60) return;\n    let feature = chris.getItem(workflow.actor, 'Baleful Scion: Grasp of Avarice');\n    if (!feature) return;\n    if (feature.uuid === workflow.item.uuid) return;\n    if (!feature.system.uses.value) return;\n    if (!chris.perTurnCheck(feature, 'feat', 'graspOfAvarice')) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'graspOfAvarice', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.setTurnCheck(feature, 'feat', 'graspOfAvarice');\n    await feature.update({'system.uses.value': feature.system.uses.value - 1});\n    let featureData = feature.toObject();\n    delete featureData._id;\n    featureData.system.damage.parts = [];\n    let sFeature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    await warpgate.wait(100);\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(sFeature, config, options);\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = feature.system.damage.parts[0][0].replace('@prof', workflow.actor.system.attributes.prof);\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    position = damageRoll.terms.length - 3;\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function damageMany({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size < 2 || !workflow.token || !workflow.damageRoll) return;\n    if (constants.nonDamageTypes.includes(workflow.defaultDamageType)) return;\n    let feature = chris.getItem(workflow.actor, 'Baleful Scion: Grasp of Avarice');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    if (!chris.perTurnCheck(feature, 'feat', 'graspOfAvarice')) return;\n    let targetTokens = Array.from(workflow.targets).filter(t => chris.getDistance(workflow.token, t) <= 60);\n    if (!targetTokens.length) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'graspOfAvarice', 250);\n    if (!queueSetup) return;\n    let selection = await chris.selectTarget('Use ' + feature.name + '?', constants.yesNoButton, targetTokens, true, 'one');\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetTokenUuid = selection.inputs.find(uuid => uuid);\n    if (!targetTokenUuid) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': feature.system.uses.value - 1});\n    await chris.setTurnCheck(feature, 'feat', 'graspOfAvarice');\n    let targetToken = await fromUuid(targetTokenUuid);\n    let featureData = feature.toObject();\n    delete featureData._id;\n    featureData.system.damage.parts[0][1] = 'midi-none';\n    featureData.system.damage.parts[0][0] = featureData.system.damage.parts[0][0].replace('[necrotic]', '');\n    let sFeature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    await warpgate.wait(100);\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.uuid]);\n    let sWorkflow = await MidiQOL.completeItemUse(sFeature, config, options);\n    chris.addDamageDetailDamage(targetToken, sWorkflow.damageTotal, 'necrotic', workflow);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await chris.setTurnCheck(origin, 'feat', 'graspOfAvarice', true);\n}\nasync function heal({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!position || !workflow.damageRoll || !workflow.targets.size) return;\n    let targetToken = workflow.targets.first();\n    if (chris.checkTrait(targetToken.actor, 'di', 'necrotic')) {\n        position = null;\n        return;\n    }\n    let healing = workflow.damageRoll.terms[position].total + workflow.actor.system.attributes.prof;\n    if (chris.checkTrait(targetToken.actor, 'dr', 'necrotic')) healing = Math.floor(healing / 2);\n    await chris.applyDamage([workflow.token], healing, 'healing');\n    position = null;\n}\nexport let graspOfAvarice = {\n    'damage': damage,\n    'damageMany': damageMany,\n    'end': end,\n    'heal': heal\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellName = workflow.actor.flags['chris-premades']?.feature?.graspOfHadar?.name;\n    if (!spellName) spellName = 'Eldritch Blast';\n    if (workflow.item.name != spellName || workflow.hitTargets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance <= 5) return;\n    let effect = chris.findEffect(workflow.actor, 'Eldritch Invocations: Grasp of Hadar');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    if (!chris.perTurnCheck(originItem, 'feature', 'graspOfHadar', true, workflow.token.id)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'graspOfHadar', 451);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('Use Grasp of Hadar?', [['Yes', -10], ['No', false]]);\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) await originItem.setFlag('chris-premades', 'feature.graspOfHadar.turn', game.combat.round + '-' + game.combat.turn);\n    if (distance <= 10) selection = -5;\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n        if (hitsWall) {\n            selection -= 5;\n            if (selection === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    await originItem.use();\n    queue.remove(workflow.item.uuid);\n}\nasync function combatEnd(origin) {\n    await origin.setFlag('chris-premades', 'feature.graspOfHadar.turn', '');\n}\nexport let graspOfHadar = {\n    'item': item,\n    'combatEnd': combatEnd\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    let feature = chris.getItem(workflow.actor, 'Grave Touched');\n    if (!feature) return;\n    let useFeature = chris.perTurnCheck(feature, 'feature', 'graveTouched,', true, workflow.token.id);\n    if (!useFeature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'graveTouched', 350);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.use();\n    if (chris.inCombat()) await feature.setFlag('chris-premades', 'feature.formOfDread.turn', game.combat.round + '-' + game.combat.turn);\n    let oldDamageRoll = workflow.damageRoll;\n    let newDamageRoll = '';\n    for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n        let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n        if (isDeterministic === true) {\n            newDamageRoll += oldDamageRoll.terms[i].expression;\n        } else {\n            newDamageRoll += oldDamageRoll.terms[i].number + 'd' + oldDamageRoll.terms[i].faces + '[necrotic]';\n        }\n    }\n    let damageFormula = newDamageRoll;\n    let effect = chris.findEffect(workflow.actor, 'Form of Dread');\n    if (effect) {\n        let extraDice = '+ 1d' + workflow.damageRoll.dice[0].faces + '[necrotic]';\n        if (workflow.isCritical) extraDice = chris.getCriticalFormula(extraDice);\n        damageFormula = newDamageRoll + extraDice;\n    }\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feature.graveTouched.turn', '');\n}\nexport let graveTouched = {\n    'attack': attack,\n    'end': end\n}\n","import {chris} from '../../helperFunctions.js';\nimport {constants} from '../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'grease',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'grease',\n        'templateUuid': template.uuid,\n        'turn': 'end',\n        'ignoreMove': true\n    });\n    if (workflow.failedSaves.size === 0) return;\n    let turn = game.combat.round + '-' + game.combat.turn;\n    let updates = {};\n    for (let i of Array.from(workflow.targets)) {\n        setProperty(updates, 'flags.chris-premades', 'spell.grease.' + i.id + '.turn', turn);\n    }\n    await template.update(updates);\n}\nasync function trigger(token, trigger) {\n    if (chris.checkTrait(token.actor, 'ci', 'prone')) return;\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.grease?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.grease.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Grease - Fall', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Grease - Fall');\n    featureData.system.save.dc = trigger.saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function enter(template, token) {\n    let trigger = template.flags['chris-premades']?.template;\n    if (!trigger) return;\n    await grease.trigger(token.document, trigger);\n}\nexport let grease = {\n    'item': item,\n    'trigger': trigger,\n    'enter': enter\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nexport async function greenFlameBlade({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let weapons = workflow.actor.items.filter(i => i.type === 'weapon' && i.system.equipped && i.system.actionType === 'mwak');\n    if (!weapons.length) {\n        ui.notifications.info('No equipped weapons found!');\n        return;\n    }\n    let selection;\n    if (weapons.length === 1) selection = weapons[0];\n    if (!selection) [selection] = await chris.selectDocument('Attack with what weapon?', weapons);\n    if (!selection) return;\n    let level = chris.levelOrCR(workflow.actor);\n    let diceNumber = Math.floor((level + 1) / 6);\n    let weapon;\n    if (level > 4) {\n        let weaponData = duplicate(selection.toObject());\n        delete weaponData._id;\n        weaponData.system.damage.parts.push([diceNumber + 'd8[' + translate.damageType('fire') + ']', 'fire']);\n        weaponData.system.properties.mgc = true;\n        weapon = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n        weapon.prepareData();\n        weapon.prepareFinalAttributes();\n    } else {\n        weapon = selection;\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    let attackWorkflow = await MidiQOL.completeItemUse(weapon, config, options);\n    if (!attackWorkflow) return;\n    if (!attackWorkflow.hitTargets.size) return;\n    let targets = chris.findNearby(workflow.targets.first(), 5, 'ally', true, false);\n    if (!targets.length) return;\n    let target;\n    if (targets.length === 1) target = targets[0];\n    if (!target) {\n        let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, targets, true, 'one', false, false, 'Where does the fire leap?');\n        if (!selection.buttons) return;\n        let targetUUid = selection.inputs.find(i => i);\n        if (!targetUUid) return;\n        target = await fromUuid(targetUUid);\n    }\n    if (!target) return;\n    let modifier = chris.getSpellMod(workflow.item);\n    let damageFormula = level > 4 ? diceNumber + 'd8[' + translate.damageType('fire') + '] + ' + modifier : modifier + '[' + translate.damageType('fire') + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await chris.applyWorkflowDamage(workflow.token, damageRoll, 'fire', [target], workflow.item.name, attackWorkflow.itemCardId);\n}","import {chris} from '../../../helperFunctions.js';\nasync function postHit({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let target = workflow.hitTargets.first();\n    let effectData = {\n        'label': 'Grell Tentacles Grapple',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 86400\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': 'Grappled',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'stackable': [\n                    'noneName'\n                ]\n            }\n        }\n    };\n    if (chris.getSize(target.actor) <= chris.sizeStringValue('medium')) {\n        let restrainedData = {\n            'key': 'macro.CE',\n            'mode': 0,\n            'value': 'Restrained',\n            'priority': 20\n        };\n        effectData.changes.push(restrainedData);\n    }\n    await chris.createEffect(target.actor, effectData);\n}\nasync function preHit({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let target = workflow.targets.first();\n    let effect = chris.findEffect(target.actor, 'Grell Tentacles Grapple');\n    if (!effect) return;\n    let effectData = {\n        'label': 'Grell Tentacles Advantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'seconds': 6\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.advantage.attack.mwak',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    '1Attack'\n                ]\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}\nexport let tentacles = {\n    postHit: postHit,\n    preHit: preHit\n}","import {tentacles} from './tentacles.js';\nexport let grell = {\n    'tentacles': tentacles\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function grimHarvest({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.length === 0 || !workflow.damageList) return;\n    let doHealing = false;\n    for (let i of workflow.damageList) {\n        if (i.oldHP != 0 && i.newHP === 0) {\n            let targetToken = await fromUuid(i.tokenUuid);\n            if (!targetToken) continue;\n            let targetRace = chris.raceOrType(targetToken.actor);\n            if (targetRace === 'undead' || targetRace === 'construct') continue;\n            doHealing = true;\n            break;\n        }\n    }\n    if (!doHealing) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'grimHarvest', 450);\n    if (!queueSetup) return;\n    let spellLevel;\n    let spellSchool;\n    if (workflow.item.type === 'spell') {\n        spellLevel = workflow.castData.castLevel;\n        spellSchool = workflow.item.system.school;\n    } else if (workflow.item.type === 'feat') {\n        spellLevel = workflow.item.flags['chris-premades']?.spell?.castData?.castLevel;\n        spellSchool = workflow.item.flags['chris-premades']?.spell?.castData?.school;\n    }\n    if (!spellSchool || !spellLevel) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.actor, 'Grim Harvest');\n    if (!effect) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let featureData = duplicate(originItem.toObject());\n    let healingFormula = spellLevel * 2;\n    if (spellSchool === 'nec') healingFormula = spellLevel * 3;\n    featureData.system.damage.parts = [\n        [\n            healingFormula + '[healing]',\n            'healing'\n        ]\n    ];\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = workflow.actor.flags['chris-premades']?.item?.grovelthrash?.level;\n    if (!level) return;\n    if (workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'grovelthrash', 50);\n    if (!queueSetup) return;\n    let selected = await chris.dialog('Activate Grovelthrash?', [['Yes', true], ['No', false]]);\n    let damageDiceNum = 0;\n    if (selected) {\n        damageDiceNum = 2;\n    }\n    if (level > 0) if (Math.floor(workflow.actor.system.attributes.hp.max / 2) > workflow.actor.system.attributes.hp.value) damageDiceNum += 2;\n    if (damageDiceNum === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageDice = damageDiceNum + 'd6[bludgeoning]';\n    if (workflow.isCritical) damageDice = chris.getCriticalFormula(damageDice);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + damageDice;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    if (selected) {\n        let selfDamageFormula = '1d6[psychic]';\n        let selfDamageRoll = await new Roll(selfDamageFormula).roll({async: true});\n        selfDamageRoll.toMessage({\n            rollMode: 'roll',\n            speaker: {alias: name},\n            flavor: workflow.item.name\n        });\n        await chris.applyDamage([workflow.token], selfDamageRoll.total, 'psychic');\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function equip(actor, origin, level) {\n    let charges = origin.flags['chris-premades']?.item?.grovelthrash?.charges?.reaction;\n    if (charges === undefined) charges = 1;\n    let itemData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Grovelthrash Reaction', false);\n    if (!itemData) return;\n    itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Grovelthrash Reaction');\n    itemData.system.uses.value = charges;\n    await chris.addTempItem(actor, itemData, origin.id, 'Grovelthrash', false, 0);\n    if (level > 0) {\n        let earthquakeData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Spell Compendium'), 'Earthquake', false);\n        if (!earthquakeData) return;\n        let eCharges = origin.flags['chris-premades']?.item?.grovelthrash?.charges?.earthquake;\n        if (eCharges === undefined) eCharges = 1;\n        earthquakeData.system.uses.per = 'day';\n        earthquakeData.system.uses.max = 1;\n        earthquakeData.system.uses.value = eCharges;\n        earthquakeData.system.preparation.mode = 'atwill';\n        earthquakeData.system.preparation.prepared = true;\n        await chris.addTempItem(actor, earthquakeData, origin.id, 'Grovelthrash', false, 1);\n        let meldIntoStoneData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Spell Compendium'), 'Meld into Stone', false);\n        if (!meldIntoStoneData) return;\n        let mCharges = origin.flags['chris-premades']?.item?.grovelthrash?.charges?.meldIntoStone;\n        if (mCharges === undefined) mCharges = 1;\n        meldIntoStoneData.system.uses.per = 'day';\n        meldIntoStoneData.system.uses.max = 1;\n        meldIntoStoneData.system.uses.value = mCharges;\n        meldIntoStoneData.system.preparation.mode = 'atwill';\n        meldIntoStoneData.system.preparation.prepared = true;\n        await chris.addTempItem(actor, meldIntoStoneData, origin.id, 'Grovelthrash', false, 2);\n        let stoneShapeData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Spell Compendium'), 'Stone Shape', false);\n        if (!stoneShapeData) return;\n        let sCharges = origin.flags['chris-premades']?.item?.grovelthrash?.charges?.stoneShape;\n        if (sCharges === undefined) sCharges = 1;\n        stoneShapeData.system.uses.per = 'day';\n        stoneShapeData.system.uses.max = 1;\n        stoneShapeData.system.uses.value = sCharges;\n        stoneShapeData.system.preparation.mode = 'atwill';\n        stoneShapeData.system.preparation.prepared = true;\n        await chris.addTempItem(actor, stoneShapeData, origin.id, 'Grovelthrash', false, 3);\n    }\n}\nasync function unequip(actor, origin, level) {\n    let rcharges = 1;\n    let tempItem = chris.getTempItem(actor, origin.id, 0);\n    if (tempItem) rcharges = tempItem.system.uses.value;\n    if (level === 0) await origin.setFlag('chris-premades', 'item.grovelthrash.charges.reaction', rcharges);\n    if (level > 0) {\n        let eCharges = 1;\n        let earthquakeItem = chris.getTempItem(actor, origin.id, 1);\n        if (earthquakeItem) eCharges = earthquakeItem.system.uses.value;\n        let mCharges = 1;\n        let meldIntoStoneItem = chris.getTempItem(actor, origin.id, 2);\n        if (meldIntoStoneItem) mCharges = meldIntoStoneItem.system.uses.value;\n        let sCharges = 1;\n        let stoneShapeItem = chris.getTempItem(actor, origin.id, 3);\n        if (stoneShapeItem) sCharges = stoneShapeItem.system.uses.value;\n        let charges = {\n            'reaction': rcharges,\n            'earthquake': eCharges,\n            'meldIntoStone': mCharges,\n            'stoneShape': sCharges\n        };\n        await origin.setFlag('chris-premades', 'item.grovelthrash.charges', charges);\n    }\n    await chris.removeTempItems(actor, origin.id);\n}\nasync function deleted(actor, effect) {\n    if (effect.disabled) return;\n    let originArray = effect.origin.split('Item.');\n    if (originArray.length != 2) return;\n    let originID = originArray[1];\n    await chris.removeTempItems(actor, originID);\n}\nexport let grovelthrash = {\n    'item': item,\n    'equip': equip,\n    'unequip': unequip,\n    'deleted': deleted\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nimport {constants} from '../../../constants.js';\nimport {translate} from '../../../translations.js';\nexport async function grungPoison({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.item || !workflow.damageRoll || workflow.item?.type != 'weapon' || workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'grungPoison', 300);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has('piercing')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let feature = chris.getItem(workflow.actor, 'Grung Poison');\n    if (!feature) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let prompt = chris.getConfiguration(feature, 'prompt') ?? false;\n    let selection = prompt ? await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?') : true;\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (featureWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula + ' + 2d4[' + translate.damageType('poison') + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../helperFunctions.js';\nimport {macros} from '../macros.js';\nimport {socket} from '../module.js';\nlet triggers = {};\nexport async function loadTriggers() {\n    triggers = game.settings.get('chris-premades', 'Movement Triggers');\n    if (game.user.isGM) {\n        for (let name of Object.values(triggers)) {\n            for (let spell of name) {\n                let effect = await fromUuid(spell.effectUuid)\n                if (!effect) {\n                    console.log('Chris Premades | Removing stale movement trigger for ' + spell.macro);\n                    await removeTrigger(spell.macro, spell.sourceTokenID);\n                }\n            }\n        }\n    }\n}\nexport async function updateMoveTriggers(updatedTriggers) {\n    triggers = updatedTriggers;\n}\nexport async function updateGMTriggers(updatedTriggers) {\n    await game.settings.set('chris-premades', 'Movement Triggers', updatedTriggers);\n}\nexport async function tokenMovedEarly(token, updates, options, userId) {\n    if (token.parent.id != canvas.scene.id) return;\n    if (!updates.x && !updates.y && !updates.elevation) return;\n    setProperty(options, 'chris-premades.coords.previous.x', token.x);\n    setProperty(options, 'chris-premades.coords.previous.y', token.y);\n    setProperty(options, 'chris-premades.coords.previous.elevation', token.elevation);\n}\nexport async function tokenMoved(token, changes, options, userId) {\n    if (token.parent.id != canvas.scene.id) return;\n    if (!chris.isLastGM()) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    await token.object._animation;\n    for (let name of Object.values(triggers)) {\n        let validSources = [];\n        for (let spell of name) {\n            let sourceToken = canvas.tokens.get(spell.sourceTokenID);\n            if (!sourceToken) continue;\n            if (spell.ignoreSelf && sourceToken.id == token.id) continue;\n            if (spell.nonAllies && (token.disposition === sourceToken.document.disposition || token.disposition === 0)) continue;\n            let distance = chris.getDistance(token.object, sourceToken);\n            if (distance > spell.range) continue;\n            if (spell.offTurnMoveSpecial && chris.inCombat()) {\n                if (game.combat.current.tokenId != token.id) {\n                    let oldDistance = chris.getCoordDistance(sourceToken, {\n                        'width': token.width,\n                        'height': token.height,\n                        'x': options['chris-premades'].coords.previous.x,\n                        'y': options['chris-premades'].coords.previous.y,\n                        'elevation': options['chris-premades'].coords.previous.elevation\n                    });\n                    if (oldDistance <= distance) continue;\n                }\n            }\n            validSources.push(spell);\n        }\n        let maxLevel = Math.max(...validSources.map(spell => spell.castLevel));\n        let selectedSpell = validSources.find(spell => spell.castLevel === maxLevel);\n        if (selectedSpell) macros.onMove(selectedSpell.macro, token, selectedSpell.castLevel, selectedSpell.spellDC, selectedSpell.damage, selectedSpell.damageType, selectedSpell.sourceTokenID, 'move');\n    }\n}\nexport function combatUpdate(combat, changes, context) {\n    if (!chris.isLastGM()) return;\n    let currentTurn = combat.current.turn;\n    let previousTurn = context.effectmacro?.previousTR?.T;\n    let currentRound = combat.current.round;\n    let previousRound = context.effectmacro?.previousTR?.R;\n    if (!changes.turn && !changes.round) return;\n    if (!combat.started || !combat.isActive) return;\n    if (currentRound < previousRound || (currentTurn < previousTurn && currentTurn === previousRound)) return;\n    let token = game.combat.scene.tokens.get(combat.current.tokenId);\n    let lastToken = game.combat.scene.tokens.get(combat.previous.tokenId);\n    if (token) {\n        for (let name of Object.values(triggers)) {\n            let validSources = [];\n            for (let spell of name) {\n                if (spell.turn != 'start') continue;\n                let sourceToken = game.combat.scene.tokens.get(spell.sourceTokenID);\n                if (!sourceToken) continue;\n                if (spell.ignoreSelf && sourceToken.id == token.id) continue;\n                if (spell.nonAllies && (token.disposition === sourceToken.disposition || token.disposition === 0)) continue;\n                let distance = chris.getDistance(token, sourceToken);\n                if (distance > spell.range) continue;\n                validSources.push(spell);\n            }\n            let maxLevel = Math.max(...validSources.map(spell => spell.castLevel));\n            let selectedSpell = validSources.find(spell => spell.castLevel === maxLevel);\n            if (selectedSpell) macros.onMove(selectedSpell.macro, token, selectedSpell.castLevel, selectedSpell.spellDC, selectedSpell.damage, selectedSpell.damageType, selectedSpell.sourceTokenID, 'start');\n        }\n    }\n    if (lastToken) {\n        for (let name of Object.values(triggers)) {\n            let validSources = [];\n            for (let spell of name) {\n                if (spell.turn != 'end') continue;\n                let sourceToken = game.combat.scene.tokens.get(spell.sourceTokenID);\n                if (!sourceToken) continue;\n                if (spell.ignoreSelf && sourceToken.id == lastToken.id) continue;\n                if (spell.nonAllies && (lastToken.disposition === sourceToken.disposition || lastToken.disposition === 0)) continue;\n                let distance = chris.getDistance(lastToken, sourceToken);\n                if (distance > spell.range) continue;\n                validSources.push(spell);\n            }\n            let maxLevel = Math.max(...validSources.map(spell => spell.castLevel));\n            let selectedSpell = validSources.find(spell => spell.castLevel === maxLevel);\n            if (selectedSpell) macros.onMove(selectedSpell.macro, lastToken, selectedSpell.castLevel, selectedSpell.spellDC, selectedSpell.damage, selectedSpell.damageType, selectedSpell.sourceTokenID, 'end');\n        }\n    }\n}\nasync function addTrigger(name, castLevel, spellDC, damage, damageType, sourceTokenID, range, ignoreSelf, nonAllies, turn, effectUuid, offTurnMoveSpecial) {\n    let spell = {\n        'castLevel': castLevel,\n        'spellDC': spellDC,\n        'damage': damage,\n        'damageType': damageType,\n        'sourceTokenID': sourceTokenID,\n        'range': range,\n        'ignoreSelf': ignoreSelf,\n        'nonAllies': nonAllies,\n        'turn': turn,\n        'macro': name,\n        'effectUuid': effectUuid,\n        'offTurnMoveSpecial': offTurnMoveSpecial\n    }\n    if (!triggers[name]) triggers[name] = [];\n    triggers[name].push(spell);\n    await socket.executeForEveryone('updateMoveTriggers', triggers);\n    await socket.executeAsGM('updateGMTriggers', triggers);\n}\nasync function removeTrigger(name, sourceTokenID) {\n    if (!triggers[name]) return;\n    triggers[name] = triggers[name].filter(spell => spell.sourceTokenID != sourceTokenID);\n    if (triggers[name].length === 0) delete(triggers[name]);\n    await socket.executeForEveryone('updateMoveTriggers', triggers);\n    await socket.executeAsGM('updateGMTriggers', triggers);\n}\nfunction status() {\n    return triggers;\n}\nasync function purge() {\n    await socket.executeForEveryone('updateMoveTriggers', {});\n    await socket.executeAsGM('updateGMTriggers', {});\n}\nexport let tokenMove = {\n    'add': addTrigger,\n    'remove': removeTrigger,\n    'status': status,\n    'purge': purge\n}","import {chris} from '../../helperFunctions.js';\nimport {tokenMove} from '../../utility/movement.js';\nimport {constants} from '../../constants.js';\nimport {summonEffects} from '../animations/summonEffects.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Guardian of Faith');\n    if (!sourceActor) return;\n    async function effectMacro() {\n        await chrisPremades.macros.guardianOfFaith.remove(token, origin);\n    }\n    let spellDC = chris.getSpellDC(workflow.item);\n    let effectData = {\n        'name': 'Guardian of Faith',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 28800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Guardian of Faith';\n    if (name === '') name = 'Guardian of Faith';\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Guardian of Faith - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Guardian of Faith - Damage');\n    featureData.system.save.dc = spellDC;\n    let updates = {\n        'actor': {\n            'name': name,\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            },\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'celestial';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    let spawnedTokens = await chris.spawn(sourceActor, updates, {}, workflow.token, 30, animation);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, 'Guardian of Faith');\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 28800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect); await warpgate.revert(token.document, \"Guardian of Faith\");'\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, casterEffectData);\n    await tokenMove.add('guardianOfFaith', workflow.castData.castLevel, spellDC, null, null, spawnedToken.id, 10, true, true, null, targetEffect.uuid);\n    let color = chris.getConfiguration(workflow.item, 'color') ?? 'yellow';\n    new Sequence().effect().file('jb2a.bless.400px.loop.' + color).size(spawnedToken.width + 6, {'gridUnits': true}).attachTo(spawnedToken).persist().name('GuardianOfFaith-' + workflow.token.id).fadeIn(300).fadeOut(300).play();\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let appliedDamage = workflow.damageList[0].appliedDamage;\n    if (!appliedDamage) return;\n    await workflow.item.update({'system.uses.value': workflow.item.system.uses.value - appliedDamage});\n    if (workflow.item.system.uses.value > 0) return;\n    let effect = chris.findEffect(workflow.actor, 'Guardian of Faith');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nasync function remove(token, origin) {\n    let originActor = origin.actor;\n    let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n    if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n    await tokenMove.remove('guardianOfFaith', token.id);\n    Sequencer.EffectManager.endEffects({ 'name': 'GuardianOfFaith-' + token.id, 'object': token});\n    await warpgate.dismiss(token.id);\n}\nasync function moved(token, castLevel, spellDC, damage, damageType, sourceTokenID) {\n    let doDamage = false;\n    if (!chris.inCombat()) {\n        doDamage = true;\n    } else {\n        let combatant = game.combat.combatants.get(game.combat.current.combatantId);\n        let lastTriggerTurn = combatant.flags?.['chris-premades']?.spell?.guardianOfFaith?.[sourceTokenID]?.lastTriggerTurn;\n        let currentTurn = game.combat.current.round + '-' + game.combat.current.turn;\n        if (!lastTriggerTurn || lastTriggerTurn != currentTurn) {\n            doDamage = true;\n            await combatant.setFlag('chris-premades', 'spell.guardianOfFaith.' + sourceTokenID + '.lastTriggerTurn', currentTurn);\n        }\n    }\n    if (!doDamage) return;\n    let attacker = canvas.scene.tokens.get(sourceTokenID);\n    if (!attacker) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let feature = attacker.actor.items.getName('Guardian of Faith - Damage');\n    if (!feature) return;\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let guardianOfFaith = {\n    'item': item,\n    'attack': attack,\n    'remove': remove,\n    'moved': moved\n}","import {chris} from '../../helperFunctions.js';\nexport async function guardianOfNature({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog(workflow.item.name, [['🐺 Primal Beast', 'beast'], ['🌳 Great Tree', 'tree']], 'What form do you assume?');\n    if (!selection) return;\n    let effectData;\n    if (selection === 'beast') {\n        effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 60\n            },\n            'changes': [\n                {\n                    'key': 'system.attributes.movement.walk',\n                    'mode': 2,\n                    'value': '+10',\n                    'priority': 20\n                },\n                {\n                    'key': 'system.attributes.senses.darkvision',\n                    'mode': 4,\n                    'value': '120',\n                    'priority': 20\n                },\n                {\n                    'key': 'ATL.dimSight',\n                    'mode': 4,\n                    'value': '120',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.attack.str',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'system.bonuses.mwak.damage',\n                    'mode': 2,\n                    'value': '+1d6[force]',\n                    'priority': 20\n                }\n            ]\n        };\n    } else {\n        effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 60\n            },\n            'changes': [\n                {\n                    'key': 'flags.midi-qol.advantage.ability.save.con',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.attack.dex',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                },\n                {\n                    'key': 'flags.midi-qol.advantage.attack.wis',\n                    'mode': 0,\n                    'value': '1',\n                    'priority': 20\n                }\n            ]\n        };\n        if (workflow.token) await chris.applyDamage(workflow.token, 10, 'temphp');\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function hailOfThorns({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item?.system?.actionType != 'rwak') return;\n    let effect = chris.findEffect(workflow.actor, 'Hail of Thorns');\n    if (!effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Hail of Thorns - Burst', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Hail of Thorns - Burst');\n    let damageDice = Math.min(effect.flags['midi-qol'].castData.castLevel, 6);\n    featureData.system.damage.parts = [\n        [\n            damageDice + 'd10[piercing]',\n            'piercing'\n        ]\n    ];\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    featureData.system.save.dc = chris.getSpellDC(originItem);\n    setProperty(featureData, 'chris-premades.spell.castData.school', originItem.system.school);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let targetToken = workflow.targets.first();\n    let targetUuids = await chris.findNearby(targetToken, 5).concat(targetToken).map(t => t.document.uuid);\n    let [config, options] = constants.syntheticItemWorkflowOptions(targetUuids);\n    await MidiQOL.completeItemUse(feature, config, options);\n    await chris.removeCondition(workflow.actor, 'Concentrating');\n}","import {chris} from '../../../helperFunctions.js';\nexport async function harnessDivinePower({speaker, actor, token, character, item, args, scope, workflow}) {\n    let maxLevel = Math.ceil(workflow.actor.system.attributes.prof /2);\n    let validLevels = [];\n    for (let i = 1; i <= maxLevel; i++) {\n        let key2 = 'spell' + i;\n        let key = 'system.spells.' + key2 + '.value';\n        if ((workflow.actor.system.spells[key2].value < workflow.actor.system.spells[key2].max) && workflow.actor.system.spells[key2].max > 0) validLevels.push({'level': i, 'key': key});\n    }\n    let pact = workflow.actor.system.spells.pact;\n    if (pact.max > 0 && pact.level <= maxLevel && pact.value < pact.max) validLevels.push({'level': 'p', 'key': 'system.spells.pact.value'});\n    if (!validLevels.length) {\n        ui.notifications.info('You have no spell slots to regain!');\n        return;\n    }\n    let options = validLevels.map(i => [(i.level != 'p' ? chris.nth(i.level) + ' Level' : 'Pact Slot'), i.key]);\n    let selection = options.length > 1 ? await chris.dialog(workflow.item.name, options, 'Regain what spell slot?') : options[0][1];\n    if (!selection) return;\n    let value = getProperty(workflow.actor, selection);\n    if (isNaN(value)) return;\n    workflow.actor.update({[selection]: value + 1});\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function healingLight({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'healingLight', 50);\n    if (!queueSetup) return;\n    let healingLightFeatureUses = workflow.item.system.uses.value + 1;\n    let healingLightMenuUses = Math.min(Math.max(1, workflow.actor.system.abilities.cha.mod), healingLightFeatureUses);\n    let lightMenu = [];\n    for (let i = healingLightMenuUses; i > 0; i--) {\n        let diceString = i + 'd6';\n        lightMenu.push([diceString, i]);\n    }\n    let selection = await chris.dialog('How many dice do you want to use?', lightMenu)\n    await workflow.item.update({\n        'system.uses.value': healingLightFeatureUses - selection\n     });\n     let diceRoll = await new Roll(selection + 'd6[healing]').roll({async: true});\n     await workflow.setDamageRoll(diceRoll);\n     queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Healing Spirit');\n    if (!sourceActor) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Healing Spirit - Heal', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Healing Spirit - Heal');\n    featureData.system.damage.parts[0][0] = (workflow.castData.castLevel - 1) + 'd6[healing]';\n    let uses = Math.max(2, chris.getSpellMod(workflow.item) + 1);\n    featureData.system.uses.max = uses;\n    featureData.system.uses.value = uses;\n    setProperty(featureData, 'flags.chris-premades.spell.healingSpirit.name', workflow.item.name);\n    async function effectMacro() {\n        let originActor = origin.actor;\n        await warpgate.dismiss(token.id);\n        let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n        if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'actor': {\n            'name': workflow.item.name,\n            'prototypeToken': {\n                'name': workflow.item.name\n            }\n        },\n        'token': {\n            'name': workflow.item.name\n        },\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let options = {\n        'controllingActor': workflow.token.actor\n    };\n    let tokenDocument = await sourceActor.getTokenDocument();\n    let spawnedTokens = await warpgate.spawn(tokenDocument, updates, {}, options);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, workflow.item.name);\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect); await warpgate.revert(token.document, \"Healing Spirit\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Healing Spirit - Move'\n                }\n            }\n        }\n    };\n    let moveFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Healing Spirit - Move', false);\n    if (!moveFeatureData) return;\n    moveFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Healing Spirit - Move');\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [moveFeatureData.name]: moveFeatureData\n            },\n            'ActiveEffect': {\n                [casterEffectData.name]: casterEffectData\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Healing Spirit',\n        'description': 'Healing Spirit'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n    let command = 'await chrisPremades.macros.healingSpirit.template(template, token);';\n    let templateData = {\n        'angle': 0,\n        'direction': 45,\n        'distance': 7.071,\n        'x': spawnedToken.x,\n        'y': spawnedToken.y,\n        't': 'rect',\n        'user': game.user,\n        'fillColor': game.user.color,\n        'flags': {\n            'templatemacro': {\n                'whenEntered': {\n                    'asGM': false,\n                    'command': command\n                },\n                'whenThrough': {\n                    'asGM': false,\n                    'command': command\n                },\n                'whenTurnStart': {\n                    'asGM': false,\n                    'command': command\n                }\n            },\n            'dnd5e': {\n                'origin': workflow.item.uuid\n            },\n            'midi-qol': {\n                'originUuid': workflow.item.uuid\n            },\n            'chris-premades': {\n                'spell': {\n                    'healingSpirit': {\n                        'origin': spawnedToken.uuid,\n                        'touchedTokens': {}\n                    }\n                }\n            }\n        }\n    };\n    let template = await chris.createTemplate(templateData);\n    await tokenAttacher.attachElementsToToken([template], spawnedToken.object, false);\n}\nasync function template(template, token) {\n    let sourceToken = await fromUuid(template.flags['chris-premades'].spell.healingSpirit.origin);\n    if (!sourceToken) return;\n    let sourceDisposition = sourceToken.disposition;\n    if (token.document.disposition != sourceDisposition) return;\n    let touchedTokens = template.flags['chris-premades'].spell.healingSpirit.touchedTokens;\n    if (chris.inCombat()) {\n        let tokenTurn = touchedTokens[token.id];\n        let currentTurn = game.combat.round + '-' + game.combat.turn;\n        if (tokenTurn === currentTurn) return;\n    }\n    let selection = await chris.dialog('Healing Spirit: Apply healing?', [['Yes', true], ['No', false]]);\n    if (!selection) return;\n    let feature = sourceToken.actor.items.getName('Healing Spirit - Heal');\n    if (!feature) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    if (chris.inCombat()) {\n        touchedTokens[token.id] = game.combat.round + '-' + game.combat.turn;\n        await template.setFlag('chris-premades', 'spell.healingSpirit.touchedTokens', touchedTokens);\n    }\n}\nasync function healing({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.system.uses.value != 0) return;\n    let effectName = workflow.item.flags['chris-premades']?.spell?.healingSpirit?.name;\n    if (!effectName) return;\n    let effect = chris.findEffect(workflow.actor, effectName);\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let healingSpirit = {\n    'item': item,\n    'template': template,\n    'healing': healing\n};","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0 || workflow.item.type != 'spell' || workflow.item.system.level === 0) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'heartOfTheStorm', 250);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!(damageTypes.has('lightning') || damageTypes.has('thunder'))) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.actor, 'Heart of the Storm');\n    if (!effect) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let originItem = await fromUuid(effect.origin);\n    await originItem.use();\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'heartOfTheStormItem', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('What damage type?', [['Lightning', 'lightning'], ['Thunder', 'thunder']]);\n    if (!selection) selection = 'lightning';\n    let damageFormula = workflow.damageRoll._formula;\n    damageFormula += '[' + selection + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let heartOfTheStorm = {\n    'attack': attack,\n    'item': item\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let damageDice = workflow.castData.castLevel + 'd8[fire]';\n    let targetUuid = targetToken.document.uuid;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Heat Metal Pulse', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Heat Metal Pulse');\n    let spellDC = chris.getSpellDC(workflow.item);\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'heatMetal': {\n                'damageDice': damageDice,\n                'targetUuid': targetUuid,\n                'spellDC': spellDC,\n                'originUuid': workflow.item.uuid\n            },\n            'castData': workflow.castData\n        }\n    };\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Heat Metal');\n        await chrisPremades.macros.heatMetal.removed(effect);\n    }\n    let effectData = {\n        'name': 'Heat Metal',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'heatMetal': {\n                        'targetTokenUuid': targetUuid\n                    }\n                },\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': featureData.name,\n        'origin': workflow.item.uuid\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let effectData2 = {\n        'name': 'Heat Metal Dialogue',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 6\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onCreate': {\n                    'script': 'await chrisPremades.macros.heatMetal.dialogue(token, actor, effect, origin);'\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'heatMetal': {\n                        'spellDC': spellDC,\n                        'originUuid': workflow.item.uuid\n                    }\n                }\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData2);\n}\nasync function pulseItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetTokenUuid = workflow.item.flags['chris-premades']?.spell?.heatMetal?.targetUuid;\n    let damageDice = workflow.item.flags['chris-premades']?.spell?.heatMetal?.damageDice;\n    let spellDC = workflow.item.flags['chris-premades']?.spell?.heatMetal?.spellDC;\n    let originUuid = workflow.item.flags['chris-premades']?.spell?.heatMetal?.originUuid;\n    if (!damageDice || !targetTokenUuid || !spellDC || !originUuid) return;\n    let targetToken = await fromUuid(targetTokenUuid);\n    if (!targetToken) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Heat Metal Damage', false);\n    if (!featureData) return;\n    featureData.system.damage.parts = [\n        [\n            damageDice,\n            'fire'\n        ]\n    ];\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Heat Metal Damage');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenUuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    let effectData = {\n        'name': 'Heat Metal Dialogue',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 6\n        },\n        'origin': originUuid,\n        'flags': {\n            'effectmacro': {\n                'onCreate': {\n                    'script': 'await chrisPremades.macros.heatMetal.dialogue(token, actor, effect, origin);'\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'heatMetal': {\n                        'spellDC': spellDC,\n                        'originUuid': originUuid\n                    }\n                }\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}\nasync function dialogue(token, actor, effect, origin) {\n    let selection = await chris.dialog('Drop heated object?', [['Yes', true], ['No', false], ['Unable (Armor)', 'unable']]);\n    if (selection === true) {\n        await effect.delete();\n        return;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Heat Metal Held', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Heat Metal Held');\n    let spellDC = effect.flags['chris-premades']?.spell?.heatMetal?.spellDC;\n    if (!spellDC) return;\n    featureData.system.save.dc = spellDC;\n    let spell = new CONFIG.Item.documentClass(featureData, {'parent': origin.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let heatMetalWorkflow = await MidiQOL.completeItemUse(spell, config, options);\n    if (heatMetalWorkflow.failedSaves.size != 0 && selection != 'unable') {\n        await effect.delete();\n        return;\n    }\n    let originUuid = effect.flags['chris-premades']?.spell?.heatMetal?.originUuid;\n    if (!originUuid) return;\n    let effectData = {\n        'name': 'Heat Metal Held',\n        'icon': origin.img,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.attack.all',\n                'value': '1',\n                'mode': 0,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.all',\n                'value': '1',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 6\n        },\n        'origin': originUuid,\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(actor, effectData);\n    await effect.delete();\n}\nasync function removed(effect) {\n    let targetTokenUuid = effect.flags['chris-premades']?.spell?.heatMetal?.targetTokenUuid;\n    if (!targetTokenUuid) return;\n    let targetToken = await fromUuid(targetTokenUuid);\n    if (!targetToken) return;\n    let targetEffect = chris.findEffect(targetToken.actor, 'Heat Metal Held');\n    if (!targetEffect) return;\n    await chris.removeEffect(targetEffect);\n}\nexport let heatMetal = {\n    'item': item,\n    'pulseItem': pulseItem,\n    'dialogue': dialogue,\n    'removed': removed\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function hexWarrior({speaker, actor, token, character, item, args, scope, workflow}) {\n    let weapons = workflow.actor.items.filter(i => i.type === 'weapon' && !i.system.properties?.two && i.system.equipped);\n    if (!weapons.length) {\n        ui.notifications.info('No valid equipped weapons to pick!');\n    }\n    let selection;\n    if (weapons.length === 1) {\n        selection = weapons[0];\n    } else {\n        [selection] = await chris.selectDocument('Select a Weapon', weapons);\n    }\n    if (!selection) return;\n    let weaponData = duplicate(selection.toObject());\n    let cha = workflow.actor.system.abilities.cha.mod;\n    let ability = weaponData.system.ability === '' ? 'str' : weaponData.system.ability;\n    let score = workflow.actor.system.abilities[ability].mod;\n    let dex = workflow.actor.system.abilities.dex.mod;\n    let changed = false;\n    if (weaponData.system.properties.fin) {\n        let mod = dex > score ? dex : score;\n        if (mod <= cha) {\n            ability = 'cha';\n            changed = true;\n        }\n    } else {\n        if (score <= cha) {\n            ability = 'cha';\n            changed = true;\n        }\n    }\n    if (changed) weaponData.system.ability = ability;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Hex Warrior');\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': weaponData.name\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ]\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [weaponData.name]: weaponData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Hex Warrior',\n        'description': 'Hex Warrior'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetId = workflow.actor.flags['chris-premades']?.feature?.hexbladesCurse;\n    if (!targetId) return;\n    let targetToken = workflow.hitTargets.first();\n    if (targetId != targetToken.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hexbladesCurse', 250);\n    if (!queueSetup) return;\n    let damageFormula = workflow.damageRoll._formula + ' + ' + workflow.actor.system.attributes.prof + '[' + workflow.defaultDamageType + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n    return;\n}\nasync function damageApplication({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size < 2) return;\n    let targetId = workflow.actor.flags['chris-premades']?.feature?.hexbladesCurse;\n    if (!targetId) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hexbladesCurse', 250);\n    if (!queueSetup) return;\n    let targetDamage = workflow.damageList.find(i => i.tokenId === targetId);\n    if (!targetDamage) return;\n    let targetActor = canvas.scene.tokens.get(targetDamage.tokenId).actor;\n    if (!targetActor) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let hasDI = chris.checkTrait(targetActor, 'di', workflow.defaultDamageType);\n    if (hasDI) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageTotal = workflow.actor.system.attributes.prof;\n    let hasDR = chris.checkTrait(targetActor, 'dr', workflow.defaultDamageType);\n    if (hasDR) damageTotal = Math.floor(damageTotal / 2);\n    targetDamage.damageDetail[0].push(\n        {\n            'damage': damageTotal,\n            'type': workflow.defaultDamageType\n        }\n    );\n    targetDamage.totalDamage += damageTotal;\n    targetDamage.appliedDamage += damageTotal;\n    targetDamage.hpDamage += damageTotal;\n    if (targetDamage.oldTempHP > 0) {\n        if (targetDamage.oldTempHP >= damageTotal) {\n            targetDamage.newTempHP -= damageTotal;\n        } else {\n            let leftHP = damageTotal - targetDamage.oldTempHP;\n            targetDamage.newTempHP = 0;\n            targetDamage.newHP -= leftHP;\n        }\n    } else {\n        targetDamage.newHP -= damageTotal;\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let validTypes = [\n        'mwak',\n        'msak',\n        'rwak',\n        'rsak'\n    ];\n    if (workflow.targets.size != 1 || !validTypes.includes(workflow.item.system.actionType)) return;\n    let targetId = workflow.actor.flags['chris-premades']?.feature?.hexbladesCurse;\n    if (!targetId) return;\n    if (workflow.targets.first().id != targetId) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hexbladesCurse', 250);\n    if (!queueSetup) return;\n    let effectData = {\n        'label': 'Critical Threshold',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.grants.criticalThreshold',\n                'value': '19',\n                'mode': 5,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'isAttacked'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.feature.hexbladesCurse',\n                'mode': 5,\n                'value': workflow.targets.first().id,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.hexbladesCurse.damage,postDamageRoll',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.hexbladesCurse.damageApplication,preDamageApplication',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.hexbladesCurse.attack,preambleComplete',\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'zeroHP'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function defeated(origin, effect) {\n    await warpgate.wait(100);\n    let warlockLevels = origin.actor.classes.warlock?.system?.levels;\n    if (warlockLevels >= 14) {\n        async function effectMacro() {\n            let selection = await chrisPremades.helpers.dialog('Master of Hexes: Heal self?', [['Yes', true], ['No', false]]);\n            if (selection) {\n                let damage = Math.max(origin.actor.system.abilities.cha.mod, 1);\n                let warlockLevels = origin.actor.classes.warlock?.system?.levels;\n                if (warlockLevels) damage += warlockLevels;\n                await chrisPremades.helpers.applyDamage(token, damage, 'healing');\n                let targetEffect = chrisPremades.helpers.findEffect(actor, origin.name);\n                if (targetEffect) await chrisPremades.helpers.removeEffect(effect);\n            } else {\n                await origin.update({'system.uses.value': 1});\n            }\n            await effect.delete();\n        }\n        let effectData = {\n            'label': origin.name + ': Healing',\n            'icon': origin.img,\n            'origin': origin.uuid,\n            'duration': {\n                'seconds': 1\n            },\n            'flags': {\n                'effectmacro': {\n                    'onCreate': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                }\n            }\n        }\n        await chris.createEffect(origin.actor, effectData);\n        await chris.removeEffect(effect);\n        return;\n    }\n    let damage = Math.max(origin.actor.system.abilities.cha.mod, 1);\n    if (warlockLevels) damage += warlockLevels;\n    let tokens = origin.actor.getActiveTokens();\n    if (tokens.length != 0) await chris.applyDamage(tokens[0], damage, 'healing');\n    await chris.removeEffect(effect);\n}\nasync function removed(origin) {\n    let targetEffect = chris.findEffect(origin.actor, origin.name);\n    if (!targetEffect) return;\n    await chris.removeEffect(targetEffect);\n}\nexport let hexbladesCurse = {\n    'item': item,\n    'damage': damage,\n    'damageApplication': damageApplication,\n    'attack': attack,\n    'defeated': defeated,\n    'removed': removed\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function hexItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Hex - Move', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Hex - Move');\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hex', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, [\n        ['Strength', 'str'],\n        ['Dexterity', 'dex'],\n        ['Constitution', 'con'],\n        ['Intelligence', 'int'],\n        ['Wisdom', 'wis'],\n        ['Charisma', 'cha']\n    ], 'What ability should have disadvantage?');\n    if (!selection) selection = 'str';\n    let seconds;\n    switch (workflow.castData.castLevel) {\n        case 3:\n        case 4:\n            seconds = 28800;\n            break;\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 9:\n            seconds = 86400;\n            break;\n        default:\n            seconds = 3600;\n    }\n    let targetEffectData = {\n        'name': 'Hexed',\n        'icon': 'icons/magic/perception/silhouette-stealth-shadow.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': seconds\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.check.' + selection,\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            }\n        ]\n    };\n    await chris.createEffect(workflow.targets.first().actor, targetEffectData);\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Hex');\n        let targetTokenId = effect.changes[0].value;\n        let targetToken = canvas.scene.tokens.get(targetTokenId);\n        if (!targetToken) return;\n        let targetActor = targetToken.actor;\n        let targetEffect =  chrisPremades.helpers.findEffect(targetActor, 'Hexed');\n        if (!targetEffect) return;\n        await chrisPremades.helpers.removeEffect(targetEffect);\n    }\n    let sourceEffectData = {\n        'name': 'Hex',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.spell.hex',\n                'mode': 5,\n                'value': workflow.targets.first().id,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.hex.attack,postDamageRoll',\n                'priority': 20\n            }\n        ],\n        'transfer': false,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': seconds\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [sourceEffectData.name]: sourceEffectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': sourceEffectData.name,\n        'description': sourceEffectData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let conEffect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (conEffect) {\n        let updates = {\n            'duration': {\n                'seconds': seconds\n            }\n        };\n        await chris.updateEffect(conEffect, updates);\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function hexAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let validTypes = ['msak', 'rsak', 'mwak', 'rwak'];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    let sourceActor = workflow.actor;\n    let hexedTarget = sourceActor.flags['chris-premades']?.spell?.hex;\n    let targetToken = workflow.hitTargets.first();\n    if (targetToken.id != hexedTarget) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hex', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = '1d6[necrotic]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function hexMoveItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let oldTargetTokenId = workflow.actor.flags['chris-premades']?.spell?.hex;\n    let oldTargetToken = canvas.scene.tokens.get(oldTargetTokenId);\n    let oldTargetOrigin;\n    let selection = 'flags.midi-qol.disadvantage.ability.check.str';\n    if (oldTargetToken) {\n        let oldTargetActor = oldTargetToken.actor;\n        let oldTargetEffect =  chris.findEffect(oldTargetActor, 'Hexed');\n        if (oldTargetEffect) {\n            await chris.removeEffect(oldTargetEffect);\n            oldTargetOrigin = oldTargetEffect.origin;\n            selection = oldTargetEffect.changes[0].key;\n        }\n    }\n    let effect = chris.findEffect(workflow.actor, 'Hex');\n    let duration = 3600;\n    if (effect) duration = effect.duration.remaining;\n    let effectData = {\n        'name': 'Hexed',\n        'icon': 'icons/magic/perception/silhouette-stealth-shadow.webp',\n        'origin': oldTargetOrigin,\n        'duration': {\n            'seconds': duration\n        },\n        'changes': [\n            {\n                'key': selection,\n                'mode': 5,\n                'value': '1',\n                'priority': 20\n            }\n        ]\n    };\n    await chris.createEffect(targetActor, effectData);\n    if (effect) {\n        let changes = effect.changes;\n        changes[0].value = targetToken.id;\n        let updates = {changes};\n        await chris.updateEffect(effect, updates);\n    }\n}\nexport let hex = {\n    'item': hexItem,\n    'attack': hexAttack,\n    'move': hexMoveItem\n};","import {stench} from '../troglodyte/stench.js';\nexport let hezrou = {\n    'stench': stench\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function hiddenStep({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.item) return;\n    if (!(constants.attacks.includes(workflow.item.actionType) || workflow.item.system.save.ability || workflow.damageRoll)) return;\n    let effect = chris.findEffect(workflow.actor, 'Hidden Step');\n    if (effect) await chris.removeEffect(effect);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Hill Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'hillStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'hillStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, [['Yes', true], ['No', false]], 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.hillStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d6[' + translate.damageType(workflow.defaultDamageType) + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let saveDC = Math.max(workflow.actor.system.abilities.con.dc, workflow.actor.system.abilities.str.dc);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Strike of the Giants: Hill Strike', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Strike of the Giants: Hill Strike');\n    featureData.system.save.dc = saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.hitTargets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.hillStrike.turn', '');\n}\nexport let hillStrike = {\n    'damage': damage,\n    'end': end\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!constants.weaponAttacks.includes(workflow.item.system.actionType)) return;\n    let feature = chris.getItem(workflow.actor, 'Martial Advantage');\n    if (!feature) return;\n    let turnCheck = chris.perTurnCheck(feature, 'feature', 'martialAdvantage', false);\n    if (!turnCheck) return;\n    let nearbyTargets = chris.findNearby(workflow.targets.first(), 5, 'enemy', false, false).filter(i => i.document.uuid != workflow.token.document.uuid);\n    if (!nearbyTargets.length) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'martialAdvantage', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (chris.inCombat()) await feature.setFlag('chris-premades', 'feature.martialAdvantage.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = feature.system.damage.parts[0][0] + '[' + workflow.defaultDamageType + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feature.martialAdvantage.turn', '');\n}\nexport let martialAdvantage = {\n    'attack': attack,\n    'end': end\n}","import {martialAdvantage} from './martialAdvantage.js';\nexport let hobgoblin = {\n    'martialAdvantage': martialAdvantage\n}","import {chris} from '../../../../helperFunctions.js';\nimport {constants} from '../../../../constants.js';\nfunction save(saveId, options) {\n    return {'label': 'This a save is from a spell cast by a fiend or undead.', 'type': 'advantage'};\n}\nasync function turn(token) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.document.disposition === token.document.disposition) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Holy Nimbus - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Sacred Weapon - Dismiss');\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let holyNimbus = {\n    'save': save,\n    'turn': turn\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetWeapons = targetToken.actor.items.filter(i => i.type === 'weapon' && i.system.equipped);\n    if (targetWeapons.length === 0) return;\n    let selection;\n    if (targetWeapons.length === 1) selection = targetWeapons[0];\n    if (!selection) [selection] = await chris.remoteDocumentDialog(chris.firstOwner(targetToken).id, 'What weapon gets imbued?', targetWeapons);\n    if (!selection) return;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Holy Weapon - Target');\n    }\n    let effectData = {\n        'name': 'Holy Weapon - Target',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': 30,\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.dim',\n                'mode': 4,\n                'value': 60,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let damageParts = selection.system.damage.parts;\n    damageParts.push(['2d8[radiant]']);\n    let updates = {\n        'embedded': {\n            'Item': {\n                [selection.name]: {\n                    'system': {\n                        'damage.parts': damageParts,\n                        'properties.mgc': true\n                    }\n                }\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Holy Weapon - Target',\n        'description': 'Holy Weapon - Target'\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Holy Weapon - Dismiss', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Holy Weapon - Dismiss', false);\n    setProperty(featureData, 'flags.chris-premades.spell.castData', workflow.castData);\n    setProperty(featureData, 'flags.chris-premades.spell.castData.school', workflow.item.system.school);\n    async function effectMacro2 () {\n        await warpgate.revert(token.document, 'Holy Weapon');\n    }\n    let effectData2 = {\n        'name': 'Holy Weapon',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.spell.holyWeapon',\n                'mode': 5,\n                'value': targetToken.document.uuid,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData2.name]: effectData2\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Holy Weapon',\n        'description': 'Holy Weapon'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n}\nasync function dismiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetTokenUuid = workflow.actor.flags['chris-premades']?.spell?.holyWeapon;\n    if (!targetTokenUuid) return;\n    let targetToken = await fromUuid(targetTokenUuid);\n    if (!targetToken) return;\n    let featureData = await chrisPremades.helpers.getItemFromCompendium('chris-premades.CPR Spell Features', 'Holy Weapon - Burst', false);\n    if (!featureData) return;\n    let effect = chris.findEffect(workflow.actor, 'Holy Weapon');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let spellDC = chris.getSpellDC(originItem);\n    featureData.system.description.value = chrisPremades.helpers.getItemDescription('CPR - Descriptions', 'Holy Weapon - Burst', false);\n    featureData.effects[0].changes[0].value = 'label=Holy Weapon - Burst (End of Turn),turn=end,saveDC=' + spellDC + ',saveAbility=con,savingThrow=true,saveMagic=true,saveRemove=true';\n    featureData.system.save.dc = spellDC;\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'castLevel': 5,\n                'school': originItem.system.school\n            }\n        }\n    };\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    await feature.use();\n    await chris.removeEffect(effect);\n    await chris.removeCondition(workflow.actor, 'Concentrating');\n}\nexport let holyWeapon = {\n    'item': item,\n    'dismiss': dismiss\n}","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Homunculus Servant');\n    if (!sourceActor) return;\n    let mendingData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Mending', false);\n    if (!mendingData) return;\n    mendingData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Mending');\n    let forceStrikeData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Force Strike', false);\n    if (!forceStrikeData) return;\n    forceStrikeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Force Strike');\n    let channelMagicData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Channel Magic', false);\n    if (!channelMagicData) return;\n    channelMagicData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Channel Magic');\n    let evasionData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Evasion', false);\n    if (!evasionData) return;\n    evasionData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Evasion');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let artificerLevel = workflow.actor.classes?.artificer?.system?.levels;\n    if (!artificerLevel) return;\n    let hpFormula = artificerLevel + ' + ' + (1 + chris.getSpellMod(workflow.item));\n    let hpValue = await new Roll(hpFormula).evaluate({async: true});\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Homunculus Servant';\n    if (name === '') name = 'Homunculus Servant';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpValue.total,\n                        'value': hpValue.total\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [mendingData.name]: mendingData,\n                [forceStrikeData.name]: forceStrikeData,\n                [channelMagicData.name]: channelMagicData,\n                [evasionData.name]: evasionData,\n                [dodgeData.name]: dodgeData,\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'earth';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    let homunculusToken = await tashaSummon.spawn(sourceActor, updates, 86400, workflow.item, 120, workflow.token, animation);\n    if (!homunculusToken) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Homunculus Servant - Command', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Homunculus Servant - Command');\n    let channelMagicCasterData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Channel Magic (Caster)', false);\n    if (!channelMagicCasterData) return;\n    channelMagicCasterData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Channel Magic (Caster)');\n    channelMagicCasterData.name = 'Channel Magic'\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [channelMagicCasterData.name]: channelMagicCasterData,\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Homunculus Servant',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Homunculus Servant\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                },\n                'feature': {\n                    'homunculusServant': homunculusToken.id\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}\nasync function attackApply({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = workflow.actor.effects.find((e) => e?.flags['chris-premades']?.feature?.homunculusServant);\n    if (!effect) return;\n    let homunculusId = effect.flags['chris-premades']?.feature?.homunculusServant;\n    if (!homunculusId) return;\n    let homunculusToken = canvas.scene.tokens.get(homunculusId);\n    if (!homunculusToken) return;\n    if (chris.getDistance(workflow.token, homunculusToken) > 120) {\n        ui.notifications.info('Homunculus Too Far Away!');\n        return;\n    }\n    let effectData = {\n        'name': 'Channel Magic',\n        'icon': workflow.item.img,\n        'origin': effect.origin.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.rangeOverride.attack.all',\n                'mode': 0,\n                'value': 1,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'priority': 20,\n                'value': 'function.chrisPremades.macros.homunculusServant.attackEarly,preambleComplete'\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    '1Attack'\n                ],\n                'stackable': 'none',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n    await chris.createEffect(homunculusToken.actor, effectData);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell' || workflow.item.system.range.units != 'touch') {\n        ui.notifications.info('Invalid Spell Type!');\n        return false;\n    }\n    let effect = workflow.actor.effects.find((e) => e?.flags['chris-premades']?.feature?.homunculusServant);\n    if (!effect) return;\n    let homunculusId = effect.flags['chris-premades']?.feature?.homunculusServant;\n    if (!homunculusId) return;\n    let homunculusToken = canvas.scene.tokens.get(homunculusId);\n    if (!homunculusToken) return;\n    await chris.addCondition(homunculusToken.actor, 'Reaction');\n}\nexport let homunculusServant = {\n    'item': item,\n    'attackApply': attackApply,\n    'attackEarly': attackEarly\n}","import {chris} from '../../../helperFunctions.js';\nexport async function bite({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let saveResult = workflow.saveResults[0].total;\n    let saveDC = workflow.item.system.save.dc;\n    if (saveDC - saveResult < 5) return;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, 'Poisoned Bite');\n    let roll = await new Roll('1d10').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    let seconds = roll.total * 60;\n    let updates = {\n        'duration': {\n            'seconds': seconds\n        }\n    };\n    await chris.updateEffect(effect, updates);\n    await chris.addCondition(targetActor, 'Unconscious', false, workflow.item.uuid);\n}","import {bite} from './bite.js';\nexport let homunculus = {\n    'bite': bite\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.update({\n        'flags': {\n            'chris-premades': {\n                'template': {\n                    'name': 'hungerOfHadar',\n                    'castLevel': workflow.castData.castLevel,\n                    'saveDC': chris.getSpellDC(workflow.item),\n                    'macroName': 'hungerOfHadar',\n                    'templateUuid': template.uuid,\n                    'turn': 'both'\n                }\n            },\n            'limits': {\n                'light': {\n                    'enabled': true,\n                    'range': 0\n                }\n            },\n            'walledtemplates': {\n                'wallRestriction': 'move',\n                'wallsBlock': 'walled'\n            }\n        }\n    });\n    let tokens = chris.templateTokens(template).map(i => game.canvas.scene.tokens.get(i)).filter(j => !chris.findEffect(j.actor, 'Hunger of Hadar'));\n    let effectData = {\n        'label': 'Hunger of Hadar',\n        'icon': workflow.item.img,\n        'origin': template.uuid,\n        'duration': {\n            'seconds': 600\n        },\n        'changes': [\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': 'Blinded',\n                'priority': 20\n            }\n        ]\n    };\n    for (let t of tokens) await chris.createEffect(t.actor, effectData);\n}\nasync function trigger(token, trigger, reason) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    if (reason === 'move') {\n        let templates = chris.tokenTemplates(token).map(i => canvas.scene.templates.get(i)).filter(i => i.flags['chris-premades']?.template?.name === 'hungerOfHadar');\n        if (!templates.length) {\n            let effect = chris.findEffect(token.actor, 'Hunger of Hadar');\n            if (!effect) return;\n            await chris.removeEffect(effect);\n        } else {\n            let effect = chris.findEffect(token.actor, 'Hunger of Hadar');\n            if (effect) {\n                if (effect.origin === template.uuid) return;\n                await chris.removeEffect(effect);\n            }\n            let effectData = {\n                'label': 'Hunger of Hadar',\n                'icon': originItem.img,\n                'origin': template.uuid,\n                'duration': {\n                    'seconds': 600\n                },\n                'changes': [\n                    {\n                        'key': 'macro.CE',\n                        'mode': 0,\n                        'value': 'Blinded',\n                        'priority': 20\n                    }\n                ]\n            };\n            await chris.createEffect(token.actor, effectData);\n        }\n    } else {\n        let queueSetup = await queue.setup(trigger.templateUuid, 'hunterOfHadar-' + reason, 50);\n        if (!queueSetup) return;\n        let itemName = reason === 'turnStart' ? 'Hunger of Hadar - Cold' : 'Hunger of Hadar - Tentacles';\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', itemName, false);\n        if (!featureData) {\n            queue.remove(trigger.templateUuid);\n            return;\n        }\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', itemName);\n        if (itemName === 'Hunger of Hadar - Tentacles') featureData.system.save.dc = trigger.saveDC;\n        delete featureData._id;\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n        let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n        await MidiQOL.completeItemUse(feature, config, options);\n        queue.remove(trigger.templateUuid);\n    }\n}\nasync function removed(template) {\n    let tokens = game.canvas.scene.tokens.filter(i => i.actor.effects.find(j => j.origin === template.uuid));\n    for (let token of tokens) {\n        let templates = chris.tokenTemplates(token).map(i => canvas.scene.templates.get(i)).filter(j => j.flags.dnd5e?.origin != template.flags.dnd5e.origin);\n        if (templates.length) return;\n        let effect = chris.findEffect(token.actor, 'Hunger of Hadar');\n        await chris.removeEffect(effect);\n    }\n}\nexport let hungerOfHadar = {\n    'item': item,\n    'trigger': trigger,\n    'removed': removed\n}","import {chris} from '../../../helperFunctions.js';\nexport async function hungryJaws({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size === 0) return;\n    let profBonus = workflow.actor.system.attributes.prof;\n    await chris.applyDamage(workflow.token, profBonus, 'temphp');\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Hunter\\'s Mark - Move', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Hunter\\'s Mark - Move');\n    let seconds;\n    switch (workflow.castData.castLevel) {\n        case 3:\n        case 4:\n            seconds = 28800;\n            break;\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 9:\n            seconds = 86400;\n            break;\n        default:\n            seconds = 3600;\n    }\n    let targetEffectData = {\n        'name': 'Marked',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': seconds\n        }\n    };\n    await chris.createEffect(workflow.targets.first().actor, targetEffectData);\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Hunter\\'s Mark');\n        let targetTokenId = effect.changes[0].value;\n        let targetToken = canvas.scene.tokens.get(targetTokenId);\n        if (!targetToken) return;\n        let targetActor = targetToken.actor;\n        let targetEffect =  chrisPremades.helpers.findEffect(targetActor, 'Marked');\n        if (!targetEffect) return;\n        await chrisPremades.helpers.removeEffect(targetEffect);\n    }\n    let sourceEffectData = {\n        'name': 'Hunter\\'s Mark',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.chris-premades.spell.huntersMark',\n                'mode': 5,\n                'value': workflow.targets.first().id,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.huntersMark.attack,postDamageRoll',\n                'priority': 20\n            }\n        ],\n        'transfer': false,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': seconds\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [sourceEffectData.name]: sourceEffectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': sourceEffectData.name,\n        'description': sourceEffectData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let conEffect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (conEffect) {\n        let updates = {\n            'duration': {\n                'seconds': seconds\n            }\n        };\n        await chris.updateEffect(conEffect, updates);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let attackType = workflow.item.system.actionType;\n    if (!(attackType === 'mwak' || attackType === 'rwak')) return;\n    let sourceActor = workflow.actor;\n    let markedTarget = sourceActor.flags['chris-premades']?.spell?.huntersMark;\n    let targetToken = workflow.hitTargets.first();\n    if (targetToken.id != markedTarget) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'huntersMark', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = '1d6[' + workflow.defaultDamageType + ']'\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function move({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let oldTargetTokenId = workflow.actor.flags['chris-premades']?.spell?.huntersMark;\n    let oldTargetToken = canvas.scene.tokens.get(oldTargetTokenId);\n    let oldTargetOrigin;\n    if (oldTargetToken) {\n        let oldTargetActor = oldTargetToken.actor;\n        let oldTargetEffect =  chris.findEffect(oldTargetActor, 'Marked');\n        if (oldTargetEffect) {\n            await chris.removeEffect(oldTargetEffect);\n            oldTargetOrigin = oldTargetEffect.origin;\n        }\n    }\n    let effect = chris.findEffect(workflow.actor, 'Hunter\\'s Mark');\n    let duration = 3600;\n    if (effect) duration = effect.duration.remaining;\n    let effectData = {\n        'name': 'Marked',\n        'icon': workflow.item.img,\n        'origin': oldTargetOrigin,\n        'duration': {\n            'seconds': duration\n        }\n    };\n    await chris.createEffect(targetActor, effectData);\n    if (effect) {\n        let changes = effect.changes;\n        changes[0].value = targetToken.id;\n        let updates = {changes};\n        await chris.updateEffect(effect, updates);\n    }\n}\nexport let huntersMark = {\n    'item': item,\n    'attack': attack,\n    'move': move\n};","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function turnStart(token, actor) {\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let levels = actor.classes['blood-hunter'].system.levels;\n    if (!levels) return;\n    let bonusHealth = 0;\n    if (levels >= 11 && (actor.system.attributes.hp.max / 2) > actor.system.attributes.hp.value) {\n        let featureData2 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Lycan Regeneration', false);\n        featureData2.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Lycan Regeneration');\n        let feature2 = new CONFIG.Item.documentClass(featureData2, {'parent': workflow.actor});\n        if (levels >= 15) {\n            let effectData2 = {\n                'name': 'Condition Advantage',\n                'icon': 'icons/magic/time/arrows-circling-green.webp',\n                'duration': {\n                    'seconds': 1,\n                },\n                'changes': [\n                    {\n                        'key': 'flags.midi-qol.advantage.ability.save.wis',\n                        'mode': 5,\n                        'value': '1',\n                        'priority': 20\n                    }\n                ]\n            }\n            await chris.createEffect(actor, effectData2);\n        }\n        let featureWorkflow = await MidiQOL.completeItemUse(feature2, config, options);\n        if (levels >= 15) {\n            let advEffect = chris.findEffect(actor, 'Condition Advantage')\n            if (advEffect) await advEffect.delete();\n        } \n        bonusHealth = featureWorkflow.damageTotal;\n    }\n    if ((actor.system.attributes.hp.max / 2) <= actor.system.attributes.hp.value + bonusHealth) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Bloodlust', false);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bloodlust');\n    if (!featureData) return;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function transformation({speaker, actor, token, character, item, args, scope, workflow}) {\n    let levels = workflow.actor.classes['blood-hunter'].system.levels;\n    if (!levels) return;\n    let weaponData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Predatory Strike', false);\n    if (!weaponData) return;\n    weaponData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Predatory Strike');\n    if (levels >= 7) {\n        weaponData.system.attackBonus = '+1';\n        weaponData.system.properties.mgc = true;\n    }\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Hybrid Transformation');\n    }\n    let bonuses = '+1';\n    if (levels >= 11) {\n        bonuses = '+2';\n        weaponData.system.attackBonus = '+2';\n        weaponData.system.damage.parts = [\n            [\n                '1d8[bludgeoning] + @mod',\n                'bludgeoning'\n            ]\n        ];\n    }\n    let seconds = 3600;\n    if (levels >= 18) {\n        bonuses = '+3';\n        weaponData.system.attackBonus = '+3';\n        seconds = 604800\n    }\n    let changes = [\n        {\n            'key': 'flags.midi-qol.advantage.ability.check.str',\n            'mode': 5,\n            'value': '1',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.advantage.ability.save.str',\n            'mode': 5,\n            'value': '1',\n            'priority': 20\n        },\n        {\n            'key': 'system.traits.dr.custom',\n            'mode': 0,\n            'value': 'Non-Magical Damage',\n            'priority': 20\n        },\n        {\n            'key': 'system.attributes.ac.bonus',\n            'mode': 2,\n            'value': '+1',\n            'priority': 20\n        },\n        {\n            'key': 'system.bonuses.mwak.damage',\n            'mode': 2,\n            'value': bonuses,\n            'priority': 20\n        }\n    ];\n    if (levels >= 15) {\n        changes.push(\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.await chrisPremades.macros.hybridTransformation.voracious,preAttackRoll',\n                'priority': 20\n            }\n        );\n    }\n    let effectData = {\n        'name': 'Hybrid Transformation',\n        'icon': workflow.item.img,\n        'changes': changes,\n        'disabled': false,\n        'duration': {\n            'seconds': seconds\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'dae': {\n                'selfTarget': true,\n                'selfTargetAlways': false,\n                'stackable': 'none',\n                'durationExpression': '',\n                'macroRepeat': 'none',\n                'specialDuration': [\n                    'zeroHP'\n                ]\n            },\n            'effectmacro': {\n                'onTurnStart': {\n                    'script': 'await chrisPremades.macros.hybridTransformation.turnStart(token, actor);'\n                },\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'dae': {\n                'transfer': true\n            }\n        }\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [weaponData.name]: weaponData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) setProperty(updates, 'actor.img', avatarImg);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': effectData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function voracious({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, 'Brand of Castigation');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    if (originItem.actor.uuid != workflow.actor.uuid) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'voracious',150);\n    if (!queueSetup) return;\n    workflow.advantage = true;\n    workflow.attackAdvAttribution.add('Advantage: Brand of the Voracious');\n    queue.remove(workflow.item.uuid);\n}\nexport let hybridTransformation = {\n    'item': transformation,\n    'turnStart': turnStart,\n    'voracious': voracious\n}","import {chris} from '../../helperFunctions.js';\nexport async function iceStorm({speaker, actor, token, character, item, args, scope, workflow}) {\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return\n    if (!workflow.templateId) return;\n    let template = canvas.scene.collections.templates.get(workflow.templateId)?.object;\n    if (!template) return;\n    //Animations by: eskiemoh\n    await new Sequence()\n        .effect()\n        .file('jb2a.magic_signs.circle.02.evocation.loop.blue')\n        .atLocation(template)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .fadeIn(750)\n        .fadeOut(1000)\n        .size(9, {'gridUnits': true})\n        .duration(11000)\n        .belowTokens()\n        .zIndex(0.1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.evocation.loop.blue')\n        .atLocation(template)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .fadeIn(150, {'delay': 500})\n        .size(9, {'gridUnits': true})\n        .duration(1000)\n        .fadeOut(250)\n        .belowTokens()\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .zIndex(0.11)\n\n        .effect()\n        .file('jb2a.extras.tmfx.border.circle.outpulse.01.fast')\n        .scaleIn(0, 500, {'ease': 'easeOutQuint'})\n        .delay(400)\n        .fadeOut(1000)\n        .atLocation(template)\n        .duration(1000)\n        .size(12, {'gridUnits': true})\n        .zIndex(1)\n\n        .wait(1000)\n\n        .play();\n    new Sequence()\n        .effect()\n        .file('jb2a.sleet_storm.blue')\n        .atLocation(template)\n        .size(9.5, {'gridUnits': true})\n        .persist()\n        .attachTo(template)\n        .fadeIn(6000)\n        .fadeOut(1000)\n        .delay(500)\n        .belowTokens()\n\n        .effect()\n        .file('jb2a.smoke.ring.01.white')\n        .atLocation(template)\n        .size(12, {'gridUnits': true})\n        .fadeIn(4000)\n        .opacity(0.2)\n        .duration(6000)\n        .playbackRate(0.75)\n        .fadeOut(1000)\n        .delay(500)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.evocation.loop.blue')\n        .atLocation(template)\n        .fadeIn(6000)\n        .fadeOut(1000)\n        .delay(500)\n        .size(9, {'gridUnits': true})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 0})\n        .opacity(0.2)\n        .persist()\n        .attachTo(template)\n        .belowTokens()\n        .zIndex(0.1)\n\n        .play();\n    for (let e = 0; e < 44; e++) {\n        let offsetX = (Math.random() * (3.5 + 3.5) - 3.5) * canvas.grid.size;\n        let offsetY = (Math.random() * (3.5 + 3.5) - 3.5) * canvas.grid.size;\n        new Sequence()\n            .wait(150 * e + 1)\n\n            .effect()\n            .file('jb2a.spell_projectile.ice_shard')\n            .scale(1)\n            .atLocation({'x':template.x + offsetX, 'y': template.y + offsetY}, {'offset': {'y': -7}, 'gridUnits': true})\n            .stretchTo({'x':template.x + offsetX, 'y': template.y + offsetY},{ 'offset': {'y':0}, 'gridUnits': true})\n            .zIndex(6)\n\n            .play();\n    }\n    Array.from(workflow.targets).forEach(target => {\n        new Sequence()\n            .wait(1150)\n\n            .effect()\n            .from(target)\n            .atLocation(target)\n            .loopProperty('sprite', 'position.x', {'from': -0.025, 'to': 0.025, 'duration': 75, 'pingPong': true, 'gridUnits': true})\n            .fadeIn(100)\n            .fadeOut(400)\n            .duration(500)\n            .scaleToObject(target.document.scale)\n            .opacity(0.5)\n            .repeats(22,300,300)\n\n            .effect()\n            .file('jb2a.impact.008.blue')\n            .atLocation(target, {'randomOffset': 1})\n            .randomRotation()\n            .scaleToObject(2)\n            .filter('ColorMatrix', {'saturate': -0.75, 'brightness': 1.5})\n            .repeats(22,300,300)\n\n            .play();\n    });\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {translate} from '../../../../translations.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!chris.findEffect(workflow.actor, 'Rage')) return;\n    let naturalWeapon = workflow.item.flags['chris-premades']?.feature?.formOfTheBeast?.natural;\n    if (!naturalWeapon) return;\n    let feature = chris.getItem(workflow.actor, 'Infectious Fury');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'formOfTheBeast', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': feature.system.uses.value - 1});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'infectiousFuryItem', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, [['Attack a Nearby Target', false], ['Take Damage', 'damage']], 'How do you curse your target?') ?? 'damage';\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageRoll = await new Roll('2d12[' + translate.damageType('psychic') + ']').roll({async: true});\n    await chris.applyWorkflowDamage(workflow.token, damageRoll, 'psychic', [workflow.targets.first()], workflow.item.name, workflow.itemCardId);\n    queue.remove(workflow.item.uuid);\n}\nexport let infectiousFury = {\n    'attack': attack,\n    'item': item\n}","import {translate} from '../../translations.js';\nimport {chris} from '../../helperFunctions.js';\nimport {constants} from '../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'insectPlague',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'insectPlague',\n        'templateUuid': template.uuid,\n        'turn': 'end',\n        'ignoreMove': false,\n        'ignoreStart': true\n    });\n}\nasync function trigger(token, trigger) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.insectPlague?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.insectPlague.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Insect Plague - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Insect Plague - Damage');\n    featureData.system.save.dc = trigger.saveDC;\n    featureData.system.damage.parts = [\n        [\n            (trigger.castLevel - 1) + 'd10[' + translate.damageType('piercing') + ']',\n            'piercing'\n        ]\n    ];\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let insectPlague = {\n    'item': item,\n    'trigger': trigger\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function insightfulFighting({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    if (chris.findEffect(targetToken.actor, 'Incapacitated')) return;\n    let sourceRoll = await workflow.actor.rollSkill('ins');\n    let targetRoll = await chris.rollRequest(targetToken, 'skill', 'dec');\n    if (targetRoll.total >= sourceRoll.total) return;\n    let effectData = {\n        'label': 'Insightful Fighting',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.feature.insightfulFightning.target',\n                'mode': 5,\n                'value': targetToken.document.uuid,\n                'priority': 20\n            }\n        ]\n    }\n    let effect = chris.findEffect(workflow.actor, 'Insightful Fighting');\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(workflow.actor, effectData);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function inspiringSmite({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targets = await chris.findNearby(workflow.token, 30, 'ally');\n    if (workflow.token) targets.push(workflow.token);\n    if (targets.length === 0) return;\n    let classLevels = workflow.actor.classes.paladin?.system.levels;\n    if (!classLevels) return;\n    let rollFormula = '2d8[temphp] + ' + classLevels;\n    let damageRoll = await new Roll(String(rollFormula)).evaluate({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    let buttons = [\n        {\n            'label': 'Ok',\n            'value': true\n        }, {\n            'label': 'Cancel',\n            'value': false\n        }\n    ];\n    let selection = await chris.selectTarget('Who is getting healing? (Max: ' + damageRoll.total + ')', buttons, targets, null, 'number');\n    if (!selection.buttons) return;\n    let total = 0;\n    for (let i of selection.inputs) {\n        if (!isNaN(i)) total += i;\n    }\n    if (total > damageRoll.total) {\n        ui.notifications.info('You can\\'t heal that much!');\n        return;\n    }\n    let count = 0;\n    for (let i of targets) {\n        if (!isNaN(selection.inputs[count])) {\n            await chris.applyDamage([i], selection.inputs[count], 'temphp');\n            new Sequence().effect().atLocation(i).file('jb2a.cure_wounds.400px.blue').play();\n        }\n        count++;\n    }\n}","import {chris} from '../../../helperFunctions.js';\nexport async function bodyThief({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let actorCheck = await workflow.actor.rollAbilityTest('int');\n    let targetCheck = await targetActor.rollAbilityTest('int');\n    if (actorCheck.total <= targetCheck.total) return;\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        }\n    };\n    await chris.createEffect(targetActor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function devourIntellect({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let roll = await new Roll('3d6').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    let targetActor = workflow.targets.first().actor;\n    if (targetActor.system.abilities.int.value > roll.total) return;\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.abilities.int.value',\n                'mode': 3,\n                'value': '0',\n                'priority': 20\n            },\n            {\n                \"key\": \"macro.CE\",\n                \"mode\": 0,\n                \"value\": \"Stunned\",\n                \"priority\": 20\n            },\n            {\n                \"key\": \"macro.CE\",\n                \"mode\": 0,\n                \"value\": \"Incapacitated\",\n                \"priority\": 20\n            }\n        ]\n    };\n    await chris.createEffect(targetActor, effectData);\n}","import {bodyThief} from './bodyThief.js'\nimport {devourIntellect} from './devourIntellect.js'\nexport let intellectDevourer = {\n    'devourIntellect': devourIntellect,\n    'bodyThief': bodyThief\n}","import {chris} from '../../helperFunctions.js';\nimport {tokenMove} from '../../utility/movement.js';\nimport {constants} from '../../constants.js';\nimport {fireShield} from './fireShield.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Investiture of Flame');\n        await chrisPremades.tokenMove.remove('investitureOfFlame', token.id);\n        let animation = chrisPremades.helpers.getConfiguration(origin, 'animation') ?? chrisPremades.helpers.jb2aCheck() === 'patreon';\n        if (!animation) return;\n        await Sequencer.EffectManager.endEffects({'name': 'Investiture of Flame', 'object': token});\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Investiture of Flame - Fire', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investiture of Flame - Fire');\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'baseLevel': 6,\n                'castLevel': workflow.castData.castLevel,\n                'school': 'trs'\n            }\n        }\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 600\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'cold',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.di.value',\n                'mode': 0,\n                'value': 'fire',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.dim',\n                'mode': 4,\n                'value': '60',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': '30',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            },\n            'autoanimations': {\n                'isEnabled': false,\n                'version': 5\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Investiture of Flame',\n        'description': 'Investiture of Flame'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let castLevel = workflow.castData.castLevel;\n    let spellDC = chris.getSpellDC(workflow.item);\n    let sourceTokenID = workflow.token.id;\n    let range = 5;\n    let damage = '4d8';\n    let damageType = 'fire';\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    await tokenMove.add('investitureOfFlame', castLevel, spellDC, damage, damageType, sourceTokenID, range, true, true, 'end', effect.uuid);\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return;\n    await fireShield.animation(workflow.token, 'fire', 'Investiture of Flame');\n}\nasync function moved(token, castLevel, spellDC, damage, damageType, sourceTokenID, reason) {\n    let doDamage = false;\n    if (!chris.inCombat()) {\n        doDamage = true;\n    } else {\n        let turnName = reason === 'move' ? 'current' : 'previous';\n        let combatant = game.combat.combatants.get(game.combat[turnName].combatantId);\n        let lastTriggerTurn = combatant.flags?.['chris-premades']?.spell?.investitureOfFlame?.[sourceTokenID]?.lastTriggerTurn;\n        let currentTurn = game.combat[turnName].round + '-' + game.combat[turnName].turn;\n        if (!lastTriggerTurn || lastTriggerTurn != currentTurn) {\n            doDamage = true;\n            await combatant.setFlag('chris-premades', 'spell.investitureOfFlame.' + sourceTokenID + '.lastTriggerTurn', currentTurn);\n        }\n    }\n    if (!doDamage) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Investiture of Flame - Heat', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investiture of Flame - Heat');\n    featureData.system.save.dc = spellDC;\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'baseLevel': 6,\n                'castLevel': castLevel,\n                'school': 'trs'\n            }\n        }\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let sourceToken = canvas.tokens.get(sourceTokenID);\n    if (!sourceToken) return;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': sourceToken.actor});\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let investitureOfFlame = {\n    'item': item,\n    'moved': moved\n}","import {chris} from '../../helperFunctions.js';\nimport {fireShield} from './fireShield.js';\nexport async function investitureOfIce({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Investiture of Ice');\n        let animation = chrisPremades.helpers.getConfiguration(origin, 'animation') ?? chrisPremades.helpers.jb2aCheck() === 'patreon';\n        if (!animation) return;\n        await Sequencer.EffectManager.endEffects({'name': 'Investiture of Ice', 'object': token});\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Investiture of Ice - Cone', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investiture of Ice - Cone');\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'baseLevel': 6,\n                'castLevel': workflow.castData.castLevel,\n                'school': 'trs'\n            }\n        }\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 600\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'fire',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.di.value',\n                'mode': 0,\n                'value': 'cold',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            },\n            'autoanimations': {\n                'isEnabled': false,\n                'version': 5\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Investiture of Ice',\n        'description': 'Investiture of Ice'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return;\n    await fireShield.animation(workflow.token, 'cold', 'Investiture of Ice');\n}","import {chris} from '../../helperFunctions.js';\nexport async function investitureOfStone({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Investiture of Stone');\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Investiture of Stone - Earthquake', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Investiture of Stone - Earthquake');\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'baseLevel': 6,\n                'castLevel': workflow.castData.castLevel,\n                'school': 'trs'\n            }\n        }\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 600\n        },\n        'changes': [\n            {\n                'key': 'system.traits.dr.custom',\n                'mode': 0,\n                'value': 'Non-Magical Physical',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Investiture of Stone',\n        'description': 'Investiture of Stone'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {chris} from '../../../../helperFunctions.js';\nasync function reaction({speaker, actor, token, character, item, args, scope, workflow}) {\n    let reactionEffect = chris.findEffect(workflow.actor, 'Reaction');\n    if (reactionEffect) await chris.removeEffect(reactionEffect);\n    let effect = chris.findEffect(workflow.actor, 'Summoned Creature');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    await chris.addCondition(origin.actor, 'Reaction');\n    await workflow.item.update({'system.uses.max': 1});\n}\nasync function turnStart(effect) {\n    let familiarId = effect.flags['chris-premades']?.summons?.ids[effect.name][0];\n    if (!familiarId) return;\n    let familiarToken = canvas.scene.tokens.get(familiarId);\n    if (!familiarToken) return;\n    let targetItem = familiarToken.actor.items.find(i => i.name === 'Investment of the Chain Master - Familiar Resistance');\n    if (!targetItem) return;\n    await targetItem.update({'system.uses.max': 0});\n}\nexport let investmentOfTheChainMaster = {\n    'reaction': reaction,\n    'turnStart': turnStart\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nimport {queue} from '../../utility/queue.js';\nexport async function javelinOfLightning({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.item.system.uses.value || !workflow.targets.size) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'javelinOfLightning', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, constants.yesNo, 'Use ' + workflow.item.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await workflow.item.update({'system.uses.value': 0});\n    let targetToken = workflow.targets.first();\n    let ray = new Ray(workflow.token.center, targetToken.center);\n    if (ray.distance === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let templateData = {\n        'angle': 0,\n        'direction': Math.toDegrees(ray.angle),\n        'distance': ray.distance / canvas.scene.grid.size * 5,\n        'x': ray.A.x,\n        'y': ray.A.y,\n        't': 'ray',\n        'user': game.user,\n        'fillColor': game.user.color,\n        'width': 5\n    };\n    let bonusDamageFormula = '4d6[' + translate.damageType('lightning') + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({'async': true});\n    await workflow.setDamageRoll(damageRoll);\n    let {template, tokens} = await chris.createTemplate(templateData, true);\n    let effectData = {\n        'name': workflow.item.name + ' Bolt Template',\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.dae.deleteUuid',\n                'mode': 5,\n                'priority': 20,\n                'value': template.uuid\n            }\n        ],\n        'duration': {\n            'seconds': 1\n        }\n    };\n    new Sequence()\n        .effect()\n        .atLocation(workflow.token)\n        .stretchTo(targetToken)\n        .file('jb2a.lightning_bolt.wide.blue')\n        .play();\n    await chris.createEffect(workflow.actor, effectData);\n    let targets = tokens.filter(i => i.uuid != workflow.token.document.uuid && i.uuid != targetToken.document.uuid);\n    if (!targets.length) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Javelin of Lightning - Bolt', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Javelin of Lightning - Bolt');\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions(targets.map(i => i.uuid));\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function pactTactics({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let nearbyTargets = chris.findNearby(workflow.targets.first(), 5, 'enemy', false).filter(i => i.document.uuid != workflow.token.document.uuid);\n    if (nearbyTargets.length === 0) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'pactTactics', 150);\n    if (!queueSetup) return;\n    workflow.advantage = true;\n    workflow.attackAdvAttribution.add('Advantage: Pack Tactics');\n    queue.remove(workflow.item.uuid);\n}","import {pactTactics} from './packTactics.js';\nexport let kobold = {\n    'packTactics': pactTactics\n}","export function labyrinthineRecall(skillId, options) {\n    return skillId != 'sur' ? false : {'label': 'This check is to navigate or track.', 'type': 'advantage'};\n}","import {chris} from '../../helperFunctions.js';\nimport {effectAuras} from '../../utility/effectAuras.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Lantern Of Revealing - Aura');\n    let mode = effect?.flags?.['chris-premades']?.item?.lanternOfRevealing?.mode;\n    let options = [];\n    if (mode != 'bright') options.push(['Light Lantern (Bright)', 'bright']);\n    if (mode != 'dim') options.push(['Light Lantern (Dim)', 'dim']);\n    if (mode != 'extinguish') options.push(['Extinguish', 'extinguish']);\n    let selection = await chris.dialog('Lantern of Revealing', options);\n    if (!selection) return;\n    let effectData;\n    switch (selection) {\n        case 'bright':\n            if (effect) {\n                if (mode === 'bright') return;\n                await chris.removeEffect(effect);\n            }\n            async function effectMacro() {\n                await chrisPremades.macros.lanternOfRevealing.end(token);\n            }\n            effectData = {\n                'name': 'Lantern Of Revealing - Aura',\n                'icon': workflow.item.img,\n                'duration': {\n                    'seconds': 21600\n                },\n                'origin': workflow.item.uuid,\n                'changes': [\n                    {\n                        'key': 'ATL.light.dim',\n                        'mode': 4,\n                        'value': 60,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'ATL.light.bright',\n                        'mode': 4,\n                        'value': 30,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.name',\n                        'mode': 5,\n                        'value': 'lanternOfRevealing',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.castLevel',\n                        'mode': 5,\n                        'value': 1,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.range',\n                        'mode': 5,\n                        'value': 30,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.disposition',\n                        'mode': 5,\n                        'value': 'all',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.effectName',\n                        'mode': 5,\n                        'value': 'Lantern Of Revealing - Revealed',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.lanternOfRevealing.macroName',\n                        'mode': 5,\n                        'value': 'lanternOfRevealing',\n                        'priority': 20\n                    }\n                ],\n                'flags': {\n                    'effectmacro': {\n                        'onDelete': {\n                            'script': chris.functionToString(effectMacro)\n                        }\n                    },\n                    'chris-premades': {\n                        'item': {\n                            'lanternOfRevealing': {\n                                'mode': 'bright'\n                            }\n                        }\n                    }\n                }\n            };\n            await chris.createEffect(workflow.actor, effectData);\n            let flagAuras = {\n                'lanternOfRevealing': {\n                    'name': 'lanternOfRevealing',\n                    'castLevel': 1,\n                    'range': 30,\n                    'disposition': 'all',\n                    'effectName': 'Lantern Of Revealing - Revealed',\n                    'macroName': 'lanternOfRevealing'\n                }\n            }\n            effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n            return;\n        case 'dim':\n            if (effect) {\n                if (mode === 'dim') return;\n                await chris.removeEffect(effect);\n            }\n            effectData = {\n                'name': 'Lantern Of Revealing - Aura',\n                'icon': workflow.item.img,\n                'duration': {\n                    'seconds': 21600\n                },\n                'origin': workflow.item.uuid,\n                'changes': [\n                    {\n                        'key': 'ATL.light.dim',\n                        'mode': 4,\n                        'value': 5,\n                        'priority': 20\n                    }\n                ],\n                'flags': {\n                    'chris-premades': {\n                        'item': {\n                            'lanternOfRevealing': {\n                                'mode': 'dim'\n                            }\n                        }\n                    }\n                }\n            };\n            await chris.createEffect(workflow.actor, effectData);\n            return;\n        case 'extinguish':\n            if (effect) await chris.removeEffect(effect);\n            return;\n    }\n}\nasync function aura(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Lantern Of Revealing - Aura');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Lantern Of Revealing - Revealed',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.ci.value',\n                'value': 'invisible',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    }\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function end(token) {\n    effectAuras.remove('lanternOfRevealing', token.document.uuid);\n}\nexport let lanternOfRevealing = {\n    'item': item,\n    'aura': aura,\n    'end': end\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function legionOfOne(actor) {\n    let item = chris.getItem(actor, 'Unleash Incarnation');\n    if (!item?.system?.uses?.value) return;\n    await item.update({'system.uses.value': 1});\n}","import {stench} from '../troglodyte/stench.js';\nexport let leucrotta = {\n    'stench': stench\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function lifeTransference({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let damageFormula = (workflow.castData.castLevel + 1) + 'd8[none]';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(workflow.token, damageRoll.total, 'none');\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lifeTransference', 50);\n    if (!queueSetup) return;\n    let healing = damageRoll.total * 2;\n    let healingRoll = await new Roll(healing + '[healing]').roll({async: true});\n    await workflow.setDamageRoll(healingRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function lightningArrowDamage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.name === 'Lightning Arrow - Burst') return;\n    if (workflow.targets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lightningArrow', 50);\n    if (!queueSetup) return;\n    let targetToken = workflow.targets.first();\n    if (!(workflow.item.system.properties?.thr || workflow.item.system.actionType === 'rwak')) return;\n    let diceNumber = 4;\n    let itemAbility = workflow.item.system.ability;\n    if (itemAbility === '') {\n        itemAbility = 'str';\n        if (workflow.item.system.properties?.fin && workflow.actor.system.abilities.dex.mod > workflow.actor.system.abilities.str) itemAbility = 'dex';\n    }\n    let modifier = workflow.actor.system.abilities[itemAbility].mod;\n    let damageFormula = diceNumber + 'd8[lightning] + ' + modifier;\n    let effect = chris.findEffect(workflow.actor, 'Lightning Arrow');\n    let castLevel = 3;\n    if (effect) {\n        castLevel = effect.flags['midi-qol'].castData.castLevel;\n        let extraDiceNumber = castLevel - 3;\n        if (castLevel > 3) damageFormula = damageFormula + ' + ' + extraDiceNumber + 'd8[lightning]';\n    }\n    if (workflow.isCritical) damageFormula = chris.getCriticalFormula(damageFormula);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    if (workflow.hitTargets.size === 0) await chris.applyDamage([targetToken], Math.floor(damageRoll.total / 2), 'lightning');\n    let itemData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Lightning Arrow - Burst', false);\n    if (!itemData) {\n        if (effect) effect.delete();\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let saveDiceNumber = castLevel - 1;\n    itemData.system.damage.parts = [\n        [\n            saveDiceNumber + 'd8[lightning]',\n            'lightning'\n        ]\n    ];\n    if (effect) {\n        let originItem = await fromUuid(effect.origin);\n        itemData.system.save.dc = chris.getSpellDC(originItem);\n    }\n    itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Lightning Arrow - Burst');\n    itemData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    }\n    itemData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    let areaFeature = new CONFIG.Item.documentClass(itemData, {'parent': workflow.actor});\n    let newTargets = chris.findNearby(targetToken, 10, null);\n    let newTargetUuids =[];\n    new Sequence().effect().atLocation(workflow.token).stretchTo(targetToken).file('jb2a.chain_lightning.secondary.blue').play();\n    for (let i of newTargets) {\n        newTargetUuids.push(i.document.uuid);\n        new Sequence().effect().atLocation(targetToken).stretchTo(i).file('jb2a.chain_lightning.secondary.blue').play();\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions(newTargetUuids);\n    await MidiQOL.completeItemUse(areaFeature, config, options);\n    if (effect) effect.delete();\n    queue.remove(workflow.item.uuid);\n}\nasync function lightningArrowAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.isFumble) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lightningArrow', 50);\n    if (!queueSetup) return;\n    workflow.isFumble = false;\n    let updatedRoll = await new Roll('-100').evaluate({async: true});\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let lightningArrow = {\n    'attack': lightningArrowAttack,\n    'damage': lightningArrowDamage\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function lightningLure({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'lightningLure', 50);\n    if (!queueSetup) return;\n    let target = workflow.targets.first();\n    let sourceToken = workflow.token;\n    let useAnimation = chris.getConfiguration(workflow.item, 'animation') ?? chris.aseCheck();\n    let mDistance = chris.getDistance(workflow.token, target);\n    let pullDistance = 0;\n    if (workflow.failedSaves.size) {\n        if (mDistance >= 0 && mDistance <= 5) {\n            pullDistance = 0;\n        } else if (mDistance > 5 && mDistance <= 10) {\n            pullDistance = -5;\n        } else {\n            pullDistance = -10;\n        }\n    }\n    if (!useAnimation && workflow.failedSaves.size) {\n        await chris.pushToken(sourceToken, target, pullDistance);\n    } else if (!useAnimation && !workflow.failedSaves.size) {\n        queue.remove(workflow.item.uuid);\n        return;\n    } else {\n        let position = chris.getGridBetweenTokens(sourceToken, target, pullDistance);\n        await new Sequence()\n            .effect()\n            .atLocation(sourceToken)\n            .file('animated-spell-effects-cartoon.electricity.discharge.03')\n            .stretchTo(target, {'attachTo': true})\n            .delay(0)\n            .filter('ColorMatrix', {'saturate':1, 'hue': 25})\n            .scaleIn(0, 750, {'ease': 'easeOutQuint'})\n            .repeats(2, 600, 600)\n\n            .wait(250)\n\n            .effect()\n            .file('animated-spell-effects-cartoon.electricity.25')\n            .atLocation(target)\n            .scaleToObject(2 * target.document.width)\n            .playbackRate(1)\n            .spriteRotation(90)\n            .mirrorX()\n            .filter('ColorMatrix', {'saturate': 1, 'hue': -15})\n            .moveTowards({'x': position.x + (canvas.grid.size * target.document.width) / 2, 'y': position.y + (canvas.grid.size * target.document.height) / 2}, {'ease': 'easeInOutBack', 'rotate': false})\n            .zIndex(2)\n\n            .animation()\n            .on(target)\n            .opacity(0)\n\n            .animation()\n            .on(target)\n            .moveTowards({'x': position.x, 'y': position.y})\n            .opacity(0)\n            .delay(250)\n\n            .effect()\n            .from(target)\n            .atLocation(target)\n            .moveTowards({'x': position.x + (canvas.grid.size * target.document.width) / 2, 'y': position.y + (canvas.grid.size * target.document.height) / 2 }, {'ease': 'easeInOutBack', 'rotate': false})\n            .zIndex(0.1)\n            .scaleToObject(target.document.texture.scaleX * target.document.width)\n            .extraEndDuration(500)\n            .waitUntilFinished(-300)\n\n            .animation()\n            .on(target)\n            .fadeIn(250)\n            .opacity(1)\n\n            .effect()\n            .from(target)\n            .atLocation(target)\n            .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 75, 'pingPong': true, 'gridUnits': true})\n            .scaleToObject(target.document.texture.scaleX)\n            .delay(250)\n            .opacity(0.5)\n            .playIf(() => {\n                let distanceToTargetX = Math.abs(sourceToken.x - position.x);\n                let distanceToTargetY = Math.abs(sourceToken.y - position.y);\n                return distanceToTargetX <= canvas.grid.size && distanceToTargetY <= canvas.grid.size;\n            })\n\n            .effect()\n            .file('animated-spell-effects-cartoon.electricity.19')\n            .atLocation(sourceToken)\n            .scaleToObject(2)\n            .rotateTowards(target)\n            .filter('ColorMatrix', {'saturate':1, 'hue': -15 })\n            .zIndex(0.2)\n            .playIf(() => {\n                let distanceToTargetX = Math.abs(sourceToken.x - position.x);\n                let distanceToTargetY = Math.abs(sourceToken.y - position.y);\n                return distanceToTargetX <= canvas.grid.size && distanceToTargetY <= canvas.grid.size;\n            })\n\n            .play();\n    }\n    let fDistance = chris.getDistance(workflow.token, target);\n    if (fDistance > 5) {\n        workflow.damageItem.appliedDamage = 0;\n        workflow.damageItem.hpDamage = 0;\n        workflow.damageItem.newHP = workflow.damageItem.oldHP;\n        workflow.damageItem.newTempHP = workflow.damageItem.oldTempHP;\n        workflow.damageItem.tempDamage = 0;\n        workflow.damageItem.totalDamage = 0;\n    }\n    queue.remove(workflow.item.uuid);\n}\n","import {chris} from '../../../helperFunctions.js';\nexport async function longLimbed(origin, actor) {\n    let effectData = {\n        'icon': origin.img,\n        'origin': origin.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'name': origin.name,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.range.mwak',\n                'mode': 2,\n                'value': '+5',\n                'priority': 20\n            }\n        ],\n        'transfer': true\n    };\n    await chris.createEffect(actor, effectData);\n    if (chris.getConfiguration(origin, 'displaycard') ?? true) await origin.displayCard();\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function maddeningHex({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targets = chris.findNearby(workflow.targets.first(), 5, 'ally');\n    if (targets.length === 0) return;\n    await chris.applyDamage(targets, workflow.damageTotal, workflow.defaultDamageType);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function maelstromAura(token, origin) {\n    console.log('here');\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    console.log('here');\n    if (targetToken.document.disposition === token.document.disposition) return;\n    console.log('here');\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 10) return;\n    console.log('here');\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Maelstrom Aura', false);\n    if (!featureData) return;\n    console.log('here');\n    featureData.system.save.dc = chris.getSpellDC(origin);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maelstrom Aura');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    let queueSetup = await queue.setup(origin.uuid, 'maelstromAura', 50);\n    if (!queueSetup) return;\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(origin.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function magicMissile({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let maxMissiles = 3 + (workflow.castData.castLevel - 1);\n    let targets = Array.from(workflow.targets);\n    let selection = await chris.selectTarget('How many? (Max: ' + maxMissiles + ')', constants.okCancel, targets, true, 'number');\n    if (!selection.buttons) return;\n    let total = 0;\n    for (let i of selection.inputs) {\n        if (!isNaN(i)) total += i;\n    }\n    if (total > maxMissiles) {\n        ui.notifications.info('You can\\'t use that many missiles!');\n        return;\n    }\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Magic Missile Bolt', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Magic Missile Bolt');\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    };\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    delete featureData._id;\n    if (!game.settings.get('chris-premades', 'Magic Missile Toggle') && !chris.getConfiguration(workflow.item, 'homebrew')) {\n        let damageFormula = '1d4[force] + 1';\n        if (chris.getItem(workflow.actor, 'Empowered Evocation')) damageFormula += ' + ' + workflow.actor.system.abilities.int.mod;\n        let damageRoll = await new Roll(damageFormula).roll({async: true});\n        damageRoll.toMessage({\n            rollMode: 'roll',\n            speaker: {alias: name},\n            flavor: workflow.item.name\n        });\n        featureData.system.damage.parts = [\n            [\n                damageRoll.total + '[force]',\n                'force'\n            ]\n        ];\n    }\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([]);\n    let colors = [\n        'grey',\n        'dark_red',\n        'orange',\n        'yellow',\n        'green',\n        'blue',\n        'purple'\n    ];\n    let colorSelection = chris.getConfiguration(workflow.item, 'color') ?? 'purple';\n    if (colorSelection === 'random' || colorSelection === 'cycle') await Sequencer.Preloader.preload('jb2a.magic_missile');\n    let lastColor = Math.floor(Math.random() * colors.length);\n    for (let i = 0; i < selection.inputs.length; i++) {\n        if (isNaN(selection.inputs[i]) || selection.inputs[i] === 0) continue;\n        options.targetUuids = [targets[i].document.uuid];\n        for (let j = 0; j < selection.inputs[i]; j++) {\n            let path = 'jb2a.magic_missile.';\n            if (colorSelection === 'random') {\n                path += colors[Math.floor((Math.random() * colors.length))];\n            } else if (colorSelection === 'cycle') {\n                path += colors[lastColor];\n                lastColor++;\n                if (lastColor >= colors.length) lastColor = 0;\n            } else {\n                path += colorSelection;\n            }\n            new Sequence().effect().file(path).atLocation(workflow.token).stretchTo(targets[i]).randomizeMirrorY().play();\n            await MidiQOL.completeItemUse(feature, config, options);\n        }\n    }\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nimport {grapple} from '../../../actions/grapple.js';\nasync function baitAndSwitch({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    if (targetToken.id === workflow.token.id) return;\n    let selection = await chris.dialog('Who gets the AC bonus?', [['Yourself', false], ['Target', true]]);\n    if (selection === undefined) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': workflow.damageTotal,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'rounds': 1\n        },\n        'origin': workflow.item.uuid\n    };\n    let sourceToken = workflow.token;\n    let sourceUpdate = {\n        'token': {\n            'x': targetToken.x,\n            'y': targetToken.y\n        }\n    };\n    let targetUpdate = {\n        'token': {\n            'x': sourceToken.x,\n            'y': sourceToken.y\n        }\n    };\n    if (selection) {\n        targetUpdate['embedded'] = {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    } else {\n        sourceUpdate['embedded'] = {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    }\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(sourceToken.document, sourceUpdate, {}, options);\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n}\nasync function refund({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 0) return;\n    let originItem = chris.getItem(workflow.actor, 'Superiority Dice');\n    if (!originItem) return;\n    await originItem.update({'system.uses.value': originItem.system.uses.value + 1});\n}\nasync function distractingStrike({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Distracting Strike');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    }\n    let targetToken = workflow.hitTargets.first();\n    let effectData = {\n        'name': effect.name,\n        'icon': effect.icon,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.grants.advantage.attack.all',\n                'mode': 0,\n                'value': 'workflow.token.id != \"' + workflow.token.id + '\"',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.feature.onHit.distractingStrike',\n                'mode': 5,\n                'value': true,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'rounds': 1\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnStartSource'\n                ]\n            }\n        },\n        'origin': workflow.actor.uuid\n    };\n    await chris.createEffect(targetToken.actor, effectData);\n    await chris.removeEffect(effect);\n}\nasync function distractingStrikeOnHit(workflow, targetToken) {\n    if (workflow.hitTargets.size != 1) return;\n    let effect = chris.findEffect(targetToken.actor, 'Maneuvers: Distracting Strike');\n    if (!effect) return;\n    if (effect.origin === workflow.actor.uuid) return;\n    await chris.removeEffect(effect);\n}\nasync function goadingAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Goading Attack');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    } else {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Maneuvers: Goading Attack', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maneuvers: Goading Attack');\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        featureData.system.save.dc = chris.getSpellDC(originItem);\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        await chris.removeEffect(effect);\n        let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}\nasync function goadingAttackTarget({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let sourceId = workflow.actor.flags['chris-premades']?.feature?.goadingAttack;\n    if (!sourceId) return;\n    if (sourceId === workflow.targets.first().id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'goadingAttack', 50);\n    if (!queueSetup) return;\n    workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Goading Attack');\n    queue.remove(workflow.item.uuid);\n}\nasync function lungingAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let generatedMenu = [];\n    workflow.actor.items.forEach(item => {\n        if (item.type === 'weapon' && item.system.equipped === true) {\n            generatedMenu.push([item.name, item.id]);\n        }\n    });\n    let selection;\n    if (generatedMenu.length === 0) return;\n    if (generatedMenu.length === 1) selection = generatedMenu[0][1];\n    if (!selection) selection = await chris.dialog('What weapon?', generatedMenu);\n    if (!selection) return;\n    let weaponData = duplicate(workflow.actor.items.get(selection).toObject());\n    weaponData.system.range.value += 5;\n    let weapon = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n    let options = {\n        'targetUuids': [workflow.targets.first().document.uuid],\n        'workflowOptions': {\n            'autoRollDamage': 'always',\n            'autoFastDamage': true\n        }\n    };\n    await MidiQOL.completeItemUse(weapon, {}, options);\n}\nasync function menacingAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Menacing Attack');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    } else {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Maneuvers: Menacing Attack', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maneuvers: Menacing Attack');\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        featureData.system.save.dc = chris.getSpellDC(originItem);\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n        await chris.removeEffect(effect);\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}\nasync function parry(effect, origin) {\n    let changeValue = Number(effect.changes[0].value.substring(6));\n    let diceFormula = origin.actor.system.scale['battle-master']?.['combat-superiority-die']?.formula;\n    if (!diceFormula) return;\n    let dexMox = origin.actor.system.abilities.dex.mod;\n    let roll = await new Roll(dexMox + ' + ' + diceFormula).roll({async: true});\n    roll.terms[2].results[0].result = changeValue;\n    roll._total = dexMox + changeValue;\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: origin.name\n    });\n}\nasync function pushingAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Pushing Attack');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    } else {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Maneuvers: Pushing Attack', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maneuvers: Pushing Attack');\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        featureData.system.save.dc = chris.getSpellDC(originItem);\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let targetToken = workflow.targets.first();\n        let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n        await chris.removeEffect(effect);\n        let pushWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n        if (pushWorkflow.failedSaves.size != 1) return;\n        let selection = await chris.dialog('How far do you push the target?', [['5 ft.', 5], ['10 ft.', 10], ['15 ft.', 15]]);\n        if (!selection) return;\n        let knockBackFactor;\n        let ray;\n        let newCenter;\n        let hitsWall = true;\n        while (hitsWall) {\n            knockBackFactor = selection / canvas.dimensions.distance;\n            ray = new Ray(workflow.token.center, targetToken.center);\n            if (ray.distance === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                return;\n            }\n            newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n            hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n            if (hitsWall) {\n                selection -= 5;\n                if (selection === 0) {\n                    ui.notifications.info('Target is unable to be moved!');\n                    return;\n                }\n            }\n        }\n        newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x,\n                'y': newCenter.y\n            }\n        };\n        let options2 = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options2);\n    }\n}\nasync function sweepingAttackItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Sweeping Attack');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    } else {\n        let sourceNearbyTargets = chris.findNearby(workflow.token, 5, 'enemy');\n        let targetNearbyTargets = chris.findNearby(workflow.targets.first(), 5, 'ally');\n        if (sourceNearbyTargets.length === 0 || targetNearbyTargets.length === 0) {\n            await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n            await chris.removeEffect(effect);\n            return;\n        }\n        let overlappingTargets = targetNearbyTargets.filter(function (obj) {\n            return sourceNearbyTargets.indexOf(obj) !== -1;\n        });\n        if (overlappingTargets.length === 0) {\n            await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n            await chris.removeEffect(effect);\n            return;\n        }\n        let selection = await chris.selectTarget('What target?', constants.okCancel, overlappingTargets, true, 'one');\n        if (selection.buttons === false) {\n            await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n            await chris.removeEffect(effect);\n            return;\n        }\n        let targetTokenID = selection.inputs.find(id => id != false);\n        if (!targetTokenID) {\n            await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n            await chris.removeEffect(effect);\n            return;\n        }\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Maneuvers: Sweeping Attack', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maneuvers: Sweeping Attack');\n        featureData.flags['chris-premades'] = {\n            'feature': {\n                'sweepingAttackRoll': workflow.attackTotal\n            }\n        };\n        featureData.system.damage.parts = [\n            [\n                '@scale.battle-master.combat-superiority-die[' + workflow.defaultDamageType + ']',\n                workflow.defaultDamageType\n            ]\n        ];\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenID]);\n        await chris.removeEffect(effect);\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}\nasync function sweepingAttackAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'sweepingAttack', 50);\n    if (!queueSetup) return;\n    let attackRoll = workflow.item.flags['chris-premades']?.feature?.sweepingAttackRoll;\n    if (!attackRoll) return;\n    let updatedRoll = await new Roll(String(attackRoll)).evaluate({async: true});\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function tripAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Maneuvers: Trip Attack');\n    if (!effect) return;\n    if (workflow.hitTargets.size === 0) {\n        await refund.bind(this)({speaker, actor, token, character, item, args, scope, workflow});\n        await chris.removeEffect(effect);\n        return;\n    } else {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Maneuvers: Trip Attack', false);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maneuvers: Trip Attack');\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        featureData.system.save.dc = chris.getSpellDC(originItem);\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let targetToken = workflow.targets.first();\n        let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n        await chris.removeEffect(effect);\n        let tripWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n        if (tripWorkflow.failedSaves.size != 1) return;\n        let targetEffect = chris.findEffect(targetToken.actor, 'Prone');\n        if (targetEffect) return;\n        await chris.addCondition(targetToken.actor, 'Prone', false, workflow.item.uuid);\n    }\n}\nexport let maneuvers = {\n    'baitAndSwitch': baitAndSwitch,\n    'refund': refund,\n    'distractingStrike': distractingStrike,\n    'goadingAttackTarget': goadingAttackTarget,\n    'goadingAttack': goadingAttack,\n    'grapplingStrike': grapple,\n    'lungingAttack': lungingAttack,\n    'menacingAttack': menacingAttack,\n    'parry': parry,\n    'pushingAttack': pushingAttack,\n    'sweepingAttackItem': sweepingAttackItem,\n    'sweepingAttackAttack': sweepingAttackAttack,\n    'tripAttack': tripAttack,\n    'distractingStrikeOnHit': distractingStrikeOnHit\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {tashaSummon} from '../../../../utility/tashaSummon.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Echo Knight');\n    if (!sourceActor) return;\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === workflow.actor.uuid);\n    let name = chris.getConfiguration(workflow.item, 'name');\n    if (name === '' || !name) name = workflow.actor.name + ' Echo';\n    let actorData = duplicate(workflow.actor.toObject());\n    async function effectMacro3() {\n        await chrisPremades.macros.manifestEcho.defeated(token, effect);\n    }\n    let effectData2 = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro3)\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'zeroHP'\n                ]\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                },\n                'feature': {\n                    'manifestEcho': {\n                        'ownerTokenUuid': workflow.token.document.uuid\n                    }\n                }\n            }\n        }\n    };\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'abilities': {\n                    'str': {\n                        'value': workflow.actor.system.abilities.str.value\n                    },\n                    'con': {\n                        'value': workflow.actor.system.abilities.con.value\n                    },\n                    'dex': {\n                        'value': workflow.actor.system.abilities.dex.value\n                    },\n                    'int': {\n                        'value': workflow.actor.system.abilities.int.value\n                    },\n                    'wis': {\n                        'value': workflow.actor.system.abilities.wis.value\n                    },\n                    'cha': {\n                        'value': workflow.actor.system.abilities.cha.value\n                    }\n                },\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof),\n                    'type': {\n                        'value': chris.raceOrType(workflow.actor)\n                    }\n                },\n                'attributes': {\n                    'ac': {\n                        'flat': 14 + workflow.actor.system.attributes.prof\n                    },\n                    'senses': workflow.actor.system.senses\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'sight': actorData.prototypeToken.sight\n            },\n            'flags': {\n                'chris-premades': {\n                    'feature': {\n                        'manifestEcho': {\n                            'ownerUuid': workflow.actor.uuid\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'sight': actorData.prototypeToken.sight\n        },\n        'embedded': {\n            'ActiveEffect': {\n                [effectData2.name]: effectData2\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg && tokenImg != '') {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    } else {\n        setProperty(updates, 'token.texture.src', workflow.token.document.texture.src);\n        setProperty(updates, 'actor.prototypeToken.texture.src', workflow.token.document.texture.src);\n    }\n    let animationName = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animationName = 'none';\n    let spawnedTokens = await chris.spawn(sourceActor, updates, {}, workflow.token, 15, animationName);\n    if (!spawnedTokens) return;\n    let spawnedToken = canvas.tokens.get(spawnedTokens[0]);\n    if (animationName != 'none') {\n        new Sequence()\n            .effect()\n            .file('jb2a.smoke.puff.centered.grey')\n            .atLocation(spawnedToken)\n            .scale(0.5)\n            .randomRotation()\n            .delay(1200)\n            .play();\n    }\n    let applyFilter = chris.getConfiguration(workflow.item, 'filter') ?? true;\n    if (game.modules.get('tokenmagic')?.active && applyFilter) {\n        let filter = [\n            {\n                'filterType': 'oldfilm',\n                'filterId': 'myOldfilm',\n                'sepia': 0.6,\n                'noise': 0.2,\n                'noiseSize': 1.0,\n                'scratch': 0.8,\n                'scratchDensity': 0.5,\n                'scratchWidth': 1.2,\n                'vignetting': 0.9,\n                'vignettingAlpha': 0.6,\n                'vignettingBlur': 0.2,\n                'animated':\n                {\n                    'seed': { \n                        'active': true, \n                        'animType': 'randomNumber', \n                        'val1': 0, \n                        'val2': 1 \n                    },\n                    'vignetting': { \n                        'active': true, \n                        'animType': 'syncCosOscillation' , \n                        'loopDuration': 2000, \n                        'val1': 0.2, \n                        'val2': 0.4\n                    }\n                }\n            },\n            {\n                'filterType': 'outline',\n                'filterId': 'oldfilmOutline',\n                'color': 0x000000,\n                'thickness': 0,\n                'zOrder': 61\n            ,\n            },\n            {\n                'filterType': 'fog',\n                'filterId': 'myFog',\n                'color': 0x000000,\n                'density': 0.65,\n                'time': 0,\n                'dimX': 1,\n                'dimY': 1,\n                'animated': {\n                    'time': { \n                        'active': true, \n                        'speed': 2.2, \n                        'animType': 'move' \n                    }\n                }\n            }\n        ];\n        TokenMagic.addFilters(spawnedToken, filter);\n    }\n    if (sceneEchos.length) {\n        let legionOfOne = chris.getItem(workflow.actor, 'Legion of One');\n        let max = legionOfOne ? 2: 1;\n        if (sceneEchos.length >= max) for (let i of sceneEchos) {\n            animation(i);\n            await warpgate.wait(700);\n            await warpgate.dismiss(i.id);\n        }\n    }\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.feature?.manifestEcho);\n    if (effect) return;\n    let mutationStack = warpgate.mutationStack(workflow.token.document);\n    if (mutationStack.getName('Manifest Echo')) await warpgate.revert(workflow.token.document, 'Manifest Echo');\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Manifest Echo - Dismiss', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Manifest Echo - Dismiss');\n    let featureData2 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Manifest Echo - Teleport', false);\n    if (!featureData2) return;\n    featureData2.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Manifest Echo - Teleport');\n    let featureData3 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Manifest Echo - Attack', false);\n    if (!featureData3) return;\n    featureData3.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Manifest Echo - Attack');\n    async function effectMacro () {\n        await chrisPremades.macros.manifestEcho.dismiss({'workflow': {actor, token}});\n    }\n    async function effectMacro2() {\n        await chrisPremades.macros.manifestEcho.turnEnd(token);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 604800\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                },\n                'onTurnEnd': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData3.name\n                },\n                'feature': {\n                    'manifestEcho': true\n                }\n            }\n        }\n    };\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData,\n                [featureData2.name]: featureData2,\n                [featureData3.name]: featureData3\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Manifest Echo',\n        'description': 'Manifest Echo'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n}\nasync function dismiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === workflow.actor.uuid);\n    if (!sceneEchos.length) return;\n    for (let i of sceneEchos) {\n        animation(i);\n        await warpgate.wait(700);\n        await warpgate.dismiss(i.id);\n    }\n    await warpgate.revert(workflow.token.document, 'Manifest Echo');\n}\nasync function teleport({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === workflow.actor.uuid);\n    if (!sceneEchos.length) return;\n    let targetToken;\n    if (sceneEchos.length > 1) {\n        let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, sceneEchos.map(i => i.object), true, 'one', null, false, 'Which Echo?');\n        if (!selection.buttons) return;\n        let targetTokenUuid = selection.inputs.find(i => i);\n        if (!targetTokenUuid) return;\n        targetToken = await fromUuid(targetTokenUuid);\n        if (!targetToken) return;\n    } else {\n        targetToken = sceneEchos[0];\n    }\n    if (chris.jb2aCheck() === 'patreon') {\n        await swapAnimation(workflow.token, targetToken.object);\n    } else {\n        let updates = {\n            'token': {\n                'x': targetToken.x,\n                'y': targetToken.y,\n                'elevation': targetToken.elevation\n            }\n        }\n        let updates2 = {\n            'token': {\n                'x': workflow.token.document.x,\n                'y': workflow.token.document.y,\n                'elevation': workflow.token.document.elevation\n            }\n        }\n        let options = {\n            'permanent': true,\n            'name': 'Manifest Echo - Teleport',\n            'description': 'Manifest Echo - Teleport',\n            'updateOpts': {'token': {'animate': false}}\n        };\n        animation(targetToken.object);\n        animation(workflow.token);\n        await warpgate.wait(700);\n        warpgate.mutate(workflow.token.document, updates, {}, options);\n        warpgate.mutate(targetToken, updates2, {}, options);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === workflow.actor.uuid);\n    if (!sceneEchos.length) return;\n    let targetToken;\n    if (sceneEchos.length > 1) {\n        let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, sceneEchos, true, 'one', null, false, 'Which Echo?');\n        if (!selection.buttons) return;\n        let targetTokenUuid = selection.inputs.find(i => i);\n        if (!targetTokenUuid) return;\n        let targetToken = await fromUuid(targetTokenUuid);\n        if (!targetToken) return;\n    } else {\n        targetToken = sceneEchos[0];\n    }\n    let features = workflow.actor.items.filter(i => constants.weaponAttacks.includes(i.system.actionType) && (i.type === 'weapon' ? i.system.equipped : true));\n    let feature;\n    if (!features.length) {\n        ui.notifications.info('You have no equipped weapons to attack with!');\n        return;\n    } else if (features.length > 1) {\n        let selection = await chris.selectDocument(workflow.item.name, features);\n        if (!selection) return;\n        feature = selection[0];\n    } else {\n        feature = features[0];\n    }\n    let effectData = {\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'name': 'Manifest Echo - Range Override',\n        'changes': [\n            {\n                'key': 'flags.midi-qol.rangeOverride.attack.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = await chris.createEffect(workflow.actor, effectData);\n    let effect2 = await chris.createEffect(targetToken.actor, effectData);\n    let options = {\n        'targetUuids': [workflow.targets.first().document.uuid]\n    }\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, {}, options);\n    await chris.removeEffect(effect);\n    await chris.removeEffect(effect2);\n}\nasync function turnEnd(token) {\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === token.actor.uuid);\n    if (!sceneEchos.length) return;\n    let maxRange = chris.findEffect(token.actor, 'Echo Avatar') ? 1000 : 30;\n    let echosLeft = sceneEchos.length;\n    for (let i of sceneEchos) {\n        let distance = chris.getDistance(token, i, false);\n        if (distance > maxRange) {\n            let selection = await chris.remoteDialog('Echo Knight', constants.yesNo, chris.lastGM(), token.actor.name + '\\'s echo has moved far away. Remove it?');\n            if (!selection) continue;\n            await warpgate.dismiss(i.id);\n            echosLeft -= 1;\n        }\n    }\n    if (!echosLeft) await warpgate.revert(token.document, 'Manifest Echo');\n}\nasync function save(actor, roll, ability) {\n    let ownerUuid = actor.flags['chris-premades']?.feature?.manifestEcho?.ownerUuid;\n    if (!ownerUuid) return;\n    let owner = fromUuidSync(ownerUuid);\n    if (!owner) return;\n    let selfBonuses = actor.system.abilities[ability].bonuses.save;\n    let ownerBonuses = owner.system.abilities[ability].bonuses.save;\n    let selfBonuses2 = actor.system.bonuses.abilities.save;\n    let ownerBonuses2 = owner.system.bonuses.abilities.save;\n    if (selfBonuses === ownerBonuses && selfBonuses2 === ownerBonuses2) return;\n    let formula = '';\n    if (selfBonuses != ownerBonuses) formula += ' + ' + ownerBonuses;\n    if (selfBonuses2 != ownerBonuses2) formula += ' + ' + ownerBonuses2;\n    let newRoll = new Roll('0 + ' + formula, owner.getRollData()).evaluate({'async': false});\n    for (let i = 1; i < newRoll.terms.length; i++) roll.terms.push(newRoll.terms[i]);\n    roll._total += newRoll.total;\n    roll._formula = roll._formula + formula;\n}\nasync function defeated(token, effect) {\n    let sceneEchos = canvas.scene.tokens.filter(i => i.actor?.flags?.['chris-premades']?.feature?.manifestEcho?.ownerUuid === token.actor.flags['chris-premades'].feature.manifestEcho.ownerUuid && i.id != token.id);\n    if (!sceneEchos.length) {\n        let ownerTokenUuid = effect.flags['chris-premades']?.feature?.manifestEcho?.ownerTokenUuid;\n        if (ownerTokenUuid) {\n            let ownerToken = await fromUuid(ownerTokenUuid);\n            if (ownerToken) {\n                let effect2 = ownerToken.actor.effects.find(i => i.flags['chris-premades']?.feature?.manifestEcho);\n                if (effect2) await chris.removeEffect(effect2);\n                return;\n            }\n        }\n    }\n    animation(token);\n    await warpgate.wait(700);\n    warpgate.dismiss(token.id);\n}\nasync function animation(token) {\n    let animationName = chris.jb2aCheck() === 'patreon' ? 'jb2a.misty_step.01.grey' : 'jb2a.misty_step.01.blue'\n    new Sequence()\n        .effect()\n        .file(animationName)\n        .atLocation(token)\n        .randomRotation()\n        .scaleToObject(2)\n        .play();\n}\nasync function swapAnimation(source, target) {\n    async function swap(source, target){\n        new Sequence()\n            .effect()\n            .file('jb2a.misty_step.01.grey')\n            .atLocation(source)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(750)\n            .animation()\n            .on(source)\n            .opacity(0.0)\n            .waitUntilFinished()\n            .effect()\n            .file('jb2a.chain_lightning.primary.yellow')\n            .atLocation(source)\n            .stretchTo(target)\n            .animation()\n            .on(source)\n            .teleportTo(target)\n            .snapToGrid()\n            .waitUntilFinished()\n            .effect()\n            .file('jb2a.misty_step.02.grey')\n            .attachTo( source )\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(1500)\n            .animation()\n            .on(source)\n            .opacity(1.0)\n            .play();\n    }\n    await swap(source, target);\n    await swap(target, source);\n}\nexport let manifestEcho = {\n    'item': item,\n    'dismiss': dismiss,\n    'teleport': teleport,\n    'attack': attack,\n    'turnEnd': turnEnd,\n    'save': save,\n    'defeated': defeated,\n    'animation': animation,\n    'swapAnimation': swapAnimation\n}","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Manifest Mind');\n    if (!sourceActor) return;\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Manifest Mind';\n    if (name === '') name = 'Manifest Mind';\n    let updates = {\n        'actor': {\n            'name': name,\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    let manifestMindToken = await tashaSummon.spawn(sourceActor, updates, 86400, workflow.item, 60, workflow.token, animation);\n    let moveData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Manifest Mind: Move', false);\n    if (!moveData) return;\n    moveData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Manifest Mind: Move');\n    let castData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Manifest Mind: Cast Spell', false);\n    if (!castData) return;\n    castData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Manifest Mind: Cast Spell');\n    let castUsesValue = workflow.actor.flags['chris-premades']?.feature?.manifestMind;\n    if (!castUsesValue) {\n        castUsesValue = workflow.actor.system.attributes.prof;\n        workflow.actor.setFlag('chris-premades', 'feature.manifestMind', castUsesValue);\n    }\n    castData.system.uses.value = castUsesValue;\n    castData.system.uses.max = workflow.actor.system.attributes.prof;\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [castData.name]: castData,\n                [moveData.name]: moveData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Manifest Mind',\n        'description': 'Manifest Mind'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Manifest Mind\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': castData.name\n                },\n                'feature': {\n                    'manifestMind': manifestMindToken.id\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}\nasync function attackApply({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = workflow.actor.effects.find((e) => e?.flags['chris-premades']?.feature?.manifestMind);\n    if (!effect) return;\n    let manifestMindId = effect.flags['chris-premades']?.feature?.manifestMind;\n    if (!manifestMindId) return;\n    let manifestMindToken = canvas.scene.tokens.get(manifestMindId);\n    if (!manifestMindToken) return;\n    if (chris.getDistance(workflow.token, manifestMindToken) > 300) {\n        ui.notifications.info('Manifest Mind Too Far Away!');\n        return;\n    }\n    let effectData = {\n        'label': 'Manifest Mind Spell',\n        'icon': '',\n        'origin': effect.origin.uuid,\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.rangeOverride.attack.all',\n                'mode': 0,\n                'value': 1,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'priority': 20,\n                'value': 'function.chrisPremades.macros.manifestMind.attackEarly,preambleComplete'\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    '1Attack'\n                ],\n                'stackable': 'none',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n    await chris.createEffect(manifestMindToken.actor, effectData);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell') {\n        ui.notifications.info('Invalid Action Type!');\n        return false;\n    }\n    let effect = workflow.actor.effects.find((e) => e?.flags['chris-premades']?.feature?.manifestMind);\n    if (!effect) return;\n    let manifestMindId = effect.flags['chris-premades']?.feature?.manifestMind;\n    if (!manifestMindId) return;\n    workflow.actor.setFlag('chris-premades', 'feature.manifestMind', workflow.item.system?.uses?.value)\n}\nasync function longRest(actor, data) {\n    if (!data.longRest) return;\n    if (actor.classes?.wizard?.system?.levels < 6) return;\n    let item = actor.items.getName('Order of Scribes');\n    if (!item) return;\n    if (item.type != 'subclass') return;\n    workflow.actor.setFlag('chris-premades', 'feature.manifestMind', actor.system.attributes.prof);\n}\nexport let manifestMind = {\n    'item': item,\n    'attackApply': attackApply,\n    'attackEarly': attackEarly,\n    'longRest': longRest,\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nclass chrisRoll extends Roll {\n    get isCritical() {\n        if (this.options.fakeType === 'critical') return true;\n        return false;\n    }\n    get isFumble() {\n        if (this.options.fakeType === 'fumble') return true;\n        return false;\n    }\n}\nasync function attackRoll(workflow) {\n    if (!workflow.attackRoll) return;\n    let firstOwner = warpgate.util.firstOwner(workflow.token);\n    let ignoreGM = game.settings.get('chris-premades', 'Ignore GM');\n    if (ignoreGM && firstOwner.isGM) return;\n    let rollSettings = game.settings.get('chris-premades', 'Manual Rolling Players');\n    let rollSetting = rollSettings[firstOwner.id] ?? 'default';\n    if (rollSetting === 'default') return;\n    let targetUser = (rollSetting === 'player') ? firstOwner : game.users.get(chris.lastGM());\n    let queueSetup = await queue.setup(workflow.uuid, 'manualRoll', 0);\n    if (!queueSetup) return;\n    let inputs = [\n        {\n            'label': 'Roll Total:',\n            'type': 'number'\n        },\n        {\n            'label': 'Type:',\n            'type': 'select',\n            'options': [\n                {'value': 'fumble', 'html': 'Fumble'},\n                {'value': 'normal', 'html': 'Normal', 'selected': true},\n                {'value': 'critical', 'html': 'Critical'}\n            ]\n        }\n    ];\n    if (game.user.id != targetUser.id) await chris.thirdPartyReactionMessage(targetUser, true);\n    let selection = await chris.remoteMenu('Attack Roll', constants.okCancel, inputs, true, targetUser.id, workflow.attackRoll._formula, null);\n    if (game.user.id != targetUser.id) await chris.clearThirdPartyReactionMessage();\n    if (!selection.buttons) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    if (isNaN(selection.inputs[0])) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    let attackRollNumber = selection.inputs[0];\n    let attackRoll = await new chrisRoll(String(attackRollNumber), {}, {'fakeType': selection.inputs[0]}).evaluate();\n    if (selection.inputs[1] === 'critical' && !workflow.actor.flags['midi-qol']?.critical?.all) {\n        await workflow.actor.setFlag('midi-qol', 'critical.all', true);\n        Hooks.once('midi-qol.RollComplete', async () => {\n            await workflow.actor.unsetFlag('midi-qol', 'critical.all');\n        });\n    } else if (selection.inputs[1] === 'fumble' && !workflow.actor.flags['midi-qol']?.fail?.attack?.all) {\n        await workflow.actor.setFlag('midi-qol', 'fail.attack.all', true);\n        Hooks.once('midi-qol.RollComplete', async () => {\n            await workflow.actor.unsetFlag('midi-qol', 'fail.attack.all');\n        });\n    }\n    await workflow.setAttackRoll(attackRoll);\n    queue.remove(workflow.uuid);\n}\nasync function damageRoll(workflow) {\n    if (!workflow.damageRoll || !workflow.hitTargets.size) return;\n    let firstOwner = warpgate.util.firstOwner(workflow.token);\n    let ignoreGM = game.settings.get('chris-premades', 'Ignore GM');\n    if (ignoreGM && firstOwner.isGM) return;\n    let rollSettings = game.settings.get('chris-premades', 'Manual Rolling Players');\n    let rollSetting = rollSettings[firstOwner.id] ?? 'default';\n    if (rollSetting === 'default') return;\n    let targetUser = (rollSetting === 'player') ? firstOwner : game.users.get(chris.lastGM());\n    let queueSetup = await queue.setup(workflow.uuid, 'manualRoll', 1000);\n    if (!queueSetup) return;\n    let damageTypes = new Set([]);\n    for (let i of workflow.damageRoll.terms) {\n        if (i.flavor) damageTypes.add(i.flavor.toLowerCase());\n    }\n    let generatedMenu = [];\n    let damageTypeArray = [];\n    for (let i of Array.from(damageTypes)) {\n        generatedMenu.push({\n            'label': i.charAt(0).toUpperCase() + i.slice(1) + ':',\n            'type': 'number'\n        });\n        damageTypeArray.push(i);\n    }\n    if (game.user.id != targetUser.id) await chris.thirdPartyReactionMessage(targetUser, true);\n    let selection = await chris.remoteMenu('Damage Roll', constants.okCancel, generatedMenu, true, targetUser.id, workflow.damageRoll._formula);\n    if (game.user.id != targetUser.id) await chris.clearThirdPartyReactionMessage();\n    if (!selection.buttons) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    let damageFormula = '';\n    for (let i = 0; i < selection.inputs.length; i++) {\n        if (isNaN(selection.inputs[i])) continue;\n        if (damageFormula != '') damageFormula += ' + ';\n        let input = selection.inputs[i];\n        damageFormula += (input != '' ? input : '0') + '[' + damageTypeArray[i] + ']';\n    }\n    if (damageFormula === '') {\n        queue.remove(workflow.uuid);\n        return\n    }\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.uuid);\n}\nasync function saveRoll(workflow) {\n    if (!workflow.saveResults) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'manualRoll', 0);\n    if (!queueSetup) return;\n    let rollSettings = game.settings.get('chris-premades', 'Manual Rolling Players');\n    let userTargets = {};\n    let gmTargets = [];\n    for (let i of Array.from(workflow.hitTargets)) {\n        let firstOwner = warpgate.util.firstOwner(i);\n        let rollSetting = rollSettings[firstOwner.id] ?? 'default';\n        if (rollSetting === 'default' || rollSetting === 'gm') {\n            gmTargets.push(i);\n        } else {\n            if (!userTargets[firstOwner.id]) userTargets[firstOwner.id] = [];\n            userTargets[firstOwner.id].push(i);\n        }\n    }\n    let ignoreGM = game.settings.get('chris-premades', 'Ignore GM');\n    if (!Object.keys(userTargets).length && ignoreGM) return;\n    userTargets[chris.lastGM()] = gmTargets;\n    let results = {};\n    let info = CONFIG.DND5E.abilities[workflow.item.system.save.ability].label + ' Saving Throw';\n    let dc = chris.getSpellDC(workflow.item);\n    await Promise.all(Object.keys(userTargets).map(async userId => {\n        let tokens = userTargets[userId];\n        let inputs = tokens.map(i => ({'label': i.name, 'type': 'number', 'tokenId': i.id}));\n        let user = game.users.get(userId);\n        let message = user.isGM ? info + '(DC: ' + dc + ')' : info;\n        if (game.user.id != userId) await chris.thirdPartyReactionMessage(user, true, userId);\n        let selection = await chris.remoteMenu('Save Rolls', constants.okCancel, inputs, true, userId, message);\n        if (game.user.id != userId) await chris.clearThirdPartyReactionMessage(userId);\n        if (!selection.buttons) return;\n        for (let i = 0; inputs.length > i; i++) {\n            let result = selection.inputs[i];\n            if (isNaN(result)) continue;\n            let tokenId = inputs[i].tokenId;\n            results[tokenId] = result;\n        }\n    }));\n    let tokens = Array.from(workflow.hitTargets);\n    for (let i = 0; i < tokens.length; i++) {\n        let tokenId = tokens[i].id;\n        if (!results[tokenId]) continue;\n        let result = results[tokenId];\n        if (result >= dc) {\n            workflow.failedSaves.delete(tokens[i]);\n            workflow.saves.add(tokens[i]);\n            workflow.saveDisplayData[i].saveString = ' succeeds';\n            workflow.saveDisplayData[i].saveStyle = 'color: green;'\n            workflow.saveDisplayData[i].rollTotal = result;\n        } else {\n            workflow.failedSaves.add(tokens[i]);\n            workflow.saveDisplayData[i].saveString = ' fails';\n            workflow.saveDisplayData[i].saveStyle = 'color: red;';\n            workflow.saveDisplayData[i].rollTotal = result;\n        }\n        workflow.saveResults[i]._total = result;\n    }\n    await workflow.displaySaves(false, true);\n    queue.remove(workflow.uuid);\n}\nasync function userOptions() {\n    let users = game.users.filter(i => !i.isGM);\n    if (!users.length) {\n        ui.notifications.info('There are no players to configure!');\n        return;\n    }\n    let oldSettings = game.settings.get('chris-premades', 'Manual Rolling Players');\n    function getOptions(userId) {\n        let oldSetting = oldSettings[userId];\n        let options = [\n            {'value': 'default', 'html': 'Auto / Default', 'selected': oldSetting === 'default' ?? true},\n            {'value': 'player', 'html': 'Prompt Player', 'selected': oldSetting === 'player' ?? false},\n            {'value': 'gm', 'html': 'Prompt Game Master', 'selected': oldSetting === 'gm' ?? false}\n        ];\n        return options;\n    }\n    let inputs = users.map(i => ({'label': i.name, 'type': 'select', 'options': getOptions(i.id), 'id': i.id}));\n    let selection = await chris.menu('Player Options', constants.okCancel, inputs, true);\n    if (!selection) return;\n    let newSettings = {};\n    for (let i = 0; inputs.length > i; i++) setProperty(newSettings, inputs[i].id, selection.inputs[i]);\n    await game.settings.set('chris-premades', 'Manual Rolling Players', newSettings);\n}\nexport let manualRolls = {\n    'attackRoll': attackRoll,\n    'damageRoll': damageRoll,\n    'saveRolls': saveRoll,\n    'userOptions': userOptions\n}","import {chris} from '../../helperFunctions.js';\nexport async function massCureWounds({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let sourceDisposition = workflow.token.document.disposition;\n    let targetTokens = [];\n    for (let i of workflow.targets) {\n        if (i.document.disposition === sourceDisposition) targetTokens.push(i);\n    }\n    if (targetTokens.length === 0) return;\n    let diceNumber = 8 - workflow.castData.castLevel;\n    let damageFormula = diceNumber + 'd8[healing] + ' + chris.getSpellMod(workflow.item);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    if (targetTokens.length <= 6) {\n        await chris.applyWorkflowDamage(workflow.token, damageRoll, 'healing', targetTokens, workflow.item.name, workflow.itemCardId);\n    } else {\n        let buttons = [\n            {\n                'label': 'Yes',\n                'value': true\n            }, {\n                'label': 'No',\n                'value': false\n            }\n        ];\n        let selection = await chris.selectTarget('What targets would you like to heal? Max: 6', buttons, targetTokens, true, 'multiple');\n        if (!selection.buttons) return;\n        let selectedTokens = [];\n        for (let i of selection.inputs) {\n            if (i) selectedTokens.push(await fromUuid(i));\n        }\n        if (selectedTokens.length > 6) {\n            ui.notifications.info('Too many targets selected!');\n            return;\n        }\n        chris.applyWorkflowDamage(workflow.token, damageRoll, 'healing', selectedTokens, workflow.item.name, workflow.itemCardId);\n    }\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function mastersAmulet(token, {item, workflow, ditem}) {\n    if (!workflow) return;\n    let effect = chris.findEffect(token.actor, 'Shield Guardian - Bound');\n    if (!effect) return;\n    let targetActorId = token.actor.flags['chris-premades']?.item?.mastersAmulet?.bound;\n    if (!targetActorId) return;\n    let nearbyTokens = chris.findNearby(token, 60, 'ally');\n    if (nearbyTokens.length === 0) return;\n    let targetToken = nearbyTokens.find((tok => tok.actor.id === targetActorId));\n    if (!targetToken) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'mastersAmulet', 400);\n    if (!queueSetup) return;\n    if (ditem.newHP > ditem.oldHP) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    let keptDamage = Math.floor(ditem.appliedDamage / 2);\n    let originalDamage = duplicate(keptDamage);\n    if (ditem.oldTempHP > 0) {\n        if (keptDamage > ditem.oldTempHP) {\n            ditem.newTempHP = 0;\n            keptDamage -= ditem.oldTempHP;\n            ditem.tempDamage = ditem.oldTempHP;\n        } else {\n            ditem.newTempHP = ditem.oldTempHP - keptDamage;\n            ditem.tempDamage = keptDamage;\n            keptDamage = 0;\n        }\n    }\n    let maxHP = token.actor.system.attributes.hp.max;\n    ditem.hpDamage = Math.clamped(keptDamage, 0, maxHP);\n    ditem.newHP = Math.clamped(ditem.oldHP - keptDamage, 0, maxHP);\n    ditem.appliedDamage = keptDamage;\n    ditem.totalDamage = keptDamage;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Shield Guardian - Bound', false);\n    if (!featureData) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shield Guardian - Bound');\n    featureData.system.damage.parts = [\n        [\n            originalDamage,\n            'none'\n        ]\n    ];\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function carefulSpell({speaker, actor, token, character, item, args, scope, workflow}){\n    if (workflow.targets.size === 0 ||  workflow.item.type != 'spell' || !workflow.hasSave) return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system.uses.value;\n    if (sorcPointsValue < 1) return;\n    if (!sorcPointsValue) {\n        ui.notifications.info('No Sorcery Points Available!');\n        return;\n    }\n    let max = workflow.actor.system.abilities.cha.mod;\n    if (!max) return;\n    let targets = Array.from(workflow.targets);\n    let selectedTargets = [];\n    for (let i of targets) {\n        if (i.document.disposition === workflow.token.document.disposition) selectedTargets.push(i);\n    }\n    if (selectedTargets.length > max) {\n        let selection = await chris.selectTarget('What targets automatically save? (Max ' + max + ')', constants.okCancel, selectedTargets, true, 'multiple');\n        if (!selection.buttons) return;\n        selectedTargets = [];\n        for (let i of selection.inputs) {\n            if (i) selectedTargets.push(await fromUuid(i));\n        }\n        if (selectedTargets.length > max) {\n            ui.notifications.info('Too many targets selected!');\n            return;\n        }\n    }\n    let effectData = {\n        'label': 'Careful Spell Auto Save',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'seconds': 6\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.all',\n                'mode': 5,\n                'value': '100',\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ]\n            }\n        }\n    }\n    selectedTargets.forEach(async i => await chris.createEffect(i.actor, effectData))\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - 1});\n}\nasync function empoweredSpell({speaker, actor, token, character, item, args, scope, workflow}){\n    if (workflow.hitTargets.size === 0 ||  workflow.item.type != 'spell') return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system.uses.value;\n    if (!sorcPointsValue) return;\n    let max = workflow.actor.system.abilities.cha.mod;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'empoweredSpell', 350);\n    if (!queueSetup) return;\n    let newDamageRoll = workflow.damageRoll;\n    let lowest = [];\n    for (let i = 0; newDamageRoll.terms.length > i; i++) {\n        if (newDamageRoll.terms[i].isDeterministic === false) {\n            let currentTerm = newDamageRoll.terms[i];\n            let faces = currentTerm.faces;\n            for (let j = 0; currentTerm.values.length > j; j++) {\n                let modifiers = currentTerm.modifiers?.toString();\n                if (lowest.length === 0) {\n                    lowest.push({\n                        'result': currentTerm.values[j],\n                        'position': j,\n                        'faces': faces,\n                        'term': i,\n                        'modifiers': modifiers,\n                        'flavor': currentTerm.flavor\n                    });\n                }\n                else if (lowest.length > 0) {\n                    for (let k = 0; lowest.length > k; k++) {\n                        if (currentTerm.values[j] <= lowest[k].result) {\n                            lowest.splice(k, 0, {\n                                'result': currentTerm.values[j],\n                                'position': j,\n                                'faces': faces,\n                                'term': i,\n                                'modifiers': modifiers,\n                                'flavor': currentTerm.flavor\n                            });\n                            if (lowest.length > max) {\n                                lowest.splice(max, 1);\n                            }\n                            break;\n                        }\n                        if (currentTerm.values[j] > lowest[lowest.length - 1].result && lowest.length != max) {\n                            lowest.push({\n                                'result': currentTerm.values[j],\n                                'position': j,\n                                'faces': faces,\n                                'term': i,\n                                'modifiers': modifiers,\n                                'flavor': currentTerm.flavor\n                            });\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '200px';\n            t.style.textAlign = 'right';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let generatedMenu = [];\n    for (let i of lowest) {\n        generatedMenu.push({\n            'label': '1d' + i.faces + '[' + i.flavor + ']: ' + i.result,\n            'type': 'checkbox',\n            'options': false\n        });\n    }\n    let config = {\n        'title': 'Empowered Spell: Reroll lowest dice?',\n        'render': dialogRender\n    };\n    let selection = await warpgate.menu(\n        {\n            'inputs': generatedMenu,\n            'buttons': constants.yesNoButton\n        },\n        config\n    );\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (selection.inputs.filter(i => i != false).length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    for (let i = 0; lowest.length > i; i++) {\n        if (!selection.inputs[i]) continue;\n        let currentDie = lowest[i];\n        let damageFormula = '1d' + currentDie.faces + currentDie.modifiers;\n        let damageRoll = await new Roll(damageFormula).roll({async: true});\n        let messageData = {\n            'speaker': ChatMessage.getSpeaker(workflow.actor), \n            'flavor': 'Rerolling: ' + currentDie.result, \n            'rollMode': game.settings.get('core', 'rollMode')\n        }\n        await damageRoll.toMessage(messageData);\n        newDamageRoll.terms[currentDie.term].results[currentDie.position].result = damageRoll.total;\n    }\n    newDamageRoll._total = newDamageRoll._evaluateTotal();\n    await workflow.setDamageRoll(newDamageRoll);\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - 1});\n    queue.remove(workflow.item.uuid);\n}\nasync function heightenedSpell({speaker, actor, token, character, item, args, scope, workflow}){\n    if (workflow.targets.size === 0 ||  workflow.item.type != 'spell' || !workflow.hasSave) return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system?.uses?.value;\n    if (sorcPointsValue < 3) {\n        ui.notifications.info('No Sorcery Points Available!');\n        return;\n    }\n    let max = workflow.actor.system.abilities.cha.mod;\n    let selectedTargets = Array.from(workflow.targets);\n    if (selectedTargets.length > max) {\n        let selection = await chris.selectTarget('Give what targets disadvantage? (Max ' + max + ')', constants.okCancel, selectedTargets, true, 'multiple');\n        if (!selection.buttons) return;\n        selectedTargets = [];\n        for (let i of selection.inputs) {\n            if (i) selectedTargets.push(await fromUuid(i));\n        }\n        if (selectedTargets.length > max) {\n            ui.notifications.info('Too many targets selected!');\n            return;\n        }\n    }\n    let effectData = {\n        'label': 'Heightened Spell Disadvantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'seconds': 6\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.ability.save.all',\n                'mode': 5,\n                'value': '1',\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ]\n            }\n        }\n    }\n    selectedTargets.forEach(async i => await chris.createEffect(i.actor, effectData))\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - 3});\n}\nasync function seekingSpell({speaker, actor, token, character, item, args, scope, workflow}){\n    if (workflow.item.flags['chris-premades']?.seekingSpell) {\n        let queueSetup = await queue.setup(workflow.item.uuid, 'seekingSpell', 340);\n        if (!queueSetup) return;\n        await workflow.setDamageRoll(workflow.item.flags['chris-premades'].seekingSpell);\n        queue.remove(workflow.item.uuid);\n    }\n    if (workflow.targets.size === 0 || workflow.targets.size === workflow.hitTargets.size || workflow.item.flags['chris-premades']?.seekingSpell || workflow.item.type != 'spell') return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system?.uses?.value;\n    if (sorcPointsValue < 2) {\n        ui.notifications.info('No Sorcery Points Available!');\n        return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'seekingSpell', 360);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('Use Seeking Spell to reroll miss of ' + workflow.attackTotal + '?', [['Yes', true], ['No', false]]);\n    if (!selection) return;\n    let spellLevel = workflow.castData?.castLevel;\n    if (spellLevel === undefined) return;\n    let targetToken = workflow.targets.first();\n    let targetTokenUuid = targetToken.document.uuid;\n    if (!targetTokenUuid) return;\n    let damageRoll = workflow.damageRoll;\n    if (!damageRoll) return;\n    let spellData = duplicate(workflow.item.toObject());\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenUuid], false, spellLevel);\n    if (!options) return;\n    setProperty(spellData, 'flags.chris-premades.metaMagic', true);\n    setProperty(spellData, 'flags.chris-premades.seekingSpell', damageRoll);\n    spellData.name = workflow.item.name + ' Re-Roll';\n    let spell = new CONFIG.Item.documentClass(spellData, {'parent': workflow.actor});\n    await MidiQOL.completeItemUse(spell, config, options);\n    let damageFormula = ('0');\n    let newDamageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(newDamageRoll);\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - 1});\n    queue.remove(workflow.item.uuid);\n}\nasync function transmutedSpell({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    if (workflow.item.type != 'spell') return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system?.uses?.value;\n    if (!sorcPointsValue) {\n        ui.notifications.info('No Sorcery Points Available!');\n        return;\n    }\n    let values = ['acid', 'cold', 'fire', 'lightning', 'poison', 'thunder'];\n    let oldDamageRoll = workflow.damageRoll;\n    let oldFlavor = [];\n    for (let i of oldDamageRoll.terms) {\n        let isDeterministic = i.isDeterministic;\n        if (values.includes(i.flavor.toLowerCase()) && isDeterministic === false) {\n            oldFlavor.push(i.flavor);\n        }\n    }\n    function valuesToOptions(arr){\n        let optionsPush = [];\n        for (let i = 0; arr.length > i; i++) {\n            if (typeof arr[i] != 'string') return;\n            optionsPush.push([arr[i].charAt(0).toUpperCase() + arr[i].slice(1), arr[i]]);\n        }\n        return optionsPush;\n    }\n    let optionsOriginal = valuesToOptions(oldFlavor);\n    let selectionOriginal = await chris.dialog('Change what damage type?', optionsOriginal);\n    if (!selectionOriginal) return;\n    let options = []\n    for (let i of values) {\n        if (i != selectionOriginal) {\n            options.push(i);\n        }\n    }\n    options = valuesToOptions(options);\n    let selection = await chris.dialog('Change to what damage type?', options)\n    let queueSetup = await queue.setup(workflow.item.uuid, 'transmutedSpell', 50);\n    if (!queueSetup) return;\n    workflow.damageRoll._formula = workflow.damageRoll._formula.replace(selectionOriginal, selection);\n    workflow.damageRoll.terms.forEach(term => term.options.flavor = term.options?.flavor?.replace(selectionOriginal, selection))\n    await workflow.setDamageRoll(workflow.damageRoll);\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - 1});\n    queue.remove(workflow.item.uuid);\n}\nasync function twinnedSpell({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    if (workflow.item.type != 'spell' || workflow.item.system.range.units === 'self' || workflow.item.flags['chris-premades']?.metaMagic) return;\n    let spellLevel = workflow.castData.castLevel;\n    if (spellLevel === undefined) return;\n    let effect = chris.findEffect(workflow.actor, 'Sorcery Points');\n    if (!effect) {\n        ui.notifications.info('Sorcery Points Item Effect Not Found!');\n        return;\n    }\n    let sorcPointsItem = await fromUuid(effect.origin);\n    if (!sorcPointsItem) return;\n    let sorcPointsValue = sorcPointsItem.system.uses.value;\n    if (!sorcPointsValue) {\n        ui.notifications.info('No Sorcery Points Available!');\n        return;\n    }\n    if (sorcPointsValue < spellLevel) return;\n    let itemRange = workflow.item.system?.range?.value;\n    if (!itemRange) {\n        if (workflow.item.system.range.units === 'touch') {\n            itemRange = 5;\n        } else {\n            return;\n        }\n    }\n    let actionType = workflow.item.system.actionType;\n    if (!actionType) return;\n    let disposition;\n    switch (actionType) {\n        case 'rsak':\n        case 'msak':\n        case 'savingThrow':\n            disposition = 'enemy';\n            break;\n        case 'heal':\n            disposition = 'ally';\n            break;\n        case 'utility':\n        case 'other':\n            disposition = null;\n            break;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'twinnedSpell', 450);\n    if (!queueSetup) return;\n    let nearbyTargets = chris.findNearby(workflow.token, itemRange, disposition, false, true).filter(t => t.id != workflow.targets.first().id);\n    if (nearbyTargets.length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selected = await chris.selectTarget('Use Twinned Spell?', constants.yesNoButton, nearbyTargets, true, 'one');\n    if (!selected.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetTokenUuid = selected.inputs.find(id => id);\n    if (!targetTokenUuid) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let spellData = duplicate(workflow.item.toObject());\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenUuid], false, spellLevel);\n    setProperty(spellData, 'flags.chris-premades.metaMagic', true);\n    spellData.system.components.concentration = false;\n    let spell = new CONFIG.Item.documentClass(spellData, {'parent': workflow.actor});\n    spell.prepareData();\n    spell.prepareFinalAttributes();\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(spell, config, options);\n    if (spellLevel === 0) spellLevel = 1;\n    await sorcPointsItem.update({'system.uses.value': sorcPointsValue - spellLevel});\n    if (workflow.item.system.components.concentration) {\n        let concentrationsTargets = workflow.actor?.flags['midi-qol']['concentration-data']?.targets;\n        concentrationsTargets.splice(0, 0, {'tokenUuid': targetTokenUuid, 'actorUuid': targetTokenUuid});\n        await workflow.actor.setFlag('midi-qol', 'concentration-data.targets', concentrationsTargets);\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let metaMagic = {\n    carefulSpell: carefulSpell,\n    empoweredSpell: empoweredSpell,\n    heightenedSpell: heightenedSpell,\n    seekingSpell: seekingSpell,\n    transmutedSpell: transmutedSpell,\n    twinnedSpell: twinnedSpell\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nlet type = 'enervating';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'metallicBreathWeapon', 50);\n    if (!queueSetup) return;\n    type = await chris.dialog(workflow.item.name, [['Enervating Breath', 'enervating'], ['Repulsion Breath', 'repulsion']]) ?? 'enervating';\n    let ability = duplicate(workflow.item.system.save.ability);\n    if (type === 'enervating') {\n        ability = 'con';\n    } else {\n        ability = 'str';\n    }\n    workflow.item = workflow.item.clone({'system.save.ability': ability}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nasync function save({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.failedSaves.size) return;\n    if (type === 'enervating') {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 12\n            },\n            'changes': [\n                {\n                    'key': 'macro.CE',\n                    'mode': 0,\n                    'value': 'Incapacitated',\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'turnStartSource'\n                    ]\n                }\n            }\n        };\n        for (let i of Array.from(workflow.failedSaves)) await chris.createEffect(i.actor, effectData);\n    } else {\n        let queueSetup = await queue.setup(workflow.item.uuid, 'metallicBreathWeaponSave', 50);\n        if (!queueSetup) return;\n        for (let i of Array.from(workflow.failedSaves)) {\n            chris.pushToken(workflow.token, i, 20);\n            if (!(chris.checkTrait(i.actor, 'ci', 'prone') || chris.findEffect(i.actor, 'Prone'))) chris.addCondition(i.actor, 'Prone', false, workflow.item.uuid);\n        }\n        queue.remove(workflow.item.uuid);\n    }\n}\nexport let metallicBreathWeapon = {\n    'item': item,\n    'save': save\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function mightyImpel({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.failedSaves.size) return;\n    let targetToken = workflow.targets.first();\n    let targetSize = chris.getSize(targetToken.actor);\n    let demiurgicColossus = chris.getItem(workflow.actor, 'Demiurgic Colossus');\n    let maxSize = demiurgicColossus ? 3 : 2;\n    if (targetSize > maxSize) return;\n    await workflow.actor.sheet.minimize();\n    let icon = targetToken.document.texture.src;\n    let interval = targetToken.document.width % 2 === 0 ? 1 : -1;\n    let position = await chris.aimCrosshair(targetToken, 30, icon, interval, targetToken.document.width);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        return;\n    }\n    let newCenter = canvas.grid.getSnappedPosition(position.x - targetToken.w / 2, position.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': 'Mighty Impel',\n        'description': 'Mighty Impel'\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    await workflow.actor.sheet.maximize();\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function mirrorImage(workflow) {\n    if (workflow.targets.size != 1) return;\n    if (workflow.isFumble === true) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let targetEffect = chris.findEffect(targetActor, 'Mirror Image');\n    if (!targetEffect) return;\n    let duplicates = targetActor.flags['chris-premades']?.spell?.mirrorImage;\n    if (!duplicates) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'mirrorImage', 49);\n    if (!queueSetup) return;\n    let roll = await new Roll('1d20').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {'alias': name},\n        flavor: 'Mirror Image'\n    });\n    let rollTotal = roll.total;\n    let rollNeeded;\n    switch (duplicates) {\n        case 3:\n            rollNeeded = 6;\n            break;\n        case 2:\n            rollNeeded = 8;\n            break;\n        case 1:\n            rollNeeded = 11;\n            break;\n    }\n    if (rollTotal < rollNeeded) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    workflow.isFumble = true;\n    let duplicateAC = 10 + targetActor.system.abilities.dex.mod;\n    if (workflow.attackTotal >= duplicateAC) {\n        ChatMessage.create({\n            speaker: {'alias': name},\n            content: 'Attack hit a duplicate and destroyed it.'\n        });\n        if (duplicates === 1) {\n            await chris.removeEffect(targetEffect);\n        } else {\n            let updates = {\n                'changes': [\n                    {\n                        'key': 'macro.tokenMagic',\n                        'mode': 0,\n                        'value': 'images',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.spell.mirrorImage',\n                        'mode': 5,\n                        'value': duplicates - 1,\n                        'priority': 20\n                    }\n                ]\n            };\n            await chris.updateEffect(targetEffect, updates);\n        }\n    } else {\n        ChatMessage.create({\n            speaker: {'alias': name},\n            content: 'Attack targeted a duplicate and missed.'\n        });\n    }\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'moonbeam',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'moonbeam',\n        'templateUuid': template.uuid,\n        'turn': 'start',\n        'ignoreMove': false\n    });\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Moonbeam - Move', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Moonbeam - Move');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Moonbeam');\n    }\n    let effectData = {\n        'name': 'Moonbeam',\n        'icon': workflow.item.img,\n        'transfer': false,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'moonbeam': {\n                        'templateUuid': template.uuid\n                    }\n                },\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': effectData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function trigger(token, trigger) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.moonbeam?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.moonbeam.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Moonbeam - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Moonbeam - Damage');\n    featureData.system.save.dc = trigger.saveDC;\n    featureData.system.damage.parts = [\n        [\n            trigger.castLevel + 'd10[radiant]',\n            'radiant'\n        ]\n    ];\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let changeShape = token.actor.items.getName('Change Shape');\n    let shapechanger = token.actor.items.getName('Shapechanger');\n    if (changeShape || shapechanger) {\n        await chris.createEffect(token.actor, constants.disadvantageEffectData);\n    }\n    await MidiQOL.completeItemUse(feature, config, options);\n    if (shapechanger || shapechanger) {\n        let effect = chris.findEffect(token.actor, 'Save Disadvantage');\n        if (effect) await chris.removeEffect(effect);\n    }\n}\nasync function move({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Moonbeam');\n    if (!effect) return;\n    let templateUuid = effect.flags['chris-premades']?.spell?.moonbeam?.templateUuid;\n    if (!templateUuid) return;\n    let template = await fromUuid(templateUuid);\n    if (!template) return;\n    await workflow.actor.sheet.minimize();\n    let position = await chris.aimCrosshair(workflow.token, 60, workflow.item.img, 2, 2);\n    await workflow.actor.sheet.maximize();\n    if (position.cancelled) return;\n    let updates = {\n        'x': position.x,\n        'y': position.y\n    };\n    await template.update(updates);\n}\nexport let moonbeam = {\n    'item': item,\n    'trigger': trigger,\n    'move': move\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nexport async function moteOfPotential({speaker, actor, token, character, item, args, scope, workflow}) {\n    //Can't do much here yet!\n}","import {chris} from '../../../helperFunctions.js';\nasync function targets({speaker, actor, token, character, item, args, scope, workflow}) {\n    let validTargets = Array.from(workflow.targets).filter(i => chris.getSize(i.actor) <= 2).map(i => i.id);\n    chris.updateTargets(validTargets);\n}\nasync function defeated(origin) {\n    await origin.use();\n}\nexport let deathBurst = {\n    'targets': targets,\n    'defeated': defeated\n}","import {deathBurst} from './deathBurst.js';\nexport let mudMephit = {\n    'deathBurst': deathBurst\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function muddledMind({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let amplify = await chris.dialog('Amplify Blood Curse?', [['Yes', true], ['No', false]]);\n    if (!amplify) return;\n    let damageDice = workflow.actor.system.scale['blood-hunter']['crimson-rite'];\n    if (!damageDice) {\n        ui.notifications.warn('Source actor does not appear to have a Crimson Rite scale!');\n        return;\n    }\n    let roll = await new Roll(damageDice + '[none]').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    await chris.applyDamage(workflow.token, roll.total, 'none');\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Blood Curse of the Muddled Mind');\n    if (!effect) return;\n    let updates = {\n        'duration': {\n            'duration': 6,\n            'label': '6 Seconds',\n            'remaining': 6,\n            'rounds': 1,\n            'seconds': 6\n        },\n        'flags': {\n            'dae': {\n                'specialDuration': []\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}","import {chris} from '../../../../helperFunctions.js';\nasync function effectMacro() {\n    await chrisPremades.macros.mutagencraft.remove(origin);\n}\nasync function celerity({speaker, actor, token, character, item, args, scope, workflow}) {\n    let classLevels = workflow.actor.classes['blood-hunter']?.system?.levels;\n    if (!classLevels) return;\n    let effectData = {\n        'name': 'Mutagen - Celerity: Positive Effects',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.abilities.dex.value',\n                'value': '+3',\n                'mode': 2,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    if (classLevels >= 11 && classLevels < 18) effectData.changes[0].value = '+4';\n    else if (classLevels >= 18) effectData.changes[0].value = '+5';\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function mobility({speaker, actor, token, character, item, args, scope, workflow}) {\n    let classLevels = workflow.actor.classes['blood-hunter']?.system?.levels;\n    if (!classLevels) return;\n    let effectData = {\n        'name': 'Mutagen - Mobility: Positive Effects',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.traits.ci.value',\n                'value': 'grappled',\n                'mode': 0,\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.ci.value',\n                'value': 'restrained',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    if (classLevels >= 11 && classLevels < 18) effectData.changes.push({\n        'key': 'system.traits.ci.value',\n        'value': 'paralyzed',\n        'mode': 0,\n        'priority': 20\n    });\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function potency({speaker, actor, token, character, item, args, scope, workflow}) {\n    let classLevels = workflow.actor.classes['blood-hunter']?.system?.levels;\n    if (!classLevels) return;\n    let effectData = {\n        'name': 'Mutagen - Potency: Positive Effects',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.abilities.str.value',\n                'value': '+3',\n                'mode': 2,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    if (classLevels >= 11 && classLevels < 18) effectData.changes[0].value = '+4';\n    else if (classLevels >= 18) effectData.changes[0].value = '+5';\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function rapidity({speaker, actor, token, character, item, args, scope, workflow}) {\n    let classLevels = workflow.actor.classes['blood-hunter']?.system?.levels;\n    if (!classLevels) return;\n    let effectData = {\n        'name': 'Mutagen - Rapidity: Positive Effects',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.all',\n                'value': '+10',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    if (classLevels >= 11 && classLevels < 18) effectData.changes[0].value = '+4';\n    else if (classLevels >= 18) effectData.changes[0].value = '+15';\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function reconstruction(token, actor) {\n    let currentHP = actor.system.attributes.hp.value;\n    let maxHalfHP = Math.floor(actor.system.attributes.hp.max / 2);\n    if (currentHP > maxHalfHP || actor.system.attributes.hp.value === 0) return;\n    await chris.applyDamage([token], actor.system.attributes.prof, 'healing');\n}\nasync function sagacity({speaker, actor, token, character, item, args, scope, workflow}) {\n    let classLevels = workflow.actor.classes['blood-hunter']?.system?.levels;\n    if (!classLevels) return;\n    let effectData = {\n        'name': 'Mutagen - Sagacity: Positive Effects',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.abilities.int.value',\n                'value': '+3',\n                'mode': 2,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest',\n                    'shortRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    }\n    if (classLevels >= 11 && classLevels < 18) effectData.changes[0].value = '+4';\n    else if (classLevels >= 18) effectData.changes[0].value = '+5';\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function createMutagen({speaker, actor, token, character, item, args, scope, workflow}) {\n    let generatedMenu = [];\n    if (workflow.actor.items.getName('Formulas: Aether')) generatedMenu.push(['Aether', 'Formulas: Aether']);\n    if (workflow.actor.items.getName('Formulas: Alluring')) generatedMenu.push(['Alluring', 'Formulas: Alluring']);\n    if (workflow.actor.items.getName('Formulas: Celerity')) generatedMenu.push(['Celerity', 'Formulas: Celerity']);\n    if (workflow.actor.items.getName('Formulas: Conversant')) generatedMenu.push(['Conversant', 'Formulas: Conversant']);\n    if (workflow.actor.items.getName('Formulas: Cruelty')) generatedMenu.push(['Cruelty', 'Formulas: Cruelty']);\n    if (workflow.actor.items.getName('Formulas: Deftness')) generatedMenu.push(['Deftness', 'Formulas: Deftness']);\n    if (workflow.actor.items.getName('Formulas: Embers')) generatedMenu.push(['Embers', 'Formulas: Embers']);\n    if (workflow.actor.items.getName('Formulas: Gelid')) generatedMenu.push(['Gelid', 'Formulas: Gelid']);\n    if (workflow.actor.items.getName('Formulas: Impermeable')) generatedMenu.push(['Impermeable', 'Formulas: Impermeable']);\n    if (workflow.actor.items.getName('Formulas: Mobility')) generatedMenu.push(['Mobility', 'Formulas: Mobility']);\n    if (workflow.actor.items.getName('Formulas: Nighteye')) generatedMenu.push(['Nighteye', 'Formulas: Nighteye']);\n    if (workflow.actor.items.getName('Formulas: Percipient')) generatedMenu.push(['Percipient', 'Formulas: Percipient']);\n    if (workflow.actor.items.getName('Formulas: Potency')) generatedMenu.push(['Potency', 'Formulas: Potency']);\n    if (workflow.actor.items.getName('Formulas: Precision')) generatedMenu.push(['Precision', 'Formulas: Precision']);\n    if (workflow.actor.items.getName('Formulas: Rapidity')) generatedMenu.push(['Rapidity', 'Formulas: Rapidity']);\n    if (workflow.actor.items.getName('Formulas: Reconstruction')) generatedMenu.push(['Reconstruction', 'Formulas: Reconstruction']);\n    if (workflow.actor.items.getName('Formulas: Sagacity')) generatedMenu.push(['Sagacity', 'Formulas: Sagacity']);\n    if (workflow.actor.items.getName('Formulas: Shielded')) generatedMenu.push(['Shielded', 'Formulas: Shielded']);\n    if (workflow.actor.items.getName('Formulas: Unbreakable')) generatedMenu.push(['Unbreakable', 'Formulas: Unbreakable']);\n    if (workflow.actor.items.getName('Formulas: Vermillion')) generatedMenu.push(['Vermillion', 'Formulas: Vermillion']);\n    if (generatedMenu.length === 0) return;\n    let selection = await chris.dialog('What Mutagen do you create?', generatedMenu);\n    if (!selection) return;\n    let feature = workflow.actor.items.getName(selection);\n    if (!feature) return;\n    let uses = feature.system.uses.value + 1;\n    let max = Number(feature.system.uses.max + 1);\n    await feature.update(\n        {\n            'system.uses.value': uses,\n            'system.uses.max': max\n        }\n    );\n}\nasync function remove(origin) {\n    let max = Number(origin.system.uses.max) - 1;\n    await origin.update(\n        {\n            'system.uses.max': max\n        }\n    );\n}\nasync function strangeMetabolism({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effects = workflow.actor.effects.filter(effect => effect.name.includes('Mutagen - ') && effect.name.includes('Negative Effects'));\n    let generatedMenu = [];\n    for (let i of effects) {\n        let originItem = await fromUuid(i.origin);\n        if (!originItem) continue;\n        generatedMenu.push([originItem.name, i.id]);\n    }\n    if (generatedMenu.length === 0) return;\n    let selection;\n    if (generatedMenu.length === 1) selection = generatedMenu[0][1];\n    if (!selection) selection = await chris.dialog('What Mutagen?', generatedMenu);\n    if (!selection) return;\n    let effect = workflow.actor.effects.get(selection);\n    if (!effect) return;\n    await effect.update({'disabled': true});\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'await actor.effects.get(\"' + selection + '\").update({\"disabled\": false});'\n                }\n            }\n        }\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}\nexport let mutagencraft = {\n    'celerity': celerity,\n    'mobility': mobility,\n    'potency': potency,\n    'rapidity': rapidity,\n    'reconstruction': reconstruction,\n    'sagacity': sagacity,\n    'createMutagen': createMutagen,\n    'remove': remove,\n    'strangeMetabolism': strangeMetabolism\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let pass = args[0].macroPass;\n    if (workflow.hitTargets.size === 0) return;\n    if (!(pass === 'postDamageRoll' || pass === 'preDamageApplication')) return;\n    let feature = chris.getItem(workflow.actor, 'Celestial Revelation (Necrotic Shroud)')\n    if (!feature) return;\n    let useFeature = chris.perTurnCheck(feature, 'feature', 'necroticShroud', true, workflow.token.id);\n    if (!useFeature) return;\n    switch (pass) {\n        case 'postDamageRoll':\n            if (workflow.hitTargets.size != 1) return;\n            let queueSetup = await queue.setup(workflow.item.uuid, 'necroticShroud', 249);\n            if (!queueSetup) return;\n            let selected = await chris.dialog(feature.name, constants.yesNo, 'Add extra damage from ' + feature.name + '?');\n            if (!selected) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            await chris.setTurnCheck(feature, 'feature', 'necroticShroud');\n            let damageFormula = workflow.damageRoll._formula + ' + ' + workflow.actor.system.attributes.prof + '[necrotic]';\n            let damageRoll = await new Roll(damageFormula).roll({async: true});\n            await workflow.setDamageRoll(damageRoll);\n            queue.remove(workflow.item.uuid);\n            return;\n        case 'preDamageApplication':\n            if (workflow.hitTargets.size <= 1) return;\n            let queueSetup2 = queue.setup(workflow.item.uuid, 'necroticShroud', 249);\n            if (!queueSetup2) return;\n            let selection = await chris.selectTarget('Celestial Revelation: Add extra damage?', constants.yesNoButton, workflow.targets, true, 'one');\n            if (selection.buttons === false) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            await chris.setTurnCheck(feature, 'feature', 'necroticShroud');\n            let targetTokenUuid = selection.inputs.find(i => i);\n            if (!targetTokenUuid) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let targetToken = await fromUuid(targetTokenUuid);\n            if (!targetToken) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            chris.addDamageDetailDamage(targetToken, workflow.actor.system.attributes.prof, 'necrotic', workflow);\n            await feature.displayCard();\n            queue.remove(workflow.item.uuid);\n            return;\n    }\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.necroticShroud.attack,all',\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function turn(origin) {\n    await chris.setTurnCheck(origin, 'feature', 'necroticShroud', true);\n}\nexport let necroticShroud = {\n    'attack': attack,\n    'turn': turn,\n    'item': item\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function annihilatingAura(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.document.uuid === token.document.uuid) return;\n    if (chris.raceOrType(targetToken.actor) === 'undead') return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(origin, config, options);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function enervatingFocus({speaker, actor, token, character, item, args, scope, workflow}) {\n    console.log(workflow);\n    if (workflow.failedSaves.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let damage = -chris.totalDamageType(targetActor, workflow.damageDetail, 'necrotic');\n    if (damage === 0) return;\n    let targetMaxHP = targetActor.system.attributes.hp.max;\n    let effect = chris.findEffect(targetActor, workflow.item.name);\n    if (!effect) {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 604800\n            },\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'longRest'\n                    ]\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (Math.abs(damage) >= targetMaxHP) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (!unconscious) return;\n        await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {chris} from '../../../helperFunctions.js';\nasync function target({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.get(workflow.token.document.actorId);\n    if (!sourceActor) return;\n    let monsterName = sourceActor.name.split(' ').join('-').toLowerCase();\n    let featureName = workflow.item.name.split(' ').join('-').toLowerCase();\n    let validTargets = Array.from(workflow.targets).filter(i => !i.actor.flags['chris-premades']?.monster?.[monsterName]?.feature?.[featureName]?.immune).map(i => i.id);\n    chris.updateTargets(validTargets);\n}\nasync function save({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.get(workflow.token.document.actorId);\n    if (!sourceActor) return;\n    let monsterName = sourceActor.name.split(' ').join('-').toLowerCase();\n    let featureName = workflow.item.name.split(' ').join('-').toLowerCase();\n    let effectData1 = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': 'Frightened',\n                'priority': 20\n            },\n            {\n                'key': 'macro.CE',\n                'mode': 0,\n                'value': 'Paralyzed',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'turnEndSource'\n                ]\n            }\n        }\n    };\n    let effectData2 = {\n        'name': workflow.item.name + ' Immune',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 86400\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.monster.' + monsterName + '.feature.' + featureName + '.immune',\n                'mode': 5,\n                'value': 1,\n                'priority': 20\n            }\n        ]\n    }\n    for (let i of workflow.targets) {\n        if (workflow.failedSaves.has(i)) {\n            let effect = chris.findEffect(i.actor, effectData1.name);\n            if (effect) {\n                await chris.updateEffect(effect, {'duration.seconds': effectData1.duration.seconds});\n            } else {\n                if (!chris.checkTrait(i.actor, 'ci', 'frightened')) await chris.createEffect(i.actor, effectData1);\n            }\n        } else {\n            let effect = chris.findEffect(i.actor, effectData2.name);\n            if (effect) {\n                await chris.updateEffect(effect, {'duration.seconds': effectData2.duration.seconds});\n            } else {\n                await chris.createEffect(i.actor, effectData2);\n            }\n        }\n    }\n}\nexport let fingerOfDoom = {\n    'target': target,\n    'save': save\n}","import {chris} from '../../../helperFunctions.js';\nexport async function lifeEater({speaker, actor, token, character, item, args, scope, workflow}) {\n    let displayFeature = false;\n    for (let i of workflow.damageList) {\n        if (i.oldHP === 0 || i.newHP > 0) continue;\n        let targetToken = await fromUuid(i.tokenUuid);\n        if (!targetToken) continue;\n        let effect = chris.findEffect(targetToken.actor, 'Unconscious');\n        if (!effect) continue;\n        await chris.removeEffect(effect);\n        await chris.addCondition(targetToken.actor, 'Dead', true);\n        displayFeature = true;\n    }\n    if (!displayFeature) return;\n    let effect = chris.findEffect(workflow.actor, 'Life Eater');\n    if (!effect) return;\n    if (!effect.origin) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    await originItem.displayCard();\n}","import {annihilatingAura} from './annihilatingAura.js';\nimport {enervatingFocus} from './enervatingFocus.js';\nimport {fingerOfDoom} from './fingerOfDoom.js';\nimport {lifeEater} from './lifeEater.js';\nexport let nightwalker = {\n    'enervatingFocus': enervatingFocus,\n    'fingerOfDoom': fingerOfDoom,\n    'annihilatingAura': annihilatingAura,\n    'lifeEater': lifeEater\n}","export async function noConfiguration({speaker, actor, token, character, item, args, scope, workflow}) {\n    workflow.options.configureDialog = false;\n}","import {chris} from '../../helperFunctions.js';\nexport async function oilOfSharpness({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let tokenDoc = workflow.targets.first().document;\n    let generatedMenu = [];\n    let mutationStack = warpgate.mutationStack(tokenDoc);\n    let targetActor = workflow.targets.first().actor;\n    targetActor.items.forEach(item => {\n        if (item.type === 'weapon' && item.system.equipped === true) {\n            let mutateItem = mutationStack.getName('Oil of Sharpness: ' + item.name);\n            if (!mutateItem) generatedMenu.push([item.name, item.id]);\n        }\n    });\n    let selection;\n    if (generatedMenu.length === 0) return;\n    if (generatedMenu.length === 1) selection = generatedMenu[0][1];\n    if (!selection) selection = await chris.dialog('What weapon?', generatedMenu);\n    if (!selection) return;\n    let weaponData = duplicate(targetActor.items.get(selection).toObject());\n    let oldAttackBonus = weaponData.system.attackBonus;\n    weaponData.system.attackBonus = '3';\n    switch (oldAttackBonus) {\n        case '':\n        case '0':\n            weaponData.system.damage.parts[0][0] += ' + 3';\n            break;\n        case '1':\n            weaponData.system.damage.parts[0][0] += ' + 2';\n            break;\n        case '2':\n            weaponData.system.damage.parts[0][0] =+ ' + 1';\n            break;\n    }\n    weaponData.system.properties.mgc = true;\n    let updates = {\n        'embedded': {\n            'Item': {\n                [weaponData.name]: weaponData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Oil of Sharpness: ' + weaponData.name,\n        'description': 'Oil of Sharpness: ' + weaponData.name\n    };\n    await warpgate.mutate(tokenDoc, updates, {}, options);\n    let effectData = {\n        'label': 'Oil of Sharpness: ' + weaponData.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': \"warpgate.revert(token.document, '\" + 'Oil of Sharpness: ' + weaponData.name + \"');\"\n                }\n            }\n        }\n    };\n    await chris.createEffect(targetActor, effectData);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function oldBreathWeapon({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = Math.max(chris.levelOrCR(workflow.actor), 1);\n    if (level < 6) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'oldBreathWeapon', 50);\n    if (!queueSetup) return;\n    let dice = level >= 16 ? 5 : level >= 11 ? 4 : 3;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    parts[0][0] = dice + 'd6[' + parts[0][1] + ']';\n    workflow.item = workflow.item.clone({'system.damage.parts': parts}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function orcishFury({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size === 0 || !workflow.damageRoll || workflow.item.type != 'weapon') {\n        let effect = chris.findEffect(workflow.actor, 'Orcish Fury - Extra Damage');\n        if (!effect) return;\n        let originItem = await fromUuid(effect.origin);\n        if (!originItem) return;\n        await originItem.update({'system.uses.value': 1});\n        return;\n    } else {\n        let weaponDice = workflow.damageRoll.terms[0].faces;\n        if (!weaponDice) return;\n        let diceNumber = 1;\n        if (workflow.isCritical) diceNumber = 2;\n        let queueSetup = await queue.setup(workflow.item.uuid, 'orcishFury', 250);\n        if (!queueSetup) return;\n        let damageFormula = workflow.damageRoll._formula + ' + ' + diceNumber + 'd' + weaponDice + '[' + workflow.damageRoll.terms[0].flavor + ']';\n        let damageRoll = await new Roll(damageFormula).roll({async: true});\n        await workflow.setDamageRoll(damageRoll);\n        queue.remove(workflow.item.uuid);\n    }\n}","import {queue} from '../../../../utility/queue.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {constants} from '../../../../constants.js';\nasync function cast({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'spell') return;\n    if (workflow.castData.castLevel === 0 || workflow.castData.castLevel > 5) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'overchannel', 350);\n    if (!queueSetup) return;\n    let oldDamageRoll = workflow.damageRoll;\n    if (oldDamageRoll.terms.length === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let newDamageRoll = '';\n    for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n        let flavor = oldDamageRoll.terms[i].flavor;\n        let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n        if (isDeterministic) {\n            newDamageRoll += oldDamageRoll.terms[i].formula;\n        } else {\n            newDamageRoll += '(' + oldDamageRoll.terms[i].number + '*' + oldDamageRoll.terms[i].faces + ')[' + flavor + ']';\n        }\n    }\n    let damageRoll = await new Roll(newDamageRoll).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function castComplete({speaker, actor, token, character, item, args, scope, workflow}) {\n    let damageMult = workflow.actor.flags['chris-premades']?.feature?.overchannel;\n    if (!damageMult) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Overchannel - Damage', false);\n    if (!featureData) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'overchannel', 350);\n    if (!queueSetup) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Overchannel - Damage');\n    delete featureData._id;\n    let diceNum = (damageMult + 1) * workflow.castData.castLevel;\n    featureData.system.damage.parts[0][0] = diceNum + 'd12[none]';\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Overchannel - Used');\n    if (!effect) {\n        let effectData = {\n            'label': 'Overchannel - Used',\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 604800\n            },\n            'changes': [\n                {\n                    'key': 'flags.chris-premades.feature.overchannel',\n                    'mode': 5,\n                    'value': 0,\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'longRest'\n                    ],\n                    'macroRepeat': 'none'\n                }\n            },\n            'transfer': true\n        };\n        await chris.createEffect(workflow.actor, effectData);\n    } else {\n        let updates = {\n            'changes': [\n                {\n                    'key': 'flags.chris-premades.feature.overchannel',\n                    'mode': 5,\n                    'value': Number(effect.changes[0].value) + 1,\n                    'priority': 20\n                }\n            ]\n        }\n        await chris.updateEffect(effect, updates);\n    }\n}\nexport let overchannel = {\n    'item': item,\n    'cast': cast,\n    'castComplete': castComplete\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function reroll({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size === 0 || !workflow.damageRoll || !['mwak', 'rwak', 'msak', 'rsak'].includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Piercer: Reroll Damage');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let doExtraDamage = chris.perTurnCheck(originItem, 'feat', 'piercer', false, workflow.token.id);\n    if (!doExtraDamage) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercerReroll', 390);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has(CONFIG.DND5E.damageTypes.piercing.toLowerCase())) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let autoPiercer = chris.getConfiguration(originItem, 'auto') ?? false;\n    if (autoPiercer) autoPiercer = chris.getConfiguration(originItem, 'reroll') ?? false;\n    let lowRoll = null;\n    let lowRollDice = null;\n    let resultI;\n    let resultJ;\n    for (let i = 0; workflow.damageRoll.terms.length > i; i++) {\n        let term = workflow.damageRoll.terms[i];\n        if (!term.faces) continue;\n        for (let j = 0; term.results.length > j; j++) {\n            if (term.results[j].result > lowRoll && lowRoll != null) continue;\n            if (term.results[j].result === lowRoll && term.faces < lowRollDice) continue;\n            lowRoll = term.results[j].result;\n            lowRollDice = term.faces;\n            resultI = i;\n            resultJ = j;\n        }\n    }\n    if (autoPiercer) {\n        if (lowRoll > autoPiercer) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n    } else {\n        let selection = await chris.dialog('Piercer: Reroll low roll of ' + lowRoll + '?', [['Yes', true], ['No', false]]);\n        if (!selection) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n    }\n    if (chris.inCombat()) await originItem.setFlag('chris-premades', 'feat.piercer.turn', game.combat.round + '-' + game.combat.turn);\n    let roll = await new Roll('1d' + lowRollDice).roll({async: true});\n    let newDamageRoll = workflow.damageRoll;\n    newDamageRoll.terms[resultI].results[resultJ].result = roll.total;\n    newDamageRoll._total = newDamageRoll._evaluateTotal();\n    await workflow.setDamageRoll(newDamageRoll);\n    await originItem.use();\n    queue.remove(workflow.item.uuid);\n}\nasync function combatEnd(origin) {\n    await origin.setFlag('chris-premades', 'feat.piercer.turn', '');\n}\nasync function critical({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.isCritical || !workflow.damageRoll) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'piercerCritical', 250);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has(CONFIG.DND5E.damageTypes.piercing.toLowerCase())) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let largeDice;\n    let flavor;\n    for (let i of workflow.damageRoll.terms) {\n        if (!i.faces) continue;\n        if (largeDice > i.faces) continue;\n        largeDice = i.faces;\n        flavor = i.flavor.toLowerCase();\n    }\n    let damageFormula = workflow.damageRoll._formula + ' + 1d' + largeDice + '[' + flavor + ']';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let effect = chris.findEffect(workflow.actor, 'Piercer: Critical Hit');\n    if (effect) {\n        let originItem = await fromUuid(effect.origin);\n        if (originItem) await originItem.use();\n    }\n    queue.remove(workflow.item.uuid);\n}\nexport let piercer = {\n    'reroll': reroll,\n    'combatEnd': combatEnd,\n    'critical': critical\n}","import {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nasync function portalCracker({speaker, actor, token, character, item, args, scope, workflow}) {\n    let roll = await workflow.actor.rollSkill('arc');\n    if (roll.total >= 20) return;\n    if (!workflow.token) return;\n    let damageRoll = await new Roll('3d8[' + translate.damageType('psychic') + ']').roll({async: true});\n    await chris.applyWorkflowDamage(workflow.token, damageRoll, 'psychic', [workflow.token], workflow.item.name, workflow.itemCardId);\n}\nasync function planarAdaptation({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Planar Wanderer: Planar Adaptation');\n    if (!effect) return;\n    let selection = await chris.dialog(workflow.item.name, [['Acid', 'acid'], ['Cold', 'cold'], ['Fire', 'fire']], 'What resistance?');\n    if (!selection) return;\n    let updates = {\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': selection,\n                'priority': 20\n            }\n        ]\n    }\n    await chris.updateEffect(effect, updates);\n}\nexport let planarWanderer = {\n    'portalCracker': portalCracker,\n    'planarAdaptation': planarAdaptation\n}","import {chris} from '../../helperFunctions.js';\nexport async function potionOfDiminution({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let roll = await new Roll('1d4').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: 'Potion of Diminution'\n    });\n    let changes = [\n        {\n            'key': 'system.bonuses.mwak.damage',\n            'mode': 2,\n            'priority': 20,\n            'value': '-1d4'\n        },\n        {\n            'key': 'system.bonuses.rwak.damage',\n            'mode': 2,\n            'priority': 20,\n            'value': '-1d4'\n        }\n    ];\n    let targetSize = targetActor.system.traits.size;\n    let keyX;\n    let keyY;\n    let value;\n    let size;\n    switch (targetSize) {\n        case 'sm':\n            keyX = 'ATL.texture.scaleX';\n            keyY = 'ATL.texture.scaleY';\n            value = '0.5';\n            size = 'tiny';\n            break;\n        case 'med':\n            keyX = 'ATL.texture.scaleX';\n            keyY = 'ATL.texture.scaleY';\n            value = '0.8';\n            size = 'sm';\n            break;\n        case 'lg':\n            size = 'med';\n            value = 1;\n            break;\n        case 'huge':\n            size = 'lg';\n            value = 2;\n            break;\n        case 'grg':\n            size = 'huge';\n            value = 3;\n            break;\n    }\n    if (!keyX) keyX = 'ATL.height';\n    if (!keyY) keyY = 'ATL.width';\n    changes.push({\n        'key': keyX,\n        'mode': 5,\n        'priority': 20,\n        'value': value\n    });\n    changes.push({\n        'key': keyY,\n        'mode': 5,\n        'priority': 20,\n        'value': value\n    });\n    changes.push({\n        'key': 'system.traits.size',\n        'mode': 5,\n        'priority': 20,\n        'value': size\n    });\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600 * roll.total\n        },\n        'changes': changes\n    };\n    await chris.createEffect(targetActor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Potion of Fire Breath Attack', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Potion of Fire Breath Attack');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Potion of Fire Breath');\n    }\n    let effectData = {\n        'name': 'Potion of Fire Breath',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.actor.uuid, //Not the item UUID due to being a consumable.\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function breath({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.system.uses.value != 0) return;\n    await warpgate.revert(workflow.token.document, 'Potion of Fire Breath');\n}\nexport let potionOfFireBreath = {\n    'item': item,\n    'breath': breath\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Potion of Giant Size');\n    if (!effect) return;\n    let changes = effect.changes;\n    changes[3].value = targetActor.system.attributes.hp.max * 2;\n    let updates = {changes};\n    await chris.updateEffect(effect, updates);\n    await chris.applyDamage(targetToken, targetActor.system.attributes.hp.value, 'healing');\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.type != 'weapon') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'potionOfGiantSize', 375);\n    if (!queueSetup) return;\n    let bonusDamageNumber = workflow.damageRoll.terms[0].number * 3 - workflow.damageRoll.terms[0].number;\n    let bonusDamageDice = workflow.damageRoll.terms[0].faces;\n    let flavor = workflow.damageRoll.terms[0].options.flavor;\n    let bonusDamageFormula = ' + ' + bonusDamageNumber + 'd' + bonusDamageDice + '[' + flavor + ']';\n    let damageFormula = workflow.damageRoll._formula + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(token, actor) {\n    let hpValue = actor.system.attributes.hp.value;\n    let hpMax = actor.system.attributes.hp.max;\n    let hpTemp = hpValue - hpMax;\n    if (hpValue <= hpMax) return;\n    let updates = {\n        'system.attributes.hp.value': hpMax\n    };\n    await actor.update(updates);\n    await chris.applyDamage(token, hpTemp, 'temphp');\n}\nexport let potionOfGiantSize = {\n    'item': item,\n    'damage': damage,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nexport async function potionOfGrowth({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let roll = await new Roll('1d4').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: 'Potion of Growth'\n    });\n    let changes =[\n        {\n            'key': 'system.bonuses.mwak.damage',\n            'mode': 2,\n            'priority': 20,\n            'value': '+1d4'\n        },\n        {\n            'key': 'system.bonuses.rwak.damage',\n            'mode': 2,\n            'priority': 20,\n            'value': '+1d4'\n        }\n    ];\n    let targetSize = targetActor.system.traits.size;\n    let keyX;\n    let keyY;\n    let value;\n    let size;\n    switch (targetSize) {\n        case 'tiny':\n            keyX = 'ATL.texture.scaleX';\n            keyY = 'ATL.texture.scaleY';\n            value = '0.8';\n            size = 'sm';\n            break;\n        case 'sm':\n            keyX = 'ATL.texture.scaleX';\n            keyY = 'ATL.texture.scaleY';\n            value = '1';\n            size = 'med';\n            break;\n        case 'med':\n            size = 'lg'\n            break;\n        case 'lg':\n            size = 'huge';\n            break;\n        case 'huge':\n            size = 'grg';\n            break;\n    }\n    if (!keyX) keyX = 'ATL.height';\n    if (!keyY) keyY = 'ATL.width';\n    if (!value) value = targetToken.document.height + 1;\n    changes.push({\n        'key': keyX,\n        'mode': 5,\n        'priority': 20,\n        'value': value\n    });\n    changes.push({\n        'key': keyY,\n        'mode': 5,\n        'priority': 20,\n        'value': value\n    });\n    changes.push({\n        'key': 'system.traits.size',\n        'mode': 5,\n        'priority': 20,\n        'value': size\n    });\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600 * roll.total\n        },\n        'changes': changes\n    };\n    await chris.createEffect(targetActor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function potionOfMaximumPower({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    if (workflow.item.type != 'spell') return;\n    if (workflow.castData.castLevel > 4) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'potionOfMaximumPower', 480);\n    if (!queueSetup) return;\n    let oldDamageRoll = workflow.damageRoll;\n    let newDamageRoll = '';\n    for (let i = 0; oldDamageRoll.terms.length > i; i++) {\n            let flavor = oldDamageRoll.terms[i].flavor;\n            let isDeterministic = oldDamageRoll.terms[i].isDeterministic;\n            if (isDeterministic === true) {\n                newDamageRoll += oldDamageRoll.terms[i].formula;\n            } else {\n                newDamageRoll += '(' + oldDamageRoll.terms[i].number + '*' + oldDamageRoll.terms[i].faces + ')[' + flavor + ']';\n            }\n    }\n    let roll = await new Roll(newDamageRoll).roll({async: true});\n    await workflow.setDamageRoll(roll);\n    let effect = chris.findEffect(workflow.actor, 'Potion of Maximum Power');\n    if (effect) await chris.removeEffect(effect);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 0 || chris.inCombat()) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let stacks = 3;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Potion of Poison - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Potion of Poison - Damage');\n    featureData.system.save.dc = workflow.item.system.save.dc;\n    delete featureData._id;\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    while (stacks > 0) {\n        if (targetActor.system.attributes.hp.value === 0) break;\n        let damageList = {\n            3: '3d6[poison]',\n            2: '2d6[poison]',\n            1: '1d6[poison]'\n        };\n        featureData.system.damage.parts = [\n            [\n                damageList[stacks],\n                'poison'\n            ]\n        ];\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetActor});\n        await warpgate.wait(500);\n        let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n        if (featureWorkflow.failedSaves.size === 0) {\n            stacks -= 1;\n        }\n        if (stacks === 0) {\n            let effect = chris.findEffect(targetActor, 'Potion of Poison');\n            if (effect) await chris.removeEffect(effect);\n            return;\n        }\n    }\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'potionOfPoison', 50);\n    if (!queueSetup) return;\n    if (workflow.targets.size != 1) return;\n    let damageFormula = '3d6[poison]';\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function turnStart(token, actor, effect, origin) {\n    let poisonedEffect = chris.findEffect(actor, 'Poisoned');\n    if (!poisonedEffect) {\n        effect.delete();\n        return;\n    }\n    let stacks = await effect.getFlag('chris-premades', 'item.potionOfPosion.stacks');\n    if (!stacks) stacks = 3;\n    let damageList = {\n        3: '3d6[poison]',\n        2: '2d6[poison]',\n        1: '1d6[poison]'\n    };\n    let damageFormula = damageList[stacks];\n    let damageRoll = await new Roll(damageFormula).evaluate({async: true})\n    damageRoll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: origin.name\n    });\n    await chris.applyDamage([token], damageRoll.total, 'poison');\n}\nasync function turnEnd(token, actor, effect, origin) {\n    let poisonedEffect = chris.findEffect(actor, 'Poisoned');\n    if (!poisonedEffect) {\n        effect.delete();\n        return;\n    }\n    let stacks = await effect.getFlag('chris-premades', 'item.potionOfPosion.stacks');\n    if (!stacks) stacks = 3;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Potion of Poison - Damage', false);\n    if (!featureData) return;\n    featureData.system.save.dc = origin.system.save.dc;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Potion of Poison - Damage');\n    featureData.name = 'Potion of Poision';\n    featureData.system.damage.parts = [];\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': actor});\n    let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (featureWorkflow.failedSaves.size === 0) {\n        stacks -= 1;\n        if (stacks === 0) {\n            effect.delete()\n            return;\n        }\n        await effect.setFlag('chris-premades', 'item.potionOfPosion.stacks', stacks);\n    }\n}\nexport let potionOfPoison = {\n    'item': item,\n    'turnStart': turnStart,\n    'turnEnd': turnEnd,\n    'damage': damage\n}","import {chris} from '../../helperFunctions.js';\nexport async function potionOfVitality({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    await chris.removeCondition(targetActor, 'Poisoned');\n    await chris.removeCondition(targetActor, 'Exhaustion 1');\n    await chris.removeCondition(targetActor, 'Exhaustion 2');\n    await chris.removeCondition(targetActor, 'Exhaustion 3');\n    await chris.removeCondition(targetActor, 'Exhaustion 4');\n    await chris.removeCondition(targetActor, 'Exhaustion 5');\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function preserveLife({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targets = await chris.findNearby(workflow.token, 30, 'ally', true);\n    if (workflow.token) targets.push(workflow.token);\n    if (targets.length === 0) return;\n    let classLevels = workflow.actor.classes.cleric?.system.levels;\n    if (!classLevels) return;\n    let maxHeal = classLevels * 5;\n    let buttons = [\n        {\n            'label': 'Ok',\n            'value': true\n        }, {\n            'label': 'Cancel',\n            'value': false\n        }\n    ];\n    let selection = await chris.selectTarget('Who is getting healing? (Max: ' + maxHeal + ')', buttons, targets, null, 'number');\n    if (!selection.buttons) return;\n    let total = 0;\n    for (let i of selection.inputs) {\n        if (!isNaN(i)) total += i;\n    }\n    if (total > maxHeal) {\n        ui.notifications.info('You can\\'t heal that much!');\n        return;\n    }\n    let count = 0;\n    for (let i of targets) {\n        if (!isNaN(selection.inputs[count])) {\n            let currentHP = i.actor.system.attributes.hp.value;\n            let maxHPHalf = Math.floor(i.actor.system.attributes.hp.max / 2);\n            let healing = selection.inputs[count];\n            if (currentHP >= maxHPHalf) continue;\n            if (currentHP + healing > maxHPHalf) {\n                healing = maxHPHalf - currentHP;\n            }\n            await chris.applyDamage([i], healing, 'healing');\n            new Sequence().effect().atLocation(i).file('jb2a.cure_wounds.400px.blue').play();\n        }\n        count++;\n    }\n}","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('What companion type?', [['Land', 'Land'], ['Sea', 'Sea'], ['Sky', 'Sky']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Primal Companion');\n    if (!sourceActor) return;\n    let rangerLevel = workflow.actor.classes?.ranger?.system?.levels;\n    if (!rangerLevel) return;\n    let primalBondData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Primal Bond', false);\n    if (!primalBondData) return;\n    primalBondData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Primal Bond');\n    let commandData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Primal Companion - Command', false);\n    if (!commandData) return;\n    commandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Primal Companion - Command');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let hpFormula = 5 + (rangerLevel * 5);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Beast of the ' + selection;\n    if (name === '') name = 'Beast of the ' + selection;\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 14 + workflow.actor.system.attributes.prof\n                    }\n                },\n                'traits': {\n                    'languages': workflow.actor.system?.traits?.languages\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.wis.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.wis.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'embedded': {\n            'Item': {\n                [primalBondData.name]: primalBondData,\n                [dodgeData.name]: dodgeData\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    }\n    let updates2 = {};\n    switch (selection) {\n        case 'Land':\n            let chargeData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Charge', false);\n            if (!chargeData) return;\n            chargeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Charge');\n            chargeData.system.save.dc = chris.getSpellDC(workflow.item);\n            let maulData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Maul', false);\n            if (!maulData) return;\n            maulData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maul');\n            updates2 = {\n                'actor': {\n                    'system': {\n                        'attributes': {\n                            'movement': {\n                                'walk': '40',\n                                'climb': '40'\n                            }\n                        }\n                    }\n                },\n                'embedded': {\n                    'Item': {\n                        [chargeData.name]: chargeData,\n                        [maulData.name]: maulData\n                    }\n                }\n            }\n            if (rangerLevel >= 7) {\n                updates2.embedded.Item[chargeData.name].flags.midiProperties.magicdam = true,\n                updates2.embedded.Item[maulData.name].flags.midiProperties.magicdam = true\n            }\n        break;\n        case 'Sea':\n            let amphibiousData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Amphibious', false);\n            if (!amphibiousData) return;\n            amphibiousData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Amphibious');\n            let bindingStrikeData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Binding Strike', false);\n            if (!bindingStrikeData) return;\n            bindingStrikeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Binding Strike');\n            updates2 = {\n                'actor': {\n                    'system': {\n                        'attributes': {\n                            'movement': {\n                                'walk': '5',\n                                'swim': '60'\n                            }\n                        }\n                    }\n                },\n                'embedded': {\n                    'Item': {\n                        [amphibiousData.name]: amphibiousData,\n                        [bindingStrikeData.name]: bindingStrikeData\n                    }\n                }\n            };\n            if (rangerLevel >= 7) {\n                updates2.embedded.Item[bindingStrikeData.name].flags.midiProperties.magicdam = true\n            }\n        break;\n        case 'Sky':\n            hpFormula = 4 + 4 * rangerLevel;\n            let flybyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Flyby', false);\n            if (!flybyData) return;\n            flybyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Flyby');\n            let shredData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Shred', false);\n            if (!shredData) return;\n            shredData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shred');\n            updates2 = {\n                'actor': {\n                    'system': {\n                        'abilities': {\n                            'str': {\n                                'value': 6\n                            },\n                            'dex': {\n                                'value': 16\n                            },\n                            'con': {\n                                'value': 13\n                            }\n                        },\n                        'attributes': {\n                            'hp': {\n                                'formula': hpFormula,\n                                'max': hpFormula,\n                                'value': hpFormula\n                            },\n                            'movement': {\n                                'walk': '10',\n                                'fly': '60'\n                            }\n                        },\n                        'traits': {\n                            'size': 'sm'\n                        }\n                    }\n                },\n                'token': {\n                    'texture': {\n                        'scaleX': 0.8,\n                        'scaleY': 0.8\n                    }\n                },\n                'embedded': {\n                    'Item': {\n                        [flybyData.name]: flybyData,\n                        [shredData.name]: shredData\n                    }\n                }\n            };\n            if (rangerLevel >= 7) {\n                updates2.embedded.Item[shredData.name].flags.midiProperties.magicdam = true\n            }\n        break;\n    }\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    updates = mergeObject(updates, updates2, {'recursive': true});\n    let defaultAnimations = {\n        'Sky': 'air',\n        'Land': 'earth',\n        'Sea': 'water'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? defaultAnimations[selection];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 86400, workflow.item, 30, workflow.token, animation);\n    let updates3 = {\n        'embedded': {\n            'Item': {\n                [commandData.name]: commandData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Primal Companion',\n        'description': commandData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates3, {}, options);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Primal Companion\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': commandData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates); \n}\nasync function bindingStrike({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'bindingStrike', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('What damage type?', [['Piercing', 'piercing'], ['Bludgeoning', 'bludgeoning']]);\n    if (!selection) selection = 'piercing';\n    let damageFormula = workflow.damageRoll._formula.replace('none', selection);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nexport let primalCompanion = {\n    'item': item,\n    'bindingStrike': bindingStrike,\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function protectionFromEvilAndGood(workflow) {\n    if (workflow.targets.size != 1 || workflow.disadvantage) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let targetEffect = chris.findEffect(targetActor, 'Protection from Evil and Good');\n    if (!targetEffect) return;\n    let actorRace = chris.raceOrType(workflow.actor);\n    let races = ['aberration', 'celestial', 'elemental', 'fey', 'fiend', 'undead'];\n    let queueSetup = await queue.setup(workflow.item.uuid, 'protectionFromEvilAndGood', 49);\n    if (!queueSetup) return;\n    if (races.includes(actorRace)) workflow.disadvantage = true;\n    workflow.attackAdvAttribution.add('Disadvantage: Protection From Evil And Good');\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {constants} from '../../../constants.js';\nexport async function radiantConsumption(token, origin) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Race Feature Items', 'Radiant Consumption - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Radiant Consumption - Damage');\n    delete featureData._id;\n    let nearbyTargets = chris.findNearby(token, 10, 'all', true).map(i => i.document.uuid);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions(nearbyTargets);\n    setProperty(options, 'workflowOptions.allowIncapacitated', true);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let pass = args[0].macroPass;\n    if (workflow.item.type != 'spell' || workflow.hitTargets.size === 0) return;\n    if (!(pass === 'postDamageRoll' || pass === 'preDamageApplication')) return;\n    let effect = chris.findEffect(workflow.actor, 'Radiant Soul');\n    if (!effect) return;\n    let feature = await fromUuid(effect.origin);\n    if (!feature) return;\n    let useFeature = chris.perTurnCheck(feature, 'feature', 'radiantSoul', false);\n    if (!useFeature) return;\n    switch (pass) {\n        case 'postDamageRoll':\n            if (workflow.hitTargets.size != 1) return;\n            let queueSetup = await queue.setup(workflow.item.uuid, 'radiantSoul', 250);\n            if (!queueSetup) return;\n            let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n            if (!(damageTypes.has('fire') || damageTypes.has('radiant'))) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let options = [];\n            if (damageTypes.has('fire')) options.push(['Yes (Fire)', 'fire']);\n            if (damageTypes.has('radiant')) options.push(['Yes (Radiant)', 'radiant']);\n            options.push(['No', false]);\n            let selected = await chris.dialog('Radiant Soul', options, 'Radiant Soul: Add extra damage?');\n            if (!selected) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            if (chris.inCombat()) await feature.setFlag('chris-premades', 'feature.radiantSoul.turn', game.combat.round + '-' + game.combat.turn);\n            let damageFormula = workflow.damageRoll._formula + ' + ' + workflow.actor.system.abilities.cha.mod + '[' + selected + ']';\n            let damageRoll = await new Roll(damageFormula).roll({async: true});\n            await workflow.setDamageRoll(damageRoll);\n            queue.remove(workflow.item.uuid);\n            return;\n        case 'preDamageApplication':\n            if (workflow.hitTargets.size <= 1) return;\n            let queueSetup2 = queue.setup(workflow.item.uuid, 'radiantSoul', 250);\n            if (!queueSetup2) return;\n            let damageTypes2 = chris.getRollDamageTypes(workflow.damageRoll);\n            if (!(damageTypes2.has('fire') || damageTypes2.has('radiant'))) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let buttons = [\n                {\n                    'label': 'Yes',\n                    'value': true\n                }, {\n                    'label': 'No',\n                    'value': false\n                }\n            ];\n            let selection = await chris.selectTarget('Radiant Soul: Add extra damage?', buttons, workflow.targets, false, 'one');\n            if (selection.buttons === false) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            if (chris.inCombat()) await feature.setFlag('chris-premades', 'feature.radiantSoul.turn', game.combat.round + '-' + game.combat.turn);\n            let targetTokenID = selection.inputs.find(id => id != false);\n            if (!targetTokenID) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let targetDamage = workflow.damageList.find(i => i.tokenId === targetTokenID);\n            let options2 = [];\n            if (damageTypes2.has('fire')) options2.push(['Yes (Fire)', 'fire']);\n            if (damageTypes2.has('radiant')) options2.push(['Yes (Radiant)', 'radiant']);\n            let selected2;\n            if (options2.length === 2) {\n                selected2 = await chris.dialog('Radiant Soul', options2, 'What damage type?');\n            } else if (damageTypes2.has('fire')) {\n                selected2 = 'fire';\n            } else {\n                selected2 = 'radiant';\n            }\n            if (!selected2) selected2 = 'radiant';\n            let targetActor = canvas.scene.tokens.get(targetDamage.tokenId).actor;\n            if (!targetActor) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let hasDI = chris.checkTrait(targetActor, 'di', selected2);\n            if (hasDI) {\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n            let damageTotal = workflow.actor.system.abilities.cha.mod;\n            let hasDR = chris.checkTrait(targetActor, 'dr', selected2);\n            if (hasDR) damageTotal = Math.floor(damageTotal / 2);\n            targetDamage.damageDetail[0].push(\n                {\n                    'damage': damageTotal,\n                    'type': selected2\n                }\n            );\n            targetDamage.totalDamage += damageTotal;\n            targetDamage.appliedDamage += damageTotal;\n            targetDamage.hpDamage += damageTotal;\n            if (targetDamage.oldTempHP > 0) {\n                if (targetDamage.oldTempHP >= damageTotal) {\n                    targetDamage.newTempHP -= damageTotal;\n                } else {\n                    let leftHP = damageTotal - targetDamage.oldTempHP;\n                    targetDamage.newTempHP = 0;\n                    targetDamage.newHP -= leftHP;\n                }\n            } else {\n                targetDamage.newHP -= damageTotal;\n            }\n            queue.remove(workflow.item.uuid);\n            return;\n    }\n}\nasync function turn(origin) {\n    await origin.setFlag('chris-premades', 'feature.radiantSoul.turn', false);\n}\nexport let radiantSoul = {\n    'attack': attack,\n    'turn': turn\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let infusionId = workflow.item.flags['chris-premades']?.feature?.infusion?.radiantWeapon?.id;\n    if (!infusionId) {\n        let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && !i.system.properties?.mgc);\n        if (chris.getItem(actor, 'Armor Modifications')) {\n            let gauntlets = chris.getItem(workflow.actor, 'Guardian Armor: Thunder Gauntlets');\n            if (gauntlets) validWeapons.push(gauntlets);\n        }\n        if (validWeapons.length === 0) {\n            ui.notifications.info('No valid weapon to infuse!');\n            return;\n        }\n        let [selection] = await chris.selectDocument('Infuse what weapon?', validWeapons, false);\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.radiantWeapon.id', selection.id);\n    } else {\n        let selection = await chris.dialog(workflow.item.name, [['Yes', true], ['No', false]], 'Remove radiant weapon infusion?');\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.radiantWeapon.id', null);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let originItem = chris.getItem(workflow.actor, 'Radiant Weapon');\n    if (!originItem) return;\n    if (workflow.item.id != originItem.flags['chris-premades']?.feature?.infusion?.radiantWeapon?.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'radiantWeapon', 150);\n    if (!queueSetup) return;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    parts[0][0] = parts[0][0] + ' + 1';\n    let properties = duplicate(workflow.item.system.properties);\n    let attackBonus = duplicate(workflow.item.system.attackBonus);\n    attackBonus = 1;\n    properties.mgc = true;\n    workflow.item = workflow.item.clone({'system.damage.parts': parts, 'system.properties': properties, 'system.attackBonus': attackBonus}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nasync function blind({speaker, actor, token, character, item, args, scope, workflow}) {\n    let originItem = chris.getItem(workflow.actor, 'Radiant Weapon');\n    if (!originItem) return;\n    let saveDC = chris.getConfiguration(originItem, 'savedc');\n    if (!saveDC) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'radiantWeaponBlind', 50);\n    if (!queueSetup) return;\n    workflow.item = workflow.item.clone({'system.save.dc': saveDC}, {'keepId': true});\n    queue.remove(workflow.item.uuid);\n}\nexport let radiantWeapon = {\n    'item': item,\n    'attack': attack,\n    'blind': blind\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {enlargeReduce} from '../../spells/enlargeReduce.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.actor || !workflow.token) return;\n    let effect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (effect) chris.removeEffect(effect);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Rage - End', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Rage - End');\n    async function effectMacro () {\n        if (chrisPremades.helpers.getItem(actor, 'Call the Hunt')) await chrisPremades.macros.callTheHunt.rageEnd(effect);\n        await warpgate.revert(token.document, 'Rage');\n        await chrisPremades.macros.rage.animationEnd(token, origin);\n        if (chrisPremades.helpers.getItem(actor, 'Giant\\'s Havoc: Giant Stature')) await warpgate.revert(token.document, 'Giant Stature');\n        let effect2 = chrisPremades.helpers.findEffect(actor, 'Elemental Cleaver');\n        if (effect2) await chrisPremades.helpers.removeEffect(effect2);\n    }\n    async function effectMacro2 () {\n        await chrisPremades.macros.rage.animationStart(token, origin);\n    }\n    let effectData = {\n        'changes': [\n            {\n                'key': 'flags.midi-qol.advantage.ability.check.str',\n                'mode': 0,\n                'value': '1',\n                'priority': 0\n            },\n            {\n                'key': 'flags.midi-qol.advantage.ability.save.str',\n                'mode': 0,\n                'value': '1',\n                'priority': 0\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'slashing',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'piercing',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'bludgeoning',\n                'priority': 20\n            },\n            {\n                'key': 'system.bonuses.mwak.damage',\n                'mode': 2,\n                'value': '+ @scale.barbarian.rage-damage',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.fail.spell.vocal',\n                'value': '1',\n                'mode': 0,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.fail.spell.somatic',\n                'value': '1',\n                'mode': 0,\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.fail.spell.material',\n                'value': '1',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'duration': {\n            'seconds': 60\n        },\n        'icon': workflow.item.img,\n        'name': workflow.item.name,\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                },\n                'onCreate': {\n                    'script': chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'zeroHP'\n                ]\n            }\n        }\n    }\n    if (!chris.getItem(actor, 'Persistent Rage')) {\n        effectData.changes = effectData.changes.concat([\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.rage.attack,postActiveEffects',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.feature.onHit.rage',\n                'mode': 5,\n                'value': true,\n                'priority': 20\n            }\n        ]);\n        effectData.flags.effectmacro.onTurnEnd = {\n            'script': 'await chrisPremades.macros.rage.turnEnd(effect, actor);'\n        }\n        effectData.flags.effectmacro.onCombatStart = {\n            'script': 'await chrisPremades.macros.rage.combatStart(effect);'\n        }\n        if (chris.inCombat()) setProperty(effectData, 'flags.chris-premades.feature.rage.attackOrAttacked', {'turn': game.combat.turn, 'round': game.combat.round});\n    }\n    let totemBear = chris.getItem(workflow.actor, 'Totem Spirit: Bear');\n    if (totemBear) {\n        effectData.changes = effectData.changes.concat([\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'acid',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'cold',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'fire',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'force',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'lightning',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'necrotic',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'poison',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'radiant',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'value': 'thunder',\n                'priority': 20\n            }\n        ]);\n    }\n    let crushingThrow = chris.getItem(workflow.actor, 'Giant\\'s Havoc: Crushing Throw');\n    if (crushingThrow) {\n        effectData.changes = effectData.changes.concat([\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.crushingThrow,postDamageRoll',\n                'priority': 20\n            }\n        ]);\n    }\n    let giantStature = chris.getItem(workflow.actor, 'Giant\\'s Havoc: Giant Stature');\n    let demiurgicColossus = chris.getItem(workflow.actor, 'Demiurgic Colossus');\n    if (giantStature && chris.getSize(workflow.actor) < (demiurgicColossus ? 4 : 3)) {\n        let lrgRoom = chris.checkForRoom(workflow.token, 1);\n        let lrgDirection = chris.findDirection(lrgRoom);\n        if (lrgDirection != 'none') {\n            let hgRoom;\n            let hgDirection;\n            let dCSelection = 'lg';\n            if (demiurgicColossus) {\n                hgRoom = chris.checkForRoom(workflow.token, 2);\n                if (!lrgRoom.n && !lrgRoom.e && !lrgRoom.s && !lrgRoom.w) hgDirection = 'outward';\n                if (hgDirection != 'outward') hgDirection = chris.findDirection(hgRoom);\n                if (hgDirection != 'none') dCSelection = await chris.dialog(demiurgicColossus.name, [['Large', 'lg'], ['Huge', 'huge']], 'What size?') ?? 'lg';\n            }\n            if (dCSelection === 'huge') await demiurgicColossus.displayCard();\n            let updates2 = {\n                'token': {\n                    'width': dCSelection === 'lg' ? 2 : 3,\n                    'height': dCSelection === 'lg' ? 2 : 3\n                },\n                'actor': {\n                    'system': {\n                        'traits': {\n                            'size': dCSelection\n                        }\n                    }\n                }\n            }\n            let direction = dCSelection === 'lg' ? lrgDirection : hgDirection;\n            let scale = dCSelection === 'lg' ? 1 : 2;\n            switch(direction) {\n                case 'none':\n                    break;\n                case 'ne':\n                    setProperty(updates2.token, 'y', workflow.token.y - canvas.grid.size * scale);\n                    break;\n                case 'sw':\n                    setProperty(updates2.token, 'x', workflow.token.x - canvas.grid.size * scale);\n                    break;\n                case 'outward':\n                    scale = 1;\n                case 'nw':\n                    setProperty(updates2.token, 'x', workflow.token.x - canvas.grid.size * scale);\n                    setProperty(updates2.token, 'y', workflow.token.y - canvas.grid.size * scale);\n                    break;\n            }\n            let callbacks = {\n                'delta': (delta, tokenDoc) => {\n                    if ('x' in delta.token) delete delta.token.x;\n                    if ('y' in delta.token) delete delta.token.y;\n                }\n            };\n            if (chris.jb2aCheck() === 'patreon') {\n                await enlargeReduce.enlargeAnimation(workflow.token, updates2, 'Giant Stature', callbacks);\n            } else {\n                let options = {\n                    'permanent': false,\n                    'name': 'Giant Stature',\n                    'description': 'Giant Stature'\n                };\n                await warpgate.mutate(workflow.token.document, updates2, callbacks, options);\n            }\n            effectData.changes = effectData.changes.concat([\n                {\n                    'key': 'flags.midi-qol.range.mwak',\n                    'mode': 2,\n                    'value': (demiurgicColossus ? 10 : 5),\n                    'priority': 20\n                }\n            ]);\n            await giantStature.displayCard();\n        }\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let formOfBeastFeature = chris.getItem(workflow.actor, 'Form of the Beast');\n    if (formOfBeastFeature) {\n        let selection = await chris.dialog(formOfBeastFeature.name, [['Bite', 'Form of the Beast: Bite'], ['Claws', 'Form of the Beast: Claws'], ['Tail', 'Form of the Beast: Tail'], ['None', false]], 'Manifest a natural weapon?');\n        if (selection) {\n            let featureData2 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', selection);\n            if (!featureData2) return;\n            featureData2.system.description.value = chris.getItemDescription('CPR - Descriptions', selection);\n            if (chris.getItem(workflow.actor, 'Bestial Soul')) setProperty(featureData2, 'flags.midiProperties.magicdam', true);\n            setProperty(featureData2, 'flags.chris-premades.feature.formOfTheBeast.natural', true);\n            updates.embedded.Item[selection] = featureData2;\n            if (selection === 'Form of the Beast: Tail') {\n                let featureData3 = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Form of the Beast: Tail Reaction');\n                if (!featureData3) return;\n                featureData3.system.description.value = chris.getItemDescription('CPR - Descriptions', featureData3.name);\n                updates.embedded.Item[featureData3.name] = featureData3;\n            }\n            await formOfBeastFeature.use();\n        }\n    }\n    let options = {\n        'permanent': false,\n        'name': 'Rage',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let callTheHunt = chris.getItem(workflow.actor, 'Call the Hunt');\n    if (callTheHunt) {\n        if (callTheHunt.system.uses.value) {\n            let selection = await chris.dialog(callTheHunt.name, constants.yesNo, 'Use ' + callTheHunt.name + '?');\n            if (selection) await callTheHunt.use();\n        }\n    }\n    let wildSurge = chris.getItem(workflow.actor, 'Wild Surge');\n    if (wildSurge) await wildSurge.use();\n    let elementalCleaver = chris.getItem(workflow.actor, 'Elemental Cleaver');\n    if (elementalCleaver) await elementalCleaver.use();\n}\nasync function end({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.actor) return;\n    let effect = chris.findEffect(workflow.actor, 'Rage');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Rage');\n    if (!effect) return;\n    if (!chris.inCombat()) return;\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    await effect.setFlag('chris-premades', 'feature.rage.attackOrAttacked', {'turn': game.combat.turn, 'round': game.combat.round});\n}\nasync function attacked(workflow, token) {\n    let effect = chris.findEffect(token.actor, 'Rage');\n    if (!effect) return;\n    if (!chris.inCombat()) return;\n    if (!workflow.damageRoll) return;\n    let damageItem = workflow.damageList.find(i => i.tokenId === token.id);\n    if (!damageItem) return;\n    if (damageItem.newHP >= damageItem.oldHP) return;\n    let updates = {\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'rage': {\n                        'attackOrAttacked': {\n                            'turn': game.combat.turn,\n                            'round': game.combat.round\n                        }\n                    }\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}\nasync function turnEnd(effect, actor) {\n    let lastRound = effect.flags['chris-premades']?.feature?.rage?.attackOrAttacked?.round;\n    let lastTurn = effect.flags['chris-premades']?.feature?.rage?.attackOrAttacked?.turn;\n    if (lastRound === undefined || lastTurn === undefined) return;\n    let currentRound = game.combat.previous.round;\n    let currentTurn = game.combat.previous.turn;\n    let roundDiff = currentRound - lastRound;\n    if (roundDiff >= 1) {\n        if (currentTurn >= lastTurn) {\n            let userId = chris.lastGM();\n            let selection = await chris.remoteDialog('Rage', constants.yesNo, userId, actor.name + ' has not attacked an enemy or taken damage since their last turn. Remove Rage?');\n            if (!selection) return;\n            await chris.removeEffect(effect);\n        }\n    }\n}\nasync function combatStart(effect) {\n    await effect.setFlag('chris-premades', 'feature.rage.attackOrAttacked', {'turn': 0, 'round': 0});\n}\nasync function animationStart(token, origin) {\n    //Animations by: eskiemoh\n    let animation = chris.getConfiguration(origin, 'animation') ?? 'default';\n    if (animation === 'none' || chris.jb2aCheck() === 'free') return;\n    switch (animation) {\n        case 'default':\n            new Sequence()\n                \n                .effect()\n                .file('jb2a.extras.tmfx.outpulse.circle.02.normal')\n                .atLocation(token)\n                .size(4, {'gridUnits': true})\n                .opacity(0.25)\n                \n                .effect()\n                .file('jb2a.impact.ground_crack.orange.02')\n                .atLocation(token)\n                .belowTokens()\n                .filter('ColorMatrix', {'hue': -15,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .zIndex(1)\n                \n                .effect()\n                .file('jb2a.impact.ground_crack.still_frame.02')\n                .atLocation(token)\n                .belowTokens()\n                .fadeIn(1000)\n                .filter('ColorMatrix', {'hue': -15,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .zIndex(0)\n                .duration(8000)\n                .fadeOut(3000)\n                \n                .effect()\n                .file('jb2a.wind_stream.white')\n                .atLocation(token, {'offset': {y:-0.05}, 'gridUnits': true})\n                .size(1.75, {'gridUnits': true})\n                .rotate(90)\n                .opacity(0.9)\n                .filter('ColorMatrix', {'saturate': 1})\n                .tint('#FF0000')\n                .loopProperty('sprite', 'position.y', {'from': -5, 'to': 5, 'duration': 50, 'pingPong': true})\n                .duration(8000)\n                .fadeOut(3000)\n                \n                .effect()\n                .file('jb2a.particles.outward.orange.01.03')\n                .atLocation(token)\n                .scaleToObject(2.5)\n                .opacity(1)\n                .fadeIn(200)\n                .fadeOut(3000)\n                .loopProperty('sprite', 'position.x', {'from': -5, 'to': 5, 'duration': 50, 'pingPong': true})\n                .animateProperty('sprite', 'position.y', {'from': 0, 'to': -100, 'duration': 6000, 'pingPong': true, 'delay': 2000})\n                .duration(8000)\n                \n                .effect()\n                .file('jb2a.wind_stream.white')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .scaleToObject()\n                .rotate(90)\n                .opacity(1)\n                .filter('ColorMatrix', {'saturate': 1})\n                .tint('#FF0000')\n                .persist()\n                .private()\n                \n                .effect()\n                .file('jb2a.token_border.circle.static.orange.012')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .opacity(0.6)\n                .scaleToObject(1.9)\n                .filter('ColorMatrix', {'saturate': 1})\n                .tint('#FF0000')\n                .persist()\n\n                .play()\n            break;\n        case 'lightning':\n            new Sequence()\n\n                .effect()\n                .file('jb2a.extras.tmfx.outpulse.circle.02.normal')\n                .atLocation(token)\n                .size(4, {'gridUnits': true})\n                .opacity(0.25)\n\n                .effect()\n                .file('jb2a.impact.ground_crack.purple.02')\n                .atLocation(token)\n                .belowTokens()\n                .filter('ColorMatrix', {'hue': -15,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .zIndex(1)\n\n                .effect()\n                .file('jb2a.impact.ground_crack.still_frame.02')\n                .atLocation(token)\n                .belowTokens()\n                .fadeIn(1000)\n                .filter('ColorMatrix', {'hue': -15,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .duration(8000)\n                .fadeOut(3000)\n                .zIndex(0)\n\n                .effect()\n                .file('jb2a.static_electricity.03.purple')\n                .atLocation(token)\n                .size(3, {'gridUnits': true})\n                .rotate(90)\n                .randomRotation()\n                .opacity(0.75)\n                .belowTokens()\n                .duration(8000)\n                .fadeOut(3000)\n\n                .effect()\n                .file('jb2a.particles.outward.purple.01.03')\n                .atLocation(token)\n                .scaleToObject(2.5)\n                .opacity(1)\n                .fadeIn(200)\n                .fadeOut(3000)\n                .loopProperty('sprite', 'position.x', {'from': -5, 'to': 5, 'duration': 50, 'pingPong': true})\n                .animateProperty('sprite', 'position.y', {'from': 0, 'to': -100, 'duration': 6000, 'pingPong': true, 'delay': 2000})\n                .duration(8000)\n\n                .effect()\n                .file('jb2a.static_electricity.03.purple')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .scaleToObject()\n                .rotate(90)\n                .opacity(1)\n                .persist()\n                .private()\n\n                .effect()\n                .file('jb2a.token_border.circle.static.purple.009')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .belowTokens()\n                .opacity(1)\n                .scaleToObject(2.025)\n                .persist()\n                .zIndex(5)\n\n                .play()\n            break;\n        case 'saiyan':\n            new Sequence()\n\n                .effect()\n                .file('jb2a.extras.tmfx.outpulse.circle.02.normal')\n                .atLocation(token)\n                .size(4, {'gridUnits': true})\n                .opacity(0.25)\n\n                .effect()\n                .file('jb2a.impact.ground_crack.orange.02')\n                .atLocation(token)\n                .belowTokens()\n                .filter('ColorMatrix', {'hue': 20,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .zIndex(1)\n\n                .effect()\n                .file('jb2a.impact.ground_crack.still_frame.02')\n                .atLocation(token)\n                .belowTokens()\n                .fadeIn(2000)\n                .filter('ColorMatrix', {'hue': -15,'saturate': 1})\n                .size(3.5, {'gridUnits': true})\n                .duration(8000)\n                .fadeOut(3000)\n                .zIndex(0)\n\n                .effect()\n                .file('jb2a.wind_stream.white')\n                .atLocation(token, {'offset':{'y':75}})\n                .size(1.75, {'gridUnits': true})\n                .rotate(90)\n                .opacity(1)\n                .loopProperty('sprite', 'position.y', {'from': -5, 'to': 5, 'duration': 50, 'pingPong': true})\n                .duration(8000)\n                .fadeOut(3000)\n                .tint('#FFDD00')\n\n                .effect()\n                .file('jb2a.particles.outward.orange.01.03')\n                .atLocation(token)\n                .scaleToObject(2.5)\n                .opacity(1)\n                .fadeIn(200)\n                .fadeOut(3000)\n                .loopProperty('sprite', 'position.x', {'from': -5, 'to': 5, 'duration': 50, 'pingPong': true})\n                .animateProperty('sprite', 'position.y', {'from': 0, 'to': -100, 'duration': 6000, 'pingPong': true, 'delay': 2000})\n                .duration(8000)\n\n                .effect()\n                .file('jb2a.wind_stream.white')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .scaleToObject()\n                .rotate(90)\n                .opacity(1)\n                .filter('ColorMatrix', {'saturate': 1})\n                .tint('#FFDD00')\n                .persist()\n                .private()\n\n                .effect()\n                .file('jb2a.token_border.circle.static.orange.012')\n                .atLocation(token)\n                .name('Rage')\n                .attachTo(token)\n                .opacity(0.7)\n                .scaleToObject(1.9)\n                .filter('ColorMatrix', {'hue': 30, 'saturate': 1 , 'contrast': 0, 'brightness': 1})\n                .persist()\n\n                .play();\n            break;\n    }\n}\nasync function animationEnd(token, origin) {\n    let animation = chris.getConfiguration(origin, 'animation') ?? 'default';\n    if (animation === 'none') return;\n    await Sequencer.EffectManager.endEffects({'name': 'Rage', 'object': token});\n    new Sequence()\n        .animation()\n        .on(token)\n        .opacity(1)\n\n        .play();\n}\nexport let rage = {\n    'item': item,\n    'end': end,\n    'animationStart': animationStart,\n    'animationEnd': animationEnd,\n    'attack': attack,\n    'attacked': attacked,\n    'turnEnd': turnEnd,\n    'combatStart': combatStart\n}","import {queue} from '../../utility/queue.js';\nexport async function rayOfEnfeeblement({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.isFumble || workflow.item.type != 'weapon') return;\n    if (workflow.item.system.properties?.fin) {\n        let str = workflow.actor.system.abilities.str.value;\n        let dex = workflow.actor.system.abilities.dex.value;\n        if (str < dex) return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'rayOfEnfeeblement', 360);\n    if (!queueSetup) return;\n    let damageRollFormula = 'floor((' + workflow.damageRoll._formula + ') / 2)';\n    let damageRoll = await new Roll(damageRollFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function reaper({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    if (workflow.item.type != 'spell' || workflow.item.system.level != 0 || workflow.item.system.school != 'nec' || workflow.item.flags['chris-premades']?.reap) return;\n    let targetToken = workflow.targets.first();\n    let nearbyTargets = chris.findNearby(targetToken, 5, 'ally');\n    if (nearbyTargets.length === 0) return;\n    let buttons = [\n        {\n            'label': 'Yes',\n            'value': true\n        }, {\n            'label': 'No',\n            'value': false\n        }\n    ];\n    let queueSetup = await queue.setup(workflow.item.uuid, 'reaper', 450);\n    if (!queueSetup) return;\n    let selected = await chris.selectTarget('Use Reaper?', buttons, nearbyTargets, true, 'one');\n    if (selected.buttons === false) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetTokenUuid = selected.inputs.find(id => id != false);\n    if (!targetTokenUuid) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effect = chris.findEffect(workflow.actor, 'Reaper');\n    let originItem = await fromUuid(effect.origin);\n    if (originItem)    await originItem.use();\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetTokenUuid]);\n    let spellData = duplicate(workflow.item.toObject());\n    spellData.flags['chris-premades'] = {\n        'reap': true\n    };\n    let spell = new CONFIG.Item.documentClass(spellData, {'parent': workflow.actor});\n    spell.prepareData();\n    spell.prepareFinalAttributes();\n    await MidiQOL.completeItemUse(spell, config, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function relentlessEndurance(token, {item, workflow, ditem}) {\n    if (ditem.newHP != 0 || ditem.oldHP === 0) return;\n    let tokenActor = token.actor;\n    let effect = chris.findEffect(tokenActor, 'Relentless Endurance');\n    if (!effect) return;\n    let maxHP = tokenActor.system.attributes?.hp?.max;\n    if (!maxHP) return;\n    if (ditem.appliedDamage > (maxHP + ditem.oldHP)) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    if (originItem.system.uses.value === 0) return;\n    let selection = await chris.remoteDialog(originItem.name, [['Yes', true], ['No', false]], chris.firstOwner(token.document).id, 'Use Relentless Endurance?');\n    if (!selection) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'relentlessEndurance', 389);\n    if (!queueSetup) return;\n    await originItem.update({\n        'system.uses.value': originItem.system.uses.value -1\n    });\n    ditem.newHP = 1;\n    ditem.hpDamage = Math.abs(ditem.newHP - ditem.oldHP);\n    queue.remove(workflow.uuid);\n}","import {chris} from '../../../../helperFunctions.js'\nexport async function relentless(actor) {\n    let feature = chris.getItem(actor, 'Superiority Dice');\n    if (!feature) return;\n    if (!feature.system.uses.value) await feature.update({'system.uses.value': 1})\n}","import {chris} from '../../helperFunctions.js';\nexport async function removeTemplate({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, workflow.item.name + ' Template');\n    if (!effect) return;\n    let updates = {\n        'flags': {\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': 'await effect.delete();'\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let infusionId = workflow.item.flags['chris-premades']?.feature?.infusion?.repeatingShot?.id;\n    if (!infusionId) {\n        let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && !i.system.properties?.mgc && i.system.properties?.amm);\n        if (validWeapons.length === 0) {\n            ui.notifications.info('No valid weapon to infuse!');\n            return;\n        }\n        let [selection] = await chris.selectDocument('Infuse what weapon?', validWeapons, false);\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.repeatingShot.id', selection.id);\n    } else {\n        let selection = await chris.dialog(workflow.item.name, constants.yesNo, 'Remove repeating shot infusion?');\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.repeatingShot.id', null);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let originItem = chris.getItem(workflow.actor, 'Repeating Shot');\n    if (!originItem) return;\n    if (workflow.item.id != originItem.flags['chris-premades']?.feature?.infusion?.repeatingShot?.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'repeatingShot', 150);\n    if (!queueSetup) return;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    parts[0][0] = parts[0][0] + ' + 1';\n    let properties = duplicate(workflow.item.system.properties);\n    let attackBonus = duplicate(workflow.item.system.attackBonus);\n    attackBonus = 1;\n    properties.mgc = true;\n    workflow.item = workflow.item.clone({'system.damage.parts': parts, 'system.properties': properties, 'system.attackBonus': attackBonus}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nexport let repeatingShot = {\n    'item': item,\n    'attack': attack\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function repellingBlast({speaker, actor, token, character, item, args, scope, workflow}) {\n    let spellName = workflow.actor.flags['chris-premades']?.feature?.repellingBlast?.name;\n    if (!spellName) spellName = 'Eldritch Blast';\n    if (workflow.item.name != spellName || workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'repellingBlast', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('Repelling Blast', [['10 ft.', 10], ['5 ft.', 5], ['0 ft.', false]], 'How far do you push the target?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetToken = workflow.targets.first();\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n        if (hitsWall) {\n            selection -= 5;\n            if (selection === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    let effect = chris.findEffect(workflow.actor, 'Eldritch Invocations: Repelling Blast');\n    if (effect) {\n        let originItem = await fromUuid(effect.origin);\n        if (originItem) await originItem.use();\n    }\n    queue.remove(workflow.item.uuid);\n}","import {queue} from '../../../../utility/queue.js';\nimport {chris} from '../../../../helperFunctions.js';\nexport async function repulsionShield({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'repulsionShield', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(workflow.item.name, [['15 ft.', 15], ['10 ft.', 10], ['5 ft.', 5]], 'How far do you push the target?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetToken = workflow.targets.first();\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n        if (hitsWall) {\n            selection -= 5;\n            if (selection === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function resistantArmor(origin, effect) {\n    let resistance = chris.getConfiguration(origin, 'resistance');\n    if (!resistance) return;\n    if (effect.changes[0].value === resistance) return;\n    let updates = {\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'priority': 20,\n                'value': resistance\n            }\n        ]\n    }\n    await chris.updateEffect(effect, updates);\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let infusionId = workflow.item.flags['chris-premades']?.feature?.infusion?.returningWeapon?.id;\n    if (!infusionId) {\n        let validWeapons = workflow.actor.items.filter(i => i.type === 'weapon' && !i.system.properties?.mgc && i.system.properties?.thr);\n        if (validWeapons.length === 0) {\n            ui.notifications.info('No valid weapon to infuse!');\n            return;\n        }\n        let [selection] = await chris.selectDocument('Infuse what weapon?', validWeapons, false);\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.returningWeapon.id', selection.id);\n    } else {\n        let selection = await chris.dialog(workflow.item.name, [['Yes', true], ['No', false]], 'Remove returning weapon infusion?');\n        if (!selection) return;\n        await workflow.item.setFlag('chris-premades', 'feature.infusion.returningWeapon.id', null);\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let originItem = chris.getItem(workflow.actor, 'Returning Weapon');\n    if (!originItem) return;\n    if (workflow.item.id != originItem.flags['chris-premades']?.feature?.infusion?.returningWeapon?.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'returningWeapon', 150);\n    if (!queueSetup) return;\n    let parts = duplicate(workflow.item.system.damage.parts);\n    parts[0][0] = parts[0][0] + ' + 1';\n    let properties = duplicate(workflow.item.system.properties);\n    let attackBonus = duplicate(workflow.item.system.attackBonus);\n    attackBonus = 1;\n    properties.mgc = true;\n    workflow.item = workflow.item.clone({'system.damage.parts': parts, 'system.properties': properties, 'system.attackBonus': attackBonus}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nexport let returningWeapon = {\n    'item': item,\n    'attack': attack\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return\n    if (!workflow.templateId) return;\n    let template = canvas.scene.collections.templates.get(workflow.templateId)?.object;\n    if (!template) return;\n    //Animations by: eskiemoh\n    new Sequence()\n        .effect()\n        .atLocation(workflow.token)\n        .file('jb2a.magic_signs.circle.02.evocation.loop.blue')\n        .scaleToObject(1.25)\n        .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n        .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n        .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n        .belowTokens()\n        .fadeOut(2000)\n        .zIndex(0)\n\n        .effect()\n        .atLocation(workflow.token)\n        .file('jb2a.magic_signs.circle.02.evocation.loop.blue')\n        .scaleToObject(1.25)\n        .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n        .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n        .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n        .belowTokens(true)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .filter('Blur', {'blurX': 5, 'blurY': 10 })\n        .zIndex(1)\n        .duration(1200)\n        .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 500})\n        .fadeOut(300, {'ease': 'linear'})\n\n        .effect()\n        .file('jb2a.particles.outward.white.01.02')\n        .scaleIn(0, 500, {'ease': 'easeOutQuint'})\n        .delay(500)\n        .fadeOut(1000)\n        .atLocation(workflow.token)\n        .duration(1000)\n        .size(1.75, {'gridUnits': true})\n        .animateProperty('spriteContainer', 'position.y', {'from': 0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n        .zIndex(1)\n        .waitUntilFinished(250)\n\n        .effect()\n        .file('jb2a.dancing_light.blueteal')\n        .atLocation(workflow.token)\n        .rotateTowards(template)\n        .filter('ColorMatrix', {'hue': 10, 'saturate': -0.5, 'brightness': 1.5})\n        .size(0.9 * workflow.token.document.width, {'gridUnits': true})\n        .spriteScale({'x': 0.5, 'y': 1.0})\n        .spriteOffset({'x': 0.25}, { 'gridUnits': true})\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .fadeIn(500)\n        .fadeOut(1000)\n        .duration(5000)\n\n        .effect()\n        .file('jb2a.extras.tmfx.border.circle.outpulse.01.fast')\n        .atLocation(workflow.token)\n        .rotateTowards(template)\n        .size(0.9 * workflow.token.document.width, {'gridUnits': true})\n        .spriteScale({'x': 0.5, 'y': 1.0})\n        .spriteOffset({'x': 0.25}, {'gridUnits': true})\n\n        .effect()\n        .file('jb2a.particles.outward.white.02.03')\n        .size({'width': 6, 'height': 6}, {'gridUnits': true})\n        .atLocation(workflow.token, {'cacheLocation': true})\n        .scaleIn(0, 1500, {'ease': 'easeOutSine'})\n        .duration(1500)\n        .delay(250)\n        .fadeIn(250)\n        .fadeOut(1250)\n        .randomizeMirrorY()\n        .moveTowards(template)\n        .filter('ColorMatrix', {'hue': 10, 'saturate': -1, 'brightness': 2})\n        .repeats(7,500,500)\n        .zIndex(2)\n\n        .effect()\n        .file('jb2a.breath_weapons.poison.cone.blue')\n        .size(6.5, {'gridUnits': true})\n        .atLocation(workflow.token, {'cacheLocation': true})\n        .rotateTowards(template, {'cacheLocation': true})\n        .fadeIn(1100)\n        .fadeOut(1100)\n        .belowTokens()\n        .opacity(0.8)\n        .playbackRate(0.9)\n        .filter('ColorMatrix', {'hue': 10, 'saturate': -1, 'brightness': 1.8})\n        .startTime(3000)\n        .duration(5000)\n        .zIndex(1)\n\n        .effect()\n        .file('jb2a.breath_weapons.poison.cone.blue')\n        .size(6.5, {'gridUnits': true})\n        .atLocation(workflow.token, {'cacheLocation': true})\n        .rotateTowards(template, {'cacheLocation': true})\n        .mirrorY()\n        .zIndex(1)\n        .fadeOut(1100)\n        .opacity(0.1)\n        .playbackRate(0.9)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 1.1})\n        .startTime(3000)\n\n        .play();\n}\nasync function saves({speaker, actor, token, character, item, args, scope, workflow}) {\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return\n    if (!workflow.failedSaves.size) return;\n    let targets = Array.from(workflow.failedSaves)\n    targets.forEach(target => {  \n        new Sequence()\n            .effect()\n            .delay(1250)\n            .name('bindingIce')\n            .file('jb2a.extras.tmfx.outflow.circle.02')\n            .attachTo(target)\n            .belowTokens()\n            .scaleToObject(target.document.texture.scaleX * 1.55)\n            .opacity(0.45)\n            .scaleIn(0, 6000, {'ease': 'easeOutExpo'})\n            .fadeIn(6000, {'delay': 1000, 'ease': 'easeOutExpo'})\n            .persist()\n            \n            .effect()\n            .delay(1250)\n            .name('bindingIce')\n            .file('jb2a.spirit_guardians.blue.particles')\n            .attachTo(target)\n            .scaleToObject(target.document.texture.scaleX * 1.3)\n            .opacity(0.55)\n            .filter('ColorMatrix', { 'saturate':  -0.35, 'brightness': 1.2})\n            .scaleIn(0, 6000, {'ease': 'easeOutExpo'})\n            .fadeIn(6000, {'delay': 1000, 'ease': 'easeOutExpo'})\n            .persist()\n            \n            .effect()\n            .delay(1250)\n            .name('bindingIce')\n            .file('jb2a.celestial_bodies.asteroid.single.ice.blue.02')\n            .attachTo(target)\n            .spriteOffset({'x': -0.05}, {'gridUnits': true})\n            .scaleToObject(target.document.texture.scaleX * 1.5)\n            .opacity(0.5)\n            .scaleIn(0, 6000, {'ease': 'easeOutExpo'})\n            .fadeIn(6000, {'delay': 1000, 'ease': 'easeOutExpo'})\n            .randomRotation()\n            .repeats(1,100,100)\n            .noLoop()\n            .persist()\n            .endTime(19950)\n            .filter('ColorMatrix', {'contrast':0})\n            .shape('circle', {\n                'lineSize': canvas.grid.size / 2.5,\n                'lineColor': '#FF0000',\n                'radius': 0.55,\n                'gridUnits': true,\n                'name': 'bindingIce',\n                'isMask': true\n            })\n\n            .play();\n    });\n}\nasync function end(token, origin) {\n    let animation = chris.getConfiguration(origin, 'animation') ?? chris.jb2aCheck() === 'patreon';\n    if (!animation) return\n    Sequencer.EffectManager.endEffects({'name': 'bindingIce', 'object': token});\n    new Sequence()\n        .effect()\n        .file('jb2a.impact_themed.ice_shard.blue')\n        .atLocation(token)\n        .belowTokens()\n        .scaleToObject(token.document.texture.scaleX*2)\n\n        .play();\n}\nexport let rimesBindingIce = {\n    'item': item,\n    'saves': saves,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    async function deleteSpells(actor, onlyEmpty) {\n        let rossSpells =[];\n        actor.items.forEach(item => {\n            if (item.flags['chris-premades']?.item?.ross?.isStored) rossSpells.push(item);\n        });\n        if (rossSpells.length === 0) return;\n        for (let i of rossSpells) {\n            if (onlyEmpty && i.system.uses.value) continue;\n            await i.delete();\n        }\n    }\n    let pickOption = await chris.dialog('Ring of Spell Storing', [['Store a spell.', 'store'], ['Toggle showing stored spells.', 'toggle'], ['Clear used spells.', 'clear'], ['Reset stored spells.', 'reset']]);\n    if (!pickOption) return;\n    let showSpells = workflow.item.flags['chris-premades']?.item?.ross?.showSpells\n    if (showSpells === undefined) showSpells = true;\n    if (pickOption === 'store') {\n        let storedSpellLevels = workflow.item.flags['chris-premades']?.item?.ross?.spellSlots;\n        if (!storedSpellLevels) storedSpellLevels = 0;\n        if (storedSpellLevels === 5) {\n            ui.notifications.info('Ring is full!');\n            return;\n        }\n        let generatedMenu = [];\n        workflow.actor.items.forEach(item => {\n            let prepared = item.system.preparation?.prepared;\n            let mode = item.system.preparation?.mode;\n            let hasUses = true;\n            let uses = Number(item.system.uses?.value || 0);\n            let max = Number(item.system.uses?.max || 0);\n            if (max > 0 && uses === 0) hasUses = false;\n            if (mode === 'atwill' || mode === 'innate' || mode === 'pact' || mode === 'always') prepared = true;\n            if (item.type === 'spell' && item.system.level > 0 && 5 - storedSpellLevels >= item.system.level && prepared && hasUses) generatedMenu.push(item);\n        });\n        if (generatedMenu.length === 0) {\n            ui.notifications.info('No spells available to store!');\n            return;\n        }\n        generatedMenu.sort((a, b) => a.name.localeCompare(b.name));\n        let range = 0;\n        let selectedSpell = false;\n        let spellData;\n        let spellDC;\n        let spellMod = '';\n        let originalSpell;\n        while (!selectedSpell) {\n            let listMenu = [];\n            if (range != 0) listMenu.push(['- Previous -', 'previous']);\n            let rangeTop = Math.min(range + 10, generatedMenu.length);\n            for (let i = range; rangeTop > i; i++) {\n                listMenu.push([generatedMenu[i].name, i]);\n            }\n            if (rangeTop != generatedMenu.length) listMenu.push(['- Next -', 'next']);\n            let spellKey = await chris.dialog('Store what spell?', listMenu);\n            if (!(spellKey || spellKey === 0)) return;\n            if (spellKey === 'previous') {\n                range -= 10;\n            } else if (spellKey === 'next') {\n                range += 10;\n            } else {\n                spellData = generatedMenu[spellKey].toObject();\n                spellDC = chris.getSpellDC(generatedMenu[spellKey]);\n                if (generatedMenu[spellKey].system.actionType === 'rsak' || generatedMenu[spellKey].system.actionType === 'msak') {\n                    let dummyWorkflow = await (new MidiQOL.DummyWorkflow(workflow.actor, generatedMenu[spellKey], workflow.token, new Set([workflow.token])).simulateAttack(workflow.token));\n                    spellMod = dummyWorkflow.attackRoll.formula.split('1d20')[1];\n                }\n                originalSpell = generatedMenu[spellKey];\n                selectedSpell = true;\n            }\n        }\n        let castLevel;\n        if (spellData.system.preparation.mode === 'prepared' || spellData.system.preparation.mode === 'pact' || spellData.system.preparation.mode === 'always') {\n            let generatedCastMenu = [];\n            if (workflow.actor.system.spells.pact.value && 5 - storedSpellLevels >= workflow.actor.system.spells.pact.level && spellData.system.level <= workflow.actor.system.spells.pact.level) generatedCastMenu.push(['Pact', 'pact']);\n            if (workflow.actor.system.spells.spell1.value && 5 - storedSpellLevels >= 1 && spellData.system.level <= 1) generatedCastMenu.push(['1st Level', 'spell1']);\n            if (workflow.actor.system.spells.spell2.value && 5 - storedSpellLevels >= 2 && spellData.system.level <= 2) generatedCastMenu.push(['2nd Level', 'spell2']);\n            if (workflow.actor.system.spells.spell3.value && 5 - storedSpellLevels >= 3 && spellData.system.level <= 3) generatedCastMenu.push(['3rd Level', 'spell3']);\n            if (workflow.actor.system.spells.spell4.value && 5 - storedSpellLevels >= 4 && spellData.system.level <= 4) generatedCastMenu.push(['4th Level', 'spell4']);\n            if (workflow.actor.system.spells.spell5.value && 5 - storedSpellLevels >= 5 && spellData.system.level <= 5) generatedCastMenu.push(['5th Level', 'spell5']);\n            if (generatedCastMenu.length === 0) {\n                ui.notifications.info('No spell slots available!');\n                return;\n            }\n            let selection = await chris.dialog('Cast at what level?', generatedCastMenu);\n            if (!selection) return;\n            switch (selection) {\n                case 'pact':\n                    castLevel = workflow.actor.system.spells.pact.level;\n                    break;\n                case 'spell1':\n                    castLevel = 1;\n                    break;\n                case 'spell2':\n                    castLevel = 2;\n                    break;\n                case 'spell3':\n                    castLevel = 3;\n                    break;\n                case 'spell4':\n                    castLevel = 4;\n                    break;\n                case 'spell5':\n                    castLevel = 5;\n                    break;\n            }\n            await workflow.actor.update({['system.spells.' + selection +'.value']: workflow.actor.system.spells[selection].value - 1});\n        } else {\n            castLevel = spellData.system.level;\n        }\n        if (originalSpell.system.uses.max > 0) await originalSpell.update({'system.uses.value': originalSpell.system.uses.value - 1});\n        spellData.name = 'Ring of Spell Storing: ' + spellData.name;\n        spellData.system.uses.per = 'charges';\n        spellData.system.uses.max = 1;\n        spellData.system.uses.value = 1;\n        spellData.system.preparation.mode = 'atwill';\n        spellData.system.preparation.prepared = true;\n        if (spellData.system.save.ability != '') {\n            spellData.system.save.scaling = 'flat';\n            spellData.system.save.dc = spellDC;\n        }\n        spellData.flags['chris-premades'] = {\n            'item': {\n                'ross': {\n                    'isStored': true,\n                    'castLevel': castLevel,\n                    'dc': spellDC,\n                    'mod': spellMod,\n                    'itemUuid': workflow.item.uuid\n                }\n            }\n        };\n        spellData.flags['custom-character-sheet-sections'] = {\n            'sectionName': 'Ring of Spell Storing'\n        };\n        let testFlag = spellData.flags['midi-qol'];\n        if (!testFlag) spellData.flags['midi-qol'] = {\n            'onUseMacroName': '',\n            'onUseMacroParts': {\n                'items': []\n            }\n        };\n        let onUseString = spellData.flags['midi-qol'].onUseMacroName;\n        let appendString = '[preItemRoll]function.chrisPremades.macros.ringOfSpellStoring.cast,[preCheckHits]function.chrisPremades.macros.ringOfSpellStoring.attack';\n        if (onUseString === undefined) {\n            spellData.flags['midi-qol'].onUseMacroName = appendString;\n        } else {\n            spellData.flags['midi-qol'].onUseMacroName = onUseString + ',' + appendString;\n        }\n        let onUseMacroParts = spellData.flags['midi-qol'].onUseMacroParts;\n        if (!onUseMacroParts) onUseMacroParts = {'items': []};\n        onUseMacroParts.items.push({\n            'macroName': 'function.chrisPremades.macros.ringOfSpellStoring.cast',\n            'option': 'preItemRoll'\n        });\n        onUseMacroParts.items.push({\n            'macroName': 'function.chrisPremades.macros.ringOfSpellStoring.attack',\n            'option': 'preCheckHits'\n        });\n        spellData.flags['midi-qol'].onUseMacroParts = onUseMacroParts;\n        let storedSpells = workflow.item.flags['chris-premades']?.item?.ross?.storedSpells;\n        if (!storedSpells) storedSpells = [];\n        storedSpells.push(spellData);\n        await workflow.item.setFlag('chris-premades', 'item.ross.storedSpells', storedSpells);\n        let spellSlots = storedSpellLevels + castLevel;\n        await workflow.item.setFlag('chris-premades', 'item.ross.spellSlots', spellSlots);\n        if (showSpells) await workflow.actor.createEmbeddedDocuments('Item', [spellData]);\n        await workflow.item.update({'name': 'Ring of Spell Storing (' + spellSlots + '/5)'});\n        ui.notifications.info(originalSpell.name + ' stored.');\n    } else if (pickOption === 'toggle') {\n        await workflow.item.setFlag('chris-premades', 'item.ross.showSpells', !showSpells);\n        if (showSpells) {\n            deleteSpells(workflow.actor);\n            ui.notifications.info('Spells toggled off.');\n        } else {\n            let storedSpells = workflow.item.flags['chris-premades']?.item?.ross?.storedSpells;\n            if (!storedSpells) return;\n            ui.notifications.info('Spells toggled on.');\n            if (storedSpells.length === 0) return;\n            for (let i of storedSpells) {\n                i.flags['chris-premades'].item.ross.itemUuid = workflow.item.uuid;\n            }\n            await workflow.actor.createEmbeddedDocuments('Item', storedSpells);\n        }\n    } else if (pickOption === 'reset') {\n        await workflow.item.setFlag('chris-premades', 'item.ross', {'storedSpells': [], 'spellSlots': 0, 'showSpells': true});\n        if (showSpells) deleteSpells(workflow.actor);\n        await workflow.item.update({'name': 'Ring of Spell Storing (0/5)'});\n        ui.notifications.info('Ring Reset.');\n    } else if (pickOption === 'clear') {\n        deleteSpells(workflow.actor, true);\n        ui.notifications.info('Used spells cleared.');\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    let mod = workflow.item.flags['chris-premades']?.item?.ross?.mod;\n    if (!mod) mod = '0';\n    let queueSetup = await queue.setup(workflow.item.uuid, 'ringOfSpellStoring', 50);\n    if (!queueSetup) return;\n    let updatedRoll = await new Roll('1d20' + mod).evaluate({async: true});\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function cast({speaker, actor, token, character, item, args, scope, workflow}) {\n    workflow.config.consumeSpellSlot = false;\n    workflow.config.needsConfiguration = false;\n    workflow.options.configureDialog = false;\n    let castLevel = workflow.item.flags['chris-premades']?.item?.ross?.castLevel;\n    if (!castLevel) return;\n    workflow.config.consumeSpellLevel = castLevel;\n    let sourceItemUuid = workflow.item.flags['chris-premades']?.item?.ross?.itemUuid;\n    if (!sourceItemUuid) return;\n    let sourceItem = await fromUuid(sourceItemUuid);\n    if (!sourceItem) return;\n    let storedSpells = sourceItem.flags['chris-premades']?.item?.ross?.storedSpells;\n    if (!storedSpells) storedSpells = [];\n    let arrayIndex = storedSpells.findIndex(i => i.name === workflow.item.name);\n    if (arrayIndex == -1) return;\n    storedSpells.splice(arrayIndex, 1);\n    await sourceItem.setFlag('chris-premades', 'item.ross.storedSpells', storedSpells);\n    let storedSpellLevels = sourceItem.flags['chris-premades']?.item?.ross?.spellSlots;\n    if (!storedSpellLevels) storedSpellLevels = 0;\n    await sourceItem.setFlag('chris-premades', 'item.ross.spellSlots', storedSpellLevels - castLevel);\n    await sourceItem.update({'name': 'Ring of Spell Storing (' + (storedSpellLevels - castLevel) + '/5)'});\n    async function effectMacro () {\n        if (!origin) return;\n        await origin.delete();\n    }\n    let effectData = {\n        'label': workflow.item.name + ' Deletion',\n        'icon': '',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        flags: {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n    /*          'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'longRest'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            } */\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nexport let ringOfSpellStoring = {\n    'item': item,\n    'attack': attack,\n    'cast': cast\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function riteOfTheDawn({speaker, actor, token, character, item, args, scope, workflow}) {\n    let hasFeature = workflow.item.flags['chris-premades']?.feature?.rotd;\n    if (!hasFeature) return;\n    if (workflow.hitTargets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let targetType = chris.raceOrType(targetActor);\n    if (targetType != 'undead') return;\n    let damageDice = workflow.actor.system.scale['blood-hunter']['crimson-rite'];\n    if (!damageDice) {\n        ui.notifications.warn('Source actor does not appear to have a Crimson Rite scale!');\n        return;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'riteOfTheDawn', 250);\n    if (!queueSetup) return;\n    let bonusDamageFormula = damageDice.formula + '[radiant]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nexport async function smotherDamage(origin, token, actor) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Rug of Smothering - Smother', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Rug of Smothering - Smother');\n    featureData.system.damage.parts = [\n        [\n            '2d6+3[' + translate.damageType('bludgeoning') + ']',\n            'bludgeoning'\n        ]\n    ];\n    featureData.system.save.dc = chris.getSpellDC(origin);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': origin.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport async function smother({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size) return\n    let targetToken = workflow.targets.first();\n    if (game.modules.get('Rideable')?.active) {\n        let targetUpdate = {\n            'token': {\n                'x': targetToken.x,\n                'y': targetToken.y\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name\n        };\n        await warpgate.mutate(workflow.token.document, targetUpdate, {}, options);\n        game.Rideable.Mount([targetToken.document], workflow.token.document, {'Grappled': true, 'MountingEffectsOverride': []});\n    }\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function damageTransfer({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size) return;\n    let sourceToken = args[0].options.token;\n    let targetHasEffect = chris.findNearby(sourceToken, 5, 'all', true)?.find(t=>chris.findEffect(t.actor, 'Smother')?.origin === sourceToken.actor.items.getName('Smother')?.uuid);\n    if (!targetHasEffect) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'smother', 400);\n    if (!queueSetup) return;\n    let ditem = workflow.damageItem;\n    if (ditem.newHP > ditem.oldHP) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let keptDamage = Math.floor(ditem.appliedDamage / 2);\n    await chris.applyDamage([targetHasEffect], keptDamage, 'none');\n    if (ditem.oldTempHP > 0) {\n        if (keptDamage > ditem.oldTempHP) {\n            ditem.newTempHP = 0;\n            keptDamage -= ditem.oldTempHP;\n            ditem.tempDamage = ditem.oldTempHP;\n        } else {\n            ditem.newTempHP = ditem.oldTempHP - keptDamage;\n            ditem.tempDamage = keptDamage;\n            keptDamage = 0;\n        }\n    }\n    let maxHP = sourceToken.actor.system.attributes.hp.max;\n    ditem.hpDamage = Math.clamped(keptDamage, 0, maxHP);\n    ditem.newHP = Math.clamped(ditem.oldHP - keptDamage, 0, maxHP);\n    ditem.appliedDamage = keptDamage;\n    ditem.totalDamage = keptDamage;\n    queue.remove(workflow.item.uuid);\n}","import {smotherDamage, smother} from './smother.js';\nimport {damageTransfer} from './damageTransfer.js';\nexport let rugOfSmothering = {\n    'smotherDamage': smotherDamage,\n    'smother': smother,\n    'damageTransfer': damageTransfer\n}","import {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let mutationStack = warpgate.mutationStack(workflow.token.document);\n    let weapons = workflow.actor.items.filter(i => i.type === 'weapon' && i.system.equipped && !mutationStack.getName(i.name));\n    if (weapons.length === 0) return;\n    let selection;\n    if (weapons.length != 1) {\n        let selection2 = await chris.selectDocument(workflow.item.name, weapons, false);\n        if (selection2) selection = selection2[0];\n    } else {\n        selection = weapons[0];\n    }\n    if (!selection) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Sacred Weapon - Dismiss', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Sacred Weapon - Dismiss');\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Sacred Weapon');\n    }\n    let effectData = {\n        'name': 'Sacred Weapon',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'changes': [\n            {\n                'key': 'ATL.light.dim',\n                'mode': 4,\n                'value': '40',\n                'priority': 20\n            },\n            {\n                'key': 'ATL.light.bright',\n                'mode': 4,\n                'value': '20',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'zeroHP'\n                ]\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let attackBonus = Math.max(1, workflow.actor.system.abilities.cha.mod);\n    if (selection.system.attackBonus != '') {\n        attackBonus = selection.system.attackBonus + ' + ' + attackBonus;\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [selection.name]: {\n                    'system': {\n                        'attackBonus': attackBonus,\n                        'properties': {\n                            'mgc': true\n                        }\n                    }\n                },\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Sacred Weapon',\n        'description': 'Sacred Weapon'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function dismiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Sacred Weapon');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let sacredWeapon = {\n    'item': item,\n    'dismiss': dismiss\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function tail({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let effect = chris.findEffect(targetToken.actor, 'Tail');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (originItem.actor.id != workflow.actor.id) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'salamanderTail', 50);\n    if (!queueSetup) return;\n    let updatedRoll = await new Roll('100').evaluate({async: true});\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}","import {heatedBody} from '../fireSnake/heatedBody.js';\nimport {tail} from './tail.js';\nexport let salamander = {\n    'heatedBody': heatedBody,\n    'tail': tail\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function hook(workflow) {\n    if (!workflow.token) return;\n    if (workflow.targets.size != 1) return;\n    let invalidTypes = [\n        'cone',\n        'cube',\n        'cylinder',\n        'line',\n        'radious',\n        'sphere',\n        'square',\n        'wall'\n    ];\n    if (invalidTypes.includes(workflow.item.system.target?.type)) return;\n    let targetToken = workflow.targets.first();\n    if (targetToken.document.disposition === workflow.token.document.disposition) return;\n    let targetActor = targetToken.actor;\n    let targetEffect = chris.findEffect(targetActor, 'Sanctuary');\n    if (!targetEffect) return;\n    let targetItem = await fromUuid(targetEffect.origin);\n    if (!targetItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Sanctuary - Save', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Sanctuary - Save');\n    featureData.system.save.dc = chris.getSpellDC(targetItem);\n    setProperty(featureData, 'flags.chris-premades.spell.sanctuary.ignore', true);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    let queueSetup = await queue.setup(workflow.item.uuid, 'sanctuary', 48);\n    if (!queueSetup) return;\n    await warpgate.wait(100);\n    let spellWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (spellWorkflow.failedSaves.size != 1) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    queue.remove(workflow.item.uuid);\n    new Sequence().effect().atLocation(targetToken).scaleToObject(1.25).fadeIn(500).fadeOut(500).playbackRate(2).file('jb2a.energy_field.02.above.blue').play();\n    return false;\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.flags['chris-premades']?.spell?.sanctuary?.ignore) return;\n    let remove = false;\n    if (workflow.damageRoll && !(workflow.defaultDamageType === 'healing' || workflow.defaultDamageType === 'temphp')) {\n        remove = true;\n    }\n    if (!remove && constants.attacks.includes(workflow.item.system.actionType)) remove = true;\n    if (!remove && workflow.item.type === 'spell') {\n        for (let i of Array.from(workflow.targets)) {\n            if (workflow.token.document.disposition != i.document.disposition) {\n                remove = true;\n                break;\n            }\n        }\n    }\n    if (!remove) return;\n    let effect = chris.findEffect(workflow.actor, 'Sanctuary');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let effectData = {\n        'name': 'Sanctuary',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60,\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.sanctuary.attack,postActiveEffects',\n                'priority': 20\n            }\n        ]\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n}\nexport let sanctuary = {\n    'item': item,\n    'hook': hook,\n    'attack': attack\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.actionType != 'mwak' || !workflow.token || !workflow.damageRoll) return;\n    let feature = chris.getItem(workflow.actor, 'Savage Attacker');\n    if (!feature) return;\n    let turnCheck = chris.perTurnCheck(feature, 'feat', 'savageAttacker', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'savageAttacker', 101);\n    if (!queueSetup) return;\n    let dummyRollFormula = '';\n    for (let i of workflow.item.system.damage.parts) dummyRollFormula += i[0] + ' + ';\n    let dummyRoll = await new Roll(dummyRollFormula).roll({'async': true});\n    let damageTotal = 0;\n    for (let i = 0; i < dummyRoll.terms.length; i++) {\n        let total = workflow.damageRoll.terms[i].total;\n        if (!isNaN(total)) damageTotal += total;\n    }\n    let autoReroll = chris.getConfiguration(feature, 'auto') ?? false;\n    let autoNumber = chris.getConfiguration(feature, 'reroll') ?? 1;\n    let selection = false;\n    if (!autoReroll) {\n        selection = await chris.dialog(feature.name, constants.yesNo, 'Weapon Damage Total: <b>' + damageTotal + '</b><br>Use ' + feature.name + '?');\n    } else {\n        if (autoNumber >= damageTotal) selection = true;\n    }\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.use();\n    if (chris.inCombat()) await feature.setFlag('chris-premades', 'feat.savageAttacker.turn', game.combat.round + '-' + game.combat.turn);\n    let damageRoll = await new Roll(workflow.damageRoll._formula).roll({'async': true});\n    let newTotal = 0;\n    for (let i = 0; i < dummyRoll.terms.length; i++) {\n        let total = damageRoll.terms[i].total;\n        if (!isNaN(total)) newTotal += total;\n    }\n    if (newTotal <= damageTotal) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.savageAttacker.turn', null);\n}\nexport let savageAttacker = {\n    'damage': damage,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nasync function targets(condition, workflow) {\n    if (!workflow.targets.size) return;\n    let effectData = {\n        'label': 'Immune',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.all',\n                'mode': 5,\n                'value': '99',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    'isSave'\n                ],\n            }\n        }\n    };\n    for (let i of workflow.targets) {\n        if (chris.checkTrait(i.actor, 'ci', condition)) await chris.createEffect(i.actor, effectData);\n    }\n}\nasync function blinded({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('blinded', workflow);\n}\nasync function charmed({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('charmed', workflow);\n}\nasync function deafened({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('deafened', workflow);\n}\nasync function diseased({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('diseased', workflow);\n}\nasync function frightened({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('frightened', workflow);\n}\nasync function grappled({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('grappled', workflow);\n}\nasync function incapacitated({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('incapacitated', workflow);\n}\nasync function invisible({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('invisible', workflow);\n}\nasync function paralyzed({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('paralyzed', workflow);\n}\nasync function peterified({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('peterified', workflow);\n}\nasync function poisoned({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('poisoned', workflow);\n}\nasync function prone({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('prone', workflow);\n}\nasync function restrained({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('restrained', workflow);\n}\nasync function stunned({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('stunned', workflow);\n}\nasync function unconscious({speaker, actor, token, character, item, args, scope, workflow}) {\n    await targets('unconscious', workflow);\n}\nexport let saveConditionImmune = {\n    'blinded': blinded,\n    'charmed': charmed,\n    'deafened': deafened,\n    'diseased': diseased,\n    'frightened': frightened,\n    'grappled': grappled,\n    'incapacitated': incapacitated,\n    'invisible': invisible,\n    'paralyzed': paralyzed,\n    'peterified': peterified,\n    'poisoned': poisoned,\n    'prone': prone,\n    'restrained': restrained,\n    'stunned': stunned,\n    'unconscious': unconscious\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function scorchingRay({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let maxRays = 3 + (workflow.castData.castLevel - 2);\n    let skipDead = false;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Scorching Ray Bolt', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Scorching Ray Bolt');\n    featureData.system.ability = workflow.item.system.ability;\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': workflow.castData\n        }\n    }\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([]);\n    let animation = chris.jb2aCheck() === 'patreon' ? chris.getConfiguration(workflow.item, 'animation') ?? 'complex' : 'simple';\n    let color = chris.jb2aCheck() === 'patreon' ? chris.getConfiguration(workflow.item, 'color') ?? 'orange' : 'orange';\n    let particle = 'jb2a.particles.outward.orange.01.03';\n    if (animation === 'complex') {\n        //Animations by: eskiemoh\n        if (color === 'cycle' || color === 'random') await Sequencer.Preloader.preload('jb2a.scorching_ray');\n        await new Sequence()\n            .effect()\n            .atLocation(workflow.token)\n            .file('jb2a.magic_signs.circle.02.evocation.loop.yellow')\n            .scaleToObject(1.25)\n            .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n            .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n            .belowTokens()\n            .fadeOut(2000)\n            .zIndex(0)\n            .persist()\n            .attachTo(workflow.token)\n            .name('Scorching Ray')\n\n            .effect()\n            .atLocation(workflow.token)\n            .file('jb2a.magic_signs.circle.02.evocation.loop.yellow')\n            .scaleToObject(1.25)\n            .rotateIn(180, 600, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeOutCubic'})\n            .loopProperty('sprite', 'rotation', {'from': 0, 'to': -360, 'duration': 10000})\n            .belowTokens(true)\n            .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n            .filter('Blur', {'blurX': 5, 'blurY': 10 })\n            .zIndex(1)\n            .duration(1200)\n            .fadeIn(200, {'ease': 'easeOutCirc', 'delay': 500})\n            .fadeOut(300, {'ease': 'linear'})\n            .persist()\n            .attachTo(workflow.token)\n            .name('Scorching Ray')\n\n            .effect()\n            .file('jb2a.particles.outward.white.01.02')\n            .scaleIn(0, 500, {'ease': 'easeOutQuint'})\n            .delay(500)\n            .fadeOut(1000)\n            .atLocation(workflow.token)\n            .duration(1000)\n            .size(1.75 * workflow.token.document.width, {'gridUnits': true})\n            .animateProperty('spriteContainer', 'position.y', {'from':0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n            .zIndex(1)\n            .waitUntilFinished(-200)\n\n            .play()\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'scorchingRay', 50);\n    if (!queueSetup) return;\n    let colors = [\n        'orange',\n        'blue',\n        'green',\n        'pink',\n        'purple',\n    ];\n    let lastColor;\n    if (color === 'random' || color === 'cycle') {\n        lastColor = Math.floor(Math.random() * colors.length);\n    }\n    while (maxRays > 0) {\n        let nearbyTargets = chris.findNearby(workflow.token, workflow.item.system.range.value, 'enemy', true);\n        let targets = skipDead ? nearbyTargets.filter(i => i.actor.system.attributes.hp.value > 0) : nearbyTargets;\n        let selection = await chris.selectTarget(workflow.item.name, constants.okCancel, targets, true, 'number', null, true, 'Select your targets (max: ' + maxRays + '):');\n        if (!selection.buttons) {\n            queue.remove(workflow.item.uuid);\n            await Sequencer.EffectManager.endEffects({'name': 'Scorching Ray', 'object': workflow.token});\n            return;\n        }\n        let total = 0;\n        for (let i = 0; i < (selection.inputs.length - 1); i++) {\n            if (!isNaN(selection.inputs[i])) total += selection.inputs[i];\n        }\n        if (total > maxRays) {\n            ui.notifications.info('You can\\'t use that many rays!');\n            continue;\n        }\n        skipDead = selection.inputs[selection.inputs.length - 1];\n        for (let i = 0; i < selection.inputs.length - 1; i++) {\n            let target = fromUuidSync(targets[i].document.uuid).object;\n            if (isNaN(selection.inputs[i]) || selection.inputs[i] === 0) continue;\n            if (skipDead) {\n                if (target.actor?.system?.attributes?.hp?.value === 0) continue;\n            }\n            options.targetUuids = [target.document.uuid];\n            let rayCount = 0;\n            for (let j = 0; j < selection.inputs[i]; j++) {\n                await warpgate.wait(100);\n                maxRays -= 1;\n                let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n                rayCount += 1;\n                if (animation === 'simple') {\n                    new Sequence()\n                        .effect()\n                        .file('jb2a.scorching_ray.01.' + color)\n                        .atLocation(workflow.token)\n                        .stretchTo(target)\n                        .missed(!featureWorkflow.hitTargets.size)\n                        .play();\n                } else if (animation === 'complex') {\n                    let path = 'jb2a.scorching_ray.{{num}}.';\n                    if (color === 'random') {\n                        path += colors[Math.floor((Math.random() * colors.length))];\n                    } else if (color === 'cycle') {\n                        path += colors[lastColor];\n                        lastColor++;\n                        if (lastColor >= colors.length) lastColor = 0;\n                    } else {\n                        path += color;\n                    }\n                    let tokenCenter = workflow.token.center;\n                    let targetCenter = target.center;\n                    let directionVector = {\n                        x: targetCenter.x - tokenCenter.x,\n                        y: targetCenter.y - tokenCenter.y,\n                    };\n                    let distance = Math.sqrt(directionVector.x ** 2 + directionVector.y ** 2);\n                    let normalizedDirectionVector = {\n                        x: directionVector.x / distance,\n                        y: directionVector.y / distance,\n                    };\n                    let magicCircleDistance = canvas.grid.size/3;\n                    let magicCircle = {\n                        x: tokenCenter.x + normalizedDirectionVector.x * magicCircleDistance,\n                        y: tokenCenter.y + normalizedDirectionVector.y * magicCircleDistance,\n                    };\n                    new Sequence()\n    \n                    .wait(150)\n                    \n                    .effect()\n                    .file(path)\n                    .atLocation(magicCircle)\n                    .scale(0.6)\n                    .stretchTo(target, {'randomOffset': 0.75})\n                    .setMustache({\n                        'num': () => {\n                            let nums = ['01','02', '02'];\n                            if (color === 'rainbow01' || color === 'rainbow02') return '01';\n                            return nums[Math.floor(Math.random()*nums.length)];\n                        }\n                    })\n                    .randomizeMirrorY()\n                    .zIndex(1)\n                    .missed(!featureWorkflow.hitTargets.size)\n                    \n                    .effect()\n                    .delay(200)\n                    .from(target)\n                    .attachTo(target)\n                    .fadeIn(200)\n                    .fadeOut(500)\n                    .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 50, 'pingPong': true, 'gridUnits': true})\n                    .scaleToObject(target.document.texture.scaleX)\n                    .duration(1800)\n                    .opacity(0.25)\n                    .tint('#fb8b23')\n                    \n                    .effect()\n                    .delay(200,500)\n                    .file(particle)\n                    .attachTo(target, {'randomOffset': 0.2})\n                    .zIndex(1)\n                    .fadeIn(500)\n                    .fadeOut(1200)\n                    .duration(4500)\n                    .scaleToObject(1.5)\n                    .randomRotation()\n                    \n                    .play()\n                }\n            }\n        }\n    }\n    queue.remove(workflow.item.uuid);\n    if (animation === 'complex') {\n        await warpgate.wait(1500);\n        await Sequencer.EffectManager.endEffects({'name': 'Scorching Ray', 'object': workflow.token});\n    }\n}","import {queue} from '../../utility/queue.js';\nimport {chris} from '../../helperFunctions.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.item) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.spell?.searingSmite);\n    if (!effect) return;\n    if (effect.flags['chris-premades'].spell.searingSmite.used) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'searingSmite', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = effect.flags['chris-premades'].spell.searingSmite.level + 'd6[fire]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    async function effectMacro() {\n        let originEffect = await fromUuid(effect.origin);\n        if (!originEffect) return;\n        await chrisPremades.helpers.removeEffect(originEffect);\n    }\n    let effectData = {\n        'icon': effect.icon,\n        'origin': effect.uuid,\n        'duration': {\n            'seconds': effect.duration.seconds\n        },\n        'name': effect.name + ' Fire',\n        'changes': [\n            {\n                'key': 'flags.midi-qol.OverTime',\n                'mode': 0,\n                'value': 'turn=start, saveAbility=con, saveDC=' + effect.flags['chris-premades'].spell.searingSmite.dc + ' , saveMagic=true, damageRoll=1d6[fire], damageType=fire, name=Searing Smite',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let targetEffect = await chris.createEffect(workflow.targets.first().actor, effectData);\n    let updates = {\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'searingSmite': {\n                        'used': true,\n                        'targetEffectUuid': targetEffect.uuid\n                    }\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, updates);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    async function effectMacro() {\n        await (warpgate.wait(200));\n        let targetEffectUuid = effect.flags['chris-premades']?.spell?.searingSmite?.targetEffectUuid;\n        if (!targetEffectUuid) return;\n        let targetEffect = await fromUuid(targetEffectUuid);\n        if (!targetEffect) return;\n        await chrisPremades.helpers.removeEffect(targetEffect);\n    }\n    let effectData = {\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'name': workflow.item.name,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.searingSmite.damage,postDamageRoll',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'searingSmite': {\n                        'dc': chris.getSpellDC(workflow.item),\n                        'level': workflow.castData.castLevel,\n                        'used': false\n                    }\n                }\n            },\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            }\n        }\n    };\n    let effect = await chris.createEffect(workflow.actor, effectData);\n    let updates = {\n        'flags.chris-premades.spell.searingSmite.targetEffectUuid': effect.uuid\n    };\n    await chris.updateEffect(effect, updates);\n}\nexport let searingSmite = {\n    'damage': damage,\n    'item': item\n}","import {chris} from '../../helperFunctions.js';\nexport async function shadowBlade({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetToken = workflow.token;\n    let spellLevel = workflow.castData.castLevel;\n    let weaponData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Shadow Blade Sword', false);\n    if (!weaponData) return;\n    let diceNum = 2;\n    switch (spellLevel) {\n        case 3:\n        case 4:\n            diceNum = 3;\n            break;\n        case 5:\n        case 6:\n            diceNum = 4;\n            break;\n        case 7:\n        case 8:\n        case 9:\n            diceNum = 5;\n            break;\n    }\n    weaponData.system.damage.parts = [\n        [\n            diceNum + 'd8[psychic ] + @mod',\n            'psychic'\n        ]\n    ];\n    weaponData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shadow Blade Sword');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Shadow Blade Sword');\n    }\n    let effectData = {\n        'label': weaponData.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': weaponData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [weaponData.name]: weaponData\n            },\n            'ActiveEffect': {\n                [weaponData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': weaponData.name,\n        'description': weaponData.name\n    };\n    await warpgate.mutate(targetToken.document, updates, {}, options);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function claws({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.advantage != true) return;\n    if (workflow.advantage && workflow.disadvantage) return;\n    let damageDice = 4;\n    let damageFormula = damageDice + 'd6[psychic] + 3';\n    if (workflow.isCritical) damageFormula = chris.getCriticalFormula(damageFormula);\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n}","import {claws} from './claws.js';\nexport let shadowDemon = {\n    'claws': claws\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function hook(workflow) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first().document;\n    if (!targetToken) return;\n    let sourceToken = workflow.token.document;\n    let targetActor = targetToken.actor;\n    let sourceActor = sourceToken.actor;\n    let targetEffect = chris.findEffect(targetActor, 'Shadow of Moil');\n    let sourceEffect = chris.findEffect(sourceActor, 'Shadow of Moil');\n    if (!targetEffect && !sourceEffect) return;\n    let distance = chris.getDistance(sourceToken, targetToken);\n    let sourceCanSeeTarget = false;\n    let targetCanSeeSource = false;\n    if (sourceEffect) sourceCanSeeTarget = true;\n    if (targetEffect) targetCanSeeSource = true;\n    if (sourceEffect && targetEffect) {\n        sourceCanSeeTarget = false;\n        targetCanSeeSource = false;\n    }\n    let sourceSenses = sourceToken.actor.system.attributes.senses;\n    let targetSenses = targetToken.actor.system.attributes.senses;\n    if ((sourceSenses.tremorsense >= distance) || (sourceSenses.blindsight >= distance)) sourceCanSeeTarget = true;\n    if ((targetSenses.tremorsense >= distance) || (targetSenses.blindsight >= distance)) targetCanSeeSource = true;\n    if (sourceCanSeeTarget && targetCanSeeSource) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'shadowOfMoil', 50);\n    if (!queueSetup) return;\n    if (sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.attackAdvAttribution.add('Shadow of Moil: Target Can\\'t See Source');\n    }\n    if (!sourceCanSeeTarget && targetCanSeeSource) {\n        workflow.disadvantage = true;\n        workflow.flankingAdvantage = false;\n        workflow.attackAdvAttribution.add('Shadow of Moil: Source Can\\'t See Target');\n    }\n    if (!sourceCanSeeTarget && !targetCanSeeSource) {\n        workflow.advantage = true;\n        workflow.disadvantage = true;\n        workflow.attackAdvAttribution.add('Shadow of Moil: Target And Source Can\\'t See Eachother');\n    }\n    queue.remove(workflow.item.uuid);\n}\nasync function onHit(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0) return;\n    let validTypes = ['msak', 'rsak', 'mwak', 'rwak'];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance > 10) return;\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Shadow of Moil');\n    if (!effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Shadow of Moil Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shadow of Moil Damage');\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    if (!feature) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let shadowOfMoil = {\n    'hook': hook,\n    'onHit': onHit,\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function terrorFrenzy({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.advantage) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Frightened');\n    if (!effect) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'terrorFrenzy', 150);\n    if (!queueSetup) return;\n    workflow.advantage = true;\n    workflow.attackAdvAttribution.add('Advantage: Terror Frenzy');\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function weightOfSorrow(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 5) return;\n    let effect = chris.findEffect(token.actor, 'Summoned Creature');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (originItem.actor.id === targetToken.actor.id) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(origin, config, options);\n}","import {terrorFrenzy} from './terrorFrenzy.js';\nimport {weightOfSorrow} from './weightOfSorrow.js';\nexport let shadowSpirit = {\n    'terrorFrenzy': terrorFrenzy,\n    'weightOfSorrow': weightOfSorrow\n}","import {stench} from '../troglodyte/stench.js';\nexport let shadowghast = {\n    'stench': stench\n}","import {chris} from '../../../helperFunctions.js';\nexport async function strengthDrain({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.isFumble) return;\n    let roll = await new Roll('1d4').roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: workflow.item.name\n    });\n    let damage = -roll.total;\n    let targetActor = workflow.targets.first().actor;\n    let effect = chris.findEffect(targetActor, workflow.item.name);\n    if (!effect) {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 604800\n            },\n            'changes': [\n                {\n                    'key': 'system.abilities.str.value',\n                    'mode': 2,\n                    'value': damage,\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'transfer': false,\n                    'specialDuration': [\n                        'shortRest'\n                    ],\n                    'stackable': 'multi',\n                    'macroRepeat': 'none'\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.abilities.str.value',\n                    'mode': 2,\n                    'value': damage,\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (targetActor.system.abilities.str.value <= 0) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (unconscious) await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {strengthDrain} from './strengthDrain.js';\nexport let shadow = {\n    'strengthDrain': strengthDrain\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nexport async function engulf(origin, token, actor) {\n    let sourceTokenId = actor.flags['chris-premades']?.monster?.shamblingMound?.engulf\n    if (!sourceTokenId) return;\n    if (game.combat.current.tokenId != sourceTokenId) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Monster Feature Items', 'Shambling Mound - Engulf', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shambling Mound - Engulf');\n    featureData.system.damage.parts = [\n        [\n            '2d8[' + translate.damageType('bludgeoning') + ']',\n            'bludgeoning'\n        ]\n    ];\n    featureData.system.save.dc = chris.getSpellDC(origin);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': origin.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport async function engulfGrapple({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size) return\n    let targetToken = workflow.targets.first();\n    if (game.modules.get('Rideable')?.active) {\n        let targetUpdate = {\n            'token': workflow.token.document.center\n        };\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n        game.Rideable.Mount([targetToken.document], workflow.token.document, {'Grappled': true, 'MountingEffectsOverride': []});\n    }\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function slam({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Shambling Mound - Slam');\n    if (!effect) return;\n    let selection = await chris.dialog('Engulf target?', [['Yes', true], ['No', false]]);\n    if (!selection) return;\n    let engulfEffect = chris.findEffect(workflow.actor, 'SM - Engulf');\n    if (!engulfEffect) return;\n    let feature = await fromUuid(engulfEffect.origin);\n    if (!feature) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {engulf, engulfGrapple} from './engulf.js';\nimport {slam} from './slam.js';\nexport let shamblingMound = {\n    'engulf': engulf,\n    'slam': slam,\n    'engulfGrapple': engulfGrapple\n}","import {chris} from '../../helperFunctions.js';\nexport async function shockingGrasp({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetToken = workflow.targets.first();\n    if (workflow.hitTargets.size) {\n        let effect = chris.findEffect(targetToken.actor, 'Reaction');\n        if (!effect) await chris.addCondition(targetToken.actor, 'Reaction', false, workflow.item.uuid);\n    }\n    let color = chris.getConfiguration(workflow.item, 'color') ?? 'blue';\n    if (color === 'none') return;\n    if (chris.jb2aCheck() != 'patreon') color = blue;\n    let colors = [\n        'blue',\n        'blue02',\n        'dark_purple',\n        'dark_red',\n        'green',\n        'green02',\n        'orange',\n        'purple',\n        'red',\n        'yellow'\n    ];\n    if (color === 'random') {\n        color = colors[Math.floor(Math.random() * colors.length)];\n    }\n    //Animations by: eskiemoh\n    new Sequence()\n        .effect()\n        .file('jb2a.static_electricity.01.' + color)\n        .scaleToObject(1.2) \n        .atLocation(targetToken)\n        .waitUntilFinished(-1000)\n\n        .effect()\n        .file('jb2a.impact.011.' + color)\n        .scaleToObject(1.9) \n        .atLocation(targetToken)\n\n        .play();\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.setFlag('chris-premades', 'template', {\n        'name': 'sickeningRadiance',\n        'castLevel': workflow.castData.castLevel,\n        'saveDC': chris.getSpellDC(workflow.item),\n        'macroName': 'sickeningRadiance',\n        'templateUuid': template.uuid,\n        'turn': 'start',\n        'ignoreMove': false\n    });\n}\nasync function trigger(token, trigger) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.sickeningRadiance?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.sickeningRadiance.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Sickening Radiance - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Sickening Radiance - Damage');\n    featureData.system.save.dc = trigger.saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let workflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (workflow.failedSaves.size === 0) return;\n    let exhaustionLevel = template.flags['chris-premades']?.spell?.sickeningRadiance?.[token.id]?.exhaustionLevel;\n    if (exhaustionLevel === undefined) {\n        let originalLevel = 0;\n        let effect = token.actor.effects.find(eff => eff.name.includes('Exhaustion'));\n        if (effect) {\n            originalLevel = Number(effect.name.substring(11));\n            if (isNaN(originalLevel)) originalLevel = 0;\n        }\n        await template.setFlag('chris-premades', 'spell.sickeningRadiance.' + token.id + '.exhaustionLevel', originalLevel);\n    }\n    await chris.increaseExhaustion(token.actor, originUuid);\n}\nasync function removed(template) {\n    let tokens = template.flags['chris-premades']?.spell?.sickeningRadiance;\n    if (!tokens) return;\n    for (let [key, value] of Object.entries(tokens)) {\n        let token = game.canvas.tokens.get(key);\n        if (!token) continue;\n        let effect = token.actor.effects.find(eff => eff.name.includes('Exhaustion'));\n        if (!effect) continue;\n        await chris.removeEffect(effect);\n        if (value.exhaustionLevel === 0) continue;\n        await chris.addCondition(token.actor, 'Exhaustion ' + value.exhaustionLevel, false);\n    }\n}\nexport let sickeningRadiance = {\n    'item': item,\n    'trigger': trigger,\n    'removed': removed\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function skillEmpowerment({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '50px';\n            t.style.textAlign = 'center';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let selection = await warpgate.menu({\n    'inputs': [\n        {\n            'label': 'Skill:',\n            'type': 'select',\n            'options': Object.entries(CONFIG.DND5E.skills).filter(([key, value]) => targetActor.system.skills[key].value < 2).map(([i, j]) => ({'value': i, 'html': j.label}))\n        },\n    ],\n    'buttons': constants.okCancel\n    }, {\n        'title': workflow.item.name,\n        'render': dialogRender\n    });\n    if (!selection.buttons) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 3600\n        },\n        'changes': [\n            {\n                'key': 'system.skills.' + selection.inputs[0] +'.value',\n                'mode': 4,\n                'value': 2,\n                'priority': 20\n            }\n        ]\n    };\n    let effect = chris.findEffect(targetActor, workflow.item.name);\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(targetActor, effectData);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function slow({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.damageRoll || !['mwak', 'rwak', 'msak', 'rsak'].includes(workflow.item.system.actionType)) return;\n    let effect = chris.findEffect(workflow.actor, 'Slasher: Reduce Speed');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let doExtraDamage = chris.perTurnCheck(originItem, 'feat', 'slasher', false, workflow.token.id);\n    if (!doExtraDamage) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'slasherSlow', 250);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has('slashing')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let autoSlasher = workflow.actor.flags['chris-premades']?.feat?.slasher?.auto;\n    if (!autoSlasher) {\n        let selection = await chris.dialog('Slasher: Slow target?', [['Yes', true], ['No', false]]);\n        if (!selection) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n    }\n    if (chris.inCombat()) await originItem.setFlag('chris-premades', 'feat.slasher.turn', game.combat.round + '-' + game.combat.turn);\n    let effectData = {\n        'name': originItem.name,\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.all',\n                'mode': 0,\n                'value': '-10',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n    queue.remove(workflow.item.uuid);\n}\nasync function critical({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.isCritical || !workflow.damageRoll) return;\n    let effect = chris.findEffect(workflow.actor, 'Slasher: Critical Hit');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'slasherCritical', 251);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has('slashing')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let effectData = {\n        'name': originItem.name,\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 12\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.attack.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(workflow.targets.first().actor, effectData);\n    queue.remove(workflow.item.uuid);\n}\nexport let slasher = {\n    'slow': slow,\n    'critical': critical\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.templateId) return;\n    let template = canvas.scene.collections.templates.get(workflow.templateId);\n    if (!template) return;\n    await template.update({\n        'flags': {\n            'chris-premades': {\n                'template': {\n                    'name': 'sleetStorm',\n                    'castLevel': workflow.castData.castLevel,\n                    'saveDC': chris.getSpellDC(workflow.item),\n                    'macroName': 'sleetStorm',\n                    'templateUuid': template.uuid,\n                    'turn': 'start',\n                    'ignoreMove': false\n                },\n                'spell': {\n                    'fogCloud': true\n                }\n            },\n            'limits': {\n                'sight': {\n                    'basicSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'devilsSight': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'lightPerception': {\n                        'enabled': true,\n                        'range': 0\n                    },\n                    'seeAll': {\n                        'enabled': true,\n                        'range': 0\n                    }\n                }\n            },\n            'walledtemplates': {\n                'wallRestriction': 'move',\n                'wallsBlock': 'recurse',\n            }\n        }\n    });\n}\nasync function trigger(token, trigger, reason) {\n    let template = await fromUuid(trigger.templateUuid);\n    if (!template) return;\n    if (chris.inCombat()) {\n        let turn = game.combat.round + '-' + game.combat.turn;\n        let lastTurn = template.flags['chris-premades']?.spell?.sleetStorm?.[token.id]?.turn;\n        if (turn === lastTurn) return;\n        await template.setFlag('chris-premades', 'spell.sleetStorm.' + token.id + '.turn', turn);\n    }\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Sleet Storm - Prone', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Sleet Storm - Prone');\n    featureData.system.save.dc = trigger.saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n    if (reason === 'turnStart' && chris.findEffect(token.actor, 'Concentrating')) await MidiQOL.doConcentrationCheck(token.actor, trigger.saveDC);\n}\nexport let sleetStorm = {\n    'item': item,\n    'trigger': trigger\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nasync function animation(target, token, attackType) {\n    //Animations by: eskiemoh\n    let hitSeq = new Sequence()\n        .effect()\n        .from(target)\n        .atLocation(target)\n        .fadeIn(100)\n        .fadeOut(100)\n        .loopProperty('sprite', 'position.x', {'from': -0.05, 'to': 0.05, 'duration': 75, 'pingPong': true, 'gridUnits': true})\n        .scaleToObject(target.document.texture.scaleX)\n        .duration(500)\n        .opacity(0.15)\n        .tint('#fd0706')\n\n        .effect()\n        .file('jb2a.particles.outward.red.01.04')\n        .atLocation(target)\n        .fadeIn(100)\n        .fadeOut(400)\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'}) \n        .scaleToObject(1.65 * target.document.texture.scaleX)\n        .duration(800)\n        .opacity(1)\n        .randomRotation(true)\n        .filter('ColorMatrix', {'saturate': 1 })\n        .belowTokens(true);\n    switch (attackType) {\n        case 'slashing':\n            new Sequence()\n                .effect()\n                .file('animated-spell-effects-cartoon.water.105')\n                .atLocation(token)\n                .scale(0.2 * token.document.width)\n                .rotateTowards(target)\n                .spriteRotation(80)\n                .spriteOffset({'x':-0.15 * token.document.width, 'y': -0.1 * token.document.width}, {'gridUnits': true})\n                .filter('ColorMatrix', { saturate: 0.75 })\n                .rotateIn(-45, 250, {'ease': 'easeOutExpo'})\n                .zIndex(1)\n\n                .effect()\n                .file('jb2a.melee_generic.slashing.one_handed')\n                .atLocation(token)\n                .scale(0.5 * token.document.width)\n                .rotateTowards(target)\n                .mirrorY()\n                .spriteOffset({'x':- 1.7 * token.document.width}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': -1, 'brightness': -1 })\n                .rotateIn(-90, 250, {'ease': 'easeOutBack'})\n                .zIndex(0)\n\n                .thenDo(function(){\n                    hitSeq.play();\n                })\n                .play();\n            return;\n        case 'bludgeoning':\n            new Sequence()\n                .effect()\n                .file('animated-spell-effects-cartoon.water.115')\n                .atLocation(target)\n                .scale(0.17 * token.document.width)\n                .rotateTowards(token)\n                .spriteRotation(0)\n                .spriteOffset({'x': -0.45 * token.document.width, 'y': 0}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': 0.75 })\n                .scaleIn(0, 250, {'ease': 'easeOutExpo'})\n                .zIndex(1)\n\n                .effect()\n                .file('jb2a.melee_generic.bludgeoning.two_handed')\n                .atLocation(target)\n                .scale(0.4 * token.document.width)\n                .rotateTowards(token)\n                .spriteRotation(180)\n                .spriteOffset({'x': -1 * token.document.width, 'y':0}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': -1, 'brightness': -1 })\n                .scaleIn(0, 250, {'ease': 'easeOutExpo'})\n                .zIndex(0)\n\n                .thenDo(function(){\n                    hitSeq.play();\n                })\n                .play();\n            return;\n        case 'ranged':\n            new Sequence()\n                .effect()\n                .file('animated-spell-effects-cartoon.water.109')\n                .atLocation(target)\n                .scale(0.2 * token.document.width)\n                .rotateTowards(token)\n                .spriteRotation(0)\n                .spriteOffset({'x': -0.3 * token.document.width, 'y': 0}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': 0.75 })\n                .scaleIn(0, 250, {'ease': 'easeOutExpo'})\n                .zIndex(1)\n\n                .effect()\n                .file('animated-spell-effects-cartoon.water.115')\n                .atLocation(target)\n                .scale({'x':0.1 * token.document.width, 'y': 0.2 * token.document.width})\n                .rotateTowards(token)\n                .spriteRotation(0)\n                .spriteOffset({'x': -0.4 * token.document.width, 'y': 0}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': -1, 'brightness': -1 })\n                .scaleIn(0, 250, {'ease': 'easeOutExpo'})\n                .zIndex(0)\n\n                .thenDo(function(){\n                    hitSeq.play();\n                })\n                .play();\n            return;\n        default:\n            new Sequence()\n                .effect()\n                .file('animated-spell-effects-cartoon.water.107')\n                .atLocation(token)\n                .scale(0.25 * token.document.width)\n                .rotateTowards(target)\n                .spriteRotation(18)\n                .spriteOffset({'x': -0.6 * token.document.width, 'y': -0.25 * token.document.width}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': 0.75 })\n                .rotateIn(-25, 250, {'ease': 'easeOutExpo'})\n                .zIndex(1)\n\n                .effect()\n                .file('jb2a.melee_generic.piercing.one_handed')\n                .atLocation(token)\n                .scale(0.5 * token.document.width)\n                .rotateTowards(target)\n                .spriteRotation(15)\n                .mirrorY()\n                .spriteOffset({'x': -1.9 * token.document.width, 'y':-0.3 * token.document.width}, {'gridUnits': true})\n                .filter('ColorMatrix', {'saturate': -1, 'brightness': -1 })\n                .rotateIn(-25, 250, {'ease': 'easeOutExpo'})\n                .zIndex(0)\n\n                .thenDo(function(){\n                    hitSeq.play();\n                })\n                .play();\n            return;\n    }\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (!(workflow.item.system.actionType === 'rwak' || workflow.item.system.properties?.fin)) return;\n    let originFeature = chris.getItem(workflow.actor, 'Sneak Attack');\n    if (!originFeature) return;\n    if (!chris.perTurnCheck(originFeature, 'feature', 'sneakAttack')) return;\n    let doSneak = false;\n    let displayRakish = false;\n    if (workflow.advantage) doSneak = true;\n    let targetToken = workflow.targets.first();\n    if (!doSneak && !workflow.disadvantage) {\n        let nearbyTokens = await chris.findNearby(targetToken, 5, 'enemy').filter(t => t.id != workflow.token.id);\n        if (nearbyTokens.length > 0) doSneak = true;\n    }\n    let rakishAudacity = chris.getItem(workflow.actor, 'Rakish Audacity');\n    if (rakishAudacity && !workflow.disadvantage && !doSneak && (chris.getDistance(workflow.token, targetToken) <= 5)) {\n        let rNearbyTokens = await chris.findNearby(workflow.token, 5, 'all', true).filter(t => t.id != targetToken.id);\n        if (rNearbyTokens.length === 0) {\n            doSneak = true;\n            displayRakish = true;\n        }\n    }\n    let insightfulFighting = chris.findEffect(workflow.actor, 'Insightful Fighting');\n    let iTarget = false;\n    if (insightfulFighting) {\n        let effectTarget = insightfulFighting.changes[0].value;\n        if (effectTarget === targetToken.document.uuid) {\n            doSneak = true;\n            iTarget = true;\n        }\n    }\n    if (!doSneak) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'sneakAttack', 215);\n    if (!queueSetup) return;\n    let autoSneak = chris.getConfiguration(originFeature, 'auto') ?? false;\n    if (!autoSneak) {\n        let selection = await chris.dialog(originFeature.name, constants.yesNo, 'Use ' + originFeature.name + '?');\n        if (!selection) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n    }\n    await chris.setTurnCheck(originFeature, 'feature', 'sneakAttack');\n    let bonusDamageFormula = workflow.actor.flags['chris-premades']?.feature?.sneakAttack?.customFormula;\n    if (!bonusDamageFormula) {\n        if (workflow.actor.type === 'character') {\n            let scale = workflow.actor.system.scale?.rogue?.['sneak-attack'];\n            if (scale) {\n                let number = scale.number;\n                bonusDamageFormula = number + 'd' + scale.faces + '[' + workflow.defaultDamageType + ']';\n            } else {\n                ui.notifications.warn('Actor does not appear to have a Sneak Attack scale!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        } else if (workflow.actor.type === 'npc') {\n            let number = Math.ceil(workflow.actor.system.details.cr / 2);\n            bonusDamageFormula = number + 'd6[' + workflow.defaultDamageType + ']';\n        }\n    } else {\n        bonusDamageFormula += '[' + workflow.defaultDamageType + ']';\n    }\n    let eyeFeature = chris.getItem(workflow.actor, 'Eye for Weakness');\n    if (iTarget && eyeFeature) bonusDamageFormula += ' + 3d6[' + workflow.defaultDamageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = workflow.damageRoll._formula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    await originFeature.use();\n    if (displayRakish) await rakishAudacity.use();\n    if (iTarget) {\n        let iFeature = chris.getItem(workflow.actor, 'Insightful Fighting');\n        if (iFeature) await iFeature.displayCard();\n        if (eyeFeature) await eyeFeature.use();\n    }\n    queue.remove(workflow.item.uuid);\n    let playAnimation = chris.getConfiguration(originFeature, 'animation') ?? true;\n    if (!chris.aseCheck() || chris.jb2aCheck() != 'patreon') playAnimation = false;\n    if (!playAnimation) return;\n    let animationType;\n    if (chris.getDistance(workflow.token, targetToken) > 5) animationType = 'ranged';\n    if (!animationType) animationType = workflow.defaultDamageType;\n    await animation(targetToken, workflow.token, animationType);\n}\nasync function combatEnd(origin) {\n    await origin.setFlag('chris-premades', 'feature.sneakAttack.turn', '');\n    await chris.setTurnCheck(origin, 'feature', 'sneakAttack', true);\n}\nexport let sneakAttack = {\n    'attack': attack,\n    'combatEnd': combatEnd,\n    'animation': animation\n}\n","import {chris} from '../../../../helperFunctions.js';\nexport async function songOfDefense({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.feature?.bladesong);\n    if (!effect) {\n        ui.notifications.info('You must be Bladesinging to use this feature!');\n        return;\n    }\n    let validLevels = [];\n    for (let i = 1; i <= 9; i++) {\n        let key2 = 'spell' + i;\n        let key = 'system.spells.' + key2 + '.value';\n        if ((workflow.actor.system.spells[key2].value > 0) && workflow.actor.system.spells[key2].max > 0) validLevels.push({'level': i, 'key': key});\n    }\n    let pact = workflow.actor.system.spells.pact;\n    if (pact.max > 0 && pact.value > 0) validLevels.push({'level': 'p', 'key': 'system.spells.pact.value'});\n    if (!validLevels.length) {\n        ui.notifications.info('You have no spell slots to expend!');\n        return;\n    }\n    let options = validLevels.map(i => [(i.level != 'p' ? chris.nth(i.level) + ' Level' : 'Pact Slot'), i.key]);\n    let selection = options.length > 1 ? await chris.dialog(workflow.item.name, options, 'Expend what spell slot?') : options[0][1];\n    if (!selection) return;\n    let value = getProperty(workflow.actor, selection);\n    if (isNaN(value)) return;\n    let slotLevel = selection.split('.')[2][0] === 'p' ? workflow.actor.system.spells.pact.level : selection.split('.')[2].slice(-1);\n    let damageReduction = slotLevel * 5;\n    await workflow.actor.update({[selection]: value - 1});\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1,\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.DR.all',\n                'mode': 0,\n                'value': damageReduction,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'specialDuration': [\n                    '1Reaction'\n                ]\n            },\n        },\n    }\n    await chris.createEffect(actor, effectData);\n}\n","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function soothePain(targetToken, {workflow, ditem}) {\n    if (ditem.newHP >= ditem.oldHP) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'soothePain', 350);\n    if (!queueSetup) return;\n    let reactionTargets = chris.findNearby(targetToken, 30, 'ally', false, true).filter(t =>\n        !chris.findEffect(t.actor, 'Reaction') &&\n        chris.getItem(t.actor, 'Righteous Heritor: Soothe Pain')?.system?.uses?.value > 0 &&\n        chris.getDistance(t, targetToken) <= 30\n    );\n    if (!reactionTargets.length) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    for (let reactor of reactionTargets) {\n        let feature = chris.getItem(reactor.actor, 'Righteous Heritor: Soothe Pain');\n        if (!feature) continue;\n        let firstOwner = chris.firstOwner(reactor);\n        await chris.thirdPartyReactionMessage(firstOwner);\n        let message = 'Protect ' + targetToken.actor.name + ' with ' + feature.name + '?';\n        if (firstOwner.isGM) message = '[' + reactor.actor.name + '] ' + message;\n        let selection = await chris.remoteDialog(feature.name, constants.yesNo, firstOwner.id, message);\n        if (!selection) continue;\n        let updates = {\n            'embedded': {\n                'Item': {\n                    [feature.name]: {\n                        'system.uses.value': feature.system.uses.value - 1\n                    }\n                }\n            }\n        };\n        let options2 = {\n            'permanent': true,\n            'name': feature.name,\n            'description': feature.name\n        };\n        await warpgate.mutate(reactor.document, updates, {}, options2);\n        let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n        await warpgate.wait(100);\n        let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n        chris.removeDamageDetailDamage(ditem, targetToken, featureWorkflow.damageTotal);\n        break;\n    }\n    await chris.clearThirdPartyReactionMessage();\n    queue.remove(workflow.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nasync function passive({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size === 0 || !workflow.damageList) return;\n    let maxHP = null;\n    let killedTarget = false;\n    for (let i of workflow.damageList) {\n        if (i.newHP === 0) {\n            killedTarget = true;\n            let targetToken = await fromUuid(i.tokenUuid);\n            let targetMaxHP = targetToken.actor.system.attributes.hp.max;\n            if (targetMaxHP > maxHP) maxHP = targetMaxHP;\n        }\n    }\n    if (!killedTarget) return;\n    let effect = chris.findEffect(workflow.actor, 'Soul Thirst - Passive');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    await originItem.use();\n    await chris.applyDamage([workflow.token], Math.floor(maxHP / 2), 'temphp');\n}\nasync function onHit(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0) return;\n    if (targetToken.actor.system.attributes.hp.temp > 0) return;\n    let effect = chris.findEffect(targetToken.actor, 'Soul Thirst');\n    if (effect) await chris.removeEffect(effect);\n}\nexport let soulThirst = {\n    'passive': passive,\n    'onHit': onHit\n}","import {chris} from '../../../helperFunctions.js';\nexport async function waveOfWeariness({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 0) return;\n    workflow.failedSaves.forEach(async function(value, key, set) {\n        await chris.increaseExhaustion(value.actor);\n    });\n}","import {chris} from '../../../helperFunctions.js';\nexport async function weightOfAges(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 5) return;\n    let targetRace = chris.raceOrType(targetToken.actor);\n    if (targetRace.toLowerCase() === 'elf') return;\n    if (targetToken.actor.type === 'npc') {\n        if (targetRace != 'beast' || targetRace != 'humanoid') return;\n    }\n    let effect = chris.findEffect(targetToken.actor, origin.name);\n    if (effect) await chris.removeEffect(effect);\n    let effectData = {\n        'label': origin.name,\n        'icon': origin.img,\n        'origin': origin.uuid,\n        'duration': {\n            'rounds': 1\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.all',\n                'mode': 0,\n                'value': '-20',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource',\n                    'combatEnd'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}","import {soulThirst} from './soulThirst.js';\nimport {waveOfWeariness} from './waveOfWeariness.js';\nimport {weightOfAges} from './weightOfAges.js';\nexport let soulMonger = {\n    'waveOfWeariness': waveOfWeariness,\n    'soulThirst': soulThirst,\n    'weightOfAges': weightOfAges\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function spellRefuelingRing({speaker, actor, token, character, item, args, scope, workflow}) {\n    let pact = workflow.actor.system.spells.pact.value;\n    let pactMax = workflow.actor.system.spells.pact.max;\n    let pactLevel = workflow.actor.system.spells.pact.level;\n    let spell1 = workflow.actor.system.spells.spell1.value;\n    let spell1Max = workflow.actor.system.spells.spell1.max;\n    let spell2 = workflow.actor.system.spells.spell2.value;\n    let spell2Max = workflow.actor.system.spells.spell2.max;\n    let spell3 = workflow.actor.system.spells.spell3.value;\n    let spell3Max = workflow.actor.system.spells.spell3.max;\n    let options = [];\n    if (pactLevel <= 3 && pactMax > pact) options.push(['Pact', 'pact']);\n    if (spell1Max > spell1) options.push(['First Level', 'spell1']);\n    if (spell2Max > spell2) options.push(['2nd Level', 'spell2']);\n    if (spell3Max > spell3) options.push(['3rd Level', 'spell3']);\n    if (!options.length) {\n        ui.notifications.info('No spell slots to recover!');\n        return;\n    }\n    let selection;\n    if (options.length === 1) selection = options[0][1];\n    if (!selection) selection = await chris.dialog(workflow.item.name, options, 'What spell slot do you want to recover?');\n    if (!selection) return;\n    let key = 'system.spells.' + selection + '.value';\n    let value = getProperty(workflow.actor.system.spells, selection + '.value');\n    await workflow.actor.update({[key]: value + 1});\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function spikeGrowthEnterLeave(data, template) {\n    if (canvas.scene.grid.units != 'ft') return;\n    if (data.hook.animate === false) return;\n    let cellDistance;\n    if (canvas.scene.grid.type != 0) {\n        let through = data.hook.templatemacro.through.find(tmp => tmp.templateId === template.id);\n        if (!through) return;\n        cellDistance = through.cells.length;\n    } else {\n        let token = canvas.tokens.get(data.tokenId);\n        let currentTokenCenter = {\n            x: data.coords.current.x + (token.w / 2),\n            y: data.coords.current.y + (token.w / 2)\n        };\n        let previousTokenCenter = {\n            x: data.coords.previous.x + (token.w / 2),\n            y: data.coords.previous.y + (token.w / 2)\n        };\n        let intersectionPoint = quadraticIntersection(previousTokenCenter, currentTokenCenter, template.object.center, template.object.shape.radius, epsilon=0);\n        if (intersectionPoint.length === 0) return;\n        let ray = new Ray(intersectionPoint[0], currentTokenCenter);\n        cellDistance = (Math.ceil(ray.distance / canvas.scene.grid.size));\n    }\n    let scale = Math.ceil(canvas.scene.grid.distance / 5);\n    let distance = cellDistance * scale;\n    if (distance <= 0) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Spike Growth - Thorns', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Spike Growth - Thorns');\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let token = canvas.tokens.get(data.tokenId);\n    if (!token) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    for (let i = 0; i < distance; i++) {\n        if (i > 0) await (warpgate.wait(100));\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}\nasync function spikeGrowthStaying(data, template) {\n    if (canvas.scene.grid.units != 'ft') return;\n    if (data.hook.animate === false) return;\n    let cellDistance;\n    if (canvas.scene.grid.type != 0) {\n        let through = data.hook.templatemacro.through.find(tmp => tmp.templateId === template.id);\n        if (!through) return;\n        cellDistance = through.cells.length - 1;\n    } else {\n        let token = canvas.tokens.get(data.tokenId);\n        let currentTokenCenter = {\n            x: data.coords.current.x + (token.w / 2),\n            y: data.coords.current.y + (token.w / 2)\n        };\n        let previousTokenCenter = {\n            x: data.coords.previous.x + (token.w / 2),\n            y: data.coords.previous.y + (token.w / 2)\n        };\n        let intersectionPoint = quadraticIntersection(previousTokenCenter, currentTokenCenter, template.object.center, template.object.shape.radius, epsilon=0);\n        if (intersectionPoint.length === 0) return;\n        let ray = new Ray(intersectionPoint[0], currentTokenCenter);\n        cellDistance = (Math.ceil(ray.distance / canvas.scene.grid.size));\n    }\n    let scale = Math.ceil(canvas.scene.grid.distance / 5);\n    let distance = cellDistance * scale;\n    if (distance <= 0) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Spike Growth - Thorns', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Spike Growth - Thorns');\n    let originUuid = template.flags.dnd5e?.origin;\n    if (!originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': originItem.actor});\n    let token = canvas.tokens.get(data.tokenId);\n    if (!token) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    for (let i = 0; i < distance; i++) {\n        if (i > 0) await (warpgate.wait(100));\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n}\nexport let spikeGrowth = {\n    'enterLeave': spikeGrowthEnterLeave,\n    'staying': spikeGrowthStaying\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {tokenMove} from '../../utility/movement.js';\nasync function moved(token, castLevel, spellDC, damage, damageType, sourceTokenID) {\n    let doDamage = false;\n    if (!chris.inCombat()) {\n        doDamage = true;\n    } else {\n        let combatant = game.combat.combatants.get(game.combat.current.combatantId);\n        let lastTriggerTurn = combatant.flags?.['chris-premades']?.spell?.spiritGuardians?.[sourceTokenID]?.lastTriggerTurn;\n        let currentTurn = game.combat.current.round + '-' + game.combat.current.turn;\n        if (!lastTriggerTurn || lastTriggerTurn != currentTurn) {\n            doDamage = true;\n            await combatant.setFlag('chris-premades', 'spell.spiritGuardians.' + sourceTokenID + '.lastTriggerTurn', currentTurn);\n        }\n    }\n    if (!doDamage) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Spirit Guardians - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Spirit Guardians - Damage');\n    featureData.system.damage.parts = [\n        [\n            damage + '[' + damageType + ']',\n            damageType\n        ]\n    ];\n    featureData.system.save.dc = spellDC;\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'baseLevel': 3,\n                'castLevel': castLevel,\n                'school': 'con'\n            }\n        }\n    }\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.uuid]);\n    let sourceToken = canvas.tokens.get(sourceTokenID);\n    if (!sourceToken) return;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': sourceToken.actor});\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let castLevel = workflow.castData.castLevel;\n    let spellDC = chris.getSpellDC(workflow.item);\n    let sourceTokenID = workflow.token.id;\n    let range = 15;\n    let alignment = workflow.actor.system.details.alignment.toLowerCase();\n    let damageType;\n    if (alignment.includes('good') || alignment.includes('neutral')) {\n        damageType = 'radiant';\n    } else if (alignment.includes('evil')) {\n        damageType = 'necrotic'\n    } else {\n        damageType = await chris.dialog('What is your alignment?', [['Good or Neutral (Radiant)', 'radiant'], ['Evil (Necrotic)', 'necrotic']]);\n        if (!damageType) damageType = 'radiant';        \n    }\n    let damage = castLevel + 'd8';\n    let effect = chris.findEffect(workflow.actor, 'Spirit Guardians');\n    if (!effect) return;\n    await tokenMove.add('spiritGuardians', castLevel, spellDC, damage, damageType, sourceTokenID, range, true, true, 'start', effect.uuid, true);\n    let color = chris.getConfiguration(workflow.item, 'color') ?? 'blueyellow';\n    let variation = '.' + (chris.getConfiguration(workflow.item, 'variation') ?? 'ring');\n    if (color === 'random') {\n        let colors = [\n            'blueyellow',\n            'blue',\n            'dark_black',\n            'dark_blue',\n            'dark_purple',\n            'dark_red',\n            'dark_whiteblue',\n            'green',\n            'orange',\n            'greenorange',\n            'pinkpurple'\n        ];\n        color = colors[Math.floor(Math.random() * colors.length)];\n    }\n    if (chris.jb2aCheck() === 'free') {\n        color = 'blueyellow';\n        variation = '.ring'\n    }\n    new Sequence().effect().file('jb2a.spirit_guardians.' + color + variation).size(workflow.token.document.width + 6, {'gridUnits': true}).attachTo(workflow.token).persist().name('SpiritGuardians-' + workflow.token.id).fadeIn(300).fadeOut(300).play();\n}\nasync function effectEnd(token) {\n    await tokenMove.remove('spiritGuardians', token.id);\n    Sequencer.EffectManager.endEffects({ 'name': 'SpiritGuardians-' + token.id, 'object': token});\n}\nexport let spiritGuardians = {\n    'item': item,\n    'effectEnd': effectEnd,\n    'moved': moved\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function spiritShroudItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Spirit Shroud');\n    if (!effect) return;\n    let options = [\n        ['Radiant', 'radiant'],\n        ['Necrotic', 'necrotic'],\n        ['Cold', 'cold']\n    ];\n    let selection = await chris.dialog('What damage type?', options);\n    if (!selection) selection = 'necrotic';\n    await effect.setFlag('chris-premades', 'spell.spiritShroud', selection);\n}\nasync function spiritShroudAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let validAttacks = ['mwak', 'rwak', 'msak', 'rsak'];\n    if (!validAttacks.includes(workflow.item.system.actionType)) return;\n    let distance = MidiQOL.getDistance(workflow.token, workflow.targets.first(), {wallsBlock: false});\n    if (distance > 10) return;\n    let effect = chris.findEffect(workflow.actor, 'Spirit Shroud');\n    if (!effect) return;\n    let castLevel = effect.flags['midi-qol'].castData.castLevel;\n    let damageType = effect.flags['chris-premades']?.spell?.spiritShroud;\n    if (!damageType) damageType = 'necrotic';\n    let diceNum;\n    switch (castLevel) {\n        case 3:\n        case 4:\n            diceNum = 1;\n            break;\n        case 5:\n        case 6:\n            diceNum = 2;\n            break;\n        case 7:\n        case 8:\n            diceNum = 3;\n            break;\n        case 9:\n            diceNum = 4;\n            break;\n    }\n    let queueSetup = await queue.setup(workflow.item.uuid, 'spiritShroud', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = diceNum + 'd8[' + damageType + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function spiritShroudSlow(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.document.disposition === token.document.disposition) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 10) return;\n    let effect = chris.findEffect(targetToken.actor, 'Spirit Shroud - Slow');\n    if (effect) await chris.removeEffect(effect);\n    let effectData = {\n        'label': 'Spirit Shroud - Slow',\n        'icon': origin.img,\n        'origin': origin.actor.uuid,  //Not item Uuid to prevent AA from killing the animation on the source actor.\n        'duration': {\n            'rounds': 1\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.movement.all',\n                'mode': 0,\n                'value': '-10',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'turnStartSource',\n                    'combatEnd'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    }\n    await chris.createEffect(targetToken.actor, effectData);\n}\nexport let spiritShroud = {\n    'item': spiritShroudItem,\n    'attack': spiritShroudAttack,\n    'slow': spiritShroudSlow\n}","import {chris} from '../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Spiritual Weapon');\n    if (!sourceActor) return;\n    async function effectMacro() {\n        let originActor = origin.actor;\n        await warpgate.dismiss(token.id);\n        let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n        if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Spiritual Weapon';\n    if (name === '') name = 'Spiritual Weapon';\n    let updates = {\n        'actor': {\n            'name': name,\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name\n        },\n        'embedded': {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    async function selectTokenImg () {\n        let selection;\n        let selection2;\n        let selection3;\n        let selectedImg = '';\n        if (!chris.jb2aCheck()) {\n            return;\n        }\n        if (chris.jb2aCheck() === 'patreon') {\n            selection = await chris.dialog('What Style?', [['Flaming', 'flaming'], ['Dark', 'dark']]);\n            if (!selection) return;\n            if (selection === 'flaming') {\n                selection2 = await chris.dialog('What Weapon?', [['Mace', 'mace'], ['Maul', 'maul'], ['Sword', 'sword']]);\n                if (!selection2) return;\n                selection3 = await chris.dialog('What Color?', [\n                    ['Blue', 'blue'], \n                    ['Green', 'green'], \n                    ['Yellow', 'yellow'], \n                    ['Orange', 'orange'], \n                    ['Red', 'red'], \n                    ['Purple', 'purple']\n                ]);\n                if (!selection3) return;\n            }\n            if (selection === 'dark') {\n                selection2 = await chris.dialog('What Weapon?', [['Scythe', 'scythe'], ['Sword', 'sword']]);\n                if (!selection2) return;\n                selection3 = await chris.dialog('What Color?', [\n                    ['Green', 'green'], \n                    ['Blue', 'blue'], \n                    ['Purple', 'purple'], \n                    ['Red', 'red'], \n                    ['White', 'white']\n                ]);\n                if (!selection3) return;\n            }\n            selectedImg = 'jb2a.spiritual_weapon.' + selection2 + '.' + selection + '.' + selection3;\n        } else {\n            selection = await chris.dialog('What Weapon?', [['Mace', 'mace'], ['Maul', 'maul']]);\n            if (!selection) return;\n            selection2 = await chris.dialog('What Color?', [['Blue', 'spectral.blue'], ['Yellow', 'flaming.yellow']]);\n            if (!selection2) return;\n            selectedImg = 'jb2a.spiritual_weapon.' + selection + '.' + selection2;;\n        }\n        selectedImg = await Sequencer.Database.getEntry(selectedImg).file;\n        return selectedImg;\n    }\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (!tokenImg) tokenImg = await selectTokenImg();\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let options = {\n        'controllingActor': workflow.token.actor\n    };\n    let tokenDocument = await sourceActor.getTokenDocument();\n    let spawnedTokens = await warpgate.spawn(tokenDocument, updates, {}, options);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, workflow.item.name);\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.feature.spiritualWeapon.tokenUuid',\n                'mode': 5,\n                'value': spawnedToken.uuid,\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect); await warpgate.revert(token.document, \"Spiritual Weapon\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Spiritual Weapon - Attack'\n                }\n            }\n        }\n    };\n    let attackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Spiritual Weapon - Attack', false);\n    if (!attackFeatureData) return;\n    attackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Spiritual Weapon - Attack');\n    attackFeatureData.system.ability = workflow.item.system.ability;\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let scaling = Math.floor(spellLevel / 2);\n    attackFeatureData.system.damage.parts[0] = scaling + 'd8[force] + @mod';\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [attackFeatureData.name]: attackFeatureData\n            },\n            'ActiveEffect': {\n                [casterEffectData.name]: casterEffectData\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Spiritual Weapon',\n        'description': 'Spiritual Weapon'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    await workflow.item.setFlag('chris-premades', 'feature.spiritualWeapon.position', {'x': workflow.token.document.x, 'y': workflow.token.document.y});\n    await workflow.actor.setFlag('chris-premades', 'mechanic.noFlanking', true);\n    let weaponTokenUuid = workflow.actor.flags['chris-premades']?.feature?.spiritualWeapon?.tokenUuid;\n    if (!weaponTokenUuid) return;\n    let weaponToken = await fromUuid(weaponTokenUuid);\n    if (!weaponToken) return;\n    let position = canvas.grid.getSnappedPosition(weaponToken.x, weaponToken.y);\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n    workflow.flankingAdvantage = false; //Does not currently work.\n}\nasync function attackLate({speaker, actor, token, character, item, args, scope, workflow}) { \n    await workflow.actor.unsetFlag('chris-premades', 'mechanic.noFlanking');\n    let position = workflow.item.flags['chris-premades']?.feature?.spiritualWeapon?.position;\n    if (!position) return;\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n}\nexport let spiritualWeapon = {\n    'item': item,\n    'attackEarly': attackEarly,\n    'attackLate': attackLate\n}","import {chris} from '../../../helperFunctions.js'\nexport async function shortbow({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1 || workflow.failedSaves.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    if (!chris.findEffect(targetActor, 'Poisoned')) return;\n    let saveResult = workflow.saveResults[0].total;\n    if (saveResult <= 5) await chris.addCondition(targetActor, 'Unconscious', false, workflow.item.uuid);\n}","import {shortbow} from './shortbow.js';\nexport let sprite = {\n    'showbow': shortbow\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function starryForm({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Starry Form - Passive');\n    if (!effect) return;\n    let starry = await fromUuid(effect.origin);\n    if (!starry) return;\n    let selection = await chris.dialog('Starry Form: Which Constellation?', [['Archer', 'Archer'], ['Dragon', 'Dragon'], ['Chalice', 'Chalice']]);\n    let tier = workflow.actor.classes.druid.system.levels > 13 ? 3 : workflow.actor.classes.druid.system.levels > 9 ? 2 : 1;\n    let featureData;\n    switch (selection) {\n        case 'Archer':\n            featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Starry Form: Luminous Arrow', false);\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Starry Form: Luminous Arrow');\n            break;\n        case 'Dragon':\n            featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Starry Form: Wise Dragon', false);\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Starry Form: Wise Dragon');\n            break;\n        case 'Chalice':\n            featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Starry Form: Healing Chalice', false);\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Starry Form: Healing Chalice');\n            break;\n    }\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Starry Form');\n    }\n    async function turnStart() {\n        let change = await chrisPremades.helpers.dialog('Twinkling Constellations: Change Constellation?', [['Yes', true], ['No', false]]);\n        if (!change) return;\n        let otherEffect = chrisPremades.helpers.findEffect(actor, 'Twinkling Constellations');\n        if (!otherEffect) return;\n        let otherEffectItem = await fromUuid(otherEffect.origin);\n        if (!otherEffectItem) return;\n        await otherEffectItem.use();\n    }\n    let changes = [\n        {\n            'key': 'ATL.light.bright',\n            'value': '10',\n            'mode': 5,\n            'priority': 20\n        },\n        {\n            'key': 'ATL.light.dim',\n            'value': '20',\n            'mode': 5,\n            'priority': 20\n        },\n        {\n            'key': 'ATL.light.color',\n            'value': '#ffffff',\n            'mode': 5,\n            'priority': 20\n        },\n        {\n            'key': 'ATL.light.alpha',\n            'value': '0.25',\n            'mode': 5,\n            'priority': 20\n        },\n        {\n            'key': 'ATL.light.animation',\n            'value': '{\\'type\\': \\'starlight\\', \\'speed\\': 1,\\'intensity\\': 3}',\n            'mode': 5,\n            'priority': 20\n        }\n    ];\n    if (tier === 3) {\n        changes.push({\n            'key': 'system.traits.dr.value',\n            'value': 'slashing',\n            'mode': 2,\n            'priority': 20\n        });\n        changes.push({\n            'key': 'system.traits.dr.value',\n            'value': 'piercing',\n            'mode': 2,\n            'priority': 20\n        });\n        changes.push({\n            'key': 'system.traits.dr.value',\n            'value': 'bludgeoning',\n            'mode': 2,\n            'priority': 20\n        });\n    }\n    if (selection === 'Dragon') {\n        changes.push({\n            'key': 'flags.midi-qol.min.ability.check.wis',\n            'value': '10',\n            'mode': 5,\n            'priority': 20\n        });\n        changes.push({\n            'key': 'flags.midi-qol.min.ability.check.int',\n            'value': '10',\n            'mode': 5,\n            'priority': 20\n        });\n        changes.push({\n            'key': 'flags.midi-qol.min.ability.save.con',\n            'value': '10',\n            'mode': 5,\n            'priority': 20\n        });\n        if (tier > 1){\n            changes.push({\n                'key': 'system.attributes.movement.fly',\n                'value': '20',\n                'mode': 4,\n                'priority': 20\n            });\n        }\n    }\n    let duration = 600;\n    let existing = workflow.actor.effects.find(eff => eff.flags['chris-premades']?.feature?.starryForm === true);\n    if (existing) {\n        duration = existing.duration.remaining;\n    }\n    let effectData = {\n        'changes': changes,\n        'origin': starry.uuid,\n        'disabled': false,\n        'duration': {\n            'seconds': duration\n        },\n        'icon': starry.img,\n        'name': starry.name + ': ' + selection,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'dae': {\n                'transfer': true\n            },\n            'chris-premades': {\n                'feature': {\n                    'starryForm': true\n                }\n            }\n        }\n    }\n    if (tier > 1){\n        effectData.flags['effectmacro'].onTurnStart = {\n            'script': chris.functionToString(turnStart)\n        };\n    }\n    if (selection != 'Dragon') {\n        effectData.flags['chris-premades'].vae = {\n            'button': featureData.name\n        };\n    }\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Starry Form',\n        'description': 'Starry Form'\n    };\n    if (existing) await warpgate.revert(workflow.token.document, 'Starry Form');\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nimport {queue} from '../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.token || !workflow.damageRoll) return;\n    if (constants.nonDamageTypes.includes(workflow.defaultDamageType)) return;\n    let targetToken = workflow.targets.first();\n    if (chris.getDistance(workflow.token, targetToken) > 60) return;\n    let feature = chris.getItem(workflow.actor, 'Agent of Order: Stasis Strike');\n    if (!feature) return;\n    if (feature.uuid === workflow.item.uuid) return;\n    if (!feature.system.uses.value) return;\n    if (!chris.perTurnCheck(feature, 'feat', 'stasisStrike')) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stasisStrike', 250);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await chris.setTurnCheck(feature, 'feat', 'stasisStrike');\n    await feature.update({'system.uses.value': feature.system.uses.value - 1});\n    let featureData = feature.toObject();\n    delete featureData._id;\n    featureData.system.damage.parts = [];\n    let sFeature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    await warpgate.wait(100);\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(sFeature, config, options);\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = feature.system.damage.parts[0][0] + '[' + translate.damageType('force') + ']';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function damageMany({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size < 2 || !workflow.token || !workflow.damageRoll) return;\n    if (constants.nonDamageTypes.includes(workflow.defaultDamageType)) return;\n    let feature = chris.getItem(workflow.actor, 'Agent of Order: Stasis Strike');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    if (!chris.perTurnCheck(feature, 'feat', 'stasisStrike')) return;\n    let targetTokens = Array.from(workflow.targets).filter(t => chris.getDistance(workflow.token, t) <= 60);\n    if (!targetTokens.length) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stasisStrike', 250);\n    if (!queueSetup) return;\n    let selection = await chris.selectTarget('Use ' + feature.name + '?', constants.yesNoButton, targetTokens, true, 'one');\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targetTokenUuid = selection.inputs.find(uuid => uuid);\n    if (!targetTokenUuid) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await feature.update({'system.uses.value': feature.system.uses.value - 1});\n    await chris.setTurnCheck(feature, 'feat', 'stasisStrike');\n    let targetToken = await fromUuid(targetTokenUuid);\n    let featureData = feature.toObject();\n    delete featureData._id;\n    featureData.system.damage.parts[0][1] = 'midi-none';\n    let sFeature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    await warpgate.wait(100);\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.uuid]);\n    let sWorkflow = await MidiQOL.completeItemUse(sFeature, config, options);\n    chris.addDamageDetailDamage(targetToken, sWorkflow.damageTotal, 'force', workflow);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await chris.setTurnCheck(origin, 'feat', 'stasisStrike', true);\n}\nexport let stasisStrike = {\n    'damage': damage,\n    'damageMany': damageMany,\n    'end': end\n}","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Steel Defender');\n    if (!sourceActor) return;\n    let deflectAttackData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Deflect Attack', false);\n    if (!deflectAttackData) return;\n    deflectAttackData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Deflect Attack');\n    let forceEmpoweredRendData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Force-Empowered Rend', false);\n    if (!forceEmpoweredRendData) return;\n    forceEmpoweredRendData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Force-Empowered Rend');\n    let mendingData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Mending (Steel Defender)', false);\n    if (!mendingData) return;\n    mendingData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Mending (Steel Defender)');\n    mendingData.name = 'Mending';\n    let repairData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Repair', false);\n    if (!repairData) return;\n    repairData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Repair');\n    let vigilantData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Vigilant', false);\n    if (!vigilantData) return;\n    vigilantData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Vigilant');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let artificerLevel = workflow.actor.classes?.artificer?.system?.levels;\n    if (!artificerLevel) return;\n    let repairUsesValue = workflow.actor.flags['chris-premades']?.feature?.steelDefenderRepair;\n    if (!repairUsesValue && artificerLevel > 2) actor.setFlag('chris-premades', 'feature.steelDefenderRepair', 3);\n    repairData.system.uses.value = repairUsesValue;\n    let arcaneJoltData = await chris.getItemFromCompendium('chris-premades.CPR Class Features', 'Arcane Jolt', false);\n    if (!arcaneJoltData) return;\n    let arcaneJoltItem = workflow.actor.items.getName('Arcane Jolt');\n    if (arcaneJoltItem) arcaneJoltData.system.uses = arcaneJoltItem.system.uses;\n    let hpValue = (2 + chris.getSpellMod(workflow.item)) + (artificerLevel * 5);\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Steel Defender';\n    if (name === '') name = 'Steel Defender';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpValue,\n                        'max': hpValue,\n                        'value': hpValue\n                    }\n                },\n                'traits': {\n                    'languages': workflow.actor.system?.traits?.languages\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [deflectAttackData.name]: deflectAttackData,\n                [forceEmpoweredRendData.name]: forceEmpoweredRendData,\n                [mendingData.name]: mendingData,\n                [repairData.name]: repairData,\n                [vigilantData.name]: vigilantData,\n                [dodgeData.name]: dodgeData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    if (artificerLevel > 8) {\n        if (artificerLevel > 14) {\n            updates.actor.system.attributes.ac = {'flat': 17};\n            updates.embedded.Item['Deflect Attack'].system.damage.parts[0][0] = '1d4[force] + ' + chris.getSpellMod(workflow.item)\n        }\n        updates.embedded.Item['Arcane Jolt'] = arcaneJoltData;\n        sourceActor.setFlag('chris-premades', 'feature.arcaneJoltScale', workflow.actor.system?.scale?.['battle-smith']?.['arcane-jolt'].formula);;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    let spawnedToken = await tashaSummon.spawn(sourceActor, updates, 86400, workflow.item, 120, workflow.token, animation);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Steel Defender - Command', false);\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Steel Defender - Command');\n    if (!featureData) return;\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Steel Defender',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, 'Steel Defender');\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Steel Defender\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    if (artificerLevel > 8) setProperty(effectUpdates, 'flags.chris-premades.feature.steelDefender.spawnedTokenUuid', spawnedToken.uuid);\n    await chris.updateEffect(effect, effectUpdates);\n\n}\nasync function longRest(actor, data) {\n    if (!data.longRest) return;\n    if (actor.classes?.arificer?.system?.levels < 3) return;\n    let item = actor.items.getName('Battle Smith');\n    if (!item) return;\n    if (item.type != 'subclass') return;\n    actor.setFlag('chris-premades', 'feature.steelDefenderRepair', 3);\n}\nasync function repair({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Summoned Creature');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    origin.actor.setFlag('chris-premades', 'feature.steelDefenderRepair', workflow.item.system?.uses?.value);\n}\nexport let steelDefender = {\n    'item': item,\n    'longRest': longRest,\n    'repair': repair,\n}","import {stench} from '../troglodyte/stench.js';\nexport let stenchKow = {\n    'stench': stench\n}","import {chris} from '../../../helperFunctions.js';\nexport async function stillnessOfMind({speaker, actor, token, character, item, args, scope, workflow}) {\n    let charmedEffect = chris.findEffect(workflow.actor, 'Charmed');\n    let frightenedEffect = chris.findEffect(workflow.actor, 'Frightened');\n    if (!charmedEffect && !frightenedEffect) return;\n    if (charmedEffect && frightenedEffect) {\n        let selection = await chris.dialog('What condition would you like to remove?', [['Charmed', 1], ['Frightened', 2]]);\n        if (!selection) return;\n        if (selection === 1) await chris.removeCondition(workflow.actor, 'Charmed');\n        if (selection === 2) await chris.removeCondition(workflow.actor, 'Frightened');\n        return;\n    }\n    if (charmedEffect) await chris.removeCondition(workflow.actor, 'Charmed');\n    if (frightenedEffect) await chris.removeCondition(workflow.actor, 'Frightened');\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Stone Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'stoneStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stoneStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, [['Yes', true], ['No', false]], 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.stoneStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d6[' + translate.damageType('force') + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let saveDC = Math.max(workflow.actor.system.abilities.con.dc, workflow.actor.system.abilities.str.dc);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Strike of the Giants: Stone Strike', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Strike of the Giants: Stone Strike');\n    featureData.system.save.dc = saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.hitTargets.first().document.uuid]);\n    await warpgate.wait(100);\n    let targetWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (targetWorkflow.failedSaves.size === 0) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selection2 = 10;\n    let targetToken = targetWorkflow.failedSaves.first();\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection2 / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n        if (hitsWall) {\n            selection2 -= 5;\n            if (selectio2n === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options2 = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options2);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.stoneStrike.turn', '');\n}\nexport let stoneStrike = {\n    'damage': damage,\n    'end': end\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.templateUuid) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Storm Sphere Bolt', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Storm Sphere Bolt');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Storm Sphere Handler');\n    }\n    async function effectMacro2() {\n        await chrisPremades.macros.stormSphere.turnStart(actor, effect);\n    }\n    let effectData = {\n        'name': 'Storm Sphere Handler',\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                },\n                'onEachTurn': {\n                    'script':chris.functionToString(effectMacro2)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'stormSphere': {\n                        'templateUuid': workflow.templateUuid,\n                        'castLevel': workflow.castData.castLevel,\n                        'spellSaveDC': chris.getSpellDC(workflow.item)\n                    }\n                },\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': effectData.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function boltItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let effect = chris.findEffect(workflow.actor, 'Storm Sphere Handler');\n    if (!effect) return;\n    let castLevel = effect.flags['chris-premades']?.spell?.stormSphere?.castLevel;\n    if (!castLevel) castLevel = 4;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Storm Sphere Bolt Attack', false);\n    if (!featureData) return;\n    featureData.system.damage.parts = [\n        [\n            castLevel + 'd6[lightning]',\n            'lightning'\n        ]\n    ];\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'castData': {\n                'castLevel': castLevel,\n                'school': 'evo'\n            }\n        }\n    };\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let options = {\n        'showFullCard': false,\n        'createWorkflow': true,\n        'targetUuids': [targetToken.document.uuid],\n        'configureDialog': false,\n        'versatile': false,\n        'consumeResource': false,\n        'consumeSlot': false,\n        'workflowOptions': {\n            'autoRollDamage': 'always',\n            'autoFastDamage': true\n        }\n    };\n    let templateUuid = effect.flags['chris-premades']?.spell?.stormSphere?.templateUuid;\n    if (!templateUuid) return;\n    let template = await fromUuid(templateUuid);\n    if (!template) return;\n    let chatMessage = game.messages.get(workflow.itemCardId);\n    if (chatMessage) await chatMessage.delete();\n    let flag = workflow.actor.flags['midi-qol']?.ignoreNearbyFoes;\n    if (!flag) workflow.actor.flags['midi-qol'].ignoreNearbyFoes = 1;\n    let position = canvas.grid.getSnappedPosition(template.object.center.x, template.object.center.y);\n    let savedX = workflow.token.document.x;\n    let savedY = workflow.token.document.y;\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n    await MidiQOL.completeItemUse(feature, {}, options);\n    workflow.token.document.x = savedX;\n    workflow.token.document.y = savedY;\n    if (!flag) workflow.actor.flags['midi-qol'].ignoreNearbyFoes = 0;\n    new Sequence().effect().atLocation(template.object).stretchTo(targetToken).file('jb2a.chain_lightning.primary.blue').play();\n}\nasync function boltAttackItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let effect = chris.findEffect(workflow.actor, 'Storm Sphere Handler');\n    if (!effect) return;\n    let templateUuid = effect.flags['chris-premades']?.spell?.stormSphere?.templateUuid;\n    if (!templateUuid) return;\n    let template = await fromUuid(templateUuid);\n    if (!template) return;\n    let targetToken = workflow.targets.first();\n    if (!chris.tokenInTemplate(targetToken.document, template)) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stormSphere', 50);\n    if (!queueSetup) return;\n    workflow.advantage = true;\n    workflow.attackAdvAttribution.add('Advantage: Storm Sphere');\n    queue.remove(workflow.item.uuid);\n}\nasync function turnStart(actor, effect) {\n    let previousTurnId = game.combat.previous.tokenId;\n    if (!previousTurnId) return;\n    let templateUuid = effect.flags['chris-premades']?.spell?.stormSphere?.templateUuid;\n    if (!templateUuid) return;\n    let template = await fromUuid(templateUuid);\n    if (!template) return;\n    let targetToken = game.canvas.tokens.get(previousTurnId);\n    if (!chris.tokenInTemplate(targetToken, template)) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Storm Sphere Turn', false);\n    if (!featureData) return;\n    let stormSphere = effect.flags['chris-premades']?.spell?.stormSphere;\n    if (!stormSphere) return;\n    featureData.system.save.dc = stormSphere.spellSaveDC;\n    featureData.system.damage.parts = [\n        [\n            (stormSphere.castLevel - 2) + 'd6[bludgeoning]',\n            'bludgeoning'\n        ]\n    ];\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let stormSphere = {\n    'item': item,\n    'turnStart': turnStart,\n    'boltItem': boltItem,\n    'boltAttackItem': boltAttackItem\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {translate} from '../../../translations.js';\nimport {queue} from '../../../utility/queue.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let originFeature = chris.getItem(workflow.actor, 'Strike of the Giants: Storm Strike');\n    if (!originFeature) return;\n    if (!originFeature.system.uses.value) return;\n    let turnCheck = chris.perTurnCheck(originFeature, 'feat', 'stormStrike', false, workflow.token.id);\n    if (!turnCheck) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stormStrike', 150);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(originFeature.name, [['Yes', true], ['No', false]], 'Use ' + originFeature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await originFeature.update({'system.uses.value': originFeature.system.uses.value - 1});\n    if (chris.inCombat()) await originFeature.setFlag('chris-premades', 'feat.stormStrike.turn', game.combat.round + '-' + game.combat.turn);\n    let damageFormula = workflow.damageRoll._formula;\n    let bonusDamage = '1d6[' + translate.damageType('lightning') + ']';\n    if (workflow.isCritical) bonusDamage = chris.getCriticalFormula(bonusDamage);\n    let damageRoll = await new Roll(damageFormula + ' + ' + bonusDamage).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let saveDC = Math.max(workflow.actor.system.abilities.con.dc, workflow.actor.system.abilities.str.dc);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Feat Features', 'Strike of the Giants: Storm Strike', false);\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Strike of the Giants: Storm Strike');\n    featureData.system.save.dc = saveDC;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    feature.prepareData();\n    feature.prepareFinalAttributes();\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.hitTargets.first().document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n    queue.remove(workflow.item.uuid);\n}\nasync function end(origin) {\n    await origin.setFlag('chris-premades', 'feat.stormStrike.turn', '');\n}\nexport let stormStrike = {\n    'damage': damage,\n    'end': end\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function stormAvatar({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || workflow.item.type != 'weapon') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stormAvatar', 340);\n    if (!queueSetup) return;\n    let damageFormula = workflow.damageRoll._formula.toLowerCase().replace('slashing', 'lightning').replace('piercing', 'lightning').replace('bludgeoning', 'thunder');\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let level = workflow.actor.flags['chris-premades']?.item?.stormgirdle?.level;\n    if (level === undefined) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Item Features', 'Storm Avatar Lightning', false);\n    if (!featureData) return;\n    let diceNumber = 3 + level;\n    featureData.system.damage.parts = [\n        [\n            diceNumber + 'd6[lightning]',\n            'lightning'\n        ]\n    ];\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Storm Avatar Lightning');\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Storm Avatar');\n    }\n    let changes = [\n        {\n            'key': 'system.traits.di.value',\n            'mode': 0,\n            'value': 'lightning',\n            'priority': 20\n        },\n        {\n            'key': 'system.traits.di.value',\n            'mode': 0,\n            'value': 'thunder',\n            'priority': 20\n        },\n        {\n            'key': 'flags.midi-qol.onUseMacroName',\n            'mode': 0,\n            'value': 'function.chrisPremades.macros.stormgirdle.stormAvatar,postDamageRoll',\n            'priority': 20\n        }\n    ];\n    if (level > 0) {\n        changes.push({\n            'key': 'system.attributes.movement.fly',\n            'mode': 2,\n            'value': 30,\n            'priority': 20\n        },\n        {\n            'key': 'system.attributes.movement.hover',\n            'mode': 0,\n            'value': 1,\n            'priority': 20\n        });\n    }\n    let effectData = {\n        'name': 'Storm Avatar',\n        'icon': 'icons/magic/lightning/fist-unarmed-strike-blue.webp',\n        'changes': changes,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'autoanimations': {\n                'label': 'Storm Avatar',\n                'activeEffectType': 'ontoken',\n                'menu': 'aefx',\n                'macro': {\n                    'enable': false,\n                    'playWhen': '0'\n                },\n                'primary': {\n                    'video': {\n                        'dbSection': 'static',\n                        'menuType': 'marker',\n                        'animation': 'energystrand',\n                        'variant': '01',\n                        'color': 'blue',\n                        'enableCustom': false,\n                        'customPath': ''\n                    },\n                    'options': {\n                        'addTokenWidth': false,\n                        'anchor': '0.5',\n                        'delay': 0,\n                        'elevation': 1000,\n                        'fadeIn': 250,\n                        'fadeOut': 500,\n                        'isMasked': false,\n                        'isRadius': false,\n                        'isWait': false,\n                        'opacity': 1,\n                        'persistent': true,\n                        'playbackRate': 1,\n                        'playOn': 'source',\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'size': 1,\n                        'unbindAlpha': false,\n                        'unbindVisibility': false,\n                        'zIndex': 1\n                    },\n                    'sound': {\n                        'enable': false,\n                        'delay': 0,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'startTime': 0,\n                        'volume': 0.75\n                    }\n                },\n                'secondary': {\n                    'enable': false,\n                    'video': {\n                        'dbSection': 'static',\n                        'menuType': 'spell',\n                        'animation': 'curewounds',\n                        'variant': '01',\n                        'color': 'blue',\n                        'enableCustom': false,\n                        'customPath': ''\n                    },\n                    'sound': {\n                        'enable': false,\n                        'delay': 0,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'startTime': 0,\n                        'volume': 0.75\n                    },\n                    'options': {\n                        'addTokenWidth': false,\n                        'anchor': '0.5',\n                        'delay': 0,\n                        'elevation': 1000,\n                        'fadeIn': 250,\n                        'fadeOut': 500,\n                        'isMasked': false,\n                        'isRadius': true,\n                        'isWait': false,\n                        'opacity': 1,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'size': 1.5,\n                        'zIndex': 1\n                    }\n                },\n                'soundOnly': {\n                    'sound': {\n                        'enable': false,\n                        'delay': 0,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'startTime': 0,\n                        'volume': 0.75\n                    }\n                },\n                'source': {\n                    'enable': false,\n                    'video': {\n                        'dbSection': 'static',\n                        'menuType': 'spell',\n                        'animation': 'curewounds',\n                        'variant': '01',\n                        'color': 'blue',\n                        'enableCustom': false,\n                        'customPath': ''\n                    },\n                    'sound': {\n                        'enable': false,\n                        'delay': 0,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'startTime': 0,\n                        'volume': 0.75\n                    },\n                    'options': {\n                        'addTokenWidth': false,\n                        'anchor': '0.5',\n                        'delay': 0,\n                        'elevation': 1000,\n                        'fadeIn': 250,\n                        'fadeOut': 500,\n                        'isMasked': false,\n                        'isRadius': false,\n                        'isWait': true,\n                        'opacity': 1,\n                        'repeat': 1,\n                        'repeatDelay': 250,\n                        'size': 1,\n                        'zIndex': 1\n                    }\n                },\n                'isEnabled': true,\n                'isCustomized': true,\n                'version': 5\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Storm Avatar',\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}\nasync function equip(actor, origin) {\n    let spellData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Spell Compendium'), 'Control Weather', false);\n    if (!spellData) return;\n    let charges = origin.flags['chris-premades']?.item?.stormgirdle?.charges;\n    if (charges === undefined) charges = 1;\n    spellData.system.uses.per = 'day';\n    spellData.system.uses.max = 1;\n    spellData.system.uses.value = charges;\n    spellData.system.preparation.mode = 'atwill';\n    spellData.system.preparation.prepared = true;\n    await chris.addTempItem(actor, spellData, origin.id, 'Stormgirdle', false, 0);\n}\nasync function unequip(actor, origin) {\n    let charges = 1;\n    let tempItem = chris.getTempItem(actor, origin.id, 0);\n    if (tempItem) charges = tempItem.system.uses.value;\n    await origin.setFlag('chris-premades', 'item.stormgirdle.charges', charges);\n    await chris.removeTempItems(actor, origin.id);\n}\nasync function deleted(actor, effect) {\n    if (effect.disabled) return;\n    let originArray = effect.origin.split('Item.');\n    if (originArray.length != 2) return;\n    let originID = originArray[1];\n    await chris.removeTempItems(actor, originID);\n}\nexport let stormgirdle = {\n    'item': item,\n    'stormAvatar': stormAvatar,\n    'equip': equip,\n    'unequip': unequip,\n    'deleted': deleted\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function strengthOfTheGrave(token, {item, workflow, ditem}) {\n    if (ditem.newHP != 0 || ditem.oldHP === 0) return;\n    let tokenActor = token.actor;\n    let effect = chris.findEffect(tokenActor, 'Strength of the Grave');\n    if (!effect) return;\n    if (workflow.isCritical || chris.checkTrait(tokenActor, 'di', 'healing') || chris.totalDamageType(tokenActor, ditem.damageDetail[0], 'radiant') > 0 || chris.totalDamageType(tokenActor, ditem.damageDetail[0], 'none')) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    if (originItem.system.uses.value === 0) return;\n    let selection = await chris.dialog('Use Strength of the Grave?', [['Yes', true], ['No', false]]);\n    if (!selection || selection === false) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'strengthOfTheGrave', 389);\n    if (!queueSetup) return;\n    let featureData = duplicate(originItem.toObject());\n    let damageDealt = ditem.appliedDamage;\n    featureData.system.save.dc = damageDealt + featureData.system.save.dc;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': tokenActor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    await originItem.update({\n        'system.uses.value': originItem.system.uses.value -1\n    });\n    if (featureWorkflow.failedSaves.size === 1) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    ditem.newHP = 1;\n    ditem.hpDamage = Math.abs(ditem.newHP - ditem.oldHP);\n    queue.remove(workflow.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function stunningStrike({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let feature = chris.getItem(workflow.actor, 'Stunning Strike');\n    if (!feature) return;\n    let onHit = chris.getConfiguration(feature, 'onhit');\n    if (!onHit) return;\n    let ki = chris.getItem(workflow.actor, 'Ki Points');\n    if (!ki) return;\n    if (!ki.system.uses.value) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'stunningStrike', 450);\n    if (!queueSetup) return;\n    let selection = await chris.dialog(feature.name, constants.yesNo, 'Use ' + feature.name + '?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    await warpgate.wait(100);\n    let options = {\n        'targetUuids': [workflow.targets.first().document.uuid]\n    };\n    await MidiQOL.completeItemUse(feature, {}, options);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../helperFunctions.js';\nexport async function drainingKiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetActor = workflow.targets.first().actor;\n    let damage = -workflow.damageList[0].appliedDamage;\n    if (damage === 0) return;\n    let targetMaxHP = targetActor.system.attributes.hp.max;\n    let effect = chris.findEffect(targetActor, workflow.item.name);\n    if (!effect) {\n        let effectData = {\n            'label': workflow.item.name,\n            'icon': workflow.item.img,\n            'duration': {\n                'seconds': 604800\n            },\n            'origin': workflow.item.uuid,\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ],\n            'flags': {\n                'dae': {\n                    'specialDuration': [\n                        'longRest'\n                    ]\n                }\n            }\n        };\n        await chris.createEffect(targetActor, effectData);\n    } else {\n        let oldDamage = parseInt(effect.changes[0].value);\n        damage += oldDamage;\n        let updates = {\n            'changes': [\n                {\n                    'key': 'system.attributes.hp.tempmax',\n                    'mode': 2,\n                    'value': Math.max(damage, -targetMaxHP),\n                    'priority': 20\n                }\n            ]\n        };\n        await chris.updateEffect(effect, updates);\n    }\n    if (Math.abs(damage) >= targetMaxHP) {\n        let unconscious = chris.findEffect(targetActor, 'Unconscious');\n        if (!unconscious) return;\n        await chris.removeCondition(targetActor, 'Unconscious');\n        await chris.addCondition(targetActor, 'Dead', true, null)\n    }\n}","import {drainingKiss} from './drainingKiss.js';\nexport let succubus = {\n    'drainingKiss': drainingKiss\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonAberration({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Beholderkin', 'Beholderkin'], ['Slaad', 'Slaad'], ['Star Spawn', 'Star Spawn']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Aberrant Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Aberrant Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Aberrant Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let hpFormula = 40 + ((workflow.castData.castLevel - 4) * 10);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Aberrant Spirit (' + selection + ')';\n    if (name === '') name = 'Aberrant Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'ac': {\n                        'flat': 11 + workflow.castData.castLevel\n                    },\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.int.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Beholderkin':\n            let eyeRayData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Eye Ray (Beholderkin Only)', false);\n            if (!eyeRayData) return;\n            eyeRayData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Eye Ray (Beholderkin Only)');\n            eyeRayData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[eyeRayData.name] = eyeRayData;\n            updates.actor.system.attributes.movement = {\n                'walk': 30,\n                'fly': 30,\n                'hover': true\n            };\n            break;\n        case 'Slaad':\n            let clawsData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Claws (Slaad Only)', false);\n            if (!clawsData) return;\n            clawsData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Claws (Slaad Only)');\n            clawsData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[clawsData.name] = clawsData;\n            let regenerationData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Regeneration (Slaad Only)', false);\n            if (!regenerationData) return;\n            regenerationData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Regeneration (Slaad Only)');\n            updates.embedded.Item[regenerationData.name] = regenerationData;\n            break;\n        case 'Star Spawn':\n            let slamData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Psychic Slam (Star Spawn Only)', false);\n            if (!slamData) return;\n            slamData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Psychic Slam (Star Spawn Only)');\n            slamData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[slamData.name] = slamData;\n            let auraData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Whispering Aura (Star Spawn Only)', false);\n            if (!auraData) return;\n            auraData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Whispering Aura (Star Spawn Only)');\n            auraData.system.save.dc = chris.getSpellDC(workflow.item);\n            updates.embedded.Item[auraData.name] = auraData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'shadow';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonBeast({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Air', 'Air'], ['Land', 'Land'], ['Water', 'Water']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Bestial Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Bestial Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Bestial Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let maulData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Maul (Bestial Spirit)', false);\n    if (!maulData) return;\n    maulData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Maul (Bestial Spirit)');\n    maulData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let hpFormula;\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Bestial Spirit (' + selection + ')';\n    if (name === '') name = 'Bestial Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'ac': {\n                        'flat': 11 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [maulData.name]: maulData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Air':\n            let flybyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Flyby (Air Only)', false);\n            if (!flybyData) return;\n            flybyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Flyby (Air Only)');\n            updates.embedded.Item[flybyData.name] = flybyData;\n            updates.actor.system.attributes.movement = {\n                'walk': 30,\n                'fly': 60\n            };\n            hpFormula = 20 + ((workflow.castData.castLevel - 2) * 5);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            break;\n        case 'Land':\n            let packTacticsData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Pack Tactics (Land and Water Only)', false);\n            if (!packTacticsData) return;\n            packTacticsData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Pack Tactics (Land and Water Only)');\n            updates.embedded.Item[packTacticsData.name] = packTacticsData;\n            updates.actor.system.attributes.movement = {\n                'walk': 30,\n                'climb': 30\n            };\n            hpFormula = 30 + ((workflow.castData.castLevel - 2) * 5);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            break;\n        case 'Water':\n            let packTacticsData2 = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Pack Tactics (Land and Water Only)', false);\n            if (!packTacticsData2) return;\n            packTacticsData2.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Pack Tactics (Land and Water Only)');\n            updates.embedded.Item[packTacticsData2.name] = packTacticsData2;\n            updates.actor.system.attributes.movement = {\n                'walk': 30,\n                'swim': 30\n            };\n            hpFormula = 30 + ((workflow.castData.castLevel - 2) * 5);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            break;\n    }\n    let defaultAnimations = {\n        'Air': 'air',\n        'Land': 'earth',\n        'Water': 'water'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? defaultAnimations[selection];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonCelestial({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Avenger ', 'Avenger'], ['Defender', 'Defender']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Celestial Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Celestial Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Celestial Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let healingTouchData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Healing Touch (Celestial Spirit)', false);\n    if (!healingTouchData) return;\n    healingTouchData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Healing Touch (Celestial Spirit)');\n    healingTouchData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let hpFormula = 40 + ((workflow.castData.castLevel - 5) * 10);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Celestial Spirit (' + selection + ')';\n    if (name === '') name = 'Celestial Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.wis.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [healingTouchData.name]: healingTouchData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Avenger':\n            let radiantBowData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Radiant Bow (Avenger Only)', false);\n            if (!radiantBowData) return;\n            radiantBowData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Radiant Bow (Avenger Only)');\n            radiantBowData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[radiantBowData.name] = radiantBowData;\n            updates.actor.system.attributes.ac = {\n                'flat': 11 + workflow.castData.castLevel\n            }\n            break;\n        case 'Defender':\n            let radiantMaceData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Radiant Mace (Defender Only)', false);\n            if (!radiantMaceData) return;\n            radiantMaceData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Radiant Mace (Defender Only)');\n            radiantMaceData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[radiantMaceData.name] = radiantMaceData;\n            updates.actor.system.attributes.ac = {\n                'flat': 11 + workflow.castData.castLevel + 2\n            }\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'celestial';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonConstruct({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Clay ', 'Clay'], ['Metal', 'Metal'], ['Stone', 'Stone']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Construct Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Construct Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Construct Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let slamData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Slam (Construct Spirit)', false);\n    if (!slamData) return;\n    slamData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Slam (Construct Spirit)');\n    slamData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let hpFormula = 40 + ((workflow.castData.castLevel - 4) * 15);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Construct Spirit (' + selection + ')';\n    if (name === '') name = 'Construct Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 13 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [slamData.name]: slamData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Clay':\n            let beserkLashingData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Berserk Lashing (Clay Only)', false);\n            if (!beserkLashingData) return;\n            beserkLashingData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Berserk Lashing (Clay Only)');\n            updates.embedded.Item[beserkLashingData.name] = beserkLashingData;\n            break;\n        case 'Metal':\n            let heatedBodyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Heated Body (Metal Only)', false);\n            if (!heatedBodyData) return;\n            heatedBodyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Heated Body (Metal Only)');\n            updates.embedded.Item[heatedBodyData.name] = heatedBodyData;\n            break;\n        case 'Stone':\n            let stoneLethargyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Stone Lethargy (Stone Only)', false);\n            if (!stoneLethargyData) return;\n            stoneLethargyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Stone Lethargy (Stone Only)');\n            stoneLethargyData.system.save.dc = chris.getSpellDC(workflow.item);\n            updates.embedded.Item[stoneLethargyData.name] = stoneLethargyData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'earth';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonDraconicSpirit({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('What dragon type?', [['Chromatic ', 'Chromatic'], ['Metallic', 'Metallic'], ['Gem', 'Gem']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Draconic Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Draconic Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Draconic Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let rendData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Rend (Draconic Spirit)', false);\n    if (!rendData) return;\n    rendData.name = 'Rend';\n    rendData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Rend (Draconic Spirit)');\n    rendData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let breathData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Breath Weapon', false);\n    if (!breathData) return;\n    breathData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Breath Weapon');\n    breathData.system.save.dc = chris.getSpellDC(workflow.item);\n    let hpFormula = 50 + ((workflow.castData.castLevel - 5) * 10);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Draconic Spirit (' + selection + ')';\n    if (name === '') name = 'Draconic Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 14 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    },\n                    'draconicSpirit': {\n                        'type': selection\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [rendData.name]: rendData,\n                [breathData.name]: breathData\n            }\n        }\n    };\n    switch (selection) {\n        case 'Chromatic':\n        case 'Metallic':\n            updates.actor.system.traits = {\n                'dr': {\n                    'value': [\n                        'acid',\n                        'cold',\n                        'fire',\n                        'lightning',\n                        'poison'\n                    ]\n                }\n            }\n        break;\n        case 'Gem': {\n            updates.actor.system.traits = {\n                'dr': {\n                    'value': [\n                        'force',\n                        'necrotic',\n                        'psychic',\n                        'radiant',\n                        'thunder'\n                    ]\n                }\n            }\n        }\n    }\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'fire';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 60, workflow.token, animation);\n    let options;\n    switch (selection) {\n        case 'Chromatic':\n        case 'Metallic':\n            options = [['Acid', 'acid'], ['Cold', 'cold'], ['Fire', 'fire'], ['Lightning', 'lightning'], ['Poison', 'poison']];\n            break;\n        case 'Gem':\n            options = [['Force', 'force'], ['Necrotic', 'necrotic'], ['Psychic', 'psychic'], ['Radiant', 'radiant'], ['Thunder', 'thunder']];\n            break;\n    }\n    let selection2 = await chris.dialog('Shared Resistances: What damage type?', options);\n    if (!selection2) return;\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let effectUpdates = {\n        'changes': [\n            {\n                'key': 'system.traits.dr.value',\n                'mode': 0,\n                'priority': 20,\n                'value': selection2\n            }\n        ]\n    }\n    await chris.updateEffect(effect, effectUpdates);\n}","import {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog('What drake type?', [['Acid', 'acid'], ['Cold', 'cold'], ['Fire', 'fire'], ['Lightning','lightning'], ['Poison','poison']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Drake Companion');\n    if (!sourceActor) return;\n    let rangerLevel = workflow.actor.classes?.ranger?.system?.levels;\n    if (!rangerLevel) return;\n    let drakeUpgrades = Math.floor((rangerLevel + 1) / 8);\n    let biteData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Bite (Drake Companion)', false);\n    if (!biteData) return;\n    biteData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bite (Drake Companion)');\n    let commandData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Drake Companion: Command', false);\n    if (!commandData) return;\n    commandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Drake Companion: Command');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let essenceData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Draconic Essence', false);\n    if (!essenceData) return;\n    essenceData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Draconic Essence');\n    let strikesData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Infused Strikes', false);\n    if (!strikesData) return;\n    strikesData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Infused Strikes');\n    strikesData.system.damage.parts[0][0] += '[' + selection + ']';\n    strikesData.system.damage.parts[0][1] = selection;\n    let resistanceData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Reflexive Resistance', false);\n    if (!resistanceData) return;\n    let resistanceMacro = resistanceData.flags['midi-qol'].onUseMacroName;\n    resistanceData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Reflexive Resistance');\n    let resistanceUsesValue = workflow.actor.flags['chris-premades']?.feature?.reflexiveResistance;\n    if (!resistanceUsesValue && drakeUpgrades == 2) {\n        resistanceUsesValue = workflow.actor.system.attributes.prof\n        workflow.actor.setFlag('chris-premades', 'feature.reflexiveResistance', resistanceUsesValue);\n    }\n    resistanceData.system.uses.value = resistanceUsesValue;\n    resistanceData.system.uses.max = workflow.actor.system.attributes.prof;\n    let heighWidth = 1;\n    let scale = '0.8';\n    switch (drakeUpgrades) {\n        case 1: \n            biteData.system.damage.parts[1][0] = '1d6[' + selection + ']';\n            biteData.system.damage.parts[1][1] = selection;\n            scale = '1';\n        break;\n        case 2:\n            biteData.system.damage.parts[1][0] = '2d6[' + selection + ']';\n            biteData.system.damage.parts[1][1] = selection;\n            scale = '1';\n            heighWidth = 2;\n    }\n    let hpFormula = 5 + (rangerLevel * 5);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Drake Companion (' + selection + ')';\n    if (name === '') name = 'Drake Companion (' + selection + ')';\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 14 + workflow.actor.system.attributes.prof\n                    }\n                },\n                'traits': {\n                    'di': {\n                        'value': selection\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'drakeCompanion': {\n                        'type': selection\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition,\n            'height': heighWidth,\n            'width': heighWidth,\n            'texture': {\n                'scaleX': scale,\n                'scaleY': scale\n            }\n        },\n        'embedded': {\n            'Item': {\n                [biteData.name]: biteData,\n                [dodgeData.name]: dodgeData,\n                [essenceData.name]: essenceData,\n                [strikesData.name]: strikesData\n            }\n        }\n    }\n    switch (drakeUpgrades) {\n        case 1:\n            setProperty(updates, 'actor.system.attributes.movement.fly', '40');\n            setProperty(updates, 'actor.system.traits.size', 'med');\n        break;\n        case 2:\n            setProperty(updates, 'actor.system.attributes.movement.fly', '40');\n            setProperty(updates, 'actor.system.traits.size', 'lg');\n            setProperty(resistanceData, 'flags.midi-qol.onUseMacroName', (resistanceMacro + 'Summon'));\n            setProperty(updates, 'embedded.Item.Reflexive Resistance', resistanceData);\n    }\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'default';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    let spawnedToken = await tashaSummon.spawn(sourceActor, updates, 86400, workflow.item, 30, workflow.token, animation);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    if (drakeUpgrades > 0 ) {\n        let effectUpdates = {\n            'changes': [\n                {\n                    'key': 'system.traits.dr.value',\n                    'mode': 0,\n                    'priority': 20,\n                    'value': selection\n                }\n            ]\n        };\n        await chris.updateEffect(effect, effectUpdates);\n    }\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [commandData.name]: commandData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Drake Companion',\n        'description': commandData.name\n    };\n    if (drakeUpgrades === 2) {\n        setProperty(resistanceData, 'flags.midi-qol.onUseMacroName', (resistanceMacro + 'Actor'));\n        setProperty(resistanceData, 'flags.chris-premades.feature.spawnedTokenUuid', spawnedToken.uuid);\n        setProperty(updates2, 'embedded.Item.Reflexive Resistance', resistanceData);\n    }\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Drake Companion\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': resistanceData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates); \n}\nasync function longRest(actor, data) {\n    if (!data.longRest) return;\n    if (actor.classes?.ranger?.system?.levels < 15) return;\n    let item = actor.items.getName('Drakewarden');\n    if (!item) return;\n    if (item.type != 'subclass') return;\n    actor.setFlag('chris-premades', 'feature.reflexiveResistance', actor.system.attributes.prof);\n}\nasync function onSummon({speaker, actor, token, character, item, args, scope, workflow}) {\n    let reactionEffect = chris.findEffect(workflow.actor, 'Reaction');\n    if (reactionEffect) await chris.removeEffect(reactionEffect);\n    let effect = chris.findEffect(workflow.actor, 'Summoned Creature');\n    if (!effect) return;\n    let origin = await fromUuid(effect.origin);\n    if (!origin) return;\n    origin.actor.setFlag('chris-premades', 'feature.reflexiveResistance', workflow.item.system?.uses?.value)\n    await chris.addCondition(origin.actor, 'Reaction');\n    let itemToUpdate = origin.actor.items.getName('Reflexive Resistance');\n    if (!itemToUpdate) return;\n    await itemToUpdate.update({'system.uses.value': workflow.item.system?.uses?.value});\n}\nasync function onActor({speaker, actor, token, character, item, args, scope, workflow}) {\n    workflow.actor.setFlag('chris-premades', 'feature.reflexiveResistance', workflow.item.system?.uses?.value)\n    await chris.addCondition(workflow.actor, 'Reaction');\n    let spawnedToken = await fromUuid(item.flags['chris-premades']?.feature?.spawnedTokenUuid);\n    if (!spawnedToken) return;\n    let itemToUpdate = spawnedToken.actor.items.getName('Reflexive Resistance');\n    if (!itemToUpdate) return;\n    await itemToUpdate.update({'system.uses.value': workflow.item.system?.uses?.value});\n}\nexport let summonDrakeCompanion = {\n    'item': item,\n    'longRest': longRest,\n    'onSummon': onSummon,\n    'onActor': onActor,\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonElemental({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Air', 'Air'], ['Earth', 'Earth'], ['Fire', 'Fire'], ['Water', 'Water']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Elemental Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Elemental Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Elemental Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let slamData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Slam (Elemental Spirit)', false);\n    if (!slamData) return;\n    slamData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Slam (Elemental Spirit)');\n    slamData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let hpFormula = 50 + ((workflow.castData.castLevel - 4) * 10);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Elemental Spirit (' + selection + ')';\n    if (name === '') name = 'Elemental Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 11 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.str.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [slamData.name]: slamData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Air':\n            let amorphousFormData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Amorphous Form (Air, Fire, and Water Only)', false);\n            if (!amorphousFormData) return;\n            amorphousFormData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Amorphous Form (Air, Fire, and Water Only)');\n            updates.embedded.Item[amorphousFormData.name] = amorphousFormData;\n            updates.actor.system.attributes.movement = {\n                'walk': 40,\n                'fly': 40,\n                'hover': true\n            };\n            setProperty(updates, 'actor.system.traits.dr.value', ['lightning', 'thunder']);\n            break;\n        case 'Earth':\n            updates.actor.system.attributes.movement = {\n                'walk': 40,\n                'burrow': 40\n            };\n            setProperty(updates, 'actor.system.traits.dr.value', ['slashing', 'piercing']);\n            break;\n        case 'Fire':\n            let amorphousFormData2 = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Amorphous Form (Air, Fire, and Water Only)', false);\n            if (!amorphousFormData2) return;\n            amorphousFormData2.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Amorphous Form (Air, Fire, and Water Only)');\n            updates.embedded.Item[amorphousFormData2.name] = amorphousFormData2;\n            setProperty(updates, 'actor.system.traits.di.value', ['fire', 'poison']);\n            let damageString = updates.embedded.Item[slamData.name].system.damage.parts[0][0];\n            updates.embedded.Item[slamData.name].system.damage.parts[0][0] = damageString.replace('bludgeoning', 'fire');\n            updates.embedded.Item[slamData.name].system.damage.parts[0][1] = 'fire';\n            break;\n        case 'Water':\n            let amorphousFormData3 = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Amorphous Form (Air, Fire, and Water Only)', false);\n            if (!amorphousFormData3) return;\n            amorphousFormData3.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Amorphous Form (Air, Fire, and Water Only)');\n            updates.embedded.Item[amorphousFormData3.name] = amorphousFormData3;\n            updates.actor.system.attributes.movement = {\n                'walk': 40,\n                'swim': 40\n            };\n            setProperty(updates, 'actor.system.traits.dr.value', ['acid']);\n            break;\n    }\n    let defaultAnimations = {\n        'Air': 'air',\n        'Earth': 'earth',\n        'Fire': 'fire',\n        'Water': 'water'\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? defaultAnimations[selection];\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonFey({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Fuming', 'Fuming'], ['Mirthful', 'Mirthful'], ['Tricksy', 'Tricksy']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Fey Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Fey Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Fey Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let feyStepData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Fey Step (Fey Spirit)', false);\n    if (!feyStepData) return;\n    feyStepData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fey Step (Fey Spirit)');\n    feyStepData.name = 'Fey Step';\n    let shortSwordData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Shortsword (Fey Spirit)', false);\n    if (!shortSwordData) return;\n    shortSwordData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shortsword (Fey Spirit)');\n    shortSwordData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    shortSwordData.name = 'Shortsword';\n    let hpFormula = 30 + ((workflow.castData.castLevel - 3) * 10);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Fey Spirit (' + selection + ')';\n    if (name === '') name = 'Fey Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 12 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [feyStepData.name]: feyStepData,\n                [shortSwordData.name]: shortSwordData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Fuming':\n            let fumingData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Fuming', false);\n            if (!fumingData) return;\n            fumingData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fuming');\n            updates.embedded.Item[fumingData.name] = fumingData;\n            updates.embedded.Item[feyStepData.name].flags['midi-qol'] = {\n                'effectActivation': false,\n                'onUseMacroName': '[postActiveEffects]function.chrisPremades.macros.monster.feySpirit.fuming',\n                'onUseMacroParts': {\n                    'items': [\n                        {\n                            'macroName': 'function.chrisPremades.macros.monster.feySpirit.fuming',\n                            'option': 'postActiveEffects'\n                        }\n                    ]\n                }\n            };\n            break;\n        case 'Mirthful':\n            let mirthfulData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Mirthful', false);\n            if (!mirthfulData) return;\n            mirthfulData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Mirthful');\n            mirthfulData.system.save.dc = chris.getSpellDC(workflow.item);\n            updates.embedded.Item[mirthfulData.name] = mirthfulData;\n            break;\n        case 'Tricksy':\n            let tricksyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Tricksy', false);\n            if (!tricksyData) return;\n            tricksyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Tricksy');\n            updates.embedded.Item[tricksyData.name] = tricksyData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'nature';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonFiend({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Demon', 'Demon'], ['Devil', 'Devil'], ['Yugoloth', 'Yugoloth']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Fiendish Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Fiendish Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Fiendish Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let magicReistanceData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Magic Resistance (Fiendish Spirit)', false);\n    if (!magicReistanceData) return;\n    magicReistanceData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Magic Resistance (Fiendish Spirit)');\n    magicReistanceData.name = 'Magic Resistance';\n    let hpFormula;\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Fiendish Spirit (' + selection + ')';\n    if (name === '') name = 'Fiend Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'ac': {\n                        'flat': 12 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [magicReistanceData.name]: magicReistanceData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Demon':\n            hpFormula = 50 + ((workflow.castData.castLevel - 6) * 15);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            updates.actor.system.attributes.movement = {\n                'walk': 40,\n                'climb': 40\n            };\n            let deathThroesData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Death Throes (Demon Only)', false);\n            if (!deathThroesData) return;\n            deathThroesData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Death Throes (Demon Only)');\n            deathThroesData.system.save.dc = chris.getSpellDC(workflow.item);\n            updates.embedded.Item[deathThroesData.name] = deathThroesData;\n            let biteData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Bite (Demon Only)', false);\n            if (!biteData) return;\n            biteData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Bite (Demon Only)');\n            biteData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[biteData.name] = biteData;\n            break;\n        case 'Devil':\n            hpFormula = 40 + ((workflow.castData.castLevel - 6) * 15);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            updates.actor.system.attributes.movement = {\n                'walk': 40,\n                'fly': 60\n            };\n            let hurlFlameData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Hurl Flame (Devil Only)', false);\n            if (!hurlFlameData) return;\n            hurlFlameData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Hurl Flame (Devil Only)');\n            hurlFlameData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[hurlFlameData.name] = hurlFlameData;\n            let devilsSightData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Devil\\'s Sight (Devil Only)', false);\n            if (!devilsSightData) return;\n            devilsSightData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Devil\\'s Sight (Devil Only)');\n            updates.embedded.Item[devilsSightData.name] = devilsSightData;\n            break;\n        case 'Yugoloth':\n            hpFormula = 60 + ((workflow.castData.castLevel - 6) * 15);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            let clawsData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Claws (Yugoloth Only)', false);\n            if (!clawsData) return;\n            clawsData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Claws (Yugoloth Only)');\n            clawsData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            updates.embedded.Item[clawsData.name] = clawsData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'fire';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {summons} from '../../utility/summons.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonLesserDemons({speaker, actor, token, character, item, args, scope, workflow}){\n    let spellLevel = workflow.castData?.castLevel;\n    if (!spellLevel) return;\n    let summonsMultiplier = spellLevel > 7 ? 3 : spellLevel > 5 ? 2 : 1;\n    let roll = await new Roll('1d6').roll({async: true});\n    let flavor;\n    let cr;\n    switch (roll.total) {\n        case 1:\n        case 2:\n            flavor = (summonsMultiplier * 2) + ' demons of challenge rating 1 or lower';\n            cr = 1;\n            break;\n        case 3:\n        case 4:\n            flavor = (summonsMultiplier * 4) + ' demons of challenge rating 1/2 or lower';\n            cr = 0.5;\n            break;\n        case 5:\n        case 6:\n            flavor = (summonsMultiplier * 8) + ' demons of challenge rating 1/4 or lower';\n            cr = 0.25;\n    }\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {alias: name},\n        flavor: flavor\n    });\n    let folder = chris.getConfiguration(workflow.item, 'folder') ?? game.settings.get('chris-premades', 'Summons Folder');\n    if (!folder && folder === '') folder = 'Chris Premades';\n    let actors = game.actors.filter(i => i.folder?.name === folder).filter(i => i.system?.details?.type?.subtype.toLowerCase() === 'demon').filter(i => i.system?.details?.cr <= cr);\n    if (actors.length < 1) {\n        ui.notifications.warn('No matching actors found in specified folder!');\n        return;\n    }\n    let userId = game.settings.get('chris-premades', 'LastGM');\n    if (game.settings.get('chris-premades', 'Player Chooses Conjures')) userId = game.userId;\n    if (!userId) return;\n    let sourceActors = await chris.remoteDocumentsDialog(userId, 'Select Summons (Max ' + (summonsMultiplier * 2 / cr) + ')', actors);\n    if (!sourceActors) return;\n    if (sourceActors.length > (summonsMultiplier * 2 / cr)) {\n        ui.notifications.info('Too many selected, try again!');\n        return;\n    }\n    let updates = {\n        'token': {\n            'disposition': -1 \n        }\n    };\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'fire';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await summons.spawn(sourceActors, updates, 3600, workflow.item, false, true, 60, workflow.token, animation);\n    let templateData = {\n        t: CONST.MEASURED_TEMPLATE_TYPES.CIRCLE,\n        distance: 2.5 * workflow.actor.prototypeToken.width,\n        x: workflow.token.center.x,\n        y: workflow.token.center.y,\n        borderColor: '#941010'\n    };\n    let template = await chris.createTemplate(templateData);\n    new Sequence()\n        .effect()\n            .atLocation(template[0])\n            .origin(template[0].uuid)\n            .file('jb2a.extras.tmfx.runes.circle.simple.conjuration')\n            .scale(0.2 * workflow.actor.prototypeToken.width)\n            .tint('#941010')\n            .persist(true)\n            .belowTokens(true)\n            .tieToDocuments(template[0])\n        .effect()\n            .atLocation(template[0])\n            .origin(template[0].uuid)\n            .file('jb2a.extras.tmfx.border.circle.simple.01')\n            .scale(0.2 * workflow.actor.prototypeToken.width)\n            .tint('#941010')\n            .persist(true)\n            .tieToDocuments(template[0])\n        .play();\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let newScript = '; let template = await fromUuid(effect.flags[\\'chris-premades\\']?.spell?.summonLesserDemons); if (!template) return; await template.delete();'\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + newScript\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'summonLesserDemons': template[0].uuid\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonShadowspawn({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Fury', 'Fury'], ['Despair', 'Despair'], ['Fear', 'Fear']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Shadow Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Shadow Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Shadow Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let chillingRendData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Chilling Rend', false);\n    if (!chillingRendData) return;\n    chillingRendData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Chilling Rend');\n    chillingRendData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n    let dreadfulScreamData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Dreadful Scream', false);\n    if (!dreadfulScreamData) return;\n    dreadfulScreamData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dreadful Scream');\n    dreadfulScreamData.system.save.dc = chris.getSpellDC(workflow.item);\n    let hpFormula = 35 + ((workflow.castData.castLevel - 3) * 15);\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Shadow Spirit (' + selection + ')';\n    if (name === '') name = 'Shadow Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    },\n                    'ac': {\n                        'flat': 11 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData,\n                [chillingRendData.name]: chillingRendData,\n                [dreadfulScreamData.name]: dreadfulScreamData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Fury':\n            let terrorFrenzyData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Terror Frenzy (Fury Only)', false);\n            if (!terrorFrenzyData) return;\n            terrorFrenzyData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Terror Frenzy (Fury Only)');\n            updates.embedded.Item[terrorFrenzyData.name] = terrorFrenzyData;\n            break;\n        case 'Despair':\n            let weightOfSorrowData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Weight of Sorrow (Despair Only)', false);\n            if (!weightOfSorrowData) return;\n            weightOfSorrowData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Weight of Sorrow (Despair Only)');\n            updates.embedded.Item[weightOfSorrowData.name] = weightOfSorrowData;\n            break;\n        case 'Fear':\n            let shadowStealthData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Shadow Stealth (Fear Only)', false);\n            if (!shadowStealthData) return;\n            shadowStealthData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Shadow Stealth (Fear Only)');\n            updates.embedded.Item[shadowStealthData.name] = shadowStealthData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'shadow';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {tashaSummon} from '../../utility/tashaSummon.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function summonUndead({speaker, actor, token, character, item, args, scope, workflow}){\n    let selection = await chris.dialog('What type?', [['Ghostly', 'Ghostly'], ['Putrid', 'Putrid'], ['Skeletal', 'Skeletal']]);\n    if (!selection) return;\n    let sourceActor = game.actors.getName('CPR - Undead Spirit');\n    if (!sourceActor) return;\n    let multiAttackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Multiattack (Undead Spirit)', false);\n    if (!multiAttackFeatureData) return;\n    multiAttackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Multiattack (Undead Spirit)');\n    let attacks = Math.floor(workflow.castData.castLevel / 2);\n    multiAttackFeatureData.name = 'Multiattack (' + attacks + ' Attacks)';\n    let hpFormula = 0;\n    let damageBonus = 0;\n    if (workflow.actor.flags['chris-premades']?.feature?.undeadThralls) {\n        let wizardLevels = workflow.actor.classes.wizard?.system?.levels;\n        if (wizardLevels) hpFormula += wizardLevels;\n        damageBonus = workflow.actor.system.attributes.prof;\n    }\n    let name = chris.getConfiguration(workflow.item, 'name-' + selection) ?? 'Undead Spirit (' + selection + ')';\n    if (name === '') name = 'Undead Spirit (' + selection + ')';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'ac': {\n                        'flat': 11 + workflow.castData.castLevel\n                    }\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        },\n        'embedded': {\n            'Item': {\n                [multiAttackFeatureData.name]: multiAttackFeatureData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar-' + selection);\n    let tokenImg = chris.getConfiguration(workflow.item, 'token-' + selection);\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    switch (selection) {\n        case 'Ghostly':\n            hpFormula += 30 + ((workflow.castData.castLevel - 3) * 10);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            updates.actor.system.attributes.movement = {\n                'walk': 30,\n                'fly': 40,\n                'hover': true\n            };\n            let incorporealPassageData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Incorporeal Passage (Ghostly Only)', false);\n            if (!incorporealPassageData) return;\n            incorporealPassageData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Incorporeal Passage (Ghostly Only)');\n            updates.embedded.Item[incorporealPassageData.name] = incorporealPassageData;\n            let deathlyTouchData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Deathly Touch (Ghostly Only)', false);\n            if (!deathlyTouchData) return;\n            deathlyTouchData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Deathly Touch (Ghostly Only)');\n            deathlyTouchData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            deathlyTouchData.system.save.dc = chris.getSpellDC(workflow.item);\n            if (damageBonus) deathlyTouchData.system.damage.parts[0][0] += ' + ' + damageBonus;\n            updates.embedded.Item[deathlyTouchData.name] = deathlyTouchData;\n            break;\n        case 'Putrid':\n            hpFormula += 30 + ((workflow.castData.castLevel - 3) * 10);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            let festeringAuraData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Festering Aura (Putrid Only)', false);\n            if (!festeringAuraData) return;\n            festeringAuraData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Festering Aura (Putrid Only)');\n            festeringAuraData.system.save.dc = chris.getSpellDC(workflow.item);\n            updates.embedded.Item[festeringAuraData.name] = festeringAuraData;\n            let rottingClawData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Rotting Claw (Putrid Only)', false);\n            if (!rottingClawData) return;\n            rottingClawData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Rotting Claw (Putrid Only)');\n            rottingClawData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            if (damageBonus) rottingClawData.system.damage.parts[0][0] += ' + ' + damageBonus;\n            setProperty(rottingClawData, 'flags.chris-premades.feature.rottingClaw.dc', chris.getSpellDC(workflow.item));\n            updates.embedded.Item[rottingClawData.name] = rottingClawData;\n            break;\n        case 'Skeletal':\n            hpFormula += 20 + ((workflow.castData.castLevel - 3) * 10);\n            updates.actor.system.attributes.hp = {\n                'formula': hpFormula,\n                'max': hpFormula,\n                'value': hpFormula\n            };\n            let graveBoltData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Grave Bolt (Skeletal Only)', false);\n            if (!graveBoltData) return;\n            graveBoltData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Grave Bolt (Skeletal Only)');\n            graveBoltData.system.damage.parts[0][0] += ' + ' + workflow.castData.castLevel;\n            if (damageBonus) graveBoltData.system.damage.parts[0][0] += ' + ' + damageBonus;\n            updates.embedded.Item[graveBoltData.name] = graveBoltData;\n            break;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation-' + selection) ?? 'shadow';\n    if (chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) animation = 'none';\n    await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 90, workflow.token, animation);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {tashaSummon} from '../../../../utility/tashaSummon.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Wildfire Spirit');\n    if (!sourceActor) return;\n    let druidLevel = workflow.actor.classes?.druid?.system?.levels;\n    if (!druidLevel) return;\n    let originEffect = chris.findEffect(workflow.actor, 'Wild Shape Passive');\n    if (!originEffect) {\n        ui.notifications.info('Wild Shape Item Effect Not Found!');\n        return;\n    }\n    let wildShapeItem = await fromUuid(originEffect.origin);\n    if (!wildShapeItem) return;\n    let wildShapeValue = wildShapeItem.system?.uses?.value;\n    if (!wildShapeValue) {\n        ui.notifications.info('No Wild Shape Uses Left!');\n        return;\n    }\n    let flameSeedData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Flame Seed', false);\n    if (!flameSeedData) return;\n    flameSeedData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Flame Seed');\n    let fieryTeleportationData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Fiery Teleportation', false);\n    if (!fieryTeleportationData) return;\n    fieryTeleportationData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Fiery Teleportation');\n    fieryTeleportationData.system.save.dc = chris.getSpellDC(workflow.item);\n    let commandData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Wildfire Spirit - Command', false);\n    if (!commandData) return;\n    commandData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Wildfire Spirit - Command');\n    let dodgeData = await chris.getItemFromCompendium('chris-premades.CPR Actions', 'Dodge', false);\n    if (!dodgeData) return;\n    dodgeData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dodge');\n    let hpFormula = 5 + (druidLevel * 5);\n    let name = chris.getConfiguration(workflow.item, 'name') ?? 'Wildfire Spirit';\n    if (name === '') name = 'Wildfire Spirit';\n    let meleeAttackBonus = await new Roll(workflow.actor.system.bonuses.msak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let rangedAttackBonus = await new Roll(workflow.actor.system.bonuses.rsak.attack + ' + 0', workflow.actor.getRollData()).roll({async: true});\n    let updates = {\n        'actor': {\n            'name': name,\n            'system': {\n                'details': {\n                    'cr': tashaSummon.getCR(workflow.actor.system.attributes.prof)\n                },\n                'attributes': {\n                    'hp': {\n                        'formula': hpFormula,\n                        'max': hpFormula,\n                        'value': hpFormula\n                    }\n                },\n                'traits': {\n                    'languages': workflow.actor.system?.traits?.languages\n                }\n            },\n            'prototypeToken': {\n                'name': name,\n                'disposition': workflow.token.document.disposition\n            },\n            'flags': {\n                'chris-premades': {\n                    'summon': {\n                        'attackBonus': {\n                            'melee': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + meleeAttackBonus.total,\n                            'ranged': chris.getSpellMod(workflow.item) - sourceActor.system.abilities.dex.mod + rangedAttackBonus.total\n                        }\n                    }\n                }\n            }\n        },\n        'embedded': {\n            'Item': {\n                [flameSeedData.name]: flameSeedData,\n                [fieryTeleportationData.name]: fieryTeleportationData,\n                [dodgeData.name]: dodgeData\n            }\n        },\n        'token': {\n            'name': name,\n            'disposition': workflow.token.document.disposition\n        }\n    }\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (avatarImg) updates.actor.img = avatarImg;\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? (chris.jb2aCheck() === 'patreon' && chris.aseCheck()) ? 'fire' : 'none';\n    let spawnedToken = await tashaSummon.spawn(sourceActor, updates, 3600, workflow.item, 30, workflow.token, animation);\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [commandData.name]: commandData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Wildfire Spirit',\n        'description': commandData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (!effect) return;\n    let currentScript = effect.flags.effectmacro?.onDelete?.script;\n    if (!currentScript) return;\n    let effectUpdates = {\n        'flags': {\n            'effectmacro': {\n                'onDelete': { \n                    'script': currentScript + ' await warpgate.revert(token.document, \"Wildfire Spirit\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': commandData.name\n                }\n            }\n        }\n    };\n    await chris.updateEffect(effect, effectUpdates); \n    await wildShapeItem.update({'system.uses.value': wildShapeValue - 1});\n    let damageData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Summon Wildfire Spirit - Damage', false);\n    if (!damageData) return;\n    damageData.system.save.dc = chris.getSpellDC(workflow.item);\n    spawnedToken = spawnedToken.object;\n    let nearbyTargets = chris.findNearby(spawnedToken, 10, null).filter(t => t.id != workflow.token.id);\n    if (nearbyTargets.length > 0) {\n        let targetUuids = nearbyTargets.map(token => token.document.uuid);\n        let [config, synthItemOptions] = constants.syntheticItemWorkflowOptions(targetUuids, false);\n        let feature = new CONFIG.Item.documentClass(damageData, {'parent': workflow.actor});\n        await warpgate.wait(100);\n        await MidiQOL.completeItemUse(feature, config, synthItemOptions);\n    }\n}\nasync function fieryTeleportation({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'fieryTeleportation', 450);\n    if (!queueSetup) return;\n    let nearbyTargets = chris.findNearby(workflow.token, 5, 'ally');\n    let selection;\n    let selectedTargets = [workflow.token];\n    if (nearbyTargets.length > 0) {\n        selection = await chris.selectTarget('Teleport Which Creatures?', constants.yesNoButton, nearbyTargets, true, 'multiple');\n        if (selection.buttons) {\n            for (let i of selection.inputs) {\n            if (i) selectedTargets.push((await fromUuid(i)).object);\n            }\n        }\n    }\n    await workflow.actor.sheet.minimize();\n    let icon = workflow.token.document.texture.src;\n    let position = await chris.aimCrosshair(workflow.token, 15, icon, -1, workflow.token.document.width);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    queue.remove(workflow.item.uuid);\n    let difference = {x: workflow.token.x, y: workflow.token.y};\n    await new Sequence().effect().file('jb2a.thunderwave.center.blue').atLocation(workflow.token).randomRotation().animation().play();\n    async function teleport(targetToken) {\n        await new Sequence().effect().file('jb2a.misty_step.01.blue').atLocation(targetToken).randomRotation().scaleToObject(2).wait(750).animation().on(targetToken).opacity(0.0).waitUntilFinished().play();\n        let diffX = targetToken.x - difference.x;\n        let diffY = targetToken.y - difference.y;\n        let newCenter = canvas.grid.getSnappedPosition(position.x - targetToken.w / 2, position.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x + diffX,\n                'y': newCenter.y + diffY\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name,\n            'updateOpts': {'token': {'animate': false}}\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n        await new Sequence().effect().file('jb2a.misty_step.02.blue').atLocation(targetToken).randomRotation().scaleToObject(2).wait(500).animation().on(targetToken).opacity(1.0).play();\n    }\n    for (let i = 0; selectedTargets.length > i; i++) {\n        let targetToken = selectedTargets[i];\n        teleport(targetToken);\n    }\n    await warpgate.wait(2000);\n    await workflow.actor.sheet.maximize();\n}\nexport let summonWildfireSpirit = {\n    item: item,\n    fieryTeleportation: fieryTeleportation\n}","import {chris} from '../../helperFunctions.js';\nimport {tashaSummon} from '../../utility/tashaSummon.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    await spawn(workflow.item, {}, chris.getConfiguration(workflow.item, 'prefill'), workflow.token);\n}\nasync function spawn(item, updates, prefill, casterToken) {\n    if (!game.modules.get('quick-insert')?.active) {\n        ui.notifications.warn('This macro requires the Quick Insert module to be active!');\n        return;\n    }\n    let selectedActor;\n    QuickInsert.open({\n        spawnCSS: {\n            'left': 600,\n            'top': 100\n        },\n        startText: prefill,\n        allowMultiple: false,\n        restrictTypes: ['Actor'],\n        onSubmit: async (selected) => {\n            if (!selected) return;\n            if (selected.uuid === item.actor.uuid) {\n                ui.notifications.warn('You cannot summon yourself!');\n                return;\n            }\n            selectedActor = await fromUuid(selected.uuid);\n            if (selectedActor.compendium) {\n                ui.notifications.warn('The actor must not be in a compendium!');\n                return;\n            }\n            let durationSeconds = chris.itemDuration(item).seconds;\n            let animation = chris.getConfiguration(item, 'animation');\n            if (chris.jb2aCheck() === 'patreon' && chris.aseCheck()) animation = 'none';\n            await tashaSummon.spawn(selectedActor, updates, durationSeconds, item, item.system.range.value ?? 120, casterToken, animation);\n        }\n    });\n}\nexport let summon = {\n    'item': item,\n    'spawn': spawn\n}","import {chris} from '../../helperFunctions.js';\nexport async function synapticStatic({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    chris.updateTargets(Array.from(workflow.targets).filter(i => i.actor.system.abilities.int.value > 2).map(j => j.id));\n}","import {chris} from '../../helperFunctions.js'\nimport {queue} from '../../utility/queue.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let selection = await chris.dialog(workflow.item.name, [['Lower Planes', 'lower'], ['Upper Planes', 'upper']], 'What planes do you draw magic from?');\n    if (!selection) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'system.traits.di.value',\n                'mode': 0,\n                'value': 'fire',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.di.value',\n                'mode': 0,\n                'value': 'poison',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.ci.value',\n                'mode': 0,\n                'value': 'poisoned',\n                'priority': 20\n            },\n            {\n                'key': 'system.attributes.movement.fly',\n                'mode': 4,\n                'value': '40',\n                'priority': 20\n            },\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.tashasOtherworldlyGuise.attack,preambleComplete',\n                'priority': 20\n            },\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+2',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'tashasOtherworldlyGuise': workflow.item.system.save.scaling\n                }\n            }\n        }\n    };\n    if (selection === 'upper') {\n        effectData.changes[0].value = 'radiant';\n        effectData.changes[1].value = 'necrotic';\n        effectData.changes[3].value = 'charmed';\n    }\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item.type != 'weapon') return;\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.spell?.tashasOtherworldlyGuise);\n    if (!effect) return;\n    let scaling = effect.flags['chris-premades'].spell.tashasOtherworldlyGuise;\n    if (scaling === 'spell') scaling = workflow.actor.system.attributes.spellcasting;\n    let itemScaling = workflow.item.system.ability;\n    if (!itemScaling) itemScaling = 'str';\n    let queueSetup = await queue.setup(workflow.item.uuid, 'tashasOtherworldlyGuise', 50);\n    if (!queueSetup) return;\n    let properties = duplicate(workflow.item.system.properties);\n    properties.mgc = true;\n    let ability = duplicate(workflow.item.system.ability);\n    if (workflow.actor.system.abilities[itemScaling].mod < workflow.actor.system.abilities[scaling].mod) ability = scaling;\n    workflow.item = workflow.item.clone({'system.properties': properties, 'system.ability': ability}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}\nexport let tashasOtherworldlyGuise = {\n    'item': item,\n    'attack': attack\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function telekinetic({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let distance = chris.getDistance(workflow.token, targetToken);\n    let selection = await chris.dialog('Which way?', [['Toward', -5], ['Away', 5]]);\n    if (!selection) return;\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        if (ray.distance === 0) {\n            ui.notifications.info('Target is unable to be moved!');\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: 'move', mode: 'any'});\n        if (hitsWall) {\n            selection -= 5;\n            if (selection === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n    distance = chris.getDistance(workflow.token, targetToken);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {translate} from '../../translations.js';\nimport {queue} from '../../utility/queue.js';\nexport async function teleport({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'teleport', 50);\n    if (!queueSetup) return;\n    let gmID = game.settings.get('chris-premades', 'LastGM');\n    let doAnimation = false;\n    let targetTokens = [];\n    if (workflow.token) {\n        doAnimation = true;\n        let targets = chris.findNearby(workflow.token, 10, 'ally', true, false);\n        if (targets.length > 0) {\n            let selection = await chris.selectTarget('Who else is getting teleported?', constants.okCancel, targets, true, 'multiple');\n            if (selection.buttons) {\n                targetTokens = selection.inputs.filter(i => i).map(i => fromUuidSync(i));\n            }\n            if (targetTokens.length > 8) {\n                ui.notifications.info('Too many targets selected!');\n                queue.remove(workflow.item.uuid);\n                return;\n            }\n        }\n        targetTokens.push(workflow.token.document);\n    }\n    let options = [\n        ['Permanent Circle', 'pc'],\n        ['Associated Object', 'ao'],\n        ['Very Familiar', 'vf'],\n        ['Seen Casually', 'sc'],\n        ['Viewed Once', 'vo'],\n        ['Description', 'd'],\n        ['False Destination', 'fd']\n    ];\n    let selection = await chris.remoteDialog(workflow.item.name, options, gmID, 'What is the Familiarity?');\n    if (!selection) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let flavor = 'Mishap';\n    let totalDamage = 0;\n    while (flavor === 'Mishap') {\n        if (totalDamage > 0) await warpgate.wait(100);\n        let roll = await new Roll('1d100').roll({async: true});\n        let total = roll.total;\n        switch (selection) {\n            case 'pc':\n            case 'ao':\n                flavor = 'On Target'\n                break;\n            case 'vf':\n                if (0 <= total && total < 6) {\n                    flavor = 'Mishap';\n                    totalDamage += 3;\n                } else if (6 <= total && total < 14) {\n                    flavor = 'Similar Area';\n                } else if (14 <= total && total < 25) {\n                    flavor = 'Off Target';\n                } else if (25 <= total && total <= 100) {\n                    flavor = 'On Target';\n                }\n                break;\n            case 'sc':\n                if (0 <= total && total < 34) {\n                    flavor = 'Mishap';\n                    totalDamage += 3;\n                } else if (34 <= total && total < 44) {\n                    flavor = 'Similar Area';\n                } else if (44 <= total && total < 54) {\n                    flavor = 'Off Target';\n                } else if (54 <= total && total <= 100) {\n                    flavor = 'On Target';\n                }\n                break;\n            case 'vo':\n            case 'd':\n                if (0 <= total && total < 44) {\n                    flavor = 'Mishap';\n                    totalDamage += 3;\n                } else if (44 <= total && total < 54) {\n                    flavor = 'Similar Area';\n                } else if (54 <= total && total < 74) {\n                    flavor = 'Off Target';\n                } else if (74 <= total && total <= 100) {\n                    flavor = 'On Target';\n                }\n                break;\n            case 'fd':\n                if (0 <= total && total < 51) {\n                    flavor = 'Mishap';\n                    totalDamage += 3;\n                } else if (51 <= total && total <= 100) {\n                    flavor = 'Similar Area';\n                }\n                break;\n        }\n        roll.toMessage({\n            'rollMode': 'roll',\n            'speaker': {'alias': name},\n            'flavor': flavor,\n            'whisper': [gmID]\n        },\n        {\n            'rollMode': CONST.DICE_ROLL_MODES.BLIND\n        });\n    }\n    if (totalDamage > 0) {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Teleport - Damage', false);\n        if (!featureData) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Teleport - Damage');\n        featureData.system.damage.parts[0][0] = totalDamage + 'd10[' + translate.damageType('force') + ']';\n        let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n        let [config, options] = constants.syntheticItemWorkflowOptions(targetTokens.map(i => i.uuid));\n        await warpgate.wait(100);\n        await MidiQOL.completeItemUse(feature, config, options);\n    }\n    if (flavor === 'Off Target') {\n        let roll = await new Roll('1d10 * 1d10').roll({async: true});\n        roll.toMessage({\n            'rollMode': 'roll',\n            'speaker': {'alias': name},\n            'flavor': 'Off Target - Distance',\n            'whisper': [gmID]\n        },\n        {\n            'rollMode': CONST.DICE_ROLL_MODES.BLIND\n        });\n        let roll2 = await new Roll('1d8').roll({async: true});\n        roll2.toMessage({\n            'rollMode': 'roll',\n            'speaker': {'alias': name},\n            'flavor': 'Off Target - Direction',\n            'whisper': [gmID]\n        },\n        {\n            'rollMode': CONST.DICE_ROLL_MODES.BLIND\n        });\n        let inputs = [\n            {\n                'label': 'Distance',\n                'type': 'number'\n            },\n            {\n                'label': 'Units:',\n                'type': 'select',\n                'options': [\n                    {\n                        'html': 'Miles',\n                        'value': 'miles'\n                    },\n                    {\n                        'html': 'Feet',\n                        'value': 'feet'\n                    }\n                ]\n            }\n        ];\n        let location = await chris.remoteMenu('How far away is the destination?', constants.okCancel, inputs, true, gmID);\n        if (!location.buttons) {\n            queue.remove(workflow.item.uuid);\n            return;\n        }\n        let distance = Math.floor((roll.total / 100) * location.inputs[0]);\n        let directions = ['north', 'northeast', 'east', 'southeast', 'south', 'southwest', 'west', 'northwest'];\n        ChatMessage.create({\n            'speaker': {'alias': name},\n            'content': 'Destination is ' + distance + ' ' + location.inputs[1] + ' ' + directions[roll2.total - 1] + ' of the intended location.',\n            'whisper': [gmID],\n            'blind': true\n        });\n    }\n    if (!doAnimation || chris.jb2aCheck() != 'patreon' || !chris.aseCheck()) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    if (workflow.actor) await workflow.actor.sheet.minimize();\n    let selected = workflow.token;\n    let teleOut = new Sequence()\n        .effect()\n        .file('jb2a.particles.outward.blue.01.05')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .scaleToObject(1.7)\n        .fadeIn(3000, {'ease': 'easeInExpo'})\n        .duration(5500)\n\n        .effect()\n        .file('jb2a.particles.outward.blue.01.05')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .scaleToObject(4)\n        .belowTokens()\n        .fadeIn(3000, {'ease': 'easeInExpo'})\n        .duration(5500)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.intro.blue')\n        .atLocation(selected)\n        .belowTokens()\n        .scaleToObject(3)\n        .filter('ColorMatrix', {'saturate': -0.25, 'brightness': 1})\n        .opacity(0.8)\n        .waitUntilFinished(-500)\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -0.5, 'brightness': 1.5})\n        .opacity(0.65)\n        .belowTokens()\n        .scaleToObject(3)\n        .duration(2500)\n\n        .effect()\n        .file('jb2a.extras.tmfx.outpulse.circle.02.fast')\n        .atLocation(selected)\n        .opacity(0.5)\n        .scaleToObject(3)\n        .duration(2500)\n\n        .animation()\n        .on(selected)\n        .delay(2000)\n        .opacity(0)\n\n        .thenDo(function() {\n            targetTokens.filter(i => i.uuid != selected.document.uuid).forEach(target => {  \n                new Sequence()\n                    .animation()\n                    .on(target)\n                    .delay(2000)\n                    .opacity(0)\n\n                    .effect()\n                    .from(target)\n                    .atLocation(target)\n                    .scaleToObject(1.1)\n                    .fadeIn(2000, {'ease': 'easeInExpo'})\n                    .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n                    .filter('Blur', { 'blurX': 5, 'blurY': 10})\n                    .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n                    .duration(2500)\n                    .attachTo(target, {'bindAlpha': false})\n                    .waitUntilFinished(-200)\n\n                    .play();\n                })\n            }\n        )\n\n        .effect()\n        .from(selected)\n        .atLocation(selected)\n        .scaleToObject(1.1)\n        .fadeIn(2000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n        .filter('Blur', {'blurX': 5, 'blurY': 10})\n        .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'scale.x', {'from': 0.5, 'to': 0, 'duration': 500, 'delay': 2500, 'ease': 'easeOutElastic'})\n        .animateProperty('spriteContainer', 'position.y', {'from': 0, 'to': -1000, 'duration': 500, 'delay': 2500, 'ease': 'easeOutCubic'})\n        .fadeOut(100)\n        .duration(2500+500)\n        .attachTo(selected, {'bindAlpha': false})\n        .waitUntilFinished(-700)\n\n        .effect()\n        .file('modules/animated-spell-effects-cartoon/spell-effects/cartoon/energy/energy_pulse_yellow_CIRCLE.webm')\n        .atLocation(selected)\n        .opacity(1)\n        .scaleToObject(4)\n        .filter('ColorMatrix', {'saturate': -1, 'hue': 160, 'brightness': 2})\n\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 0})\n        .opacity(0.3)\n        .fadeOut(10000, {'ease': 'easeOutQuint'})\n        .belowTokens()\n        .scaleToObject(3)\n        .duration(20000)\n\n        .effect()\n        .file('jb2a.particles.outward.blue.01.03')\n        .atLocation(selected)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .scaleToObject(5)\n        .duration(10000);\n\n        await teleOut.play();\n    let selection2 = await chris.remoteDialog(workflow.item.name, constants.yesNo, gmID, 'Select destination?');\n    if (!selection2) {\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name\n        };\n        let updates = {\n            'token': {\n                'hidden': true,\n                'alpha': 1\n            }\n        };\n        for (let token of targetTokens) await warpgate.mutate(token, updates, {}, options);\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let interval = selected.document.width % 2 === 0 ? 1 : -1;\n    let position = await chris.remoteAimCrosshair(selected, false, workflow.item.img, interval, selected.document.width + 2, gmID);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let originX = selected.center.x;\n    let originY = selected.center.y; \n    let teleIn = new Sequence()\n        .animation()\n        .on(selected)\n        .teleportTo(position)\n        .snapToGrid()\n        .offset({'x': -1, 'y': -1 })\n        .waitUntilFinished(1000)\n        \n        .thenDo(function() {\n            targetTokens.filter(i => i.uuid != selected.document.uuid).forEach(target => {\n                let targetX = position.x + target.object.center.x - originX;\n                let targetY = position.y + target.object.center.y - originY;\n                new Sequence()\n                    .animation()\n                    .on(target)\n                    .teleportTo({'x': targetX, 'y': targetY})\n                    .snapToGrid()\n                    .offset({'x': -1, 'y': -1 })\n                    .waitUntilFinished(1000)\n                    .play();\n                })\n            }\n        )\n\n        .effect()\n        .from(selected)\n        .atLocation(selected)\n        .scaleToObject(1.1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n        .filter('Blur', {'blurX': 5, 'blurY': 10 })\n        .animateProperty('spriteContainer', 'position.y', {'from': -1000, 'to': 0, 'duration': 500, 'ease': 'easeOutCubic'})\n        .animateProperty('sprite', 'scale.x', {'from': 0.5, 'to': 0, 'duration': 500, 'ease': 'easeOutElastic'})\n        .fadeOut(100)\n        .scaleOut(0, 100, {'ease': 'easeOutCubic'})\n        .duration(500)\n        .attachTo(selected, {'bindAlpha': false})\n        .waitUntilFinished(-300)\n        \n        .effect()\n        .file('modules/animated-spell-effects-cartoon/spell-effects/cartoon/energy/energy_pulse_yellow_CIRCLE.webm')\n        .atLocation(selected)\n        .opacity(1)\n        .scaleToObject(4)\n        .filter('ColorMatrix', {'saturate':-1, 'hue': 160,'brightness': 2})\n        \n        .effect()\n        .file('jb2a.particles.outward.blue.01.03')\n        .atLocation(selected)\n        .fadeIn(250, {'ease': 'easeOutQuint'})\n        .scaleIn(0, 200, {'ease': 'easeOutCubic'})\n        .fadeOut(5000, {'ease': 'easeOutQuint'})\n        .opacity(1)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 2})\n        .scaleToObject(5)\n        .duration(10000)\n        \n        .effect()\n        .from(selected)\n        .atLocation(selected)\n        .scaleToObject(1.1)\n        .fadeOut(1000, {'ease': 'easeInExpo'})\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n        .filter('Blur', {'blurX': 5, 'blurY': 10 })\n        .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n        .duration(1200)\n        .attachTo(selected, {'bindAlpha': false})\n        \n        .animation()\n        .on(selected)\n        .opacity(1.0)\n        .show()\n        \n        .thenDo(function() {\n            targetTokens.forEach(target => {  \n                new Sequence()\n                    .effect()\n                    .from(target)\n                    .atLocation(target)\n                    .scaleToObject(1.1)\n                    .fadeOut(1000, {'ease': 'easeInExpo'})\n                    .filter('ColorMatrix', {'saturate': -1, 'brightness': 10})\n                    .filter('Blur', {'blurX': 5, 'blurY': 10 })\n                    .scaleIn(0, 500, {'ease': 'easeOutCubic'})\n                    .duration(1200)\n                    .attachTo(target, {'bindAlpha': false})\n                    \n                    .animation()\n                    .on(target)\n                    .opacity(1.0)\n                    .show()\n                    .play();\n                })\n            }\n        )\n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -0.5, 'brightness': 1.5})\n        .opacity(0.65)\n        .belowTokens()\n        .scaleToObject(3)\n        .fadeOut(4000)\n        .duration(5000)\n        .waitUntilFinished(-4000)\n        \n        .effect()\n        .file('jb2a.magic_signs.circle.02.conjuration.loop.blue')\n        .atLocation(selected)\n        .filter('ColorMatrix', {'saturate': -1, 'brightness': 0})\n        .opacity(0.3)\n        .fadeOut(10000, {'ease': 'easeOutQuint'})\n        .belowTokens()\n        .scaleToObject(3)\n        .duration(20000);\n\n        await teleIn.play();\n        await workflow.actor.sheet.maximize();\n        queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Spectral Tentacle');\n    if (!sourceActor) return;\n    async function effectMacro() {\n        await chrisPremades.macros.tentacleOfTheDeeps.remove(token, origin);\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Dismiss Summon'\n                }\n            }\n        }\n    };\n    let name = 'Spectral Tentacle';\n    let updates = {\n        'actor': {\n            'name': name,\n            'prototypeToken': {\n                'name': name\n            }\n        },\n        'token': {\n            'name': name\n        },\n        'embedded': {\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let avatarImg = chris.getConfiguration(workflow.item, 'avatar');\n    if (avatarImg) updates.actor.img = avatarImg;\n    let tokenImg = chris.getConfiguration(workflow.item, 'token');\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let options = {\n        'controllingActor': workflow.token.actor\n    };\n    let tokenDocument = await sourceActor.getTokenDocument();\n    let spawnedTokens = await warpgate.spawn(tokenDocument, updates, {}, options);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let targetEffect = chris.findEffect(spawnedToken.actor, workflow.item.name);\n    if (!targetEffect) return;\n    let casterEffectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'changes': [\n            {\n                'key': 'flags.chris-premades.feature.tentacleOfTheDeeps.tokenUuid',\n                'mode': 5,\n                'value': spawnedToken.uuid,\n                'priority': 20\n            }\n        ],\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'let effect = await fromUuid(\"' + targetEffect.uuid + '\"); if (effect) await chrisPremades.helpers.removeEffect(effect); await warpgate.revert(token.document, \"Tentacle of the Deeps\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': 'Tentacle of the Deeps - Attack'\n                }\n            }\n        }\n    };\n    let attackFeatureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Tentacle of the Deeps - Attack', false);\n    if (!attackFeatureData) return;\n    attackFeatureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Tentacle of the Deeps - Attack');\n    attackFeatureData.system.ability = workflow.item.system.ability;\n    let updates2 = {\n        'embedded': {\n            'Item': {\n                [attackFeatureData.name]: attackFeatureData\n            },\n            'ActiveEffect': {\n                [casterEffectData.name]: casterEffectData\n            }\n        }\n    };\n    let options2 = {\n        'permanent': false,\n        'name': 'Tentacle of the Deeps',\n        'description': 'Tentacle of the Deeps'\n    };\n    await warpgate.mutate(workflow.token.document, updates2, {}, options2);\n}\nasync function attackEarly({speaker, actor, token, character, item, args, scope, workflow}) {\n    await workflow.item.setFlag('chris-premades', 'feature.tentacleOfTheDeeps.position', {'x': workflow.token.document.x, 'y': workflow.token.document.y});\n    await workflow.actor.setFlag('chris-premades', 'mechanic.noFlanking', true);\n    let tentacleTokenUuid = workflow.actor.flags['chris-premades']?.feature?.tentacleOfTheDeeps?.tokenUuid;\n    if (!tentacleTokenUuid) return;\n    let tentacleToken = await fromUuid(tentacleTokenUuid);\n    if (!tentacleToken) return;\n    let position = canvas.grid.getSnappedPosition(tentacleToken.x, tentacleToken.y);\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n    workflow.flankingAdvantage = false; //Does not currently work.\n}\nasync function attackLate({speaker, actor, token, character, item, args, scope, workflow}) { \n    await workflow.actor.unsetFlag('chris-premades', 'mechanic.noFlanking');\n    let position = workflow.item.flags['chris-premades']?.feature?.tentacleOfTheDeeps?.position;\n    if (!position) return;\n    workflow.token.document.x = position.x;\n    workflow.token.document.y = position.y;\n}\nasync function remove(token, origin) {\n    let originActor = origin.actor;\n    await warpgate.dismiss(token.id);\n    let castEffect = chrisPremades.helpers.findEffect(originActor, origin.name);\n    if (castEffect) await chrisPremades.helpers.removeEffect(castEffect);\n}\nexport let tentacleOfTheDeeps = {\n    'item': item,\n    'attackEarly': attackEarly,\n    'attackLate': attackLate,\n    'remove': remove\n}","import {chris} from '../../helperFunctions.js';\nexport async function thornWhip({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    if ((chris.getSize(targetToken.actor)) > (chris.sizeStringValue('large'))) {\n        ui.notifications.info('Target is unable to be moved!');\n        return;\n    }\n    let distance = chris.getDistance(workflow.token, targetToken);\n    let selection = await chris.dialog('How far do you pull the target?', [['0 ft.', false], ['5 ft.', -5], ['10 ft.', -10]]);\n    if (!selection) return;\n    if (distance <= 5) {\n        return;\n    } else if (distance > 5 && distance <= 10) {\n        selection = -5;\n    }\n    let knockBackFactor;\n    let ray;\n    let newCenter;\n    let hitsWall = true;\n    while (hitsWall) {\n        knockBackFactor = selection / canvas.dimensions.distance;\n        ray = new Ray(workflow.token.center, targetToken.center);\n        if (ray.distance === 0) {\n            ui.notifications.info('Target is unable to be moved!');\n            return;\n        }\n        newCenter = ray.project(1 + ((canvas.dimensions.size * knockBackFactor) / ray.distance));\n        hitsWall = targetToken.checkCollision(newCenter, {origin: ray.A, type: \"move\", mode: \"any\"});\n        if (hitsWall) {\n            selection -= 5;\n            if (selection === 0) {\n                ui.notifications.info('Target is unable to be moved!');\n                return;\n            }\n        }\n    }\n    newCenter = canvas.grid.getSnappedPosition(newCenter.x - targetToken.w / 2, newCenter.y - targetToken.h / 2, 1);\n    let targetUpdate = {\n        'token': {\n            'x': newCenter.x,\n            'y': newCenter.y\n        }\n    };\n    let options = {\n        'permanent': true,\n        'name': workflow.item.name,\n        'description': workflow.item.name\n    };\n    await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function thunderStep({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'thunderStep', 450);\n    if (!queueSetup) return;\n    let casterSize = chris.getSize(workflow.actor);\n    let nearbyTargets = chris.findNearby(workflow.token, 5, 'ally').filter(t => chris.getSize(t.actor) <= casterSize);\n    let selection;\n    let selectedTargets = [workflow.token];\n    if (nearbyTargets.length > 0) {\n        let buttons = [\n            {\n                'label': 'Yes',\n                'value': true\n            }, {\n                'label': 'No',\n                'value': false\n            }\n        ];\n        selection = await chris.selectTarget('Teleport a Creature?', buttons, nearbyTargets, true, 'one');\n        if (selection.buttons) {\n            let selectedTarget = selection.inputs.find(id => id != false);\n            if (selectedTarget) {\n                chris.updateTargets(Array.from(workflow.targets).filter(t => t.document.uuid != selectedTarget).map(t => t.id));\n                selectedTargets.push((await fromUuid(selectedTarget)).object);\n            }\n        }\n    }\n    await workflow.actor.sheet.minimize();\n    let icon = workflow.token.document.texture.src;\n    let position = await chris.aimCrosshair(workflow.token, 90, icon, -1, workflow.token.document.width);\n    queue.remove(workflow.item.uuid);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        return;\n    }\n    let difference = {x: workflow.token.x, y: workflow.token.y};\n    await new Sequence().effect().file('jb2a.thunderwave.center.blue').atLocation(workflow.token).randomRotation().animation().play();\n    async function teleport(targetToken) {\n        await new Sequence().effect().file('jb2a.misty_step.01.blue').atLocation(targetToken).randomRotation().scaleToObject(2).wait(750).animation().on(targetToken).opacity(0.0).waitUntilFinished().play();\n        let diffX = targetToken.x - difference.x;\n        let diffY = targetToken.y - difference.y;\n        let newCenter = canvas.grid.getSnappedPosition(position.x - targetToken.w / 2, position.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x + diffX,\n                'y': newCenter.y + diffY\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name,\n            'updateOpts': {'token': {'animate': false}}\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n        await new Sequence().effect().file('jb2a.misty_step.02.blue').atLocation(targetToken).randomRotation().scaleToObject(2).wait(500).animation().on(targetToken).opacity(1.0).play();\n    }\n    for (let i = 0; selectedTargets.length > i; i++) {\n        let targetToken = selectedTargets[i];\n        teleport(targetToken);\n    }\n    await warpgate.wait(2000);\n    await workflow.actor.sheet.maximize();\n}","import {queue} from '../../utility/queue.js';\nimport {chris} from '../../helperFunctions.js';\nexport async function thunderWave({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.failedSaves.size) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'thunderWave', 50);\n    if (!queueSetup) return;\n    for (let i of Array.from(workflow.failedSaves)) {\n        chris.pushToken(workflow.token, i, 10);\n    }\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function thunderboltStrike({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.hitTargets.size || !workflow.damageRoll) return;\n    let feature = chris.getItem(workflow.actor, 'Thunderbolt Strike');\n    if (!feature) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'thunderboltStrike', 475);\n    if (!queueSetup) return;\n    let damageTypes = chris.getRollDamageTypes(workflow.damageRoll);\n    if (!damageTypes.has('lightning')) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let targets = Array.from(workflow.hitTargets).filter(i => chris.getSize(i.actor) <= 3);\n    if (!targets.length) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let selection = await chris.selectTarget(feature.name + ': Push targets?', constants.yesNoButton, targets, true, 'multiple');\n    if (!selection.buttons) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let pushTargets = selection.inputs.filter(i => i).map(i => fromUuidSync(i).object);\n    if (!pushTargets.length) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    for (let i of pushTargets) chrisPremades.helpers.pushToken(workflow.token, i, 10);\n    queue.remove(workflow.item.uuid);\n}","import {queue} from '../../utility/queue.js';\nimport {chris} from '../../helperFunctions.js';\nimport {constants} from '../../constants.js';\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1 || !workflow.item) return;\n    if (workflow.item.system.actionType != 'mwak') return;\n    let effect = workflow.actor.effects.find(i => i.flags['chris-premades']?.spell?.thunderousSmite);\n    if (!effect) return;\n    let targetToken = workflow.targets.first();\n    let queueSetup = await queue.setup(workflow.item.uuid, 'thunderousSmite', 250);\n    if (!queueSetup) return;\n    let oldFormula = workflow.damageRoll._formula;\n    let bonusDamageFormula = '2d6[thunder]';\n    if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n    let damageFormula = oldFormula + ' + ' + bonusDamageFormula;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Thunderous Smite - Push');\n    if (!featureData) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Thunderous Smite - Push');\n    delete featureData._id;\n    featureData.system.save.dc = effect.flags['chris-premades'].spell.thunderousSmite.dc;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await warpgate.wait(100);\n    let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (featureWorkflow.failedSaves.size) {\n        await chris.pushToken(workflow.token, targetToken, 10);\n        if (!chris.checkTrait(targetToken.actor, 'ci', 'prone')) await chris.addCondition(targetToken.actor, 'Prone');\n    }\n    await chris.removeEffect(effect);\n    let conEffect = chris.findEffect(workflow.actor, 'Concentrating');\n    if (conEffect) await chris.removeEffect(conEffect);\n    queue.remove(workflow.item.uuid);\n}\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effectData = {\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 60\n        },\n        'name': workflow.item.name,\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'mode': 0,\n                'value': 'function.chrisPremades.macros.thunderousSmite.damage,postDamageRoll',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'spell': {\n                    'thunderousSmite': {\n                        'dc': chris.getSpellDC(workflow.item)\n                    }\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nexport let thunderousSmite = {\n    'damage': damage,\n    'item': item\n}","import {chris} from '../../../helperFunctions.js';\nimport {constants} from '../../../constants.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    await chris.removeCondition(workflow.actor, 'Grappled');\n    await chris.removeCondition(workflow.actor, 'Restrained');\n    await chris.removeCondition(workflow.actor, 'Stunned');\n}\nasync function turnStart(token, origin) {\n    if (token.actor.system.attributes.hp.value === 0) return;\n    let featureData = duplicate(origin.toObject());\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function onHit(workflow, targetToken) {\n    if (!workflow.damageRoll || targetToken.actor.system.attributes.hp.temp > 0) return;\n    let effect = chris.findEffect(targetToken.actor, 'Force Field');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let forceField = {\n    'item': item,\n    'turnStart': turnStart,\n    'onHit': onHit\n}","import {forceField} from './forceField.js';\nexport let tixieTockworth = {\n    'forceField': forceField\n}","import {queue} from '../../utility/queue.js';\nexport async function tollTheDead({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'tollTheDead', 50);\n    if (!queueSetup) return;\n    if (targetActor.system.attributes.hp.value === targetActor.system.attributes.hp.max) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let damageFormula = workflow.damageRoll._formula.replace('d8', 'd12');\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function trance({speaker, actor, token, character, item, args, scope, workflow}) {\n    let tools = {\n        'alchemist': 'Alchemist\\'s Supplies',\n        'brewer': 'Brewer\\'s Supplies',\n        'calligrapher': 'Calligrapher\\'s Supplies',\n        'carpenter': 'Carpenter\\'s Tools',\n        'cartographer': 'Cartographer\\'s Tools',\n        'cobbler': 'Cobbler\\'s Tools',\n        'cook': 'Cook\\'s Utensils',\n        'glassblower': 'Glassblower\\'s Tools',\n        'jeweler': 'Jeweler\\'s Tools',\n        'leatherworker': 'Leatherworker\\'s Tools',\n        'mason': 'Mason\\'s Tools',\n        'painter': 'Painter\\'s Supplies',\n        'potter': 'Potter\\'s Tools',\n        'smith': 'Smith\\'s Tools',\n        'tinker': 'Tinker\\'s Tools',\n        'weaver': 'Weaver\\'s Tools',\n        'woodcarver': 'Woodcarver\\'s Tools',\n        'disg': 'Disguise Kit',\n        'forg': 'Forgery Kit',\n        'herb': 'Herbalism Kit',\n        'navg': 'Navigator\\'s Tools',\n        'pois': 'Poisoner\\'s Kit',\n        'thief': 'Thieves\\' Tools'\n    }\n    function dialogRender(html) {\n        let ths = html[0].getElementsByTagName('th');\n        for (let t of ths) {\n            t.style.width = 'auto';\n            t.style.textAlign = 'left';\n        }\n        let tds = html[0].getElementsByTagName('td');\n        for (let t of tds) {\n            t.style.width = '50px';\n            t.style.textAlign = 'center';\n            t.style.paddingRight = '5px';\n        }\n    }\n    let selection = await warpgate.menu({\n        'inputs': [\n            {\n                'label': 'Skill:',\n                'type': 'select',\n                'options': Object.entries(CONFIG.DND5E.skills).map(([i, j]) => ({'value': i, 'html': j.label}))\n            },\n            {\n                'label': 'Weapon or Tool:',\n                'type': 'select',\n                'options': Object.keys(CONFIG.DND5E.weaponIds).map(i => ({'value': i, 'html': i.charAt(0).toUpperCase() + i.slice(1)})).concat(Object.keys(tools).map(i => ({'value': i, 'html': tools[i]})))\n            }\n        ],\n        'buttons': constants.okCancel\n    }, {\n        'title': workflow.item.name,\n        'render': dialogRender\n    });\n    if (!selection.buttons) return;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Trance');\n    }\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.skills.' + selection.inputs[0] +'.value',\n                'mode': 4,\n                'value': '1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    'longRest'\n                ]\n            }\n        }\n    };\n    let updates = {}\n    if (Object.keys(CONFIG.DND5E.weaponIds).includes(selection.inputs[1])) {\n        effectData.changes.push({\n            'key': 'system.traits.weaponProf.value',\n            'mode': 2,\n            'value': selection.inputs[1],\n            'priority': 20\n        });\n    } else {\n        let ability = await chris.dialog('What ability for the tool?', Object.values(CONFIG.DND5E.abilities).map(i => [i.label, i.abbreviation]));\n        if (!ability) return;\n        setProperty(updates, 'actor.system.tools.' + selection.inputs[1], {\n            'ability': ability,\n            'value': 1\n        });\n    }\n    setProperty(updates, 'embedded.ActiveEffect.' + workflow.item.name, effectData);\n    let effect = chris.findEffect(workflow.actor, workflow.item.name);\n    if (effect) await chris.removeEffect(effect);\n    let options = {\n        'permanent': false,\n        'name': 'Trance',\n        'description': 'Trance'\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js'\nimport {queue} from '../../../../utility/queue.js';\nasync function runFeature(workflow, featureName) {\n    if (workflow.hitTargets.size != 1 || workflow.item.system.baseItem != 'firearmCR') return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', featureName, false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', featureName);\n    let originItem = chris.getItem(workflow.actor, featureName);\n    if (!originItem) return;\n    featureData._id = originItem.id;\n    featureData.system.save.dc = chris.getSpellDC(originItem);\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await warpgate.wait(100);\n    return await MidiQOL.completeItemUse(feature, config, options);\n}\nasync function wingingShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    await runFeature(workflow, 'Winging Shot');\n}\nasync function forcefulShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    let featureWorkflow = await runFeature(workflow, 'Forceful Shot');\n    if (featureWorkflow.failedSaves.size != 1) return;\n    await chris.pushToken(workflow.token, workflow.targets.first(), 15);\n}\nasync function disarmingShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    await runFeature(workflow, 'Disarming Shot');\n}\nasync function dazingShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    await runFeature(workflow, 'Dazing Shot');\n}\nasync function piercingShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.token) return;\n    let weapons = workflow.actor.items.filter(i => i.system.baseItem === 'firearmCR' && i.system.uses.value && i.system.equipped && !chris.getConfiguration(i, 'status'));\n    if (!weapons.length) {\n        ui.notifications.info('You have no equipped firearms with ammo!');\n        return;\n    }\n    let weapon;\n    if (weapons.length === 1) {\n        weapon = weapons[0];\n    } else {\n        [weapon] = await chris.selectDocument(workflow.item.name, weapons);\n    }\n    if (!weapon) return;\n    let range = weapon.system.range.value;\n    let templateData = {\n        'user': game.user,\n        't': 'ray',\n        'distance': range,\n        'width': 5,\n        'fillColor': game.user.color,\n        'flags': {\n            'dnd5e': {\n                'origin': workflow.item.uuid\n            },\n            'midi-qol': {\n                'originUuid': workflow.item.uuid\n            }\n        }\n    };\n    await workflow.actor.sheet.minimize();\n    let {template, tokens} = await chris.placeTemplate(templateData, true);\n    if (!template) return;\n    tokens = tokens.filter(i => i.uuid != workflow.token.document.uuid);\n    if (!tokens.length) return;\n    let targetRanges = tokens.map(i => ({'uuid': i.uuid, 'distance': chris.getDistance(workflow.token, i)}));\n    let closestTargetRange = Math.min(...targetRanges.map(i => i.distance));\n    let closestTarget = targetRanges.find(i => i.distance === closestTargetRange);\n    let weaponData = weapon.toObject();\n    let misfireScore = (chris.getConfiguration(weapon, 'misfire') ?? 1) + 1;\n    setProperty(weaponData, 'flags.chris-premades.configuration.misfire', misfireScore);\n    delete weaponData._id;\n    let [config, options] = constants.syntheticItemWorkflowOptions([closestTarget.uuid]);\n    let newWeapon = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n    await weapon.update({'system.uses.value': weapon.system.uses.value - 1});\n    await warpgate.wait(100);\n    let weaponWorkflow = await MidiQOL.completeItemUse(newWeapon, config, options);\n    if (weaponWorkflow.attackRoll.terms[0].total <= misfireScore) {\n        await template.delete();\n        await workflow.actor.sheet.maximize();\n        let updates = {\n            'flags.chris-premades.configuration.status': 1,\n            'name': weapon.name += ' (Damaged)'\n        }\n        await weapon.update(updates);\n        return;\n    }\n    let otherTargets = tokens.filter(i => closestTarget.uuid != i.uuid);\n    if (!otherTargets.length) {\n        await template.delete();\n        await workflow.actor.sheet.maximize();\n        return;\n    }\n    let effectData = {\n        'name': 'Piercing Shot - Disadvantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.disadvantage.attack.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            }\n        ]\n    };\n    let effect = await chris.createEffect(workflow.actor, effectData);\n    setProperty(weaponData, 'flags.chris-premades.configuration.misfire', -100);\n    newWeapon = new CONFIG.Item.documentClass(weaponData, {'parent': workflow.actor});\n    for (let i of otherTargets) {\n        await warpgate.wait(100);\n        options.targetUuids = [i.uuid];\n        await MidiQOL.completeItemUse(newWeapon, config, options);\n    }\n    await template.delete();\n    await chris.removeEffect(effect);\n    await workflow.actor.sheet.maximize();\n}\nasync function violentShotFeature({speaker, actor, token, character, item, args, scope, workflow}) {\n    workflow.options.configureDialog = false;\n    workflow.options.consumeResource = false;\n    workflow.options.consumeQuantity = false;\n    workflow.options.consumeUsage = false;\n    let feature = chris.getItem(workflow.actor, 'Adept Marksman');\n    if (!feature) return;\n    if (!feature.system.uses.value) return;\n    let options = [];\n    for (let i = 1; i < feature.system.uses.value + 1; i++) options.push([i + ' Grit', i]);\n    let selection = await chris.dialog(workflow.item.name, options, 'How many grit?');\n    if (!selection) return;\n    await feature.update({'system.uses.value': feature.system.uses.value - selection});\n    let effectData = {\n        'label': 'Violent Shot',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.onUseMacroName',\n                'value': 'function.chrisPremades.macros.trickShots.violentShot,preItemRoll',\n                'mode': 0,\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'feature': {\n                    'violentShot': selection\n                }\n            },\n            'dae': {\n                'specialDuration': [\n                    '1Attack'\n                ]\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function violentShot({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.item) return;\n    let baseItem = workflow.item.system.baseItem;\n    if (baseItem != 'firearmCR') return;\n    let effect = chris.findEffect(workflow.actor, 'Violent Shot');\n    if (!effect) return;\n    let misfireBonus = effect.flags?.['chris-premades']?.feature?.violentShot;\n    if (!misfireBonus) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'violentShot', 45);\n    if (!queueSetup) return;\n    let misfireScore = (chris.getConfiguration(workflow.item, 'misfire') ?? 1) + (misfireBonus * 2);\n    let damageParts = workflow.item.system.damage.parts;\n    if (!damageParts) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let roll = await new Roll(damageParts[0][0]).roll({async: true});\n    let faces = roll.terms[0].faces;\n    if (!faces) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    damageParts.push([[misfireBonus + 'd' + faces + '[' + damageParts[0][1] + ']'], damageParts[0][1]]);\n    workflow.item = workflow.item.clone({'system.damage.parts': damageParts, 'flags.chris-premades.configuration.misfire': misfireScore}, {'keepId': true});\n    queue.remove(workflow.item.uuid);\n}\nexport let trickShots = {\n    'dazingShot': dazingShot,\n    'disarmingShot':disarmingShot,\n    'forcefulShot': forcefulShot,\n    'piercingShot': piercingShot,\n    'violentShot': violentShot,\n    'violentShotFeature': violentShotFeature,\n    'wingingShot': wingingShot\n}","import {stench} from './stench.js';\nexport let troglodyte = {\n    'stench': stench\n}","import {chris} from '../../../helperFunctions.js';\nimport {constants} from '../../../constants.js';\nasync function onHit(workflow, targetToken) {\n    if (!workflow.damageRoll || !workflow.hitTargets.has(targetToken)) return;\n    let effect = chris.findEffect(targetToken.actor, 'Regeneration');\n    if (!effect) return;\n    let effect2 = chris.findEffect(targetToken.actor, 'Regeneration Blocked');\n    if (effect2) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let stopHeal = false;\n    let reducedHeal = false;\n    let hp = targetToken.actor.system.attributes.hp.value;\n    let oldHP = workflow.damageList.find(i => i.tokenUuid === targetToken.document.uuid).oldHP;\n    for (let i of Object.keys(CONFIG.DND5E.damageTypes).filter(i => i != 'midi-none')) {\n        if (chris.getConfiguration(originItem, i) && chris.getRollDamageTypes(workflow.damageRoll).has(i) && !chris.checkTrait(targetToken.actor, 'di', i)) {\n            let threshold = chris.getConfiguration(originItem, 'threshold') ?? false;\n            if (threshold) {\n                if (oldHP != 0) {\n                    reducedHeal = true;\n                    continue;\n                } else {\n                    if (chris.totalDamageType(targetToken.actor, workflow.damageDetail, i) >= threshold) {\n                        reducedHeal = false;\n                        stopHeal = true;\n                        break;\n                    }\n                    reducedHeal = true;\n                    continue;\n                }\n            }\n            stopHeal = true;\n            reducedHeal = false;\n            break;\n        }\n    }\n    if (workflow.isCritical && chris.getConfiguration(originItem, 'critical')) stopHeal = true;\n    if (!stopHeal) {\n        let effect = chris.findEffect(targetToken.actor, 'Reduced Regeneration');\n        if (reducedHeal && !effect) {\n            let effectData = {\n                'label': 'Reduced Regeneration',\n                'icon': originItem.img,\n                'duration': {\n                    'seconds': 12\n                },\n                'origin': originItem.uuid\n            };\n            await chris.createEffect(targetToken.actor, effectData);\n        }\n        if (chris.getConfiguration(originItem, 'zeroHP')) return;\n        if (hp === 0 && chris.inCombat()) {\n            let updates = {\n                'defeated': false\n            };\n            await chris.updateCombatant(chris.getCombatant(targetToken), updates);\n            let effectData = {\n                'icon': 'icons/svg/skull.svg',\n                'label': 'Dead?',\n                'origin': originItem.uuid,\n                'duration': {\n                    'seconds': 86400\n                },\n                'flags': {\n                    'core': {\n                        'overlay': true\n                    }\n                }\n            };\n            await warpgate.wait(200);\n            await chris.createEffect(targetToken.actor, effectData);\n            if (!chris.findEffect(targetToken.actor, 'Prone')) await chris.addCondition(targetToken.actor, 'Prone', false, originItem.uuid);\n        }\n        return;\n    } else {\n        let effect2 = chris.findEffect(targetToken.actor, 'Reduced Regeneration');\n        if (effect2) await chris.removeEffect(effect2);\n        let hp = targetToken.actor.system.attributes.hp.value;\n        if (hp === 0 && chris.inCombat()) {\n            let effect = chris.findEffect(targetToken.actor, 'Dead?');\n            if (effect) {\n                await chris.removeEffect(effect);\n                await chris.addCondition(targetToken.actor, 'Dead', true, null);\n            }\n        }\n    }\n    let effectData = {\n        'label': 'Regeneration Blocked',\n        'icon': originItem.img,\n        'duration': {\n            'seconds': 12\n        },\n        'origin': originItem.uuid\n    };\n    await chris.createEffect(targetToken.actor, effectData);\n}\nasync function turnStart(token, origin) {\n    let hp = token.actor.system.attributes.hp.value;\n    if (chris.checkTrait(token.actor, 'di', 'healing')) return;\n    let effect2 = chris.findEffect(token.actor, 'Regeneration Blocked');\n    if (effect2) {\n        if (hp != 0) await chris.removeEffect(effect2);\n        return;\n    }\n    if (chris.getConfiguration(origin, 'zeroHP') && hp === 0) return;\n    let effect4 = chris.findEffect(token.actor, 'Reduced Regeneration');\n    let featureData = duplicate(origin.toObject());\n    delete featureData._id;\n    if (effect4) {\n        featureData.system.damage.parts[0][0] = '(' + featureData.system.damage.parts[0][0] + ') / 2';\n        await chris.removeEffect(effect4);\n    }\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    setProperty(options, 'workflowOptions.allowIncapacitated', true);\n    if (hp === 0) {\n        let effect3 = chris.findEffect(token.actor, 'Dead?');\n        if (effect3) {\n            await chris.removeEffect(effect3);\n        }\n    }\n    await MidiQOL.completeItemUse(feature, config, options);\n}\n\nexport let regeneration = {\n    'onHit': onHit,\n    'turnStart': turnStart\n}","import {regeneration} from './regeneration.js';\nexport let troll = {\n    'regeneration': regeneration\n}","import {chris} from '../../../helperFunctions.js';\nasync function targets({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let effectData = {\n        'label': 'Turn Advantage',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.advantage.ability.save.wis',\n                'value': '1',\n                'mode': 5,\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'isSave'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    };\n    let effectData2 = {\n        'label': 'Turn Immunity',\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'duration': {\n            'turns': 1\n        },\n        'changes': [\n            {\n                'key': 'flags.midi-qol.min.ability.save.wis',\n                'value': '100',\n                'mode': 5,\n                'priority': 120\n            }\n        ],\n        'flags': {\n            'dae': {\n                'transfer': false,\n                'specialDuration': [\n                    'isSave'\n                ],\n                'stackable': 'multi',\n                'macroRepeat': 'none'\n            }\n        }\n    };\n    let validTargets = [];\n    for (let i of Array.from(workflow.targets)) {\n        if (chris.raceOrType(i.actor) != 'undead') continue;\n        if (i.actor.system.attributes.hp.value === 0) continue;\n        if (i.actor.flags['chris-premades']?.feature?.turnResistance) await chris.createEffect(i.actor, effectData);\n        if (i.actor.flags['chris-premades']?.feature?.turnImmunity) await chris.createEffect(i.actor, effectData2);\n        validTargets.push(i.id);\n    }\n    chris.updateTargets(validTargets);\n}\nasync function saves({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size === 0) return;\n    let classIdentifier = chris.getConfiguration(workflow.item, 'identifier') ?? 'cleric';\n    let clericLevels = workflow.actor.classes[classIdentifier]?.system?.levels;\n    if (!clericLevels) return;\n    let destroyLevel;\n    if (clericLevels >= 17) {\n        destroyLevel = 4;\n    } else if (clericLevels >= 14) {\n        destroyLevel = 3;\n    } else if (clericLevels >= 11) {\n        destroyLevel = 2;\n    } else if (clericLevels >= 8) {\n        destroyLevel = 1;\n    } else if (clericLevels >= 5) {\n        destroyLevel = 0.5;\n    }\n    if (!destroyLevel) return;\n    let destroyTokens = [];\n    for (let i of Array.from(workflow.failedSaves)) {\n        let CR = i.actor.system.details?.cr;\n        if (!CR) continue;\n        if (CR > destroyLevel) continue;\n        destroyTokens.push(i);\n        new Sequence().effect().atLocation(i).file('jb2a.divine_smite.target.blueyellow').play();\n    }\n    if (destroyTokens.length === 0) return;\n    await chris.applyDamage(destroyTokens, '10000', 'none');\n}\nexport let turnUndead = {\n    'targets': targets,\n    'saves': saves\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function turnStart(token, origin) {\n    let targetTokenId = game.combat.previous.tokenId;\n    if (!targetTokenId) return;\n    let targetToken = canvas.scene.tokens.get(targetTokenId);\n    if (!targetToken) return;\n    if (targetToken.disposition != token.document.disposition) return;\n    let distance = await chris.getDistance(token, targetToken);\n    if (distance > 30) return;\n    let charmedEffect = chris.findEffect(targetToken.actor, 'Charmed');\n    let frightenedEffect = chris.findEffect(targetToken.actor, 'Frightened');\n    let classLevels = origin.actor.classes.cleric?.system?.levels ?? 0;\n    let formula = '1d6[temphp] + ' + classLevels;\n    let generatedMenu = [['Gain 1d6 + ' + classLevels + ' temporary HP', 'hp']];\n    if (charmedEffect) generatedMenu.push(['Remove the charmed condition', 'Charmed']);\n    if (frightenedEffect) generatedMenu.push(['Remove the frightened condition', 'Frightened']);\n    generatedMenu.push(['None', false]);\n    let ownerId = chris.firstOwner(targetToken).id;\n    let selection = await chris.remoteDialog(origin.name, generatedMenu, ownerId, 'What would you like to do?');\n    if (!selection) return;\n    switch (selection) {\n        case 'hp':\n            let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Twilight Sanctuary - Temporary HP', false);\n            if (!featureData) return;\n            delete featureData._id;\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Twilight Sanctuary - Temporary HP');\n            featureData.system.damage.parts[0][0] = formula;\n            let feature = new CONFIG.Item.documentClass(featureData, {'parent': token.actor});\n            let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.uuid]);\n            let queueSetup = await queue.setup(origin.uuid, 'twilightSanctuary', 50);\n            if (!queueSetup) return;\n            await warpgate.wait(100);\n            await MidiQOL.completeItemUse(feature, config, options);\n            queue.remove(origin.uuid);\n            break;\n        case 'Charmed':\n        case 'Frightened':\n            await chris.removeCondition(targetToken.actor, selection);\n            break;\n    }\n}\nexport let twilightSanctuary = {\n    'turnStart': turnStart\n}","import {constants} from '../../../../constants.js'\nimport {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nasync function attack(workflow) {\n    if (workflow.targets.size != 1 || !workflow.item || !constants.attacks.includes(workflow.item?.system?.actionType)) return;\n    let targetToken = workflow.targets.first();\n    let coverBonus = MidiQOL.computeCoverBonus(workflow.token, targetToken, workflow.item);\n    if (coverBonus >= 2) return;\n    let nearbyShrouds = chris.findNearby(targetToken, 30, 'ally', false, true).filter(i => chris.findEffect(i.actor, 'Channel Divinity: Twilight Sanctuary') && chris.getItem(i.actor, 'Twilight Shroud'));\n    if (!nearbyShrouds.length) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'twilightShroud', 150);\n    if (!queueSetup) return;\n    let updatedRoll = await chris.addToRoll(workflow.attackRoll, -2);\n    let feature = chris.getItem(nearbyShrouds[0].actor, 'Twilight Shroud');\n    workflow.attackAdvAttribution.add('Half-Cover: ' + feature.name);\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}\nlet saveTargets = [];\nasync function saveEarly(workflow) {\n    if (workflow.item?.system?.save?.ability != 'dex' || !workflow.targets.size) return;\n    let effectData = {\n        'icon': 'icons/magic/time/arrows-circling-green.webp',\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 1\n        },\n        'name': 'Dex Cover Bonus',\n        'changes': [\n            {\n                'key': 'system.abilities.dex.bonuses.save',\n                'mode': 2,\n                'value': '+2',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    for (let i of workflow.targets) {\n        let nearbyShrouds = chris.findNearby(i, 30, 'ally', false, true).filter(i => chris.findEffect(i.actor, 'Channel Divinity: Twilight Sanctuary') && chris.getItem(i.actor, 'Twilight Shroud'));\n        if (!nearbyShrouds.length) continue;\n        await chris.createEffect(i.actor, effectData);\n        saveTargets.push(i.actor);\n    }\n}\nasync function saveLate(workflow) {\n    if (workflow.item?.system?.save?.ability != 'dex' || !workflow.targets.size) return;\n    for (let i of saveTargets) {\n        let effect = chris.findEffect(i, 'Dex Cover Bonus');\n        if (effect) await chris.removeEffect(effect);\n    }\n    saveTargets = [];\n}\nexport let twilightShroud = {\n    'attack': attack,\n    'saveEarly': saveEarly,\n    'saveLate': saveLate\n}","import {chris} from '../../../helperFunctions.js';\nexport async function festeringAura(token, origin) {\n    let targetToken = game.canvas.tokens.get(game.combat.current.tokenId);\n    if (!targetToken) return;\n    if (targetToken.id === token.id) return;\n    let distance = chris.getDistance(token, targetToken);\n    if (distance > 5) return;\n    let effect = chris.findEffect(token.actor, 'Summoned Creature');\n    if (!effect) return;\n    let originItem = await fromUuid(effect.origin);\n    if (originItem.actor.id === targetToken.actor.id) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(origin, config, options);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nexport async function rottingClaw({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let effect = chris.findEffect(targetToken.actor, 'Poisoned');\n    if (!effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Summon Features', 'Rotting Claw (Putrid Only) - Paralyze', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Rotting Claw (Putrid Only) - Paralyze');\n    let spellDC = workflow.item.flags['chris-premades']?.feature?.rottingClaw?.dc;\n    if (!spellDC) return;\n    featureData.system.save.dc = spellDC;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options);\n}","import {festeringAura} from './festeringAura.js';\nimport {rottingClaw} from './rottingClaw.js';\nexport let undeadSpirit = {\n    'festeringAura': festeringAura,\n    'rottingClaw': rottingClaw\n}","import {chris} from '../../../helperFunctions.js';\nexport async function vampiricBite({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let selection = await chris.dialog('Fanged Bite', [['Restore HP', 'hp'], ['Skill Bonus', 'skill']]);\n    if (!selection) selection = 'hp';\n    let damage = chris.totalDamageType(workflow.targets.first().actor, workflow.damageDetail, 'piercing');\n    if (!damage) return;\n    switch (selection) {\n        case 'hp':\n            chris.applyDamage(workflow.token, damage, 'healing');\n            break;\n        case 'skill':\n            let effectData = {\n                'label': 'Vampiric Bite',\n                'icon': workflow.item.img,\n                'duration': {\n                    'seconds': 86400\n                },\n                'changes': [\n                    {\n                        'key': 'system.bonuses.abilities.check',\n                        'mode': 2,\n                        'value': damage,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'system.bonuses.All-Attacks',\n                        'mode': 2,\n                        'value': damage,\n                        'priority': 20\n                    }\n                ],\n                'flags': {\n                    'dae': {\n                        'specialDuration': [\n                            '1Attack',\n                            'isSkill'\n                        ]\n                    }\n                }\n            };\n            await chris.createEffect(workflow.actor, effectData);\n            break;\n    }\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nasync function vampiricTouchItem({speaker, actor, token, character, item, args, scope, workflow}) {\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Vampiric Touch Attack', false);\n    if (!featureData) return;\n    let spellLevel = workflow.castData.castLevel;\n    featureData.system.damage.parts = [\n        [\n            spellLevel + 'd6[necrotic]',\n            'necrotic'\n        ]\n    ];\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Vampiric Touch Attack');\n    featureData.flags['chris-premades'] = {\n        'spell': {\n            'vampiricTouchAttack': true,\n            'castData': workflow.castData\n        }\n    }\n    featureData.flags['chris-premades'].spell.castData.school = workflow.item.system.school;\n    async function effectMacro () {\n        await warpgate.revert(token.document, 'Vampiric Touch');\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 60\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                }\n            }\n        }\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [workflow.item.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': workflow.item.name,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let feature = workflow.actor.items.find(item => item.flags['chris-premades']?.spell?.vampiricTouchAttack);\n    if (!feature) return;\n    if (workflow.targets.size === 0) return;\n    let [config, options2] = constants.syntheticItemWorkflowOptions([workflow.targets.first().document.uuid]);\n    await MidiQOL.completeItemUse(feature, config, options2);\n}\nasync function vampiricTouchAttack({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.hitTargets.size != 1) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'vampiricTouchAttack', 450);\n    if (!queueSetup) return;\n    let damage = chris.totalDamageType(workflow.targets.first().actor, workflow.damageDetail, 'necrotic');\n    if (!damage) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    damage = Math.floor(damage / 2);\n    await chris.applyDamage([workflow.token], damage, 'healing');\n    queue.remove(workflow.item.uuid);\n}\nexport let vampiricTouch = {\n    'item': vampiricTouchItem,\n    'attack': vampiricTouchAttack\n}","import {queue} from '../../../../utility/queue.js';\nexport async function viciousIntent({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.item?.system?.baseItem != 'firearmCR') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'viciousIntent', 50);\n    if (!queueSetup) return;\n    let critical = duplicate(workflow.item.system.critical);\n    if ((critical.threshold ?? 20) <= 19) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    critical.threshold = 19;\n    workflow.item = workflow.item.clone({'system.critical': critical}, {'keepId': true});\n    workflow.item.prepareData();\n    workflow.item.prepareFinalAttributes();\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nexport async function vigorOfTheHillGiant({speaker, actor, token, character, item, args, scope, workflow}) {\n    await chris.removeCondition(workflow.actor, 'Prone');\n}","import {chris} from '../../helperFunctions.js';\nexport async function vortexWarp({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.failedSaves.size != 1) return;\n    let targetToken = workflow.targets.first();\n    let maxRange = 90 + (30 * (workflow.castData.castLevel - 2));\n    let icon = targetToken.document.texture.src;\n    let interval = targetToken.document.width % 2 === 0 ? 1 : -1;\n    await workflow.actor.sheet.minimize();\n    let position = await chris.aimCrosshair(workflow.token, maxRange, icon, interval, targetToken.document.width);\n    if (position.cancelled) {\n        await workflow.actor.sheet.maximize();\n        return;\n    }\n    let animation = chris.getConfiguration(workflow.item, 'animation') ?? 'default';\n    if (animation === 'simple' || chris.jb2aCheck() === 'free') {\n        await new Sequence()\n            .effect()\n            .file('jb2a.misty_step.01.blue')\n            .atLocation(targetToken)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(750)\n            .animation()\n            .on(targetToken)\n            .opacity(0.0)\n            .waitUntilFinished()\n            .play();\n        let newCenter = canvas.grid.getSnappedPosition(position.x - targetToken.w / 2, position.y - targetToken.h / 2, 1);\n        let targetUpdate = {\n            'token': {\n                'x': newCenter.x,\n                'y': newCenter.y\n            }\n        };\n        let options = {\n            'permanent': true,\n            'name': workflow.item.name,\n            'description': workflow.item.name,\n            'updateOpts': {'token': {'animate': false}}\n        };\n        await warpgate.mutate(targetToken.document, targetUpdate, {}, options);\n        await new Sequence()\n            .effect()\n            .file('jb2a.misty_step.02.blue')\n            .atLocation(targetToken)\n            .randomRotation()\n            .scaleToObject(2)\n            .wait(1500)\n            .animation()\n            .on(targetToken)\n            .opacity(1.0)\n            .play();\n        await warpgate.wait(1000);\n    } else {\n        //Animations by: eskiemoh\n        new Sequence()\n            .effect()\n            .from(targetToken)\n            .duration(1500)\n            .scaleOut(0, 500, {'ease': 'easeInOutElastic'})\n            .rotateOut(180, 300, {'ease': 'easeOutCubic'})\n            .animateProperty('sprite', 'position.y', {'from': 0 , 'to': -0.25, 'gridUnits': true, 'duration': 100, 'delay': 1000})\n            .animateProperty('sprite', 'position.y', {'from': -0.25 , 'to': 0, 'gridUnits': true, 'duration': 100, 'delay': 1100})\n            \n            .animation()\n            .delay(100)\n            .on(targetToken)\n            .opacity(0)\n            \n            .effect()\n            .file('jb2a.particles.outward.white.01.02')\n            .scaleIn(0, 500, {ease: 'easeOutQuint'})\n            .delay(1000)\n            .fadeOut(1000)\n            .atLocation(targetToken)\n            .duration(1000)\n            .size(1.35, {'gridUnits': true})\n            .animateProperty('spriteContainer', 'position.y', {'from':0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n            .zIndex(1)\n            \n            .effect()\n            .file('jb2a.portals.horizontal.vortex.purple')\n            .atLocation(targetToken)\n            .scaleToObject(0.5)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 600, {'ease': 'easeOutCubic'})\n            .opacity(1)\n            .duration(1500)\n            .belowTokens()\n            .zIndex(0)\n            \n            .effect()\n            .file('jb2a.extras.tmfx.outflow.circle.04')\n            .atLocation(targetToken)\n            .scaleToObject(2.5)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 600, {'ease': 'easeOutCubic'})\n            .fadeOut(1000)\n            .opacity(0.2)\n            .belowTokens()\n            .zIndex(0)\n            \n            .effect()\n            .file('jb2a.template_circle.vortex.intro.purple')\n            .atLocation(targetToken)\n            .scaleToObject(1.9)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 600, {'ease': 'easeOutCubic'})\n            .opacity(1)\n            .belowTokens()\n            .zIndex(1)\n            .waitUntilFinished()\n            \n            .animation()\n            .on(targetToken)\n            .teleportTo(position)\n            .snapToGrid()\n            .offset({'x': -1, 'y': -1 })\n            .waitUntilFinished(200)\n            \n            .effect()\n            .file('jb2a.portals.horizontal.vortex.purple')\n            .atLocation(targetToken)\n            .scaleToObject(0.5)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 600, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 600, {'ease': 'easeOutCubic'})\n            .opacity(1)\n            .duration(1500)\n            .belowTokens()\n            .zIndex(0)\n            \n            .effect()\n            .file('jb2a.template_circle.vortex.outro.purple')\n            .atLocation(targetToken)\n            .scaleToObject(1.9)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 500, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 500, {'ease': 'easeOutCubic'})\n            .opacity(1)\n            .belowTokens()\n            .zIndex(1)\n            \n            .effect()\n            .file('jb2a.extras.tmfx.outflow.circle.04')\n            .atLocation(targetToken)\n            .scaleToObject(2.5)\n            .rotateIn(-360, 500, {'ease': 'easeOutCubic'})\n            .rotateOut(360, 500, {'ease': 'easeOutCubic'})\n            .scaleIn(0, 500, {'ease': 'easeInOutCirc'})\n            .scaleOut(0, 500, {'ease': 'easeOutCubic'})\n            .opacity(0.2)\n            .fadeOut(1000)\n            .belowTokens()\n            .zIndex(0)\n            \n            .effect()\n            .file('jb2a.particles.outward.white.01.02')\n            .delay(250)\n            .scaleIn(0, 500, {'ease': 'easeOutQuint'})\n            .fadeOut(1000)\n            .atLocation(targetToken)\n            .duration(1000)\n            .size(1.35, {'gridUnits': true})\n            .animateProperty('spriteContainer', 'position.y', {'from':0 , 'to': -0.5, 'gridUnits': true, 'duration': 1000})\n            .zIndex(1)\n            \n            .effect()\n            .from(targetToken)\n            .delay(250)\n            .atLocation(targetToken)\n            .duration(1500)\n            .scaleIn({'x': 0.2, 'y': 0 }, 1000, {'ease': 'easeOutElastic'})\n            .rotateIn(360, 500, {ease: 'easeOutCubic'})\n            .animateProperty('spriteContainer', 'position.y', {'from':0 , 'to': -0.5, 'gridUnits': true, 'duration': 200})\n            .animateProperty('spriteContainer', 'position.y', {'from':-0.5 , 'to': 0, 'gridUnits': true, 'duration': 200, 'delay': 200})\n            .waitUntilFinished(-200)\n            \n            .animation()\n            .on(targetToken)\n            .opacity(1)\n            \n            .play();\n        await warpgate.wait(4000);\n    }\n    await workflow.actor.sheet.maximize();\n}","import {chris} from '../../helperFunctions.js';\nimport {queue} from '../../utility/queue.js';\nexport async function wandOfTheWarMage({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!workflow.targets.size) return;\n    let validTypes = ['rsak', 'msak'];\n    if (!validTypes.includes(workflow.item.system.actionType)) return;\n    if (game.settings.get('midi-qol', 'ConfigSettings').optionalRules.coverCalculation === 'none') return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'wandOfTheWarMage', 150);\n    if (!queueSetup) return;\n    let coverBonus = MidiQOL.computeCoverBonus(workflow.token, workflow.targets.first(), workflow.item);\n    if (coverBonus != 2) {\n        queue.remove(workflow.item.uuid);\n        return;\n    }\n    let updatedRoll = await chris.addToRoll(workflow.attackRoll, 2);\n    workflow.setAttackRoll(updatedRoll);\n    queue.remove(workflow.item.uuid);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js'\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size != 1) return;\n    let effect = chris.findEffect(workflow.targets.first().actor, 'Warding Bond - Target');\n    if (effect) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Dismiss Warding Bond', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Dismiss Warding Bond');\n    let targetToken = workflow.targets.first();\n    featureData.name = 'Dismiss Warding Bond: ' + targetToken.actor.name;\n    setProperty(featureData, 'flags.chris-premades.spell.wardingBond.targetUuid', targetToken.document.uuid);\n    let effectData = {\n        'name': 'Warding Bond: ' + targetToken.actor.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 3600\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onDelete': {\n                    'script': 'await warpgate.revert(token.document, \"Warding Bond: ' + targetToken.uuid + '\");'\n                }\n            },\n            'chris-premades': {\n                'vae': {\n                    'button': featureData.name\n                },\n                'spell': {\n                    'wardingBond': {\n                        'targetUuid': targetToken.document.uuid\n                    }\n                }\n            }\n        },\n        'transfer': true\n    };\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            },\n            'ActiveEffect': {\n                [effectData.name]: effectData\n            }\n        }\n    };\n    let options = {\n        'permanent': false,\n        'name': 'Warding Bond: ' + targetToken.uuid,\n        'description': featureData.name\n    };\n    await warpgate.mutate(workflow.token.document, updates, {}, options);\n    let effectData2 = {\n        'name': 'Warding Bond - Target',\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 3600\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+1',\n                'priority': 20\n            },\n            {\n                'key': 'system.bonuses.abilities.save',\n                'mode': 2,\n                'value': '+1',\n                'priority': 20\n            },\n            {\n                'key': 'system.traits.dr.all',\n                'mode': 0,\n                'value': '1',\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.spell.wardingBond.sourceUuid',\n                'mode': 5,\n                'value': workflow.token.document.uuid,\n                'priority': 20\n            },\n            {\n                'key': 'flags.chris-premades.feature.onHit.wardingBond',\n                'mode': 5,\n                'value': true,\n                'priority': 20\n            }\n        ],\n        'transfer': true\n    };\n    await chris.createEffect(workflow.targets.first().actor, effectData2);\n}\nasync function dismiss({speaker, actor, token, character, item, args, scope, workflow}) {\n    let targetTokenUuid = workflow.item.flags['chris-premades']?.spell?.wardingBond?.targetUuid;\n    if (!targetTokenUuid) return;\n    let targetToken = await fromUuid(targetTokenUuid);\n    if (!targetToken) return;\n    let targetEffect = chris.findEffect(targetToken.actor, 'Warding Bond - Target');\n    if (targetEffect) await chris.removeEffect(targetEffect);\n    let sourceEffect = chris.findEffect(workflow.actor, 'Warding Bond: ' + targetToken.actor.name);\n    if (!sourceEffect) return;\n    await chris.removeEffect(sourceEffect);\n}\nasync function onHit(workflow, targetToken) {\n    if (workflow.hitTargets.size === 0 || !workflow.damageList) return;\n    let effect = chris.findEffect(targetToken.actor, 'Warding Bond - Target');\n    if (!effect) return;\n    let bondTokenUuid = targetToken.actor.flags['chris-premades']?.spell?.wardingBond?.sourceUuid;\n    if (!bondTokenUuid) return;\n    let damageInfo = workflow.damageList.find(list => list.actorId === targetToken.actor.id);\n    if (!damageInfo) return;\n    if (damageInfo.appliedDamage === 0) return;\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Spell Features', 'Warding Bond - Damage', false);\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Warding Bond - Damage');\n    featureData.system.damage.parts = [\n        [\n            damageInfo.appliedDamage + '[none]',\n            'none'\n        ]\n    ];\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetToken.actor});\n    let sourceToken = await fromUuid(bondTokenUuid);\n    if (!sourceToken) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([sourceToken.uuid]);\n    let damageWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (damageWorkflow.targets.first().actor.system.attributes.hp.value != 0) return;\n    await chris.removeEffect(effect);\n    let sourceEffect = sourceToken.actor.effects.find(eff => eff.flags['chris-premades']?.spell?.wardingBond?.targetUuid === targetToken.document.uuid);\n    if (!sourceEffect) return;\n    await chris.removeEffect(sourceEffect);\n}\nasync function moveTarget(token, changes) {\n    if (!chris.isLastGM()) return;\n    if (token.parent.id != canvas.scene.id) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    let effect = chris.findEffect(token.actor, 'Warding Bond - Target');\n    if (!effect) return;\n    let bondTokenUuid = token.actor.flags['chris-premades']?.spell?.wardingBond?.sourceUuid;\n    if (!bondTokenUuid) return;\n    let sourceToken = await fromUuid(bondTokenUuid);\n    if (!sourceToken) return;\n    await token.object?._animation;\n    let distance = chris.getDistance(token, sourceToken);\n    if (distance <= 60) return;\n    let selection = await chris.dialog('Warding Bond: Distance over 60 feet, remove effect?', constants.yesNo);\n    if (!selection) return;\n    await chris.removeEffect(effect);\n    let sourceEffect = sourceToken.actor.effects.find(eff => eff.flags['chris-premades']?.spell?.wardingBond?.targetUuid === token.uuid);\n    if (!sourceEffect) return;\n    await chris.removeEffect(sourceEffect);\n}\nasync function moveSource(token, changes) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    let effects = token.actor.effects.filter(eff => eff.flags['chris-premades']?.spell?.wardingBond?.targetUuid);\n    if (effects.length === 0) return;\n    for (let i of effects) {\n        let targetToken = await fromUuid(i.flags['chris-premades']?.spell?.wardingBond?.targetUuid);\n        if (!targetToken) continue;\n        let distance = chris.getDistance(token, targetToken);\n        if (distance <= 60) continue;\n        let selection = await chris.dialog('Warding Bond: Distance over 60 feet, remove effect?', constants.yesNo);\n        if (!selection) continue;\n        await chris.removeEffect(i);\n        let targetEffect = chris.findEffect(targetToken.actor, 'Warding Bond - Target');\n        if (!targetEffect) continue;\n        await chris.removeEffect(targetEffect);\n    }\n}\nexport let wardingBond = {\n    'item': item,\n    'onHit': onHit,\n    'moveTarget': moveTarget,\n    'moveSource': moveSource,\n    'dismiss': dismiss\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!game.modules.get('quick-insert')?.active) {\n        ui.notifications.warn('This feature requires the Quick Insert module to be active!');\n        return;\n    }\n    let mutationStack = warpgate.mutationStack(workflow.token.document);\n    let mutateItem = mutationStack.getName('Wild Shape');\n    if (mutateItem) {\n        ui.notifications.warn('Revert forms before using this feature again!');\n        return;\n    }\n    let filter = 'wildshape';\n    if (workflow.actor.flags['chris-premades']?.feature?.wildshape?.moon) filter = 'wildshape-moon';\n    let customFilter = workflow.actor.flags['chris-premades']?.feature?.wildshape?.custom;\n    if (customFilter) filter = customFilter;\n    let selectedActor;\n    if (!QuickInsert.hasIndex) await QuickInsert.forceIndex();\n    QuickInsert.open({\n        'allowMultiple': false,\n        'restrictTypes': ['Actor'],\n        'filter': filter,\n        'onSubmit': async (selected) => {\n            if (!selected) return;\n            if (selected.uuid === workflow.item.actor.uuid) {\n                ui.notifications.warn('You cannot Wild Shape into yourself!');\n                return;\n            }\n            selectedActor = await fromUuid(selected.uuid);\n            if (selectedActor.compendium) {\n                ui.notifications.warn('The actor must not be in a compendium!');\n                return;\n            }\n            if (!selectedActor) return;\n            let equipedItems = workflow.actor.items.filter(i => i.system.equipped);\n            let selection;\n            if (equipedItems.length > 0) {\n                let options = [\n                    'Merge / Drop',\n                    'Wear'\n                ];\n                function dialogRender(html) {\n                    let ths = html[0].getElementsByTagName('th');\n                    for (let t of ths) {\n                        t.style.width = 'auto';\n                        t.style.textAlign = 'left';\n                    }\n                    let tds = html[0].getElementsByTagName('td');\n                    for (let t of tds) {\n                        t.style.width = '50px';\n                        t.style.textAlign = 'center';\n                        t.style.paddingRight = '5px';\n                    }\n                }\n                let config = {\n                    'title': 'What happens to your equipment?',\n                    'render': dialogRender\n                };\n                let generatedInputs = [];\n                for (let i of equipedItems) {\n                    generatedInputs.push({\n                        'label': i.name,\n                        'type': 'select',\n                        'options': options,\n                        'value': i.uuid\n                    });\n                }\n                selection = await warpgate.menu(\n                    {\n                        'inputs': generatedInputs,\n                        'buttons': constants.okCancel\n                    },\n                    config\n                );\n                if (!selection) return;\n            }\n            let wildshapeActor = selectedActor.toObject();\n            delete wildshapeActor.token;\n            delete wildshapeActor.items;\n            delete wildshapeActor.effects;\n            delete wildshapeActor.type;\n            delete wildshapeActor.flags;\n            delete wildshapeActor.folder;\n            delete wildshapeActor.name;\n            delete wildshapeActor.sort;\n            delete wildshapeActor._id;\n            delete wildshapeActor._stats;\n            delete wildshapeActor.ownership;\n            let texture = wildshapeActor.prototypeToken.texture;\n            let wildshapeToken = {\n                'name': selectedActor.name + ' (' + workflow.actor.name + ')',\n                'texture': texture,\n                'width': wildshapeActor.prototypeToken.width,\n                'height': wildshapeActor.prototypeToken.height\n            }\n            wildshapeActor.prototypeToken = wildshapeToken;\n            wildshapeActor.system.abilities.cha = workflow.actor.system.abilities.cha;\n            wildshapeActor.system.abilities.int = workflow.actor.system.abilities.int;\n            wildshapeActor.system.abilities.wis = workflow.actor.system.abilities.wis;\n            wildshapeActor.system.attributes.prof = workflow.actor.system.attributes.prof;\n            delete wildshapeActor.system.attributes.attunement;\n            delete wildshapeActor.system.attributes.death;\n            delete wildshapeActor.system.attributes.encumbrance;\n            delete wildshapeActor.system.attributes.exhuastion;\n            delete wildshapeActor.system.attributes.hd;\n            delete wildshapeActor.system.attributes.init;\n            delete wildshapeActor.system.attributes.inspiration;\n            delete wildshapeActor.system.attributes.spellcasting;\n            delete wildshapeActor.system.attributes.spelldc;\n            delete wildshapeActor.system.bonuses;\n            delete wildshapeActor.system.currency;\n            delete wildshapeActor.system.details;\n            delete wildshapeActor.system.resources;\n            delete wildshapeActor.system.scale;\n            let sourceSkills = workflow.actor.system.skills;\n            let targetSkills = selectedActor.system.skills;\n            let skills = {};\n            for (let i of Object.keys(sourceSkills)) {\n                if (targetSkills[i].proficient > sourceSkills[i].proficient) skills[i] = {'value': targetSkills[i].proficient};\n            }\n            wildshapeActor.system.skills = skills;\n            delete wildshapeActor.system.tools;\n            wildshapeActor.system.traits = {\n                'size': selectedActor.system.traits.size\n            };\n            delete wildshapeActor.system.spells;\n            let mutateOptions = {\n                'name': 'Wild Shape',\n            }\n            async function effectMacro() {\n                await warpgate.revert(token.document, 'Wild Shape');\n            }\n            let druidLevels = workflow.actor.classes.druid?.system?.levels;\n            if (!druidLevels) return;\n            let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Wild Shape - Revert', false);\n            if (!featureData) return;\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Wild Shape - Revert');\n            let effectData = {\n                'name': 'Wild Shape',\n                'icon': workflow.item.img,\n                'duration': {\n                    'seconds': Math.min(druidLevels / 2) * 3600\n                },\n                'changes': [\n                    {\n                        'key': 'flags.midi-qol.fail.spell.vocal',\n                        'value': '1',\n                        'mode': 0,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.midi-qol.fail.spell.somatic',\n                        'value': '1',\n                        'mode': 0,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.midi-qol.fail.spell.material',\n                        'value': '1',\n                        'mode': 0,\n                        'priority': 20\n                    }\n                ],\n                'origin': workflow.item.uuid,\n                'flags': {\n                    'effectmacro': {\n                        'onDelete': {\n                            'script': chris.functionToString(effectMacro)\n                        }\n                    },\n                    'chris-premades': {\n                        'vae': {\n                            'button': featureData.name\n                        }\n                    }\n                },\n                'transfer': true\n            };\n            if (druidLevels === 20) delete effectData.changes;\n            let invalidTypes = [\n                'weapon',\n                'equipment',\n                'consumable',\n                'tool',\n                'container',\n                'loot',\n                'backpack'\n            ];\n            let items = workflow.actor.items.filter(i => invalidTypes.includes(i.type) && !i.system.equipped);\n            let itemUpdates = {};\n            for (let i of items) {\n                itemUpdates[i.name] = warpgate.CONST.DELETE\n            }\n            if (selection) {\n                for (let i = 0; selection.inputs.length > i; i++) {\n                    if (selection.inputs[i] === 'Merge / Drop') {\n                        itemUpdates[equipedItems[i].name] = warpgate.CONST.DELETE;\n                    }\n                }\n            }\n            let primalStrike = workflow.actor.flags['chris-premades']?.feature?.primalStrike;\n            let insigniaOfClaws = workflow.actor.flags['chris-premades']?.item?.insigniaOfClaws;\n            let targetItems = selectedActor.items.contents;\n            for (let i of targetItems) {\n                itemUpdates[i.name] = i.toObject();\n                if (primalStrike && itemUpdates[i.name].type === 'weapon') setProperty(itemUpdates[i.name], 'system.properties.mgc', true);\n                if (insigniaOfClaws && itemUpdates[i.name].type === 'weapon') {\n                    try {\n                        itemUpdates[i.name].system.damage.parts[0][0] += ' + 1';\n                    } catch (error) {}\n                    itemUpdates[i.name].system.attackBonus = 1;\n                }\n                itemUpdates[i.name].flags['tidy5e-sheet'] = {'favorite': true};\n                if (invalidTypes.includes(itemUpdates[i.name].type)) continue;\n                itemUpdates[i.name].flags['custom-character-sheet-sections'] = {'sectionName': 'Wild Shape'}\n            }\n            itemUpdates[featureData.name] = featureData;\n            let updates = {\n                'token': wildshapeToken,\n                'actor': wildshapeActor,\n                'embedded': {\n                    'Item': itemUpdates,\n                    'ActiveEffect': {\n                        [effectData.name]: effectData\n                    }\n                }\n            }\n            await warpgate.mutate(workflow.token.document, updates, {}, mutateOptions);\n        }\n    });\n}\nasync function hook() {\n    //handle rollover damage\n}\nasync function revert({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.token.actor, 'Wild Shape');\n    if (!effect) return;\n    await chris.removeEffect(effect);\n}\nexport let wildShape = {\n    'item': item,\n    'hook': hook,\n    'revert': revert\n}","import {constants} from '../../../../constants.js';\nimport {chris} from '../../../../helperFunctions.js';\nimport {effectAuras} from '../../../../utility/effectAuras.js';\nlet choices = [\n    'Shadowy Tendrils',\n    'Teleport',\n    'Intangible Spirit',\n    'Magic Infusion',\n    'Retribution',\n    'Protective Lights',\n    'Flowers and Vines',\n    'Bolt of Light'\n];\nasync function item({speaker, actor, token, character, item, args, scope, workflow}) {\n    let effect = chris.findEffect(workflow.actor, 'Wild Surge');\n    if (effect) {\n        await chris.removeEffect(effect);\n        await warpgate.wait(100);\n    }\n    let rollFormula = '1d8';\n    let controlledSurge = chris.getItem(workflow.actor, 'Controlled Surge');\n    if (controlledSurge) rollFormula = '2d8';\n    let roll = await new Roll(rollFormula).roll({async: true});\n    roll.toMessage({\n        rollMode: 'roll',\n        speaker: {'alias': name},\n        flavor: workflow.item.name\n    });\n    let selection;\n    if (controlledSurge) {\n        let roll1 = roll.terms[0].values[0] - 1;\n        let roll2 = roll.terms[0].values[1] - 1;\n        if (roll1 === roll2) {\n            selection = await chris.dialog(workflow.item.name, choices.map(i => [i, i]), 'Which effect?');\n        } else {\n            selection = await chris.dialog(workflow.item.name, [[choices[roll1], choices[roll1]], [choices[roll2], choices[roll2]]], 'Which effect?');\n        }\n    } else {\n        selection = choices[roll.total - 1];\n    }\n    let effectData;\n    let featureData;\n    let feature;\n    let options = {\n        'permanent': false,\n        'name': 'Wild Surge',\n        'description': 'Wild Surge'\n    };\n    async function effectMacro() {\n        await warpgate.revert(token.document, 'Wild Surge');\n    }\n    async function doMutate(featureName) {\n        let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Wild Surge - ' + featureName);\n        if (!featureData) return;\n        featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Wild Surge - ' + featureName);\n        delete featureData._id;\n        let effectData = {\n            'name': 'Wild Surge',\n            'icon': workflow.item.img,\n            'origin': workflow.item.uuid,\n            'duration': {\n                'seconds': 60\n            },\n            'flags': {\n                'effectmacro': {\n                    'onDelete': {\n                        'script': chris.functionToString(effectMacro)\n                    }\n                },\n                'chris-premades': {\n                    'vae': {\n                        'button': featureData.name\n                    }\n                }\n            }\n        };\n        let updates = {\n            'embedded': {\n                'Item': {\n                    [featureData.name]: featureData\n                },\n                'ActiveEffect': {\n                    [effectData.name]: effectData\n                }\n            }\n        };\n        await warpgate.mutate(workflow.token.document, updates, {}, options);\n    }\n    switch(selection) {\n        case 'Shadowy Tendrils':\n            featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Wild Surge - Shadowy Tendrils');\n            if (!featureData) return;\n            featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Wild Surge - Shadowy Tendrils');\n            delete featureData._id;\n            feature = new CONFIG.Item.documentClass(featureData, {'parent': workflow.actor});\n            await warpgate.wait(100);\n            await feature.use();\n            let tRoll = await new Roll('1d12[temphp]').roll({async: true});\n            tRoll.toMessage({\n                rollMode: 'roll',\n                speaker: {'alias': name},\n                flavor: featureData.name\n            });\n            await chris.applyDamage([workflow.token], tRoll.total, 'temphp');\n            return;\n        case 'Teleport':\n            await doMutate('Teleport');\n            feature = workflow.actor.items.getName('Wild Surge - Teleport');\n            if (feature) await feature.use();\n            return;\n        case 'Intangible Spirit':\n            await doMutate('Intangible Spirit');\n            feature = workflow.actor.items.getName('Wild Surge - Intangible Spirit');\n            if (feature) await feature.use();\n            return;\n        case 'Magic Infusion':\n            let weapons = workflow.actor.items.filter(i => i.type === 'weapon');\n            if (!weapons.length) return;\n            let weapon;\n            if (weapons.length === 1) {\n                weapon = weapons[0];\n            } else {\n                [weapon] = await chris.selectDocument('What weapon?', weapons);\n                if (!weapon) return;\n            }\n            let damage = duplicate(weapon.toObject()).system.damage;\n            for (let i = 0; i < damage.parts.length; i++) {\n                damage.parts[i] = [\n                    damage.parts[i][0].replaceAll(damage.parts[i][1], 'force'),\n                    damage.parts[i][1] = 'force'\n                ];\n            }\n            let versatile = weapon.system.damage.versatile.toLowerCase();\n            if (versatile != '') {\n                let flavors = new Set();\n                let versatileRoll = await new Roll(weapon.system.damage.versatile, workflow.actor.getRollData()).evaluate({'async': true});\n                for (let i of versatileRoll.terms) {\n                    if (i.flavor != '') flavors.add(i.flavor);\n                }\n                for (let i of Array.from(flavors)) {\n                    versatile = versatile.replaceAll(i, 'force');\n                }\n                damage.versatile = versatile;\n            }\n            effectData = {\n                'name': 'Wild Surge',\n                'icon': workflow.item.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 60\n                },\n                'flags': {\n                    'effectmacro': {\n                        'onDelete': {\n                            'script': chris.functionToString(effectMacro)\n                        }\n                    },\n                    'chris-premades': {\n                        'vae': {\n                            'button': weapon.name\n                        }\n                    }\n                }\n            };\n            let updates = {\n                'embedded': {\n                    'Item': {\n                        [weapon.name]: {\n                            'system': {\n                                'damage': damage,\n                                'properties': {\n                                    'thr': true,\n                                    'lgt': true\n                                },\n                                'range': {\n                                    'long': 60,\n                                    'value': 20\n                                }\n                            }\n                        }\n                    },\n                    'ActiveEffect': {\n                        [effectData.name]: effectData\n                    }\n                }\n            };\n            await warpgate.mutate(workflow.token.document, updates, {}, options);\n            return;\n        case 'Retribution':\n            await doMutate('Retribution');\n            return;\n        case 'Protective Lights':\n            effectData = {\n                'icon': workflow.item.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 60\n                },\n                'name': 'Wild Surge',\n                'changes': [\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.name',\n                        'mode': 5,\n                        'value': 'protectiveLights',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.castLevel',\n                        'mode': 5,\n                        'value': 1,\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.range',\n                        'mode': 5,\n                        'value': '10',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.disposition',\n                        'mode': 5,\n                        'value': 'ally',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.effectName',\n                        'mode': 5,\n                        'value': 'Wild Surge - Protective Lights',\n                        'priority': 20\n                    },\n                    {\n                        'key': 'flags.chris-premades.aura.protectiveLights.macroName',\n                        'mode': 5,\n                        'value': 'protectiveLights',\n                        'priority': 20\n                    }\n                ],\n                flags: {\n                    'effectmacro': {\n                        'onDelete': {\n                            'script': 'await chrisPremades.macros.wildSurge.protectiveLights.end(token);'\n                        }\n                    }\n                }\n            };\n            let flagAuras = {\n                'protectiveLights': {\n                    'name': 'protectiveLights',\n                    'castLevel': 1,\n                    'range': 10,\n                    'disposition': 'ally',\n                    'effectName': 'Wild Surge - Protective Lights',\n                    'macroName': 'protectiveLights'\n                }\n            }\n            await chris.createEffect(workflow.actor, effectData);\n            effectAuras.add(flagAuras, workflow.token.document.uuid, true);\n            return;\n        case 'Flowers and Vines':\n            let templateData = {\n                't': 'circle',\n                'x': workflow.token.center.x,\n                'y': workflow.token.center.y,\n                'distance': 15,\n                'direction': 0,\n                'angle': 0,\n                'user': game.user,\n                'fillColor': game.user.color\n            }\n            let template = await chris.createTemplate(templateData);\n            await warpgate.wait(200);\n            await tokenAttacher.attachElementsToToken([template], workflow.token, false);\n            effectData = {\n                'icon': workflow.item.img,\n                'origin': workflow.item.uuid,\n                'duration': {\n                    'seconds': 60\n                },\n                'name': 'Wild Surge',\n                'flags': {\n                    'effectmacro': {\n                        'onDelete': {\n                            'script': 'let template = await fromUuid(\"' + template.uuid + '\"); if (template) await template.delete();'\n                        }\n                    }\n                }\n            };\n            await chris.createEffect(workflow.actor, effectData);\n            return;\n        case 'Bolt of Light':\n            await doMutate('Bolt of Light');\n            feature = workflow.actor.items.getName('Wild Surge - Bolt of Light');\n            if (feature) {\n                let targets;\n                let nearbyTargets = chris.findNearby(workflow.token, 30, 'enemy', true);\n                if (!nearbyTargets.length) return;\n                if (nearbyTargets.length === 1) {\n                    targets = [nearbyTargets[0].uuid];\n                } else {\n                    let selection = await await chris.selectTarget(feature.name, constants.okCancel, nearbyTargets, true, 'one', false, false, 'Select a target:');\n                    if (!selection.buttons) return;\n                    targets = selection.inputs.filter(i => i);\n                }\n                let [config, options] = constants.syntheticItemWorkflowOptions(targets);\n                await MidiQOL.completeItemUse(feature, config, options);\n            }\n            return;\n    }\n}\nasync function protectiveLightsEnd(token) {\n    effectAuras.remove('protectiveLights', token.document.uuid);\n}\nasync function protectiveLightsAura(token, selectedAura) {\n    let originToken = await fromUuid(selectedAura.tokenUuid);\n    if (!originToken) return;\n    let originActor = originToken.actor;\n    let auraEffect = chris.findEffect(originActor, 'Wild Surge');\n    if (!auraEffect) return;\n    let originItem = await fromUuid(auraEffect.origin);\n    if (!originItem) return;\n    let effectData = {\n        'name': 'Wild Surge - Protective Lights',\n        'icon': originItem.img,\n        'origin': originItem.uuid,\n        'duration': {\n            'seconds': 604800\n        },\n        'changes': [\n            {\n                'key': 'system.attributes.ac.bonus',\n                'mode': 2,\n                'value': '+1',\n                'priority': 20\n            }\n        ],\n        'flags': {\n            'chris-premades': {\n                'aura': true,\n                'effect': {\n                    'noAnimation': true\n                }\n            }\n        }\n    };\n    let effect = chris.findEffect(token.actor, effectData.name);\n    if (effect?.origin === effectData.origin) return;\n    if (effect) await chris.removeEffect(effect);\n    await chris.createEffect(token.actor, effectData);\n}\nasync function intangibleSpirit({speaker, actor, token, character, item, args, scope, workflow}) {\n    let sourceActor = game.actors.getName('CPR - Intangible Spirit');\n    if (!sourceActor) return;\n    let tokenDocument = await sourceActor.getTokenDocument();\n    let options = {\n        'controllingActor': workflow.actor,\n        'crosshairs': {\n            'interval': tokenDocument.width % 2 === 0 ? 1 : -1\n        }\n    };\n    let featureData = await chris.getItemFromCompendium('chris-premades.CPR Class Feature Items', 'Wild Surge - Intangible Spirit Explode');\n    if (!featureData) return;\n    featureData.system.description.value = chris.getItemDescription('CPR - Descriptions', 'Wild Surge - Intangible Spirit Explode');\n    featureData.system.save.dc = chris.getSpellDC(workflow.item);\n    let updates = {\n        'embedded': {\n            'Item': {\n                [featureData.name]: featureData\n            }\n        }\n    };\n    let type = await chris.dialog(workflow.item.name, [['Flumph', 'flumph'], ['Pixie', 'pixie']], 'What form does the intangible spirit take?') ?? 'flumph';\n    let originItem = chris.getItem(workflow.actor, 'Wild Surge');\n    if (!originItem) return;\n    let avatarImg = chris.getConfiguration(originItem, type + '-avatar');\n    let tokenImg = chris.getConfiguration(originItem, type + '-token');\n    if (avatarImg) setProperty(updates, 'actor.img', avatarImg);\n    if (tokenImg) {\n        setProperty(updates, 'actor.prototypeToken.texture.src', tokenImg);\n        setProperty(updates, 'token.texture.src', tokenImg);\n    }\n    let spawnedTokens = await warpgate.spawn(tokenDocument, updates, {}, options);\n    if (!spawnedTokens) return;\n    let spawnedToken = game.canvas.scene.tokens.get(spawnedTokens[0]);\n    if (!spawnedToken) return;\n    let effectData = {\n        'name': workflow.item.name,\n        'icon': workflow.item.img,\n        'origin': workflow.item.uuid,\n        'duration': {\n            'seconds': 6\n        },\n        'flags': {\n            'effectmacro': {\n                'onTurnEnd': {\n                    'script': 'let token = await fromUuid(\"' + spawnedToken.uuid + '\"); if (!token) return; let feature = token.actor.items.getName(\"Wild Surge - Intangible Spirit Explode\"); if (feature) await feature.use(); await warpgate.dismiss(\"' + spawnedToken.id + '\"); await effect.delete();'\n                }\n            }\n        }\n    };\n    await chris.createEffect(workflow.actor, effectData);\n}\nasync function retribution(workflow, token) {\n    if (!constants.attacks.includes(workflow.item.system.actionType)) return;\n    if (workflow.hitTargets.size != 1) return;\n    let feature = token.actor.items.getName('Wild Surge - Retribution');\n    if (!feature) return;\n    let [config, options] = constants.syntheticItemWorkflowOptions([workflow.token.document.uuid]);\n    await warpgate.wait(100);\n    await MidiQOL.completeItemUse(feature, config, options);\n}\nexport let wildSurge = {\n    'item': item,\n    'intangibleSpirit': intangibleSpirit,\n    'retribution': retribution,\n    'protectiveLights': {\n        'end': protectiveLightsEnd,\n        'aura': protectiveLightsAura\n    }\n}","import {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function wildhunt(workflow) {\n    if (workflow.targets.size === 0 || workflow.disadvanage) return;\n    let targetToken = workflow.targets.first();\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Wildhunt');\n    if (!effect) return;\n    let distance = chris.getDistance(workflow.token, targetToken);\n    if (distance > 30) return;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'wildhunt', 50);\n    if (!queueSetup) return;\n    workflow.advantage = false;\n    workflow.rollOptions.advantage = false;\n    workflow.flankingAdvantage = false;\n    workflow.attackAdvAttribution.add('Wildhunt');\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../helperFunctions.js';\nexport async function witherAndBloom({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size === 0) return;\n    let healTargets = [];\n    for (let target of workflow.damageList) {\n        let targetToken = await fromUuid(target.tokenUuid);\n        if (workflow.token.document.disposition != targetToken.disposition) continue;\n        target.damageDetail = [\n            {\n                'damage': 0,\n                'type': 'necrotic'\n            }\n        ];\n        target.totalDamage = 0;\n        target.newHP = target.oldHP;\n        target.hpDamage = 0;\n        target.appliedDamage = 0;\n        healTargets.push(targetToken.object);\n    }\n    if (healTargets.length === 0) return;\n    let buttons = [\n        {\n            'label': 'Yes',\n            'value': true\n        }, {\n            'label': 'No',\n            'value': false\n        }\n    ];\n    let selection = await chris.selectTarget('Heal a target?', buttons, healTargets, true, 'one');\n    if (!selection.buttons) return;\n    let targetTokenUuid = selection.inputs.find(id => id != false);\n    if (!targetTokenUuid) return;\n    async function effectMacro () {\n        if (actor.type != 'character') {\n            effect.delete();\n            return;\n        }\n        let classDice = [];\n        let classes = actor.classes;\n        for (let [key, value] of Object.entries(classes)) {\n            let hitDiceAvailable = value.system.levels - value.system.hitDiceUsed;\n            if (hitDiceAvailable != 0) classDice.push({\n                'class': key,\n                'hitDice': value.system.hitDice,\n                'available': hitDiceAvailable,\n                'max': value.system.levels\n            });\n        }\n        if (classDice.length === 0) {\n            effect.delete();\n            return;\n        }\n        let inputs = [];\n        let outputs = [];\n        for (let i of classDice) {\n            inputs.push(i.class + ' (' + i.hitDice + ') [' + i.available + '/' + i.max + ']:');\n            outputs.push(\n                {\n                    'class': i.class,\n                    'dice': i.hitDice\n                }\n            );\n        }\n        let buttons = [\n            {\n                'label': 'Yes',\n                'value': true\n            }, {\n                'label': 'No',\n                'value': false\n            }\n        ];\n        let maxHitDice = effect.flags['chris-premades'].spell.witherAndBloom.castLevel;\n        let selection = await chrisPremades.helpers.numberDialog('Heal using hit dice? Max: ' + maxHitDice, buttons, inputs);\n        if (!selection.buttons) {\n            effect.delete();\n            return;\n        }\n        let selectedTotal = 0;\n        let healingFormula = '';\n        for (let i = 0; selection.inputs.length > i; i++) {\n            if (isNaN(selection.inputs[i])) continue;\n            selectedTotal += selection.inputs[i];\n            healingFormula = healingFormula + selection.inputs[i] + outputs[i].dice + '[healing] + ';\n        }\n        if (selectedTotal > maxHitDice) {\n            ui.notifications.info('Too many hit dice selected!');\n            effect.delete();\n            return;\n        }\n        let conMod = actor.system.abilities.con.mod;\n        let spellcastingMod = chrisPremades.helpers.getSpellMod(origin);\n        healingFormula = healingFormula + '(' + selectedTotal + ' * ' + conMod + ') + ' + spellcastingMod;\n        let healingRoll = await new Roll(healingFormula).roll({async: true});\n        let itemCardId = effect.flags['chris-premades'].spell.witherAndBloom.itemCardId;\n        await chrisPremades.helpers.applyWorkflowDamage(token, healingRoll, 'healing', [token], origin.name, itemCardId);\n        for (let i = 0; selection.inputs.length > i; i++) {\n            if (isNaN(selection.inputs[i])) continue;\n            await actor.classes[outputs[i].class].update({\n                'system.hitDiceUsed': actor.classes[outputs[i].class].system.hitDiceUsed + selection.inputs[i]\n            });\n        }\n        effect.delete();\n    }\n    let effectData = {\n        'label': workflow.item.name,\n        'icon': workflow.item.img,\n        'duration': {\n            'seconds': 6\n        },\n        'origin': workflow.item.uuid,\n        'flags': {\n            'effectmacro': {\n                'onCreate': {\n                    'script': chris.functionToString(effectMacro)\n                }\n            },\n            'chris-premades': {\n                'spell': {\n                    'witherAndBloom': {\n                        'castLevel': workflow.castData.castLevel - 1,\n                        'itemCardId': workflow.itemCardId\n                    }\n                }\n            }\n        }\n    };\n    let targetToken = await fromUuid(targetTokenUuid);\n    await chris.createEffect(targetToken.actor, effectData);\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js'\nimport {queue} from '../../utility/queue.js';\nlet strikeUsed = false;\nasync function rest(actor ,data) {\n    let item = chris.getItem(actor, 'Wraps of Dyamak');\n    if (!item) return;\n    if (!item.system.equipped || item.system.attunement === 1) return;\n    let feature = chris.getItem(actor, 'Ki Points');\n    if (!feature) return;\n    let tokens = actor.getActiveTokens();\n    if (!tokens) return;\n    await chris.applyDamage([tokens[0]], feature.system.uses.max, 'temphp');\n    await item.displayCard();\n}\nasync function attack({speaker, actor, token, character, item, args, scope, workflow}) {\n    console.log(workflow);\n    let unarmedStrike = chris.getItem(workflow.actor, 'Unarmed Strike (Monk)');\n    if (!unarmedStrike) return;\n    if (workflow.item.uuid != unarmedStrike.uuid) return;\n    let wrapsOffDyamakItem = chris.getItem(workflow.actor, 'Wraps of Dyamak');\n    if (!wrapsOffDyamakItem) return;\n    let tier = chris.getConfiguration(wrapsOffDyamakItem, 'tier') ?? 1;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'wrapsOffDyamak', 150);\n    if (!queueSetup) return;\n    let attackRoll = await chris.addToRoll(workflow.attackRoll, tier);\n    await workflow.setAttackRoll(attackRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function damage({speaker, actor, token, character, item, args, scope, workflow}) {\n    let unarmedStrike = chris.getItem(workflow.actor, 'Unarmed Strike (Monk)');\n    if (!unarmedStrike) return;\n    if (workflow.item.uuid != unarmedStrike.uuid) return;\n    let wrapsOffDyamakItem = chris.getItem(workflow.actor, 'Wraps of Dyamak');\n    if (!wrapsOffDyamakItem) return;\n    let tier = chris.getConfiguration(wrapsOffDyamakItem, 'tier') ?? 1;\n    let queueSetup = await queue.setup(workflow.item.uuid, 'wrapsOffDyamak', 150);\n    if (!queueSetup) return;\n    let damageFormula = workflow.damageRoll._formula + ' + ' + tier + '[' + workflow.damageRoll.terms[0].flavor + ']';\n    if (tier === 3 && workflow.hitTargets.size) {\n        if (wrapsOffDyamakItem.system.uses.value) {\n            let selection = await chris.dialog(wrapsOffDyamakItem.name, constants.yesNo, 'Make a ravenous strike?');\n            if (selection) {\n                let bonusDamageFormula = '6d6[necrotic]';\n                if (workflow.isCritical) bonusDamageFormula = chris.getCriticalFormula(bonusDamageFormula);\n                damageFormula += ' + ' + bonusDamageFormula;\n                wrapsOffDyamakItem.update({'system.uses.value': 0});\n                wrapsOffDyamakItem.displayCard();\n                strikeUsed = true;\n            }\n        }\n    }\n    if (workflow.isCritical) {\n        if (tier >= 2) {\n            let crimsonMistFeature = chris.getItem(workflow.actor, 'Crimson Mist');\n            if (crimsonMistFeature && crimsonMistFeature.system.uses.value != 1) crimsonMistFeature.update({'system.uses.value': 1}); \n        }\n        if (tier === 3 && wrapsOffDyamakItem.system.uses.value != 1) wrapsOffDyamakItem.update({'system.uses.value': 1});\n    }\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}\nasync function heal({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (!strikeUsed) return;\n    let healing = chris.totalDamageType(workflow.targets.first().actor, workflow.damageDetail, 'necrotic');\n    await chris.applyDamage([workflow.token], healing, 'healing');\n    strikeUsed = false;\n}\nexport let wrapsOffDyamak = {\n    'rest': rest,\n    'attack': attack,\n    'damage': damage,\n    'heal': heal\n}","import {chris} from '../../../../helperFunctions.js';\nimport {queue} from '../../../../utility/queue.js';\nexport async function wrathOfTheStorm({speaker, actor, token, character, item, args, scope, workflow}) {\n    let queueSetup = await queue.setup(workflow.item.uuid, 'wrathOfTheStorm', 50);\n    if (!queueSetup) return;\n    let selection = await chris.dialog('What damage type?', [['Lightning', '[lightning]'], ['Thunder', '[thunder]']]);\n    if (!selection) selection = 'lightning';\n    let damageFormula = workflow.damageRoll._formula + selection;\n    let damageRoll = await new Roll(damageFormula).roll({async: true});\n    await workflow.setDamageRoll(damageRoll);\n    queue.remove(workflow.item.uuid);\n}","import {chris} from '../../../../helperFunctions.js';\nexport async function zealousPresence({speaker, actor, token, character, item, args, scope, workflow}) {\n    if (workflow.targets.size <= 10) return;\n    let buttons = [\n        {\n            'label': 'OK',\n            'value': true\n        }, {\n            'label': 'Cancel',\n            'value': false\n        }\n    ];\n    let selection = await chris.selectTarget('Who should get targeted? Max: 10', buttons, Array.from(workflow.targets), false, 'multiple');\n    if (!selection.buttons) return;\n    let newTargets = [];\n    for (let i of selection.inputs) {\n        let count = 0;\n        if (i) {\n            count++;\n            if (count > 10) {\n                ui.notifications.info('Too many targets selected!');\n                break;\n            }\n            newTargets.push(i);\n        }\n    }\n    chris.updateTargets(newTargets);\n}","import {constants} from '../../../constants.js';\nimport {chris} from '../../../helperFunctions.js';\nimport {queue} from '../../../utility/queue.js';\nexport async function undeadFortitude(targetToken, {workflow, ditem}) {\n    if (ditem.newHP != 0 || ditem.oldHP === 0) return;\n    let targetActor = targetToken.actor;\n    let effect = chris.findEffect(targetActor, 'Undead Fortitude');\n    if (!effect) return;\n    if (workflow.isCritical || chris.checkTrait(targetActor, 'di', 'healing') || chris.totalDamageType(targetActor, ditem.damageDetail[0], 'radiant') > 0 || chris.totalDamageType(targetActor, ditem.damageDetail[0], 'none')) return;\n    let originItem = await fromUuid(effect.origin);\n    if (!originItem) return;\n    let queueSetup = await queue.setup(workflow.uuid, 'undeadFortitude', 389);\n    if (!queueSetup) return;\n    let featureData = duplicate(originItem.toObject());\n    let damageDealt = ditem.appliedDamage;\n    featureData.system.save.dc = damageDealt + featureData.system.save.dc;\n    delete featureData._id;\n    let feature = new CONFIG.Item.documentClass(featureData, {'parent': targetActor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([targetToken.document.uuid]);\n    let featureWorkflow = await MidiQOL.completeItemUse(feature, config, options);\n    if (featureWorkflow.failedSaves.size === 1) {\n        queue.remove(workflow.uuid);\n        return;\n    }\n    ditem.newHP = 1;\n    ditem.hpDamage = Math.abs(ditem.newHP - ditem.oldHP);\n    queue.remove(workflow.uuid);\n}\n","import {undeadFortitude} from './undeadFortitude.js';\nexport let zombie = {\n    'undeadFortitude': undeadFortitude\n}","import {constants} from '../../constants.js';\nimport {chris} from '../../helperFunctions.js';\nasync function bestZone(token) {\n    let templates = chris.tokenTemplates(token.document);\n    let bestDC = null;\n    let bestOriginUuid;\n    for (let i of templates) {\n        let testTemplate = canvas.scene.collections.templates.get(i);\n        if (!testTemplate) continue;\n        let testOriginUuid = testTemplate.flags['midi-qol']?.originUuid;\n        if (!testOriginUuid) continue;\n        let testOriginItem = await fromUuid(testOriginUuid);\n        if (testOriginItem.name != 'Zone of Truth') continue;\n        let testDC = chris.getSpellDC(testOriginItem);\n        if (testDC > bestDC) {\n            bestDC = testDC;\n            bestOriginUuid = testOriginUuid;\n        }\n    }\n    return bestOriginUuid;\n}\nasync function inZone(token, template) {\n    let originUuid = template.flags['midi-qol']?.originUuid;\n    if (!originUuid) return;\n    if (chris.inCombat()) {\n        let turnEntered = template.flags['chris-premades']?.spell?.zoneOfTruth?.tokens?.[token.id];\n        let currentTurn = game.combat.round + '-' + game.combat.turn;\n        if (currentTurn === turnEntered) return;\n        await template.setFlag('chris-premades', 'spell.zoneOfTruth.tokens.' + token.id, currentTurn);\n    }\n    let bestOriginUuid = await bestZone(token);\n    if (bestOriginUuid != originUuid) return;\n    let originItem = await fromUuid(originUuid);\n    if (!originItem) return;\n    let effectData = {\n        'label': originItem.name,\n        'icon': originItem.img,\n        'duration': {\n            'seconds': 600\n        },\n        'origin': originItem.uuid,\n    };\n    let effect = chris.findEffect(token.actor, 'Zone of Truth');\n    if (effect) {\n        if (effect.origin === originUuid) return;\n        await chris.removeEffect(effect);\n        await chris.createEffect(token.actor, effectData);\n        return;\n    }\n    let spellObject = duplicate(originItem.toObject());\n    delete(spellObject.flags.templatemacro);\n    spellObject.system.range = {\n        'value': null,\n        'long': null,\n        'units': ''\n    };\n    spellObject.system.target = {\n        'value': 1,\n        'width': null,\n        'units': '',\n        'type': 'creature'\n    }\n    spellObject.system.actionType = 'save';\n    spellObject.system.save = {\n        'ability': 'cha',\n        'dc': chris.getSpellDC(originItem),\n        'scaling': 'flat'\n    }\n    spellObject.system.preparation.mode = 'atwill';\n    let spell = new CONFIG.Item.documentClass(spellObject, {'parent': originItem.actor});\n    let [config, options] = constants.syntheticItemWorkflowOptions([token.document.uuid]);\n    let spellWorkflow = await MidiQOL.completeItemUse(spell, config, options);\n    if (spellWorkflow.failedSaves.size != 1) return;\n    await chris.createEffect(token.actor, effectData);\n}\nasync function leaveZone(token, template) {\n    if (chris.inCombat()) {\n        await template.setFlag('chris-premades', 'spell.zoneOfTruth.tokens.' + token.id, '');\n    }\n    let effect = chris.findEffect(token.actor, 'Zone of Truth');\n    if (!effect) return;\n    let originUuid = template.flags['midi-qol']?.originUuid;\n    if (!originUuid) return;\n    if (effect.origin != originUuid) return;\n    let bestOriginUuid = await bestZone(token);\n    if (!bestOriginUuid) await chris.removeEffect(effect);\n}\nexport let zoneOfTruth = {\n    'inZone': inZone,\n    'leaveZone': leaveZone\n}","import {aasimarRadiantSoul} from './macros/raceFeatures/aasimar/radiantSoul.js';\nimport {aberrantSpirit} from './macros/monsterFeatures/aberrantSpirit/aberrantSpirit.js';\nimport {acidArrow} from './macros/spells/acidArrow.js';\nimport {actions} from './macros/actions/actions.js';\nimport {ancestralProtectors} from './macros/classFeatures/barbarian/ancestralGuardian/ancestralProtectors.js';\nimport {animateDead} from './macros/spells/animateDead.js';\nimport {animatingPerformance} from './macros/classFeatures/bard/collegeOfCreation/animatingPerformance.js';\nimport {antagonize} from './macros/spells/antagonize.js';\nimport {arcaneJolt} from './macros/classFeatures/artificer/battleSmith/arcaneJolt.js';\nimport {arcaneWard} from './macros/classFeatures/wizard/schoolOfAbjuration/arcaneWard.js';\nimport {armorModel} from './macros/classFeatures/artificer/armorer/armorModel.js';\nimport {armorOfAgathys} from './macros/spells/armorOfAgathys.js';\nimport {armorOfMagicalStrength} from './macros/classFeatures/artificer/infusions/armorOfMagicalStrength.js';\nimport {auraOfAlacrity} from './macros/classFeatures/paladin/oathOfGlory/auraOfAlacrity.js';\nimport {auraOfCourage} from './macros/classFeatures/paladin/auraOfCourage.js';\nimport {auraOfDevotion} from './macros/classFeatures/paladin/oathOfDevotion/auraOfDevotion.js';\nimport {auraOfHate} from './macros/classFeatures/paladin/oathbreaker/auraOfHate.js';\nimport {auraOfLife} from './macros/spells/auraOfLife.js';\nimport {auraOfProtection} from './macros/classFeatures/paladin/auraOfProtection.js';\nimport {auraOfPurity} from './macros/spells/auraOfPurity.js';\nimport {auraOfVitality} from './macros/spells/auraOfVitality.js';\nimport {auraOfWarding} from './macros/classFeatures/paladin/oathOfTheAncients/auraOfWarding.js';\nimport {autoGnome} from './macros/monsterFeatures/autognome/autognome.js';\nimport {awakenedSpellbook} from './macros/classFeatures/wizard/orderOfScribes/awakenedSpellbook.js';\nimport {balmOfPeace} from './macros/classFeatures/cleric/peaceDomain/balmOfPeace.js';\nimport {bardicInspiration} from './macros/classFeatures/bard/bardicInspiration.js';\nimport {beaconOfHope} from './macros/spells/beaconOfHope.js';\nimport {beguilingTwist} from './macros/classFeatures/ranger/feyWanderer/beguilingTwist.js';\nimport {bestialSoul} from './macros/classFeatures/barbarian/beast/bestialSoul.js';\nimport {bestowCurse} from './macros/spells/bestowCurse.js';\nimport {bg3} from './macros/homebrew/bg3/bg3.js';\nimport {bigbysHand} from './macros/spells/bigbysHand.js';\nimport {binding} from './macros/classFeatures/bloodHunter/bloodCurses/binding.js';\nimport {blackrazor} from './macros/items/blackrazor.js';\nimport {bladeFlourish} from './macros/classFeatures/bard/collegeOfSwords/bladeFlourish.js'\nimport {bladesong} from './macros/classFeatures/wizard/bladesinging/bladesong.js';\nimport {blessedStrikes} from './macros/classFeatures/cleric/blessedStrikes.js';\nimport {blessingOfTheForge} from './macros/classFeatures/cleric/forgeDomain/blessingOfTheForge.js';\nimport {blessingOfTheRavenQueen} from './macros/raceFeatures/shadarKai/blessingOfTheRavenQueen.js';\nimport {blight} from './macros/spells/blight.js';\nimport {blink} from './macros/spells/blink.js';\nimport {bloodSpear} from './macros/items/bloodSpear.js';\nimport {bodak} from './macros/monsterFeatures/bodak/bodak.js';\nimport {bolsteringMagic} from './macros/classFeatures/barbarian/wildMagic/bolsteringMagic.js';\nimport {boomingBlade} from './macros/spells/boomingBlade.js';\nimport {bootsOfElvenkind} from './macros/items/bootsOfElvenkind.js';\nimport {borrowedKnowledge} from './macros/spells/borrowedKnowledge.js';\nimport {brandOfCastigation} from './macros/classFeatures/bloodHunter/brandOfCastigation/brandOfCastigation.js';\nimport {breathOfTheDragon} from './macros/classFeatures/monk/wayOfTheAscendantDragon/breathOfTheDragon.js';\nimport {breathWeapon} from './macros/raceFeatures/dragonborn/chromatic/breathWeapon.js';\nimport {bugbear} from './macros/monsterFeatures/bugBear/bugbear.js';\nimport {bulette} from './macros/monsterFeatures/bulette/bulette.js';\nimport {burningHands} from './macros/spells/burningHands.js';\nimport {callLightning} from './macros/spells/callLightning.js';\nimport {callTheHunt} from './macros/classFeatures/barbarian/beast/callTheHunt.js';\nimport {cartomancer} from './macros/feats/cartomancer.js';\nimport {catoblepas} from './macros/monsterFeatures/catoblepas/catoblepas.js';\nimport {celestialSpirit} from './macros/monsterFeatures/celestialSpirit/celestialSpirit.js';\nimport {chainLightning} from './macros/spells/chainLightning.js';\nimport {charmAnimalsAndPlants} from './macros/classFeatures/cleric/natureDomain/charmAnimalsAndPlants.js';\nimport {charmPerson} from './macros/spells/charmPerson.js';\nimport {chasme} from './macros/monsterFeatures/chasme/chasme.js';\nimport {chillTouch} from './macros/spells/chillTouch.js';\nimport {chromaticOrb} from './macros/spells/chromaticOrb.js';\nimport {circleOfMortality} from './macros/classFeatures/cleric/graveDomain/circleOfMortality.js';\nimport {clayGolem} from './macros/monsterFeatures/clayGolem/clayGolem.js';\nimport {cleave} from './macros/mechanics/cleave.js';\nimport {clockworkDefender} from './macros/monsterFeatures/clockworkDefender/clockworkDefender.js';\nimport {cloudStrike} from './macros/feats/strikeOfTheGiants/cloudStrike.js';\nimport {cloudkill} from './macros/spells/cloudkill.js';\nimport {compelledDuel} from './macros/spells/compelledDuel.js';\nimport {conditionResistanceEarly, conditionResistanceLate} from './macros/mechanics/conditionResistance.js';\nimport {conditionVulnerabilityEarly, conditionVulnerabilityLate} from './macros/mechanics/conditionVulnerability.js';\nimport {conjureAnimals} from './macros/spells/conjureAnimals.js';\nimport {conjureCelestial} from './macros/spells/conjureCelestial.js';\nimport {conjureElemental} from './macros/spells/conjureElemental.js';\nimport {conjureFey} from './macros/spells/conjureFey.js';\nimport {conjureMinorElementals} from './macros/spells/conjureMinorElementals.js';\nimport {conjureWoodlandBeings} from './macros/spells/conjureWoodlandBeings.js'\nimport {constructSpirit} from './macros/monsterFeatures/constructSpirit/constructSpirit.js';\nimport {controlUndead} from './macros/classFeatures/paladin/oathbreaker/controlUndead.js';\nimport {corpseFlower} from './macros/monsterFeatures/corpseFlower/corpseFlower.js';\nimport {createPactWeapon} from './macros/classFeatures/warlock/boons/pactOfTheBlade/createPactWeapon.js';\nimport {crimsonRite} from './macros/classFeatures/bloodHunter/crimsonRite/crimsonRite.js';\nimport {crusher} from './macros/feats/crusher.js';\nimport {crushingThrow} from './macros/classFeatures/barbarian/giant/crushingThrow.js';\nimport {crystalBlade} from './macros/items/crystalBlade.js';\nimport {dancingSword} from './macros/items/dancingSword.js';\nimport {dangerSense} from './macros/classFeatures/barbarian/dangerSense.js';\nimport {danseMacabre} from './macros/spells/danseMacabre.js';\nimport {darkOnesBlessing} from './macros/classFeatures/warlock/fiend/darkOnesBlessing.js';\nimport {darkness} from './macros/spells/darkness.js';\nimport {dawn} from './macros/spells/dawn.js';\nimport {deathWard} from './macros/spells/deathWard.js';\nimport {deepGnome} from './macros/monsterFeatures/deepGnome/deepGnome.js';\nimport {destructiveWave} from './macros/spells/destructiveWave.js';\nimport {destructiveWrath} from './macros/classFeatures/cleric/tempestDomain/destructiveWrath.js';\nimport {detectThoughts} from './macros/spells/detectThoughts.js';\nimport {disintegrate} from './macros/spells/disintegrate.js';\nimport {divineFury} from './macros/classFeatures/barbarian/zealot/divineFury.js';\nimport {divineSmite} from './macros/classFeatures/paladin/divineSmite.js';\nimport {divineStrike} from './macros/classFeatures/cleric/divineStrike.js';\nimport {draconicSpirit} from './macros/monsterFeatures/draconicSpirit/draconicSpirit.js';\nimport {draconicStrike} from './macros/classFeatures/monk/wayOfTheAscendantDragon/draconicStrike.js';\nimport {dragonVessel} from './macros/items/dragonVessel.js';\nimport {dragonsBreath} from './macros/spells/dragonsBreath.js';\nimport {dragonsWrath} from './macros/items/dragonsWrath.js';\nimport {dreadAmbusher} from './macros/classFeatures/ranger/gloomStalker/dreadAmbusher.js';\nimport {dreadLord} from './macros/classFeatures/paladin/oathbreaker/dreadLord.js';\nimport {dreadfulAspect} from './macros/classFeatures/paladin/oathbreaker/dreadfulAspect.js';\nimport {dreamEater} from './macros/monsterFeatures/dreamEater/dreamEater.js';\nimport {drow} from './macros/monsterFeatures/drow/drow.js';\nimport {dualWielder} from './macros/feats/dualWielder.js';\nimport {duergarMindMaster} from './macros/monsterFeatures/duergarMindMaster/duergarMindMaster.js';\nimport {duergar} from './macros/monsterFeatures/duergar/duergar.js';\nimport {durableMagic} from './macros/classFeatures/wizard/warMagic/durableMagic.js';\nimport {dybbuk} from './macros/monsterFeatures/dybbuk/dybbuk.js';\nimport {eladrinSeason} from './macros/raceFeatures/eladrin/eladrinSeason.js';\nimport {elderBrain} from './macros/monsterFeatures/elderBrain/elderBrain.js';\nimport {elderOblex} from './macros/monsterFeatures/elderOblex/elderOblex.js';\nimport {eldritchBlast} from './macros/spells/eldritchBlast.js';\nimport {eldritchSmite} from './macros/classFeatures/warlock/invocations/eldritchSmite.js';\nimport {elementalAdept} from './macros/feats/elementalAdept.js';\nimport {elementalCleaver} from './macros/classFeatures/barbarian/giant/elementalCleaver.js';\nimport {elementalWeapon} from './macros/spells/elementalWeapon.js';\nimport {elixirOfHealth} from './macros/items/elixirOfHealth.js';\nimport {emboldeningBond} from './macros/classFeatures/cleric/peaceDomain/emboldeningBond.js';\nimport {enhancedBond} from './macros/classFeatures/druid/circleOfWildfire/enhancedBond.js';\nimport {enhancedWeapon} from './macros/classFeatures/artificer/infusions/enhancedWeapon.js';\nimport {enlargeReduce} from './macros/spells/enlargeReduce.js';\nimport {experimentalElixir} from './macros/classFeatures/artificer/alchemist/experimentalElixir.js'\nimport {expertDivination} from './macros/classFeatures/wizard/schoolOfDivination/expertDivination.js';\nimport {explodingHeals} from './macros/mechanics/explodingHeals.js';\nimport {eyesOfMinuteSeeing} from './macros/items/eyesOfMinuteSeeing.js';\nimport {eyesOfTheEagle} from './macros/items/eyesOfTheEagle.js';\nimport {faerieFire} from './macros/spells/faerieFire.js';\nimport {fallenPuppet} from './macros/classFeatures/bloodHunter/bloodCurses/fallenPuppet.js';\nimport {farStep} from './macros/spells/farStep.js';\nimport {favoredFoe} from './macros/classFeatures/ranger/favoredFoe.js';\nimport {feyPresence} from './macros/classFeatures/warlock/archfey/feyPresence.js';\nimport {feySpirit} from './macros/monsterFeatures/feySpirit/feySpirit.js';\nimport {fiendishSpirit} from './macros/monsterFeatures/fiendishSpirit/fiendishSpirit.js';\nimport {findFamiliar} from './macros/spells/findFamiliar.js';\nimport {findGreaterSteed} from './macros/spells/findGreaterSteed.js';\nimport {findSteed} from './macros/spells/findSteed.js';\nimport {fireElemental} from './macros/monsterFeatures/fireElemental/fireElemental.js';\nimport {fireShield} from './macros/spells/fireShield.js';\nimport {fireSnake} from './macros/monsterFeatures/fireSnake/fireSnake.js';\nimport {fireStorm} from './macros/spells/fireStorm.js';\nimport {fireStrike} from './macros/feats/strikeOfTheGiants/fireStrike.js';\nimport {firearm} from './macros/mechanics/firearm.js';\nimport {flameBlade} from './macros/spells/flameBlade.js';\nimport {fly} from './macros/spells/fly.js';\nimport {focusedAim} from './macros/classFeatures/monk/focusedAim.js';\nimport {fogCloud} from './macros/spells/fogCloud.js';\nimport {formOfDread} from './macros/classFeatures/warlock/undead/formOfDread.js';\nimport {formOfTheBeast} from './macros/classFeatures/barbarian/beast/formOfTheBeast.js';\nimport {fragmentOfKrokulmar} from './macros/monsterFeatures/fragmentOfKrokulmar/fragmentOfKrokulmar.js';\nimport {frostFingers} from './macros/spells/frostFingers.js';\nimport {frostStrike} from './macros/feats/strikeOfTheGiants/frostStrike.js';\nimport {gallowsSpeaker} from './macros/monsterFeatures/gallowsSpeaker/gallowsSpeaker.js';\nimport {gatheredSwarm} from './macros/classFeatures/ranger/swarmKeeper/gatheredSwarm.js';\nimport {generic} from './macros/monsterFeatures/generic/generic.js';\nimport {ghast} from './macros/monsterFeatures/ghast/ghast.js';\nimport {gibberingMouther} from './macros/monsterFeatures/gibberingMouther/gibberingMouther.js';\nimport {giftOfTheChromaticDragon} from './macros/feats/giftOfTheChromaticDragon.js';\nimport {grapple} from './macros/generic/grapple.js';\nimport {graspOfAvarice} from './macros/feats/graspOfAvarice.js';\nimport {graspOfHadar} from './macros/classFeatures/warlock/invocations/graspOfHadar.js';\nimport {graveTouched} from './macros/classFeatures/warlock/undead/graveTouched.js';\nimport {grease} from './macros/spells/grease.js';\nimport {greenFlameBlade} from './macros/spells/greenFlameBlade.js';\nimport {grell} from './macros/monsterFeatures/grell/grell.js';\nimport {grimHarvest} from './macros/classFeatures/wizard/schoolOfNecromancy/grimHarvest.js';\nimport {grovelthrash} from './macros/items/grovelthrash.js';\nimport {grungPoison} from './macros/raceFeatures/grung/grungPoison.js';\nimport {guardianOfFaith} from './macros/spells/guardianOfFaith.js';\nimport {guardianOfNature} from './macros/spells/guardianOfNature.js';\nimport {hailOfThorns} from './macros/spells/hailOfThorns.js';\nimport {harnessDivinePower} from './macros/classFeatures/cleric/harnessDivinePower.js';\nimport {healingLight} from './macros/classFeatures/warlock/celestial/healingLight.js';\nimport {healingSpirit} from './macros/spells/healingSpirit.js';\nimport {heartOfTheStorm} from './macros/classFeatures/sorcerer/stormSorcery/heartOfTheStorm.js';\nimport {heatMetal} from './macros/spells/heatMetal.js';\nimport {hexWarrior} from './macros/classFeatures/warlock/hexblade/hexWarrior.js';\nimport {hexbladesCurse} from './macros/classFeatures/warlock/hexblade/hexbladesCurse.js';\nimport {hex} from './macros/spells/hex.js';\nimport {hezrou} from './macros/monsterFeatures/hezrou/hezrou.js';\nimport {hiddenStep} from './macros/raceFeatures/firbolg/hiddenStep.js';\nimport {hillStrike} from './macros/feats/strikeOfTheGiants/hillStrike.js';\nimport {hobgoblin} from './macros/monsterFeatures/hobgoblin/hobgoblin.js';\nimport {holyNimbus} from './macros/classFeatures/paladin/oathOfDevotion/holyNimbus.js';\nimport {holyWeapon} from './macros/spells/holyWeapon.js';\nimport {homunculusServant} from './macros/classFeatures/artificer/infusions/homunculusServant.js'\nimport {homunculus} from './macros/monsterFeatures/homunculus/homunculus.js';\nimport {hungerOfHadar} from './macros/spells/hungerOfHadar.js';\nimport {hungryJaws} from './macros/raceFeatures/lizardfolk/hungryJaws.js';\nimport {huntersMark} from './macros/spells/huntersMark.js';\nimport {hybridTransformation} from './macros/classFeatures/bloodHunter/orderOfTheLycan/hybridTransformation.js';\nimport {iceStorm} from './macros/spells/iceStorm.js';\nimport {infectiousFury} from './macros/classFeatures/barbarian/beast/infectiousFury.js';\nimport {insectPlague} from './macros/spells/insectPlague.js';\nimport {insightfulFighting} from './macros/classFeatures/rogue/inquisitive/insightfulFighting.js';\nimport {inspiringSmite} from './macros/classFeatures/paladin/oathOfGlory/inspiringSmite.js';\nimport {intellectDevourer} from './macros/monsterFeatures/intellectDevourer/intellectDevourer.js';\nimport {investitureOfFlame} from './macros/spells/investitureOfFlame.js';\nimport {investitureOfIce} from './macros/spells/investitureOfIce.js';\nimport {investitureOfStone} from './macros/spells/investitureOfStone.js';\nimport {investmentOfTheChainMaster} from './macros/classFeatures/warlock/invocations/investmentOfTheChainMaster.js';\nimport {javelinOfLightning} from './macros/items/javelinOfLightning.js';\nimport {kobold} from './macros/monsterFeatures/kobold/kobold.js';\nimport {labyrinthineRecall} from './macros/raceFeatures/minotaur/labyrinthineRecall.js';\nimport {lanternOfRevealing} from './macros/items/lanternOfRevealing.js';\nimport {legionOfOne} from './macros/classFeatures/fighter/echoKnight/legionOfOne.js';\nimport {leucrotta} from './macros/monsterFeatures/leucrotta/leucrotta.js';\nimport {lifeTransference} from './macros/spells/lifeTransference.js';\nimport {lightningArrow} from './macros/spells/lightningArrow.js';\nimport {lightningLure} from './macros/spells/lightningLure.js';\nimport {longLimbed} from './macros/raceFeatures/bugbear/longLimbed.js';\nimport {maddeningHex} from './macros/classFeatures/warlock/invocations/maddeningHex.js';\nimport {maelstromAura} from './macros/feats/maelstromAura.js';\nimport {magicMissile} from './macros/spells/magicMissile.js';\nimport {maneuvers} from './macros/classFeatures/fighter/battleMaster/maneuvers.js';\nimport {manifestEcho} from './macros/classFeatures/fighter/echoKnight/manifestEcho.js';\nimport {manifestMind} from './macros/classFeatures/wizard/orderOfScribes/manifestMind.js'\nimport {manualRolls} from './macros/mechanics/manualRolls.js';\nimport {massCureWounds} from './macros/spells/massCureWounds.js';\nimport {mastersAmulet} from './macros/items/mastersAmulet.js';\nimport {metaMagic} from './macros/classFeatures/sorcerer/metaMagic.js';\nimport {metallicBreathWeapon} from './macros/raceFeatures/dragonborn/metallic/metallicBreathWeapon.js';\nimport {mightyImpel} from './macros/classFeatures/barbarian/giant/mightyImpel.js';\nimport {mirrorImage} from './macros/spells/mirrorImage.js';\nimport {moonbeam} from './macros/spells/moonbeam.js';\nimport {moteOfPotential} from './macros/classFeatures/bard/collegeOfCreation/moteOfPotential.js';\nimport {mudMephit} from './macros/monsterFeatures/mudMephit/mudMephit.js';\nimport {muddledMind} from './macros/classFeatures/bloodHunter/bloodCurses/muddledMind.js';\nimport {mutagencraft} from './macros/classFeatures/bloodHunter/orderOfTheMutant/mutagencraft.js';\nimport {necroticShroud} from './macros/raceFeatures/aasimar/necroticShroud.js';\nimport {nightwalker} from './macros/monsterFeatures/nightwalker/nightwalker.js';\nimport {noConfiguration} from './macros/generic/noConfiguration.js';\nimport {oilOfSharpness} from './macros/items/oilOfSharpness.js';\nimport {oldBreathWeapon} from './macros/raceFeatures/dragonborn/oldBreathWeapon.js';\nimport {orcishFury} from './macros/feats/orcishFury.js';\nimport {overchannel} from './macros/classFeatures/wizard/schoolOfEvocation/overchannel.js';\nimport {piercer} from './macros/feats/piercer.js';\nimport {planarWanderer} from './macros/feats/planarWanderer.js';\nimport {potionOfDiminution} from './macros/items/potionOfDiminution.js';\nimport {potionOfFireBreath} from './macros/items/potionOfFireBreath.js';\nimport {potionOfGiantSize} from './macros/items/potionOfGiantSize.js';\nimport {potionOfGrowth} from './macros/items/potionOfGrowth.js';\nimport {potionOfMaximumPower} from './macros/items/potionOfMaximumPower.js';\nimport {potionOfPoison} from './macros/items/potionOfPoison.js';\nimport {potionOfVitality} from './macros/items/potionOfVitality.js';\nimport {preserveLife} from './macros/classFeatures/cleric/lifeDomain/preserveLife.js';\nimport {primalCompanion} from './macros/classFeatures/ranger/beastMaster/primalCompanion.js';\nimport {protectionFromEvilAndGood} from './macros/spells/protectionFromEvilAndGood.js';\nimport {radiantConsumption} from './macros/raceFeatures/aasimar/radiantConsumption.js';\nimport {radiantSoul} from './macros/classFeatures/warlock/celestial/radiantSoul.js';\nimport {radiantWeapon} from './macros/classFeatures/artificer/infusions/radiantWeapon.js';\nimport {rage} from './macros/classFeatures/barbarian/rage.js';\nimport {rayOfEnfeeblement} from './macros/spells/rayOfEnfeeblement.js';\nimport {reaper} from './macros/classFeatures/cleric/deathDomain/reaper.js';\nimport {relentlessEndurance} from './macros/raceFeatures/orc/relentlessEndurance.js';\nimport {relentless} from './macros/classFeatures/fighter/battleMaster/relentless.js';\nimport {removeTemplate} from './macros/generic/removeTemplate.js';\nimport {repeatingShot} from './macros/classFeatures/artificer/infusions/repeatingShot.js';\nimport {repellingBlast} from './macros/classFeatures/warlock/invocations/repellingBlast.js';\nimport {repulsionShield} from './macros/classFeatures/artificer/infusions/repulsionShield.js';\nimport {resistantArmor} from './macros/classFeatures/artificer/infusions/resistantArmor.js';\nimport {returningWeapon} from './macros/classFeatures/artificer/infusions/returningWeapon.js';\nimport {rimesBindingIce} from './macros/spells/rimesBindingIce.js';\nimport {ringOfSpellStoring} from './macros/items/ringOfSpellStoring.js';\nimport {riteOfTheDawn} from './macros/classFeatures/bloodHunter/orderOfTheGhostslayer/riteOfTheDawn.js';\nimport {rugOfSmothering} from './macros/monsterFeatures/rugOfSmothering/rugOfSmothering.js';\nimport {sacredWeapon} from './macros/classFeatures/paladin/oathOfDevotion/sacredWeapon.js';\nimport {salamander} from './macros/monsterFeatures/salamander/salamander.js';\nimport {sanctuary} from './macros/spells/sanctuary.js';\nimport {savageAttacker} from './macros/feats/savageAttacker.js';\nimport {saveConditionImmune} from './macros/generic/saveConditionImmune.js';\nimport {scorchingRay} from './macros/spells/scorchingRay.js';\nimport {searingSmite} from './macros/spells/searingSmite.js';\nimport {shadowBlade} from './macros/spells/shadowBlade.js';\nimport {shadowDemon} from './macros/monsterFeatures/shadowDemon/shadowDemon.js';\nimport {shadowOfMoil} from './macros/spells/shadowOfMoil.js';\nimport {shadowSpirit} from './macros/monsterFeatures/shadowSpirit/shadowSpirit.js';\nimport {shadowghast} from './macros/monsterFeatures/shadowghast/shadowghast.js';\nimport {shadow} from './macros/monsterFeatures/shadow/shadow.js';\nimport {shamblingMound} from './macros/monsterFeatures/shamblingMound/shamblingMound.js';\nimport {shockingGrasp} from './macros/spells/shockingGrasp.js';\nimport {sickeningRadiance} from './macros/spells/sickeningRadiance.js';\nimport {skillEmpowerment} from './macros/spells/skillEmpowerment.js';\nimport {slasher} from './macros/feats/slasher.js';\nimport {sleetStorm} from './macros/spells/sleetStorm.js';\nimport {sneakAttack} from './macros/classFeatures/rogue/sneakAttack.js';\nimport {songOfDefense} from './macros/classFeatures/wizard/bladesinging/songOfDefense.js';\nimport {soothePain} from './macros/feats/soothePain.js';\nimport {soulMonger} from './macros/monsterFeatures/soulMonger/soulMonger.js';\nimport {spellRefuelingRing} from './macros/classFeatures/artificer/infusions/spellRefuelingRing.js';\nimport {spikeGrowth} from './macros/spells/spikeGrowth.js';\nimport {spiritGuardians} from './macros/spells/spiritGuardians.js';\nimport {spiritShroud} from './macros/spells/spiritShroud.js';\nimport {spiritualWeapon} from './macros/spells/spiritualWeapon.js';\nimport {sprite} from './macros/monsterFeatures/sprite/sprite.js';\nimport {starryForm} from './macros/classFeatures/druid/circleOfStars/starryForm.js';\nimport {stasisStrike} from './macros/feats/stasisStrike.js';\nimport {steelDefender} from './macros/classFeatures/artificer/battleSmith/steelDefender.js';\nimport {stenchKow} from './macros/monsterFeatures/stenchKow/stenchKow.js';\nimport {stillnessOfMind} from './macros/classFeatures/monk/stillnessOfMind.js';\nimport {stoneStrike} from './macros/feats/strikeOfTheGiants/stoneStrike.js';\nimport {stormSphere} from './macros/spells/stormSphere.js';\nimport {stormStrike} from './macros/feats/strikeOfTheGiants/stormStrike.js';\nimport {stormgirdle} from './macros/items/stormgirdle.js';\nimport {strengthOfTheGrave} from './macros/classFeatures/sorcerer/shadowMagic/strengthOfTheGrave.js';\nimport {stunningStrike} from './macros/classFeatures/monk/stunningStrike.js';\nimport {succubus} from './macros/monsterFeatures/succubus/succubus.js';\nimport {summonAberration} from './macros/spells/summonAberration.js';\nimport {summonBeast} from './macros/spells/summonBeast.js';\nimport {summonCelestial} from './macros/spells/summonCelestial.js';\nimport {summonConstruct} from './macros/spells/summonConstruct.js';\nimport {summonDraconicSpirit} from './macros/spells/summonDraconicSpirit.js';\nimport {summonDrakeCompanion} from './macros/classFeatures/ranger/drakeWarden/summonDrakeCompanion.js';\nimport {summonElemental} from './macros/spells/summonElemental.js';\nimport {summonFey} from './macros/spells/summonFey.js';\nimport {summonFiend} from './macros/spells/summonFiend.js';\nimport {summonLesserDemons} from './macros/spells/summonLesserDemons.js';\nimport {summonShadowspawn} from './macros/spells/summonShadowspawn.js';\nimport {summonUndead} from './macros/spells/summonUndead.js';\nimport {summonWildfireSpirit} from './macros/classFeatures/druid/circleOfWildfire/summonWildfireSpirit.js';\nimport {summon} from './macros/generic/summon.js';\nimport {synapticStatic} from './macros/spells/synapticStatic.js';\nimport {tashasOtherworldlyGuise} from './macros/spells/tashasOtherworldlyGuise.js';\nimport {telekinetic} from './macros/feats/telekinetic.js';\nimport {teleport} from './macros/spells/teleport.js';\nimport {tentacleOfTheDeeps} from './macros/classFeatures/warlock/fathomless/tentacleOfTheDeeps.js';\nimport {thornWhip} from './macros/spells/thornWhip.js';\nimport {thunderStep} from './macros/spells/thunderStep.js';\nimport {thunderWave} from './macros/spells/thunderwave.js';\nimport {thunderboltStrike} from './macros/classFeatures/cleric/tempestDomain/thunderboltStrike.js';\nimport {thunderousSmite} from './macros/spells/thunderousSmite.js';\nimport {tixieTockworth} from './macros/monsterFeatures/tixieTockworth/tixieTockworth.js';\nimport {tollTheDead} from './macros/spells/tollTheDead.js';\nimport {trance} from './macros/raceFeatures/elf/trance.js';\nimport {trickShots} from './macros/classFeatures/fighter/gunslinger/trickShots.js';\nimport {troglodyte} from './macros/monsterFeatures/troglodyte/troglodyte.js';\nimport {troll} from './macros/monsterFeatures/troll/troll.js';\nimport {turnUndead} from './macros/classFeatures/cleric/turnUndead.js';\nimport {twilightSanctuary} from './macros/classFeatures/cleric/twilightDomain/twilightSanctuary.js';\nimport {twilightShroud} from './macros/classFeatures/cleric/twilightDomain/twilightShroud.js';\nimport {undeadSpirit} from './macros/monsterFeatures/undeadSpirit/undeadSpirit.js';\nimport {vampiricBite} from './macros/raceFeatures/dhampir/vampiricBite.js';\nimport {vampiricTouch} from './macros/spells/vampiricTouch.js';\nimport {viciousIntent} from './macros/classFeatures/fighter/gunslinger/viciousIntent.js';\nimport {vigorOfTheHillGiant} from './macros/feats/vigorOfTheHillGiant.js';\nimport {vortexWarp} from './macros/spells/vortexWarp.js';\nimport {wandOfTheWarMage} from './macros/items/wandOfTheWarMage.js';\nimport {wardingBond} from './macros/spells/wardingBond.js';\nimport {wildShape} from './macros/classFeatures/druid/wildshape.js';\nimport {wildSurge} from './macros/classFeatures/barbarian/wildMagic/wildSurge.js';\nimport {wildhunt} from './macros/raceFeatures/shifter/wildhunt.js';\nimport {witherAndBloom} from './macros/spells/witherAndBloom.js';\nimport {wrapsOffDyamak} from './macros/items/wrapsOffDyamak.js';\nimport {wrathOfTheStorm} from './macros/classFeatures/cleric/tempestDomain/wrathOfTheStorm.js';\nimport {zealousPresence} from './macros/classFeatures/barbarian/zealot/zealousPresence.js';\nimport {zombie} from './macros/monsterFeatures/zombie/zombie.js';\nimport {zoneOfTruth} from './macros/spells/zoneOfTruth.js';\nexport async function onHitMacro(workflow) {\n    if (!workflow.targets.size) return;\n    workflow.targets.forEach(async token => {\n        let flags = token.actor.flags['chris-premades']?.feature?.onHit;\n        if (!flags) return;\n        if (token.id === workflow.token.id) return;\n        for (let [key, value] of Object.entries(flags)) {\n            if (!value) continue;\n            if (typeof onHit[key] != 'function') continue;\n            await onHit[key](workflow, token);\n        }\n    });\n}\nlet monster = {\n    'aberrantSpirit': aberrantSpirit,\n    'autoGnome': autoGnome,\n    'bodak': bodak,\n    'bugbear': bugbear,\n    'bulette': bulette,\n    'catoblepas': catoblepas,\n    'celestialSpirit': celestialSpirit,\n    'chasme': chasme,\n    'clayGolem': clayGolem,\n    'clockworkDefender': clockworkDefender,\n    'constructSpirit': constructSpirit,\n    'corpseFlower': corpseFlower,\n    'deepGnome': deepGnome,\n    'draconicSpirit': draconicSpirit,\n    'dreamEater': dreamEater,\n    'drow': drow,\n    'duergar': duergar,\n    'duergarMindMaster': duergarMindMaster,\n    'dybbuk': dybbuk,\n    'elderBrain': elderBrain,\n    'elderOblex': elderOblex,\n    'feySpirit': feySpirit,\n    'fiendishSpirit': fiendishSpirit,\n    'fireElemental': fireElemental,\n    'fireSnake': fireSnake,\n    'fragmentOfKrokulmar': fragmentOfKrokulmar,\n    'gallowsSpeaker': gallowsSpeaker,\n    'generic': generic,\n    'ghast': ghast,\n    'gibberingMouther': gibberingMouther,\n    'grell': grell,\n    'hezrou': hezrou,\n    'hobgoblin': hobgoblin,\n    'homunculus': homunculus,\n    'intellectDevourer': intellectDevourer,\n    'kobold': kobold,\n    'leucrotta': leucrotta,\n    'mudMephit': mudMephit,\n    'nightwalker': nightwalker,\n    'rugOfSmothering': rugOfSmothering,\n    'salamander': salamander,\n    'shadow': shadow,\n    'shadowDemon': shadowDemon,\n    'shadowSpirit': shadowSpirit,\n    'shadowghast': shadowghast,\n    'shamblingMound': shamblingMound,\n    'soulMonger': soulMonger,\n    'sprite': sprite,\n    'stenchKow': stenchKow,\n    'succubus': succubus,\n    'tixieTockworth': tixieTockworth,\n    'troglodyte': troglodyte,\n    'troll': troll,\n    'undeadSpirit': undeadSpirit,\n    'zombie': zombie\n}\nlet onHit = {\n    'blackrazor': blackrazor.onHit,\n    'distractingStrike': maneuvers.distractingStrikeOnHit,\n    'fireForm': fireElemental.fireForm,\n    'fireShield': fireShield.onHit,\n    'forceField': monster.tixieTockworth.forceField.onHit,\n    'heatedBody': fireSnake.heatedBody,\n    'malfunction': autoGnome.malfunction,\n    'regeneration': monster.troll.regeneration.onHit,\n    'shadowOfMoil': shadowOfMoil.onHit,\n    'soulThirst': soulMonger.soulThirst.onHit,\n    'wardingBond': wardingBond.onHit,\n    'armorOfAgathys': armorOfAgathys.onHit,\n    'wildSurgeRetribution': wildSurge.retribution,\n    'rage': rage.attacked\n}\nexport let skills = {\n    'bootsOfElvenkind': bootsOfElvenkind,\n    'eyesOfMinuteSeeing': eyesOfMinuteSeeing,\n    'eyesOfTheEagle': eyesOfTheEagle,\n    'grappleEscape': grapple.escape,\n    'grappleInitiate': grapple.initiate,\n    'labyrinthineRecall': labyrinthineRecall,\n    'stoneCamouflage': deepGnome.stoneCamouflage\n}\nexport let saves = {\n    'dangerSense': dangerSense,\n    'holyNimbus': holyNimbus.save\n}\nasync function onMove(macroName, token, castLevel, spellDC, damage, damageType, tokenID, reason) {\n    switch (macroName) {\n        case 'spiritGuardians':\n            await spiritGuardians.moved(token, castLevel, spellDC, damage, damageType, tokenID, reason);\n            break;\n        case 'guardianOfFaith':\n            await guardianOfFaith.moved(token, castLevel, spellDC, damage, damageType, tokenID, reason);\n            break;\n        case 'investitureOfFlame':\n            await investitureOfFlame.moved(token, castLevel, spellDC, damage, damageType, tokenID, reason);\n            break;\n    }\n}\nasync function onMoveEffect(macroName, token, selectedAura) {\n    switch (macroName) {\n        case 'auraOfPurity': \n            await auraOfPurity.move(token, selectedAura);\n            break;\n        case 'auraOfProtection':\n            await auraOfProtection(token, selectedAura);\n            break;\n        case 'auraOfCourage':\n            await auraOfCourage(token, selectedAura);\n            break;\n        case 'lanternOfRevealing':\n            await lanternOfRevealing.aura(token, selectedAura);\n            break;\n        case 'auraOfDevotion':\n            await auraOfDevotion(token, selectedAura);\n            break;\n        case 'auraOfLife':\n            await auraOfLife.aura(token, selectedAura);\n            break;\n        case 'auraOfWarding':\n            await auraOfWarding(token, selectedAura);\n            break;\n        case 'protectiveLights':\n            await wildSurge.protectiveLights.aura(token, selectedAura);\n            break;\n        case 'auraOfHate':\n            await auraOfHate.aura(token, selectedAura);\n            break;\n        case 'dreadLord':\n            await dreadLord.aura(token, selectedAura);\n            break;\n    }\n}\nasync function onMoveSpecial(name, sourceToken, targetToken) {\n    switch(name) {\n        case 'auraOfHate':\n            return await auraOfHate.special(sourceToken, targetToken);\n        default:\n            return false;\n    }\n}\nasync function templateTrigger(macroName, token, trigger, reason) {\n    switch (macroName) {\n        case 'dawn':\n            await dawn.trigger(token, trigger, reason);\n            break;\n        case 'moonbeam':\n            await moonbeam.trigger(token, trigger, reason);\n            break;\n        case 'cloudkill':\n            await cloudkill.trigger(token, trigger, reason);\n            break;\n        case 'sickeningRadiance':\n            await sickeningRadiance.trigger(token, trigger, reason);\n            break;\n        case 'grease':\n            await grease.trigger(token, trigger, reason);\n            break;\n        case 'insectPlague':\n            await insectPlague.trigger(token, trigger, reason);\n            break;\n        case 'hungerOfHadar':\n            await hungerOfHadar.trigger(token, trigger, reason);\n            break;\n        case 'sleetStorm': {\n            await sleetStorm.trigger(token, trigger, reason);\n            break;\n        }\n    }\n}\nexport let macros = {\n    'aasimarRadiantSoul': aasimarRadiantSoul,\n    'acidArrow': acidArrow,\n    'actions': actions,\n    'ancestralProtectors': ancestralProtectors,\n    'animateDead': animateDead,\n    'animatingPerformance': animatingPerformance,\n    'antagonize': antagonize,\n    'arcaneJolt': arcaneJolt,\n    'arcaneWard': arcaneWard,\n    'armorModel': armorModel,\n    'armorOfAgathys': armorOfAgathys,\n    'armorOfMagicalStrength': armorOfMagicalStrength,\n    'auraOfAlacrity': auraOfAlacrity,\n    'auraOfCourage': auraOfCourage,\n    'auraOfDevotion': auraOfDevotion,\n    'auraOfHate': auraOfHate,\n    'auraOfLife': auraOfLife,\n    'auraOfProtection': auraOfProtection,\n    'auraOfPurity': auraOfPurity,\n    'auraOfVitality': auraOfVitality,\n    'awakenedSpellbook': awakenedSpellbook,\n    'balmOfPeace': balmOfPeace,\n    'bardicInspiration': bardicInspiration,\n    'beaconOfHope': beaconOfHope,\n    'beguilingTwist': beguilingTwist,\n    'bestialSoul': bestialSoul,\n    'bestowCurse': bestowCurse,\n    'bg3': bg3,\n    'bigbysHand': bigbysHand,\n    'binding': binding,\n    'blackrazor': blackrazor,\n    'bladeFlourish': bladeFlourish,\n    'bladesong': bladesong,\n    'blessedStrikes': blessedStrikes,\n    'blessingOfTheForge': blessingOfTheForge,\n    'blessingOfTheRavenQueen': blessingOfTheRavenQueen,\n    'blight': blight,\n    'blink': blink,\n    'bloodSpear': bloodSpear,\n    'bolsteringMagic': bolsteringMagic,\n    'boomingBlade': boomingBlade,\n    'borrowedKnowledge': borrowedKnowledge,\n    'brandOfCastigation': brandOfCastigation,\n    'breathOfTheDragon': breathOfTheDragon,\n    'breathWeapon': breathWeapon,\n    'burningHands': burningHands,\n    'callLightning': callLightning,\n    'callTheHunt': callTheHunt,\n    'cartomancer': cartomancer,\n    'chainLightning': chainLightning,\n    'charmAnimalsAndPlants': charmAnimalsAndPlants,\n    'charmPerson': charmPerson,\n    'chillTouch': chillTouch,\n    'chromaticOrb': chromaticOrb,\n    'circleOfMortality': circleOfMortality,\n    'cleave': cleave,\n    'cloudStrike': cloudStrike,\n    'cloudkill': cloudkill,\n    'compelledDuel': compelledDuel,\n    'conditionResistanceEarly': conditionResistanceEarly,\n    'conditionResistanceLate': conditionResistanceLate,\n    'conditionVulnerabilityEarly': conditionVulnerabilityEarly,\n    'conditionVulnerabilityLate': conditionVulnerabilityLate,\n    'conjureAnimals': conjureAnimals,\n    'conjureCelestial': conjureCelestial,\n    'conjureElemental': conjureElemental,\n    'conjureFey': conjureFey,\n    'conjureMinorElementals': conjureMinorElementals,\n    'conjureWoodlandBeings': conjureWoodlandBeings,\n    'controlUndead': controlUndead,\n    'createPactWeapon': createPactWeapon,\n    'crimsonRite': crimsonRite,\n    'crusher': crusher,\n    'crushingThrow': crushingThrow,\n    'crystalBlade': crystalBlade,\n    'dancingSword': dancingSword,\n    'danseMacabre': danseMacabre,\n    'darkOnesBlessing': darkOnesBlessing,\n    'darkness': darkness,\n    'dawn': dawn,\n    'deathWard': deathWard,\n    'destructiveWave': destructiveWave,\n    'destructiveWrath': destructiveWrath,\n    'detectThoughts': detectThoughts,\n    'disintegrate': disintegrate,\n    'divineFury': divineFury,\n    'divineSmite': divineSmite,\n    'divineStrike': divineStrike,\n    'draconicStrike': draconicStrike,\n    'dragonVessel': dragonVessel,\n    'dragonsBreath': dragonsBreath,\n    'dragonsWrath': dragonsWrath,\n    'dreadAmbusher': dreadAmbusher,\n    'dreadLord': dreadLord,\n    'dreadfulAspect': dreadfulAspect,\n    'dualWielder': dualWielder,\n    'durableMagic': durableMagic,\n    'eladrinSeason': eladrinSeason,\n    'eldritchBlast': eldritchBlast,\n    'eldritchSmite': eldritchSmite,\n    'elementalAdept': elementalAdept,\n    'elementalCleaver': elementalCleaver,\n    'elementalWeapon': elementalWeapon,\n    'elixirOfHealth': elixirOfHealth,\n    'emboldeningBond': emboldeningBond,\n    'enhancedBond': enhancedBond,\n    'enhancedWeapon': enhancedWeapon,\n    'enlargeReduce': enlargeReduce,\n    'experimentalElixir': experimentalElixir,\n    'expertDivination': expertDivination,\n    'explodingHeals': explodingHeals,\n    'faerieFire': faerieFire,\n    'fallenPuppet': fallenPuppet,\n    'farStep': farStep,\n    'favoredFoe': favoredFoe,\n    'feyPresence': feyPresence,\n    'findFamiliar': findFamiliar,\n    'findGreaterSteed': findGreaterSteed,\n    'findSteed': findSteed,\n    'fireShield': fireShield,\n    'fireStorm': fireStorm,\n    'fireStrike': fireStrike,\n    'firearm': firearm,\n    'flameBlade': flameBlade,\n    'fly': fly,\n    'focusedAim': focusedAim,\n    'fogCloud': fogCloud,\n    'formOfDread': formOfDread,\n    'formOfTheBeast': formOfTheBeast,\n    'frostFingers': frostFingers,\n    'frostStrike': frostStrike,\n    'gatheredSwarm': gatheredSwarm,\n    'giftOfTheChromaticDragon': giftOfTheChromaticDragon,\n    'graspOfAvarice': graspOfAvarice,\n    'graspOfHadar': graspOfHadar,\n    'graveTouched': graveTouched,\n    'grease': grease,\n    'greenFlameBlade': greenFlameBlade,\n    'grimHarvest': grimHarvest,\n    'grovelthrash': grovelthrash,\n    'grungPoison': grungPoison,\n    'guardianOfFaith': guardianOfFaith,\n    'guardianOfNature': guardianOfNature,\n    'hailOfThorns': hailOfThorns,\n    'harnessDivinePower': harnessDivinePower,\n    'healingLight': healingLight,\n    'healingSpirit': healingSpirit,\n    'heartOfTheStorm': heartOfTheStorm,\n    'heatMetal': heatMetal,\n    'hex': hex,\n    'hexWarrior': hexWarrior,\n    'hexbladesCurse': hexbladesCurse,\n    'hiddenStep': hiddenStep,\n    'hillStrike': hillStrike,\n    'holyNimbus': holyNimbus,\n    'holyWeapon': holyWeapon,\n    'homunculusServant': homunculusServant,\n    'hungerOfHadar': hungerOfHadar,\n    'hungryJaws': hungryJaws,\n    'huntersMark': huntersMark,\n    'hybridTransformation': hybridTransformation,\n    'iceStorm': iceStorm,\n    'infectiousFury': infectiousFury,\n    'insectPlague': insectPlague,\n    'insightfulFighting': insightfulFighting,\n    'inspiringSmite': inspiringSmite,\n    'investitureOfFlame': investitureOfFlame,\n    'investitureOfIce': investitureOfIce,\n    'investitureOfStone': investitureOfStone,\n    'investmentOfTheChainMaster': investmentOfTheChainMaster,\n    'javelinOfLightning': javelinOfLightning,\n    'lanternOfRevealing': lanternOfRevealing,\n    'legionOfOne': legionOfOne,\n    'lifeTransference': lifeTransference,\n    'lightningArrow': lightningArrow,\n    'lightningLure': lightningLure,\n    'longLimbed': longLimbed,\n    'maddeningHex': maddeningHex,\n    'maelstromAura': maelstromAura,\n    'magicMissile': magicMissile,\n    'maneuvers': maneuvers,\n    'manifestEcho': manifestEcho,\n    'manifestMind': manifestMind,\n    'manualRolls': manualRolls,\n    'massCureWounds': massCureWounds,\n    'mastersAmulet': mastersAmulet,\n    'metaMagic': metaMagic,\n    'metallicBreathWeapon': metallicBreathWeapon,\n    'mightyImpel': mightyImpel,\n    'mirrorImage': mirrorImage,\n    'monster': monster,\n    'moonbeam': moonbeam,\n    'moteOfPotential': moteOfPotential,\n    'muddledMind': muddledMind,\n    'mutagencraft': mutagencraft,\n    'necroticShroud': necroticShroud,\n    'noConfiguration': noConfiguration,\n    'oilOfSharpness': oilOfSharpness,\n    'oldBreathWeapon': oldBreathWeapon,\n    'onHit': onHit,\n    'onMove': onMove,\n    'onMoveEffect': onMoveEffect,\n    'onMoveSpecial': onMoveSpecial,\n    'orcishFury': orcishFury,\n    'overchannel': overchannel,\n    'piercer': piercer,\n    'planarWanderer': planarWanderer,\n    'potionOfDiminution': potionOfDiminution,\n    'potionOfFireBreath': potionOfFireBreath,\n    'potionOfGiantSize': potionOfGiantSize,\n    'potionOfGrowth': potionOfGrowth,\n    'potionOfMaximumPower': potionOfMaximumPower,\n    'potionOfPoison': potionOfPoison,\n    'potionOfVitality': potionOfVitality,\n    'preserveLife': preserveLife,\n    'primalCompanion': primalCompanion,\n    'protectionFromEvilAndGood': protectionFromEvilAndGood,\n    'radiantConsumption': radiantConsumption,\n    'radiantSoul': radiantSoul,\n    'radiantWeapon': radiantWeapon,\n    'rage': rage,\n    'rayOfEnfeeblement': rayOfEnfeeblement,\n    'reaper': reaper,\n    'relentless': relentless,\n    'relentlessEndurance': relentlessEndurance,\n    'removeTemplate': removeTemplate,\n    'repeatingShot': repeatingShot,\n    'repellingBlast': repellingBlast,\n    'repulsionShield': repulsionShield,\n    'resistantArmor': resistantArmor,\n    'returningWeapon': returningWeapon,\n    'rimesBindingIce': rimesBindingIce,\n    'ringOfSpellStoring': ringOfSpellStoring,\n    'riteOfTheDawn': riteOfTheDawn,\n    'sacredWeapon': sacredWeapon,\n    'sanctuary': sanctuary,\n    'savageAttacker': savageAttacker,\n    'saveConditionImmune': saveConditionImmune,\n    'scorchingRay': scorchingRay,\n    'searingSmite': searingSmite,\n    'shadowBlade': shadowBlade,\n    'shadowOfMoil': shadowOfMoil,\n    'shockingGrasp': shockingGrasp,\n    'sickeningRadiance': sickeningRadiance,\n    'skillEmpowerment': skillEmpowerment,\n    'slasher': slasher,\n    'sleetStorm': sleetStorm,\n    'sneakAttack': sneakAttack,\n    'songOfDefense': songOfDefense,\n    'soothePain': soothePain,\n    'spellRefuelingRing': spellRefuelingRing,\n    'spikeGrowth': spikeGrowth,\n    'spiritGuardians': spiritGuardians,\n    'spiritShroud': spiritShroud,\n    'spiritualWeapon': spiritualWeapon,\n    'starryForm': starryForm,\n    'stasisStrike': stasisStrike,\n    'steelDefender': steelDefender,\n    'stillnessOfMind': stillnessOfMind,\n    'stoneStrike': stoneStrike,\n    'stormSphere': stormSphere,\n    'stormStrike': stormStrike,\n    'stormgirdle': stormgirdle,\n    'strengthOfTheGrave': strengthOfTheGrave,\n    'stunningStrike': stunningStrike,\n    'summon': summon,\n    'summonAberration': summonAberration,\n    'summonBeast': summonBeast,\n    'summonCelestial': summonCelestial,\n    'summonConstruct': summonConstruct,\n    'summonDraconicSpirit': summonDraconicSpirit,\n    'summonDrakeCompanion': summonDrakeCompanion,\n    'summonElemental': summonElemental,\n    'summonFey': summonFey,\n    'summonFiend': summonFiend,\n    'summonLesserDemons': summonLesserDemons,\n    'summonShadowspawn': summonShadowspawn,\n    'summonUndead': summonUndead,\n    'summonWildfireSpirit': summonWildfireSpirit,\n    'synapticStatic': synapticStatic,\n    'tashasOtherworldlyGuise': tashasOtherworldlyGuise,\n    'telekentic': telekinetic,\n    'teleport': teleport,\n    'templateTrigger': templateTrigger,\n    'tentacleOfTheDeeps': tentacleOfTheDeeps,\n    'thornWhip': thornWhip,\n    'thunderStep': thunderStep,\n    'thunderWave': thunderWave,\n    'thunderboltStrike': thunderboltStrike,\n    'thunderousSmite': thunderousSmite,\n    'tollTheDead': tollTheDead,\n    'trance': trance,\n    'trickShots': trickShots,\n    'turnUndead': turnUndead,\n    'twilightSanctuary': twilightSanctuary,\n    'twilightShroud': twilightShroud,\n    'vampiricBite': vampiricBite,\n    'vampiricTouch': vampiricTouch,\n    'viciousIntent': viciousIntent,\n    'vigorOfTheHillGiant': vigorOfTheHillGiant,\n    'vortexWarp': vortexWarp,\n    'wandOfTheWarMage': wandOfTheWarMage,\n    'wardingBond': wardingBond,\n    'wildShape': wildShape,\n    'wildSurge': wildSurge,\n    'wildhunt': wildhunt,\n    'witherAndBloom': witherAndBloom,\n    'wrapsOffDyamak': wrapsOffDyamak,\n    'wrathOfTheStorm': wrathOfTheStorm,\n    'zealousPresence': zealousPresence,\n    'zoneOfTruth': zoneOfTruth\n}","import {chris} from '../helperFunctions.js';\nimport {macros} from '../macros.js';\nimport {socket} from '../module.js';\nimport {translate} from '../translations.js';\nlet auras = {};\nexport let effectAuras = {\n    'add': add,\n    'remove': remove,\n    'status': status,\n    'purge': purge,\n    'registerAll': canvasReady,\n    'refresh': refreshEffects\n}\nfunction status() {\n    return auras;\n}\nasync function purge() {\n    auras = {};\n    await socket.executeForEveryone('syncEffectAuras', auras);\n    return;\n}\nfunction add(flagAuras, tokenUuid, doRefresh) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) {\n        socket.executeForAllGMs('remoteAddEffectAura', flagAuras, tokenUuid, doRefresh);\n        return;\n    }\n    for (let aura of Object.values(flagAuras)) {\n        let name = aura.name;\n        let castLevel = aura.castLevel || 0;\n        let spellDC = aura.spellDC || null;\n        let range = aura.range;\n        let disposition = aura.disposition || 'all';\n        let conscious = aura.conscious || false;\n        let effectName = aura.effectName;\n        let worldMacro = aura.worldMacro;\n        let globalFunction = aura.globalFunction;\n        let macroName = aura.macroName;\n        let special = aura.special;\n        let self = aura.self;\n        if (!tokenUuid || !name || !range || !effectName || (!macroName && !worldMacro && !globalFunction)) {\n            ui.notifications.warn('Invalid aura data found!');\n            console.log(aura);\n            continue;\n        }\n        if (!auras[name]) auras[name] = [];\n        auras[name].push({\n            'tokenUuid': tokenUuid,\n            'name': name,\n            'castLevel': castLevel,\n            'spellDC': spellDC,\n            'range': range,\n            'disposition': disposition,\n            'conscious': conscious,\n            'worldMacro': worldMacro,\n            'globalFunction': globalFunction,\n            'macroName': macroName,\n            'effectName': effectName,\n            'special': special,\n            'self': self\n        });\n    }\n    if (doRefresh) refreshEffects();\n}\nfunction remoteAdd(flagAuras, tokenUuid, doRefresh) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    add(flagAuras, tokenUuid, doRefresh);\n}\nasync function remove(name, tokenUuid, noRefresh) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) {\n        socket.executeForAllGMs('remoteRemoveEffectAura', name, tokenUuid);\n        return;\n    }\n    if (!auras[name]) return;\n    if (!noRefresh) await refreshEffects(tokenUuid, name);\n    auras[name] = auras[name].filter(aura => aura.tokenUuid != tokenUuid);\n    if (auras[name].length === 0) delete(auras[name]);\n}\nasync function remoteRemove(name, tokenUuid) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    await remove(name, tokenUuid);\n}\nfunction preActorUpdate(actor, updates, options) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    if (!actor.flags['chris-premades']?.aura) return;\n    if (!updates.system?.attributes?.hp) return;\n    let oldHP = actor.system.attributes.hp.value;\n    let newHP = updates.system.attributes.hp.value;\n    if (oldHP > 0 && newHP === 0) foundry.utils.setProperty(options, 'chris-premades.refreshAuras', true);\n    if (newHP > 0 && oldHP === 0) foundry.utils.setProperty(options, 'chris-premades.refreshAuras', true);\n}\nfunction actorUpdate(actor, updates, options) {\n    if (options['chris-premades']?.refreshAuras) refreshEffects();\n}\nasync function canvasReady() {\n    auras = {};\n    let sceneTokens = game.canvas.scene.tokens?.contents;\n    if (sceneTokens) {\n        for (let token of sceneTokens) {\n            if (!token.actor) continue;\n            let effects = token.actor.effects.filter(e => e.flags?.['chris-premades']?.aura === true);\n            if (effects.length > 0) for (let effect of effects) await chris.removeEffect(effect);\n            let flagAuras = token.actor?.flags?.['chris-premades']?.aura;\n            if (!flagAuras) continue;\n            add(flagAuras, token.uuid, false);\n        }\n    }\n    refreshEffects();\n}\nasync function tokenMoved(token, ignoredUuid, ignoredAura) {\n    if (token.parent.id != canvas.scene.id) return;\n    await token.object?._animation;\n    let distaceMap = {};\n    for (let auraName of Object.values(auras)) {\n        let validSources = [];\n        for (let aura of auraName) {\n            if (aura.tokenUuid === ignoredUuid && (ignoredAura === aura.name || ignoredAura === 'all')) continue;\n            let sourceToken = await fromUuid(aura.tokenUuid);\n            if (!sourceToken) continue;\n            let distance = distaceMap[sourceToken.id];\n            if (!distance) {\n                distance = chris.getDistance(token, sourceToken);\n                distaceMap[sourceToken.id] = distance;\n            }\n            let testDistance = aura.range;\n            if (testDistance === 'paladin') {\n                let paladinLevels = sourceToken.actor.classes?.paladin?.system?.levels;\n                if (paladinLevels >= 18) {\n                    testDistance = 30;\n                } else {\n                    testDistance = 10;\n                }\n            }\n            if (distance > testDistance) continue;\n            if (aura.self != undefined && !aura.self && aura.tokenUuid === token.uuid) continue;\n            if (aura.conscious) {\n                let sourceHP = sourceToken.actor.system.attributes.hp.value;\n                if (sourceHP === 0) continue;\n                if (chris.findEffect(sourceToken.actor, translate.conditions('unconscious'))) continue;\n            }\n            switch (aura.disposition) {\n                case 'ally':\n                    if (token.disposition != sourceToken.disposition) continue;\n                    break;\n                case 'enemy':\n                    if (token.disposition === sourceToken.disposition) continue;\n                    break;\n            }\n            switch (aura.castLevel) {\n                case 'cha':\n                case 'con':\n                case 'dex':\n                case 'int':\n                case 'str':\n                case 'wis':\n                    aura.castLevel = sourceToken.actor.system.abilities[aura.castLevel].mod;\n                    break;\n                case 'castLevel':\n                    let auraEffect = chris.findEffect(sourceToken.actor, aura.effectName + ' - Aura');\n                    if (!auraEffect) continue;\n                    aura.castLevel = chris.getEffectCastLevel(auraEffect);\n                    if (!aura.castLevel) continue;\n                    break;\n            }\n            if (aura.special) {\n                let check = await macros.onMoveSpecial(aura.special, sourceToken, token);\n                if (!check) continue;\n            }\n            validSources.push(aura);\n        }\n        let maxLevel = Math.max(...validSources.map(aura => aura.castLevel));\n        let selectedAura = validSources.find(aura => aura.castLevel === maxLevel);\n        if (selectedAura) {\n            console.log('Chris | Adding aura effect ' + selectedAura.effectName + ' to: ' + token.actor.name);\n            let macroCommand;\n            if (selectedAura.macroName) {\n                macros.onMoveEffect(selectedAura.macroName, token, selectedAura);\n            } else if (selectedAura.globalFunction) {\n                macroCommand = `await ${selectedAura.globalFunction.trim()}.bind(this)({token})`;\n            } else if (selectedAura.worldMacro) {\n                let macro = game.macros?.getName(selectedAura.worldMacro.replaceAll('\"', ''));\n                macroCommand = macro?.command ?? `console.warn('Chris | No world macro ${selectedAura.worldMacro.replaceAll('\"', '')} found!')`;\n            }\n            if (macroCommand) {\n                let body = `return (async () => {${macroCommand}})()`;\n                let fn = Function('{token}={}', body);\n                try {\n                    fn.call(selectedAura, {token});\n                } catch (error) {\n                    ui.notifications?.error('There was an error running your macro. See the console (F12) for details');\n                    error('Error evaluating macro ', error);\n                }\n            }\n        } else {\n            let effect = chris.findEffect(token.actor, auraName[0].effectName);\n            if (effect) {\n                console.log('Chris | Removing aura effect ' + auraName[0].effectName + ' from: ' + token.actor.name);\n                chris.removeEffect(effect);\n            }\n        }\n        await warpgate.wait(100);\n    }\n}\nasync function refreshEffects(ignoredUuid, ignoredAura) {\n    for (let token of game.canvas.scene.tokens.contents) {\n        if (!token.actor) continue;\n        tokenMoved(token, ignoredUuid, ignoredAura);\n    }\n}\nfunction updateToken(token, changes) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    if (!token.actor) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    if (token.actor.flags['chris-premades']?.aura) {\n        refreshEffects();\n    } else {\n        tokenMoved(token);\n    }\n}\nasync function createToken(token, options, id) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    let effects = token.actor?.effects?.filter(e => e.flags?.['chris-premades']?.aura === true);\n    if (effects.length > 0) for (let effect of effects) await chris.removeEffect(effect);\n    let aura = token.actor.flags['chris-premades']?.aura;\n    if (aura) {\n        add(aura, token.uuid, true);\n    } else {\n        tokenMoved(token);\n    }\n}\nfunction deleteToken(token, options, id) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    let flagAuras = token.actor?.flags['chris-premades']?.aura;\n    if (flagAuras) {\n        refreshEffects(token.uuid, 'all');\n        for (let aura of Object.values(flagAuras)) {\n            remove(aura.name, token.uuid, true);\n        }\n    }\n    // delete effects on actor?\n}\nasync function createRemoveEffect(effect, updates, userId) {\n    if (!effect.parent || effect.name != translate.conditions('unconscious')) return;\n    if (!effect.parent.flags['chris-premades']?.aura) return;\n    refreshEffects();\n}\nexport let effectAuraHooks = {\n    'preActorUpdate': preActorUpdate,\n    'actorUpdate': actorUpdate,\n    'canvasReady': canvasReady,\n    'updateToken': updateToken,\n    'createToken': createToken,\n    'deleteToken': deleteToken,\n    'createRemoveEffect': createRemoveEffect\n}\nexport let effectSockets = {\n    'remoteAdd': remoteAdd,\n    'remoteRemove': remoteRemove\n}","import {constants} from '../constants.js';\nimport {chris} from '../helperFunctions.js';\nexport function itemDC(effect, updates, options, user) {\n    if (!updates.changes || !effect.parent || !effect.origin) return;\n    if (updates.changes.length === 0) return;\n    if (effect.parent.constructor.name != 'Actor5e') return;\n    let origin = fromUuidSync(effect.origin);\n    if (!origin) return;\n    if (origin.constructor.name != 'Item5e') return;\n    let changed = false;\n    for (let i of updates.changes) {\n        if (typeof i.value !== 'string') continue;\n        if (i.value.includes('$chris.itemDC')) {\n            let itemDC = chris.getSpellDC(origin);\n            i.value = i.value.replace('$chris.itemDC', itemDC);\n            changed = true;\n        }\n        if (i.value.includes('$chris.itemMod')) {\n            let itemMod = chris.getSpellMod(origin);\n            i.value = i.value.replace('$chris.itemMod', itemMod);\n            changed = true;\n        }\n    }\n    if (!changed) return;\n    effect.updateSource({'changes': updates.changes});\n}\nexport async function fixOrigin(token, options, user) {\n    if ((game.user.id !== user) || token.actorLink) return;\n    let updates = await token.actor.effects.reduce(async (updates, effect) => {\n        if (!effect.origin) return updates;\n        let origin = await fromUuid(effect.origin);\n        if (!origin) return updates;\n        if (!origin instanceof Item) return updates;\n        let item = token.actor.items.get(origin.id);\n        if (item) updates.push({'_id': effect.id, 'origin': item.uuid});\n        return updates;\n    }, []);\n    if (Object.keys(updates).length === 0) return;\n    await token.actor.updateEmbeddedDocuments('ActiveEffect', updates);\n}\nexport function noEffectAnimationCreate(effect, updates,  options, userId) {\n    if (effect.flags['chris-premades']?.effect?.noAnimation) options.animate = false\n}\nexport function noEffectAnimationDelete(effect,  options, userId) {\n    if (effect.flags['chris-premades']?.effect?.noAnimation) options.animate = false\n}\nexport function effectTitleBar(config, buttons) {\n    if (config.object.parent instanceof Item) {\n        buttons.unshift({\n            'class': 'chris-premades',\n            'icon': 'fa-solid fa-kit-medical',\n            'onclick': () => effectConfig(config.object)\n        });\n    }\n}\nasync function effectConfig(effect) {\n    let disableAnimation = effect.flags['chris-premades']?.effect?.noAnimation;\n    let vaeButton = effect.flags['chris-premades']?.vae?.button ?? '';\n    let inputs = [\n        {\n            'label': 'Disable Text Animation:',\n            'type': 'checkbox',\n            'options': disableAnimation ?? false\n        },\n        {\n            'label': 'VAE Button',\n            'type': 'text',\n            'options': vaeButton\n        }\n    ]\n    let selection = await chris.menu('CPR Effect Options', constants.okCancel, inputs, true);\n    if (!selection.buttons) return;\n    let refreshedEffect = await fromUuid(effect.uuid);\n    if (!refreshedEffect) return;\n    let updates = {\n        'effects': [\n            {\n                '_id': refreshedEffect.id,\n                'flags': {\n                    'chris-premades': {\n                        'effect': {\n                            'noAnimation': selection.inputs[0]\n                        },\n                        'vae': {\n                            'button': selection.inputs[1] === '' ? null : selection.inputs[1]\n                        }\n                    }\n                }\n            }\n        ]\n    }\n    await effect.parent.update(updates);\n}","export async function flanking(workflow) {\n    if (!workflow.actor) return;\n    if (!workflow.actor.flags['chris-premades']?.mechanic?.noFlanking) return;\n    workflow.flankingAdvantage = false;\n}","import {chris} from './helperFunctions.js';\nimport {updateItem} from './item.js';\nexport async function info({speaker, actor, token, character, item, args, scope, workflow}) {\n    let info = item?.flags?.['chris-premades']?.info;\n    if (!info) return;\n    let message = '';\n    let gmMessage = '<hr>';\n    let cancel = false;\n    let updateItem = false;\n    if (info.version) {\n        let currentVersion = CONFIG.chrisPremades.automations[info.name].version;\n        let itemVersion = info.version;\n        if (isNewerVersion(currentVersion, itemVersion)) {\n            message += '<hr>@UUID[' + item.uuid + ']{' + item.name + '} automation is out of date!<br>Item Version: ' + itemVersion + '<br>Updated Version: ' + currentVersion;\n            gmMessage += '<button class=\"chris-item-button\">Update Item</button>'\n            cancel = true;\n            updateItem = true;\n        }\n    }\n    let missingSettings = [];\n    if (info.settings) {\n        for (let i of info.settings) {\n            if (!game.settings.get('chris-premades', i)) missingSettings.push(i);\n        }\n        if (missingSettings.length > 0) {\n            if (message != '') message += '<hr>';\n            message += 'This automation requires the following settings to be enabled:';\n            gmMessage += '<button class=\"chris-settings-button\">Enable Required Settings</button>'\n            for (let i of missingSettings) {\n                let settingName = game.settings.settings.get('chris-premades.' + i).name;\n                message += '<br>' + settingName;\n            }\n            cancel = true;\n        }\n    }\n    if (info.mutation) {\n        if (info.mutation.self) {\n            if (!token) {\n                if (message != '') message += '<hr>';\n                message += 'This automation requires your token to be on the scene.';\n                cancel = true;\n            } else {\n                let mutationStack = warpgate.mutationStack(token.document);\n                if (mutationStack.getName(info.mutation.self)) {\n                    await warpgate.revert(token.document, info.mutation.self);\n                    console.warn('A duplicate CPR Warpgate mutation was detected and removed!');\n                }\n            }\n        }\n    }\n    let missingActors = [];\n    if (info.actors) {\n        for (let i of info.actors) {\n            if (!game.actors.getName(i)) missingActors.push(i);\n        }\n        if (missingActors.length > 0) {\n            if (message != '') message += '<hr>';\n            message += 'This automation requires the following sidebar actors:';\n            gmMessage += '<button class=\"chris-actors-button\">Import Missing Actors</button>'\n            for (let i of missingActors) {\n                message += '<br>' + i;\n            }\n            cancel = true;\n        }\n    }\n    if (cancel) {\n        await ChatMessage.create({\n            'speaker': {'alias': 'Chris\\'s Premades'},\n            'content': message\n        });\n        let messageData = {\n            'speaker': {'alias': 'Chris\\'s Premades'},\n            'blind': true,\n            'content': gmMessage\n        };\n        if (missingSettings.length) setProperty(messageData, 'flags.chris-premades.message.button.settings', missingSettings);\n        if (missingActors.length) setProperty(messageData, 'flags.chris-premades.message.button.actors', missingActors);\n        if (updateItem) setProperty(messageData, 'flags.chris-premades.message.button.item', item.uuid);\n        await ChatMessage.create(messageData);\n        return false;\n    }\n}\nexport async function buttonSettings(settings, element, message) {\n    await Promise.all(settings.map(async setting => {\n        await game.settings.set('chris-premades', setting, true);\n    }));\n    ui.notifications.info('Settings updated!');\n}\nexport async function buttonActors(actors, element, message) {\n    let folder = game.folders.find(i => i.name === 'Chris Premades' && i.type === 'Actor');\n    if (!folder) {\n        folder = await Folder.create({\n            'name': 'Chris Premades',\n            'type': 'Actor',\n            'color': '#348f2d'\n        });\n    }\n    await Promise.all(actors.map(async actor => {\n        let actorData = await chris.getItemFromCompendium('chris-premades.CPR Summons', actor);\n        if (!actorData) return;\n        actorData.folder = folder.id;\n        await Actor.create(actorData);\n    }));\n    ui.notifications.info('Actors imported!');\n}\nexport async function buttonItem(itemUuid, element, message) {\n    let item = await fromUuid(itemUuid);\n    if (!item) return;\n    await updateItem(item);\n}\nexport async function setCompendiumItemInfo(key) {\n    let gamePack = game.packs.get(key);\n    await gamePack.getDocuments();\n    for (let i of gamePack.contents) {\n        let name = i.flags['chris-premades']?.info?.name ?? i.name;\n        if (CONFIG.chrisPremades.automations[name]) await i.setFlag('chris-premades', 'info', CONFIG.chrisPremades.automations[name]);\n    }\n}\nexport async function stripUnusedFlags(key) {\n    let gamePack = game.packs.get(key);\n    await gamePack.getDocuments();\n    for (let i of gamePack.contents) {\n        await i.update({\n            'flags.-=ddbimporter': null,\n            'flags.-=itemacro': null\n        });\n    }\n}\nexport async function setItemName(uuid, name) {\n    let item = await fromUuid(uuid);\n    if (!item) return;\n    await item.update({\n        'flags.-=ddbimporter': null,\n        'flags.-=itemacro': null\n    });\n}\nexport async function removeFolderFlag(uuid) {\n    let item = await fromUuid(uuid);\n    if (!item) return;\n    await item.update({\n        'flags.-=cf': null\n    });\n}\nexport async function updateAllCompendiums() {\n    let packs = game.packs.filter(i => i.metadata.label.includes('CPR') && i.metadata.packageType === 'world');\n    await Promise.all(packs.map(async i => {\n        await stripUnusedFlags(i.metadata.id);\n        await setCompendiumItemInfo(i.metadata.id);\n    }));\n    return 'Done!';\n}","import {chris} from '../helperFunctions.js';\nexport let allRaces = {\n    'aarakocra': \n    {\n        'name': 'Aarakocra',\n        'weight': 5,\n        'enabled': true,\n        'monster': 'Aarakocra'\n    },\n    'fallen-aasimar': \n    {\n        'name': 'Fallen Aasimar',\n        'weight': 5,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Healing Hands',\n                'description': 'Healing Hands'\n            },\n            {\n                'name': 'Light Bearer',\n                'spellcasting': true\n            },\n            {\n                'name': 'Celestial Revelation (Necrotic Shroud)',\n                'description': 'Celestial Revelation',\n                'level': 3\n            },\n            {\n                'name': 'Celestial Resistance',\n                'description': 'Celestial Resistance (Aasimar)'\n            }\n        ],\n        'dr': [\n            'necrotic',\n            'radiant'\n        ],\n        'languages': [\n            'celestial'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'spells': [\n            {\n                'name': 'Light',\n                'ability': 'cha'\n            }\n        ],\n        'abilities': {\n            'cha': 2,\n            'str': 1\n        }\n    },\n    'protector-aasimar': \n    {\n        'name': 'Protector Aasimar',\n        'weight': 5,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Healing Hands',\n                'description': 'Healing Hands'\n            },\n            {\n                'name': 'Light Bearer',\n                'spellcasting': true\n            },\n            {\n                'name': 'Celestial Revelation (Radiant Soul)',\n                'description': 'Celestial Revelation',\n                'level': 3\n            },\n            {\n                'name': 'Celestial Resistance',\n                'description': 'Celestial Resistance (Aasimar)'\n            }\n        ],\n        'dr': [\n            'necrotic',\n            'radiant'\n        ],\n        'dr': [\n            'necrotic',\n            'radiant'\n        ],\n        'languages': [\n            'celestial'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'spells': [\n            {\n                'name': 'Light',\n                'ability': 'cha'\n            }\n        ],\n        'abilities': {\n            'cha': 2,\n            'wis': 1\n        }\n    },\n    'scourge-aasimar': \n    {\n        'name': 'Scourge Aasimar',\n        'weight': 5,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Healing Hands',\n                'description': 'Healing Hands'\n            },\n            {\n                'name': 'Light Bearer',\n                'spellcasting': true\n            },\n            {\n                'name': 'Celestial Revelation (Radiant Consumption)',\n                'description': 'Celestial Revelation',\n                'level': 3\n            },\n            {\n                'name': 'Celestial Resistance',\n                'description': 'Celestial Resistance (Aasimar)'\n            }\n        ],\n        'dr': [\n            'necrotic',\n            'radiant'\n        ],\n        'dr': [\n            'necrotic',\n            'radiant'\n        ],\n        'languages': [\n            'celestial'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'spells': [\n            {\n                'name': 'Light',\n                'ability': 'cha'\n            }\n        ],\n        'abilities': {\n            'cha': 2,\n            'con': 1\n        }\n    },\n    'air-genasi': \n    {\n        'name': 'Air Genasi',\n        'weight': 25,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Unending Breath'\n            },\n            {\n                'name': 'Mingle with the Wind',\n                'spellcasting': true\n            },\n            {\n                'name': 'Lightning Resistance'\n            }\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'walk': 35\n        },\n        'dr': [\n            'lightning'\n        ],\n        'spells': [\n            {\n                'name': 'Shocking Grasp'\n            },\n            {\n                'name': 'Feather Fall',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Levitate',\n                'level': 5,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Feather Fall',\n                'level': 3\n            },\n            {\n                'name': 'Levitate',\n                'level': 5\n            }\n        ],\n        'languages': [\n            'primordial',\n            'auran'\n        ],\n        'abilities': {\n            'con': 2,\n            'dex': 1\n        }\n    },\n    'astral-elf': \n    {\n        'name': 'Astral Elf',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Starlight Step',\n                'description': 'Starlight Step',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Astral Elf)'\n            },\n            {\n                'name': 'Astral Trance',\n                'description': 'Astral Trance'\n            },\n            {\n                'name': 'Astral Fire',\n                'spellcasting': true\n            },\n            {\n                'name': 'Keen Senses'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Dancing Lights'\n            },\n            {\n                'name': 'Light'\n            },\n            {\n                'name': 'Sacred Flame'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ]\n    },\n    'autognome': \n    {\n        'name': 'Autognome',\n        'weight': 5,\n        'enabled': false,\n        'monster': 'Autognome'\n    },\n    'bugbear': \n    {\n        'name': 'Bugbear',\n        'weight': 25,\n        'enabled': true,\n        'monster': 'Bugbear'\n    },\n    'centaur': \n    {\n        'name': 'Centaur',\n        'weight': 25,\n        'enabled': true,\n        'monster': 'Centaur'\n    },\n    'changeling': \n    {\n        'name': 'Changeling',\n        'weight': 5,\n        'enabled': true,\n        'monster': 'Changeling'\n    },\n    'deep-gnome': \n    {\n        'name': 'Deep Gnome',\n        'weight': 25,\n        'enabled': true,\n        'monster': 'Deep Gnome (Svirfneblin)'\n    },\n    'dhampir': \n    {\n        'name': 'Dhampir',\n        'weight': 5,\n        'enabled': false,\n        'movement': {\n            'walk': 35\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'features': [\n            {\n                'name': 'Deathless Nature'\n            },\n            {\n                'name': 'Spider Climb',\n                'description': 'Spider Climb'\n            },\n            {\n                'name': 'Vampiric Bite',\n                'description': 'Vampiric Bite',\n                'uses': {\n                    'max': '@prof'\n                }\n            }\n        ],\n        'abilities': {\n            'dex': 2,\n            'int': 1\n        }\n    },\n    'black-chromatic-dragonborn':\n    {\n        'name': 'Black Chromatic Dragonborn',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Chromatic Ancestry',\n                'description': 'Chromatic Ancestry'\n            },\n            {\n                'name': 'Draconic Resistance',\n                'description': 'Draconic Resistance (Chromatic Dragonborn)'\n            },\n            {\n                'name': 'Acid Breath Weapon',\n                'description': 'Breath Weapon (Chromatic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Chromatic Warding (Acid)',\n                'description': 'Chromatic Warding'\n            }\n        ],\n        'dr': [\n            'acid'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'blue-chromatic-dragonborn':\n    {\n        'name': 'Blue Chromatic Dragonborn',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Chromatic Ancestry',\n                'description': 'Chromatic Ancestry'\n            },\n            {\n                'name': 'Draconic Resistance',\n                'description': 'Draconic Resistance (Chromatic Dragonborn)'\n            },\n            {\n                'name': 'Lightning Breath Weapon',\n                'description': 'Breath Weapon (Chromatic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Chromatic Warding (Lightning)',\n                'description': 'Chromatic Warding'\n            }\n        ],\n        'dr': [\n            'lightning'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'green-chromatic-dragonborn':\n    {\n        'name': 'Green Chromatic Dragonborn',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Chromatic Ancestry',\n                'description': 'Chromatic Ancestry'\n            },\n            {\n                'name': 'Draconic Resistance',\n                'description': 'Draconic Resistance (Chromatic Dragonborn)'\n            },\n            {\n                'name': 'Poision Breath Weapon',\n                'description': 'Breath Weapon (Chromatic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Chromatic Warding (Poision)',\n                'description': 'Chromatic Warding'\n            }\n        ],\n        'dr': [\n            'poision'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'red-chromatic-dragonborn':\n    {\n        'name': 'Red Chromatic Dragonborn',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Chromatic Ancestry',\n                'description': 'Chromatic Ancestry'\n            },\n            {\n                'name': 'Draconic Resistance',\n                'description': 'Draconic Resistance (Chromatic Dragonborn)'\n            },\n            {\n                'name': 'Fire Breath Weapon',\n                'description': 'Breath Weapon (Chromatic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Chromatic Warding (Fire)',\n                'description': 'Chromatic Warding'\n            }\n        ],\n        'dr': [\n            'fire'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'white-chromatic-dragonborn':\n    {\n        'name': 'White Chromatic Dragonborn',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Chromatic Ancestry',\n                'description': 'Chromatic Ancestry'\n            },\n            {\n                'name': 'Draconic Resistance',\n                'description': 'Draconic Resistance (Chromatic Dragonborn)'\n            },\n            {\n                'name': 'Cold Breath Weapon',\n                'description': 'Breath Weapon (Chromatic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Chromatic Warding (Cold)',\n                'description': 'Chromatic Warding'\n            }\n        ],\n        'dr': [\n            'Cold'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'black-draconblood-dragonborn':\n    {\n        'name': 'Black Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Black)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'blue-draconblood-dragonborn':\n    {\n        'name': 'Blue Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Blue)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'brass-draconblood-dragonborn':\n    {\n        'name': 'Brass Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Brass)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'bronze-draconblood-dragonborn':\n    {\n        'name': 'Bronze Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Bronze)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'copper-draconblood-dragonborn':\n    {\n        'name': 'Copper Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Copper)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'gold-draconblood-dragonborn':\n    {\n        'name': 'Gold Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Gold)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'green-draconblood-dragonborn':\n    {\n        'name': 'Green Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Green)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'red-draconblood-dragonborn':\n    {\n        'name': 'Red Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Red)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'silver-draconblood-dragonborn':\n    {\n        'name': 'Silver Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Silver)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'white-draconblood-dragonborn':\n    {\n        'name': 'White Draconblood Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (White)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Forceful Presence',\n                'description': 'Forceful Presence'\n            },\n            {\n                'name': 'Draconic Ancestry'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'amethyst-gem-dragonborn':\n    {\n        'name': 'Amethyst Gem Dragonborn',\n        'weight': 2,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Force)',\n                'description': 'Breath Weapon (Gem Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Gem Dragonborn)'\n            },\n            {\n                'name': 'Psionic Mind'\n            },\n            {\n                'name': 'Gem Flight',\n                'description': 'Gem Flight',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'force'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'crystal-gem-dragonborn':\n    {\n        'name': 'Crystal Gem Dragonborn',\n        'weight': 2,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Radiant)',\n                'description': 'Breath Weapon (Gem Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Gem Dragonborn)'\n            },\n            {\n                'name': 'Psionic Mind'\n            },\n            {\n                'name': 'Gem Flight',\n                'description': 'Gem Flight',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'radiant'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'emerald-gem-dragonborn':\n    {\n        'name': 'Emerald Gem Dragonborn',\n        'weight': 2,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Psychic)',\n                'description': 'Breath Weapon (Gem Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Gem Dragonborn)'\n            },\n            {\n                'name': 'Psionic Mind'\n            },\n            {\n                'name': 'Gem Flight',\n                'description': 'Gem Flight',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'psychic'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'sapphire-gem-dragonborn':\n    {\n        'name': 'Sapphire Gem Dragonborn',\n        'weight': 2,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Thunder)',\n                'description': 'Breath Weapon (Gem Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Gem Dragonborn)'\n            },\n            {\n                'name': 'Psionic Mind'\n            },\n            {\n                'name': 'Gem Flight',\n                'description': 'Gem Flight',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'thunder'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'topaz-gem-dragonborn':\n    {\n        'name': 'Topaz Gem Dragonborn',\n        'weight': 2,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Necrotic)',\n                'description': 'Breath Weapon (Gem Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Gem Dragonborn)'\n            },\n            {\n                'name': 'Psionic Mind'\n            },\n            {\n                'name': 'Gem Flight',\n                'description': 'Gem Flight',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'necrotic'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'brass-metallic-dragonborn':\n    {\n        'name': 'Brass Metallic Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Metallic Ancestry'\n            },\n            {\n                'name': 'Breath Weapon (Fire)',\n                'description': 'Breath Weapon (Metallic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Metallic Dragonborn)'\n            },\n            {\n                'name': 'Metallic Breath Weapon',\n                'description': 'Metallic Breath Weapon',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'fire'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'bronze-metallic-dragonborn':\n    {\n        'name': 'Bronze Metallic Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Metallic Ancestry'\n            },\n            {\n                'name': 'Breath Weapon (Lightning)',\n                'description': 'Breath Weapon (Metallic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Metallic Dragonborn)'\n            },\n            {\n                'name': 'Metallic Breath Weapon',\n                'description': 'Metallic Breath Weapon',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'lightning'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'copper-metallic-dragonborn':\n    {\n        'name': 'Copper Metallic Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Metallic Ancestry'\n            },\n            {\n                'name': 'Breath Weapon (Acid)',\n                'description': 'Breath Weapon (Metallic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Metallic Dragonborn)'\n            },\n            {\n                'name': 'Metallic Breath Weapon',\n                'description': 'Metallic Breath Weapon',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'acid'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'gold-metallic-dragonborn':\n    {\n        'name': 'Gold Metallic Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Metallic Ancestry'\n            },\n            {\n                'name': 'Breath Weapon (Fire)',\n                'description': 'Breath Weapon (Metallic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Metallic Dragonborn)'\n            },\n            {\n                'name': 'Metallic Breath Weapon',\n                'description': 'Metallic Breath Weapon',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'fire'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'silver-metallic-dragonborn':\n    {\n        'name': 'Silver Metallic Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Metallic Ancestry'\n            },\n            {\n                'name': 'Breath Weapon (Cold)',\n                'description': 'Breath Weapon (Metallic Dragonborn)',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Draconic Resistance (Metallic Dragonborn)'\n            },\n            {\n                'name': 'Metallic Breath Weapon',\n                'description': 'Metallic Breath Weapon',\n                'level': 5\n            }\n        ],\n        'dr': [\n            'cold'\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'black-ravenite-dragonborn':\n    {\n        'name': 'Black Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Black)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'blue-ravenite-dragonborn':\n    {\n        'name': 'Blue Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Blue)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'brass-ravenite-dragonborn':\n    {\n        'name': 'Brass Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Brass)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'bronze-ravenite-dragonborn':\n    {\n        'name': 'Bronze Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Bronze)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'copper-ravenite-dragonborn':\n    {\n        'name': 'Copper Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Copper)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'gold-ravenite-dragonborn':\n    {\n        'name': 'Gold Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Gold)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'green-ravenite-dragonborn':\n    {\n        'name': 'Green Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Green)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'red-ravenite-dragonborn':\n    {\n        'name': 'Red Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Red)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'silver-ravenite-dragonborn':\n    {\n        'name': 'Silver Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (Silver)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'white-ravenite-dragonborn':\n    {\n        'name': 'White Ravenite Dragonborn',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Breath Weapon (White)',\n                'description': 'Breath Weapon (Dragonborn)'\n            },\n            {\n                'name': 'Vengeful Assault'\n            }\n        ],\n        'languages': [\n            'draconic'\n        ],\n        'abilities': {\n            'str': 2,\n            'cha': 1\n        }\n    },\n    'duergar':\n    {\n        'name': 'Duergar',\n        'weight': 50,\n        'enabled': true\n    },\n    'hill-dwarf':\n    {\n        'name': 'Hill Dwarf',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Dwarven Resilience',\n                'description': 'Dwarven Resilience'\n            },\n            {\n                'name': 'Dwarven Combat Training'\n            },\n            {\n                'name': 'Stonecunning',\n                'description': 'Stonecunning'\n            },\n            {\n                'name': 'Dwarven Toughness'\n            },\n            {\n                'name': 'Tool Proficiency'\n            }\n        ],\n        'languages': [\n            'dwarvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'special': function(actor, updates) {\n            let bonusHP = Math.ceil(chris.levelOrCR(actor));\n            let currentHP = updates.actor?.system?.attributes?.hp?.value ?? actor.system.attributes.hp.max;\n            setProperty(updates, 'actor.system.attributes.hp.max', currentHP + bonusHP);\n            setProperty(updates, 'actor.system.attributes.hp.value', currentHP + bonusHP);\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('battleaxe')) weaponProf.push('battleaxe');\n            if (!weaponProf.includes('handaxe')) weaponProf.push('handaxe');\n            if (!weaponProf.includes('lighthammer')) weaponProf.push('lighthammer');\n            if (!weaponProf.includes('warhammer')) weaponProf.push('warhammer');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n        },\n        'abilities': {\n            'con': 2,\n            'wis': 1\n        },\n        'extraTools': {\n            'proficient': {\n                'name': 'choose',\n                'options': [\n                    'smith',\n                    'brewer',\n                    'mason'\n                ],\n                'count': 1\n            }\n        }\n    },\n    'mountain-dwarf':\n    {\n        'name': 'Mountain Dwarf',\n        'weight': 50,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Dwarven Resilience',\n                'description': 'Dwarven Resilience'\n            },\n            {\n                'name': 'Dwarven Combat Training'\n            },\n            {\n                'name': 'Stonecunning',\n                'description': 'Stonecunning'\n            },\n            {\n                'name': 'Dwarven Armor Training'\n            },\n            {\n                'name': 'Tool Proficiency'\n            }\n        ],\n        'languages': [\n            'dwarvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'special': function(actor, updates) {\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('battleaxe')) weaponProf.push('battleaxe');\n            if (!weaponProf.includes('handaxe')) weaponProf.push('handaxe');\n            if (!weaponProf.includes('lighthammer')) weaponProf.push('lighthammer');\n            if (!weaponProf.includes('warhammer')) weaponProf.push('warhammer');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n            let armorProf = updates.actor?.system?.traits?.armorProf?.value ?? actor.system.traits?.armorProf?.value ? Array.from(actor.system.traits.armorProf.value) : [];\n            if (!armorProf.includes('lgt')) armorProf.push('lgt');\n            if (!armorProf.includes('med')) armorProf.push('med');\n            setProperty(updates, 'actor.system.traits.armorProf.value', armorProf);\n        },\n        'abilities': {\n            'con': 2,\n            'str': 2\n        },\n        'extraTools': {\n            'proficient': {\n                'name': 'choose',\n                'options': [\n                    'smith',\n                    'brewer',\n                    'mason'\n                ],\n                'count': 1\n            }\n        }\n    },\n    'mark-of-warding-dwarf':\n    {\n        'name': 'Mark of Warding Dwarf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Dwarven Resilience',\n                'description': 'Dwarven Resilience'\n            },\n            {\n                'name': 'Dwarven Combat Training'\n            },\n            {\n                'name': 'Stonecunning',\n                'description': 'Stonecunning'\n            },\n            {\n                'name': 'Warder\\'s Intuition',\n                'description': 'Warder\\'s Intuition'\n            },\n            {\n                'name': 'Wards and Seals',\n                'description': 'Wards and Seals',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Warding Dwarf)',\n                'spellcasting': true\n            },\n            {\n                'name': 'Tool Proficiency'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Alarm',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'int'\n            },\n            {\n                'name': 'Mage Armor',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'int'\n            },\n            {\n                'name': 'Arcane Lock',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'level': 3,\n                'ability': 'int'\n            },\n            {\n                'name': 'Alarm',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Armor of Agathys',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Arcane Lock',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Knock',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Glyph of Warding',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Magic Circle',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Leomund\\'s Secret Chest',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Mordenkainen\\'s Faithful Hound',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Antilife Shell',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'dwarvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'con': 2,\n            'int': 1\n        },\n        'extraTools': {\n            'proficient': {\n                'name': 'choose',\n                'options': [\n                    'smith',\n                    'brewer',\n                    'mason'\n                ],\n                'count': 1\n            }\n        }\n    },\n    'earth-genasi':\n    {\n        'name': 'Earth Genasi',\n        'weight': 25,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Earth Walk',\n                'description': 'Earth Walk'\n            },\n            {\n                'name': 'Merge with Stone',\n                'description': 'Merge with Stone',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Blade Ward',\n                'activation': {\n                    'condition': '',\n                    'cost': 1,\n                    'type': 'bonus'\n                },\n                'uses': {\n                    'max': '@prof',\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Blade Ward',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Pass without Trace',\n                'uses': {\n                    'max': 1,\n                    'per': 'day',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Pass without Trace',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            }\n        ],\n        'languages': [\n            'primordial',\n            'terran'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'con': 2,\n            'str': 1\n        }\n    },\n    'autumn-eladrin':\n    {\n        'name': 'Autumn Eladrin',\n        'weight': 10,\n        'enabled': true,\n        'monster': 'Autumn Eladrin',\n        'special': function (actor, updates) {\n            let level = chris.levelOrCR(actor);\n            let bonusDamageDice = Math.max(Math.ceil(level / 2), 1);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[psychic]', 'psychic']]);\n            setProperty(updates, 'embedded.Item.Longbow.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[psychic]', 'psychic']]);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.versatile', '1d10[slashing] + @mod ' + bonusDamageDice + 'd8[psychic]', 'psychic');\n            let averageDamage = bonusDamageDice * 4;\n            let descriptionLongsword = getProperty(updates, 'embedded.Item.Longsword.system.description.value')?.replace('22 (5d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            let descriptionLongbow = getProperty(updates, 'embedded.Item.Longbow.system.description.value')?.replace('22 (5d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            setProperty(updates, 'embedded.Item.Longsword.system.description.value', descriptionLongsword);\n            setProperty(updates, 'embedded.Item.Longbow.system.description.value', descriptionLongbow);\n        }\n    },\n    'winter-eladrin':\n    {\n        'name': 'Winter Eladrin',\n        'weight': 10,\n        'enabled': true,\n        'monster': 'Winter Eladrin',\n        'special': function (actor, updates) {\n            let level = chris.levelOrCR(actor);\n            let bonusDamageDice = Math.max(Math.floor(level /3), 1);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[cold]', 'cold']]);\n            setProperty(updates, 'embedded.Item.Longbow.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[cold]', 'cold']]);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.versatile', '1d10[slashing] + @mod ' + bonusDamageDice + 'd8[cold]', 'cold');\n            let averageDamage = bonusDamageDice * 4;\n            let descriptionLongsword = getProperty(updates, 'embedded.Item.Longsword.system.description.value')?.replace('13 (3d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            let descriptionLongbow = getProperty(updates, 'embedded.Item.Longbow.system.description.value')?.replace('13 (3d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            setProperty(updates, 'embedded.Item.Longsword.system.description.value', descriptionLongsword);\n            setProperty(updates, 'embedded.Item.Longbow.system.description.value', descriptionLongbow);\n        }\n    },\n    'spring-eladrin':\n    {\n        'name': 'Spring Eladrin',\n        'weight': 10,\n        'enabled': true,\n        'monster': 'Spring Eladrin',\n        'special': function (actor, updates) {\n            let level = chris.levelOrCR(actor);\n            let bonusDamageDice = Math.max(Math.ceil(level / 2), 1);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[psychic]', 'psychic']]);\n            setProperty(updates, 'embedded.Item.Longbow.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[psychic]', 'psychic']]);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.versatile', '1d10[slashing] + @mod ' + bonusDamageDice + 'd8[psychic]', 'psychic');\n            let averageDamage = bonusDamageDice * 4;\n            let descriptionLongsword = getProperty(updates, 'embedded.Item.Longsword.system.description.value')?.replace('22 (5d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            let descriptionLongbow = getProperty(updates, 'embedded.Item.Longbow.system.description.value')?.replace('22 (5d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            setProperty(updates, 'embedded.Item.Longsword.system.description.value', descriptionLongsword);\n            setProperty(updates, 'embedded.Item.Longbow.system.description.value', descriptionLongbow);\n        }\n    },\n    'summer-eladrin':\n    {\n        'name': 'Summer Eladrin',\n        'weight': 10,\n        'enabled': true,\n        'monster': 'Summer Eladrin',\n        'special': function (actor, updates) {\n            let level = chris.levelOrCR(actor);\n            let bonusDamageDice = Math.max(Math.floor(level /5), 1);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[fire]', 'fire']]);\n            setProperty(updates, 'embedded.Item.Longbow.system.damage.parts', [['1d8[slashing] + @mod', 'slashing'], [bonusDamageDice + 'd8[fire]', 'fire']]);\n            setProperty(updates, 'embedded.Item.Longsword.system.damage.versatile', '1d10[slashing] + @mod ' + bonusDamageDice + 'd8[fire]', 'fire');\n            let averageDamage = bonusDamageDice * 4;\n            let descriptionLongsword = getProperty(updates, 'embedded.Item.Longsword.system.description.value')?.replace('9 (2d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            let descriptionLongbow = getProperty(updates, 'embedded.Item.Longbow.system.description.value')?.replace('9 (2d8)', averageDamage + ' (' + bonusDamageDice + 'd8)');\n            setProperty(updates, 'embedded.Item.Longsword.system.description.value', descriptionLongsword);\n            setProperty(updates, 'embedded.Item.Longbow.system.description.value', descriptionLongbow);\n        }\n    },\n    'aereni-high-elf':\n    {\n        'name': 'Aereni High Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Aereni High Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Aereni Elf'\n            },\n            {\n                'name': 'Cantrip (Aereni High Elf)',\n                'rename': 'Cantrip',\n                'spellcasting': true\n            }\n        ],\n        'spellcasting': {\n            'wizard': {\n                'cantrip': 1\n            }\n        },\n        'extraSkills': {\n            'expertise': {\n                'name': 'any',\n                'count': 1\n            }\n        },\n        'languages': [\n            'elvish'\n        ],\n        'extraLanguages': [\n            {\n                'name': 'any',\n                'count': 1\n            }\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'dex': 2,\n            'int': 1\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'aereni-wood-elf':\n    {\n        'name': 'Aereni Wood Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Aereni Wood Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Aereni Elf'\n            },\n            {\n                'name': 'Fleet of Foot'\n            },\n            {\n                'name': 'Mask of the Wild'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'extraSkills': {\n            'expertise': {\n                'name': 'any',\n                'count': 1\n            }\n        },\n        'movement': {\n            'walk': 35\n        },\n        'skills': {\n            'prc': 1\n        },\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        },\n        'skills': {\n            'per': 1\n        }\n    },\n    'drow':\n    {\n        'name': 'Drow',\n        'weight': 25,\n        'enabled': true,\n        'monster': 'Drow'\n    },\n    'high-elf':\n    {\n        'name': 'High Elf',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (High Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Elf Weapon Training'\n            },\n            {\n                'name': 'Cantrip (High Elf)',\n                'rename': 'Cantrip',\n                'spellcasting': true\n            }\n        ],\n        'spellcasting': {\n            'wizard': {\n                'cantrip': 1\n            }\n        },\n        'languages': [\n            'elvish'\n        ],\n        'extraLanguages': [\n            {\n                'name': 'any',\n                'count': 1\n            }\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'dex': 2,\n            'int': 1\n        },\n        'special': function(actor, updates) {\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('longsword')) weaponProf.push('longsword');\n            if (!weaponProf.includes('shortsword')) weaponProf.push('shortsword');\n            if (!weaponProf.includes('shortbow')) weaponProf.push('shortbow');\n            if (!weaponProf.includes('longbow')) weaponProf.push('longbow');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'mark-of-shadow-elf':\n    {\n        'name': 'Mark of Shadow Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Mark of Shadow Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Cunning Intuition'\n            },\n            {\n                'name': 'Shape Shadows',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Shadow Elf)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Minor Illusion'\n            },\n            {\n                'name': 'Invisibility',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'cha'\n            },\n            {\n                'name': 'Disguise Self',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Silent Image',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Darkness',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Pass without Trace',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Clairvoyance',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Major Image',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Greater Invisibility',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Hallucinatory Terrain',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Mislead',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'dex': 2,\n            'cha': 1\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'pallid-elf':\n    {\n        'name': 'Pallid Elf',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Pallid Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Incisive Sense',\n                'description': 'Incisive Sense'\n            },\n            {\n                'name': 'Blessing of the Moon Weaver',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Light',\n                'ability': 'wis'\n            },\n            {\n                'name': 'Sleep',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Invisibility',\n                'level': 5,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'target': {\n                    'type': 'self',\n                    'units': null,\n                    'value': null,\n                    'width': null\n                },\n                'range': {\n                    'long': null,\n                    'units': 'self',\n                    'value': null\n                },\n                'ability': 'wis'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'valenar-high-elf':\n    {\n        'name': 'Valenar High Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Valenar High Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Valenar Elf'\n            },\n            {\n                'name': 'Cantrip (High Elf)',\n                'rename': 'Cantrip',\n                'spellcasting': true\n            }\n        ],\n        'spellcasting': {\n            'wizard': {\n                'cantrip': 1\n            }\n        },\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'dex': 2,\n            'int': 1\n        },\n        'special': function(actor, updates) {\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('scimitar')) weaponProf.push('scimitar');\n            if (!weaponProf.includes('longbow')) weaponProf.push('longbow');\n            if (!weaponProf.includes('shortbow')) weaponProf.push('shortbow');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'valenar-wood-elf':\n    {\n        'name': 'Valenar Wood Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Valenar Wood Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Valenar Elf'\n            },\n            {\n                'name': 'Fleet of Foot'\n            },\n            {\n                'name': 'Mask of the Wild'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'extraSkills': {\n            'expertise': {\n                'name': 'any',\n                'count': 1\n            }\n        },\n        'movement': {\n            'walk': 35\n        },\n        'skills': {\n            'prc': 1\n        },\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        },\n        'skills': {\n            'per': 1\n        },\n        'special': function(actor, updates) {\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('scimitar')) weaponProf.push('scimitar');\n            if (!weaponProf.includes('longbow')) weaponProf.push('longbow');\n            if (!weaponProf.includes('shortbow')) weaponProf.push('shortbow');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n        }\n    },\n    'wood-elf':\n    {\n        'name': 'Wood Elf',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Keen Senses'\n            },\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Wood Elf)'\n            },\n            {\n                'name': 'Trance'\n            },\n            {\n                'name': 'Elf Weapon Training'\n            },\n            {\n                'name': 'Fleet of Foot'\n            },\n            {\n                'name': 'Mask of the Wild'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'extraSkills': {\n            'expertise': {\n                'name': 'any',\n                'count': 1\n            }\n        },\n        'movement': {\n            'walk': 35\n        },\n        'skills': {\n            'prc': 1\n        },\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        },\n        'skills': {\n            'per': 1\n        },\n        'special': function(actor, updates) {\n            let weaponProf = updates.actor?.system?.traits?.weaponProf?.value ?? actor.system.traits?.weaponProf?.value ? Array.from(actor.system.traits.weaponProf.value) : [];\n            if (!weaponProf.includes('longsword')) weaponProf.push('longsword');\n            if (!weaponProf.includes('shortsword')) weaponProf.push('shortsword');\n            if (!weaponProf.includes('shortbow')) weaponProf.push('shortbow');\n            if (!weaponProf.includes('longbow')) weaponProf.push('longbow');\n            setProperty(updates, 'actor.system.traits.weaponProf.value', weaponProf);\n        }\n    },\n    'fairy':\n    {\n        'name': 'Fairy',\n        'weight': 5,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fairy Magic',\n                'spellcasting': true\n            },\n            {\n                'name': 'Flight (Fairy)'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Faerie Fire',\n                'level': 3,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Faerie Fire',\n                'level': 3,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Enlarge/Reduce',\n                'level': 5,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Enlarge/Reduce',\n                'level': 5,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            }\n        ],\n        'size': 'small',\n        'movement': {\n            'fly': 30\n        }\n    },\n    'firbolg':\n    {\n        'name': 'Firbolg',\n        'weight': 25,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Firbolg Magic',\n                'spellcasting': true\n            },\n            {\n                'name': 'Hidden Step',\n                'description': 'Hidden Step',\n                'uses': {\n                    'max': '@prof'\n                }\n            },\n            {\n                'name': 'Powerful Build'\n            },\n            {\n                'name': 'Speech of Beast and Leaf'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Detect Magic',\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Disguise Self',\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Detect Magic',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Disguise Self',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            }\n        ],\n        'languages': [\n            'elvish',\n            'giant'\n        ],\n        'abilities': {\n            'wis': 2,\n            'str': 1\n        }\n    },\n    'fire-genasi':\n    {\n        'name': 'Fire Genasi',\n        'weight': 25,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fire Resistance'\n            },\n            {\n                'name': 'Reach to the Blaze',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Produce Flame'\n            },\n            {\n                'name': 'Burning Hands',\n                'level': 3,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Flame Blade',\n                'level': 5,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Burning Hands',\n                'level': 3,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Flame Blade',\n                'level': 5,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            }\n        ],\n        'dr': [\n            'fire'\n        ],\n        'languages': [\n            'primordial',\n            'ignan'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'con': 2,\n            'int': 1\n        }\n    },\n    'giff':\n    {\n        'name': 'Giff',\n        'weight': 5,\n        'enabled': false,\n        'monster': 'Giff'\n    },\n    'githyanki':\n    {\n        'name': 'Githyanki',\n        'weight': 10,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Astral Knowledge',\n                'description': 'Astral Knowledge'\n            },\n            {\n                'name': 'Githyanki Psionics',\n                'spellcasting': true\n            },\n            {\n                'name': 'Psychic Resilience'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Mage Hand'\n            },\n            {\n                'name': 'Jump',\n                'level': 3,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Misty Step',\n                'level': 5,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Jump',\n                'level': 3,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Misty Step',\n                'level': 5,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            }\n        ],\n        'dr': [\n            'psychic'\n        ],\n        'languages': [\n            'gith'\n        ],\n        'abilities': {\n            'int': 1,\n            'str': 2\n        }\n    },\n    'githzerai':\n    {\n        'name': 'Githzerai',\n        'weight': 10,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Mental Discipline (Githzerai)',\n                'description': 'Mental Discipline (Githzerai)'\n            },\n            {\n                'name': 'Githyanki Psionics',\n                'spellcasting': true\n            },\n            {\n                'name': 'Psychic Resilience'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Mage Hand'\n            },\n            {\n                'name': 'Shield',\n                'level': 3,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Detect Thoughts',\n                'level': 5,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                }\n            },\n            {\n                'name': 'Shield',\n                'level': 3,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Detect Thoughts',\n                'level': 5,\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                }\n            }\n        ],\n        'dr': [\n            'psychic'\n        ],\n        'languages': [\n            'gith'\n        ],\n        'abilities': {\n            'int': 1,\n            'wis': 2\n        }\n    },\n    'forest-gnome':\n    {\n        'name': 'Forest Gnome',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Natural Illusionist',\n                'spellcasting': true\n            },\n            {\n                'name': 'Speak with Small Beasts'\n            },\n            {\n                'name': 'Gnome Cunning',\n                'description': 'Gnome Cunning'\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Minor Illusion',\n                'ability': 'int'\n            }\n        ],\n        'languages': [\n            'gnomish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'walk': 25\n        },\n        'size': 'small',\n        'abilities': {\n            'dex': 1,\n            'int': 2\n        }\n    },\n    'mark-of-scribing-gnome':\n    {\n        'name': 'Mark of Scribing Gnome',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Gnome Cunning',\n                'description': 'Gnome Cunning'\n            },\n            {\n                'name': 'Gifted Scribe',\n                'description': 'Gifted Scribe'\n            },\n            {\n                'name': 'Scribe\\'s Insight'\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Scribing Gnome)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Message',\n                'ability': 'int'\n            },\n            {\n                'name': 'Comprehend Languages',\n                'ability': 'int',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Magic Mouth',\n                'level': 3,\n                'ability': 'int',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Comprehend Languages',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Illusory Script',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Animal Messenger',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Silence',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Sending',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Tongues',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Arcane Eye',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Confusion',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Dream',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'gnomish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'walk': 25\n        },\n        'size': 'small',\n        'abilities': {\n            'cha': 1,\n            'int': 2\n        }\n    },\n    'rock-gnome':\n    {\n        'name': 'Rock Gnome',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Artificer\\'s Lore'\n            },\n            {\n                'name': 'Tinker'\n            },\n            {\n                'name': 'Gnome Cunning',\n                'description': 'Gnome Cunning'\n            }\n        ],\n        'languages': [\n            'gnomish'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'walk': 25\n        },\n        'size': 'small',\n        'abilities': {\n            'con': 1,\n            'int': 2\n        }\n    },\n    'goblin':\n    {\n        'name': 'Goblin',\n        'weight': 5,\n        'enabled': true,\n        'monster': 'Goblin'\n    },\n    'goliath':\n    {\n        'name': 'Goliath',\n        'weight': 10,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Little Giant'\n            },\n            {\n                'name': 'Mountain Born'\n            },\n            {\n                'name': 'Stone\\'s Endurance',\n                'description': 'Stone\\'s Endurance',\n                'uses': {\n                    'max': '@prof'\n                }\n            }\n        ],\n        'languages': [\n            'giant'\n        ],\n        'abilities': {\n            'str': 2,\n            'con': 1\n        },\n        'dr': [\n            'cold'\n        ],\n        'specialTraits': {\n            'powerfulBuild': true\n        },\n        'skills': {\n            'ath': 1\n        }\n    },\n    'grung':\n    {\n        'name': 'Grung',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Arboreal Alertness'\n            },\n            {\n                'name': 'Amphibious',\n                'description': 'Amphibious (Grung)'\n            },\n            {\n                'name': 'Poison Immunity'\n            },\n            {\n                'name': 'Poisonous Skin',\n                'description': 'Poisonous Skin'\n            },\n            {\n                'name': 'Grung Poison',\n                'description': 'Grung Poison'\n            },\n            {\n                'name': 'Standing Leap'\n            },\n            {\n                'name': 'Water Dependency'\n            }\n        ],\n        'di': [\n            'poison'\n        ],\n        'ci': [\n            'poisoned'\n        ],\n        'special': async function (actor, updates) {\n            let customLanguages = actor.system.traits.languages.custom;\n            let addedLanguages = customLanguages === '' ? 'Grung' : ' ;Grung';\n            setProperty(updates, 'actor.system.traits.languages.custom', customLanguages + addedLanguages);\n        },\n        'abilities': {\n            'dex': 2,\n            'con': 1\n        },\n        'skills': {\n            'prc': 1\n        }\n    },\n    'hadozee':\n    {\n        'name': 'Hadozee',\n        'weight': 5,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Dexterous Feet'\n            },\n            {\n                'name': 'Glide'\n            },\n            {\n                'name': 'Hadozee Dodge',\n                'description': 'Hadozee Dodge',\n                'uses': {\n                    'max': '@prof'\n                }\n            }\n        ]\n    },\n    'aquatic-half-elf':\n    {\n        'name': 'Aquatic Half-Elf',\n        'weight': 5,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Aquatic Half-Elf)'\n            },\n            {\n                'name': 'Aquatic Heritage'\n            }\n        ],\n        'languages': [\n            'elvish',\n            'primordial'\n        ],\n        'abilities': {\n            'cha': 2\n        },\n        'unassignedAbilities': {\n            'one': 2\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'swim': 30\n        }\n    },\n    'drow-half-elf':\n    {\n        'name': 'Drow Half-Elf',\n        'weight': 10,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Drow Half-Elf)'\n            },\n            {\n                'name': 'Drow Magic',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Dancing Lights'\n            },\n            {\n                'name': 'Faerie Fire',\n                'level': 3,\n                'ability': 'cha',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            },\n            {\n                'name': 'Darkness',\n                'level': 5,\n                'ability': 'cha',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                }\n            }\n        ],\n        'languages': [\n            'elvish',\n            'undercommon'\n        ],\n        'abilities': {\n            'cha': 2\n        },\n        'unassignedAbilities': {\n            'one': 2\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        }\n    },\n    'high-half-elf':\n    {\n        'name': 'High Half-Elf',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (High Half-Elf)'\n            },\n            {\n                'name': 'High Elf Descent',\n                'spellcasting': true\n            }\n        ],\n        'spellcasting': {\n            'wizard': {\n                'cantrip': 1\n            }\n        },\n        'extraLanguages': [\n            {\n                'name': 'any',\n                'count': 1\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'abilities': {\n            'cha': 2\n        },\n        'unassignedAbilities': {\n            'one': 2\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        }\n    },\n    'mark-of-detection-half-elf':\n    {\n        'name': 'Mark of Detection Half-Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Mark of Detection Half-Elf)'\n            },\n            {\n                'name': 'Deductive Intuition',\n                'description': 'Deductive Intuition'\n            },\n            {\n                'name': 'Magical Detection',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Detection Half-Elf)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Detect Magic',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Detect Poison and Disease',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Detect Poison and Disease',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Detect Evil and Good',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Detect Poison and Disease',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Detect Thoughts',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Find Traps',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Clairvoyance',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Nondetection',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Arcane Eye',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Divination',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Legend Lore',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'extraLanguages': [\n            {\n                'name': 'any',\n                'count': 1\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'abilities': {\n            'wis': 2\n        },\n        'unassignedAbilities': {\n            'one': 1\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        }\n    },\n    'mark-of-storm-half-elf':\n    {\n        'name': 'Mark of Storm Half-Elf',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Mark of Storm Half-Elf)'\n            },\n            {\n                'name': 'Windwright\\'s Intuition',\n                'description': 'Windwright\\'s Intuition'\n            },\n            {\n                'name': 'Storm\\'s Boon'\n            },\n            {\n                'name': 'Headwinds',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Storm Half-Elf)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Gust'\n            },\n            {\n                'name': 'Gust of Wind',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'cha'\n            },\n            {\n                'name': 'Feather Fall',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Fog Cloud',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Gust of Wind',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Levitate',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Sleet Storm',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Wind Wall',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Conjure Minor Elementals',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Control Water',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Conjure Elemental',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'extraLanguages': [\n            {\n                'name': 'any',\n                'count': 1\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'abilities': {\n            'cha': 2\n        },\n        'unassignedAbilities': {\n            'one': 1\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'dr': [\n            'lightning'\n        ]\n    },\n    'wood-half-elf':\n    {\n        'name': 'Wood Half-Elf',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Fey Ancestry',\n                'description': 'Fey Ancestry (Wood Half-Elf)'\n            },\n            {\n                'name': 'Fleet of Foot'\n            }\n        ],\n        'languages': [\n            'elvish'\n        ],\n        'abilities': {\n            'cha': 2\n        },\n        'unassignedAbilities': {\n            'one': 2\n        },\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'movement': {\n            'walk': 35\n        }\n    },\n    'half-orc':\n    {\n        'name': 'Half-Orc',\n        'weight': 10,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Menacing'\n            },\n            {\n                'name': 'Relentless Endurance',\n                'description': 'Relentless Endurance'\n            },\n            {\n                'name': 'Savage Attacks',\n                'description': 'Savage Attacks'\n            }\n        ],\n        'languages': [\n            'orc'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'skills': {\n            'itm': 1\n        },\n        'abilitie': {\n            'str': 2,\n            'cont': 1\n        }\n    },\n    'mark-of-finding-half-orc':\n    {\n        'name': 'Mark of Finding Half-Orc',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Hunter\\'s Intuition',\n                'description': 'Hunter\\'s Intuition'\n            },\n            {\n                'name': 'Finder\\'s Magic',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Finding Human)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Hunter\\'s Mark',\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Locate Object',\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'level': 3,\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Faerie Fire',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Longstrider',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Locate Animals or Plants',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Locate Object',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Clairvoyance',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Speak with Plants',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Divination',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Locate Creature',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Commune with Nature',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'orc'\n        ],\n        'senses': {\n            'darkvision': 60\n        },\n        'sight': {\n            'range': 60,\n            'visionMode': 'darkvision'\n        },\n        'abilities': {\n            'wis': 2,\n            'con': 1\n        }\n    },\n    'ghostwise-halfling':\n    {\n        'name': 'Ghostwise Halfling',\n        'weight': 10,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Silent Speech'\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        }\n    },\n    'lightfoot-halfling':\n    {\n        'name': 'Lightfoot Halfling',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Naturally Stealthy'\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'cha': 1\n        }\n    },\n    'lotusden-halfling':\n    {\n        'name': 'Lotusden Halfling',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Child of the Wood',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Druidcraft'\n            },\n            {\n                'name': 'Entangle',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Spike Growth',\n                'level': 5,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        }\n    },\n    'mark-of-healing-halfling':\n    {\n        'name': 'Mark of Healing Halfling',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Medical Intuition'\n            },\n            {\n                'name': 'Healing Touch',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Healing Halfling)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Cure Wounds',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Lesser Restoration',\n                'level': 3,\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'wis'\n            },\n            {\n                'name': 'Cure Wounds',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Healing Word',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': ' Lesser Restoration',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Prayer of Healing',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Aura of Vitality',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Mass Healing Word',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': ' Aura of Purity',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Aura of Life',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Greater Restoration',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'wis': 1\n        }\n    },\n    'mark-of-hospitality-halfling':\n    {\n        'name': 'Mark of Hospitality Halfling',\n        'weight': 25,\n        'enabled': false,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Ever Hospitable',\n                'description': 'Ever Hospitable'\n            },\n            {\n                'name': 'Innkeeper\\'s Magic',\n                'spellcasting': true\n            },\n            {\n                'name': 'Spells of the Mark',\n                'description': 'Spells of the Mark (Mark of Hospitality Halfling)',\n                'spellcasting': true\n            }\n        ],\n        'spells': [\n            {\n                'name': 'Prestidigitation'\n            },\n            {\n                'name': 'Purify Food and Drink',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'cha'\n            },\n            {\n                'name': 'Unseen Servant',\n                'uses': {\n                    'max': 1,\n                    'per': 'lr',\n                    'recovery': '',\n                    'value': 1\n                },\n                'preparation': {\n                    'mode': 'innate',\n                    'prepared': true\n                },\n                'ability': 'cha'\n            },\n            {\n                'name': 'Goodberry',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': 'Sleep',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 1\n            },\n            {\n                'name': ' Aid',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Calm Emotions',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 3\n            },\n            {\n                'name': 'Create Food and Water',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': 'Leomund\\'s Tiny Hut',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 5\n            },\n            {\n                'name': ' Aura of Purity',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': ' Mordenkainen\\'s Private Sanctum',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 7\n            },\n            {\n                'name': 'Hallow',\n                'preparation': {\n                    'mode': 'prepared',\n                    'prepared': true\n                },\n                'level': 9\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'cha': 1\n        }\n    },\n    'stout-halfling':\n    {\n        'name': 'Stout Halfling',\n        'weight': 50,\n        'enabled': true,\n        'features': [\n            {\n                'name': 'Brave',\n                'description': 'Brave'\n            },\n            {\n                'name': 'Lucky',\n                'description': 'Lucky'\n            },\n            {\n                'name': 'Halfling Nimbleness'\n            },\n            {\n                'name': 'Stout Resilience',\n                'description': 'Stout Resilience'\n            }\n        ],\n        'languages': [\n            'halfling'\n        ],\n        'abilities': {\n            'dex': 2,\n            'con': 1\n        }\n    },\n    'harengon':\n    {\n        'name': 'Harengon',\n        'weight': 10,\n        'enabled': false\n    },\n    'hexblood':\n    {\n        'name': 'Hexblood',\n        'weight': 5,\n        'enabled': false\n    },\n    'hobgoblin':\n    {\n        'name': 'Hobgoblin',\n        'weight': 10,\n        'enabled': true\n    },\n    'human':\n    {\n        'name': 'Human',\n        'weight': 100,\n        'enabled': true\n    },\n    'mark-of-finding-human':\n    {\n        'name': 'Mark of Finding Human',\n        'weight': 25,\n        'enabled': false\n    },\n    'mark-of-handling-human':\n    {\n        'name': 'Mark of Handling Human',\n        'weight': 25,\n        'enabled': false\n    },\n    'mark-of-making-human':\n    {\n        'name': 'Mark of Making Human',\n        'weight': 25,\n        'enabled': false\n    },\n    'mark-of-passage-human':\n    {\n        'name': 'Mark of Passage Human',\n        'weight': 25,\n        'enabled': false\n    },\n    'kalashtar':\n    {\n        'name': 'Kalashtar',\n        'weight': 25,\n        'enabled': false\n    },\n    'kender':\n    {\n        'name': 'Kender',\n        'weight': 25,\n        'enabled': false\n    },\n    'kenku':\n    {\n        'name': 'Kenku',\n        'weight': 5,\n        'enabled': true\n    },\n    'kobold':\n    {\n        'name': 'Kobold',\n        'weight': 5,\n        'enabled': true\n    },\n    'leonin':\n    {\n        'name': 'Leonin',\n        'weight': 10,\n        'enabled': false\n    },\n    'lizardfolk':\n    {\n        'name': 'Lizardfolk',\n        'weight': 5,\n        'enabled': true\n    },\n    'locathah':\n    {\n        'name': 'Locathah',\n        'weight': 5,\n        'enabled': false\n    },\n    'loxodon':\n    {\n        'name': 'Loxodon',\n        'weight': 25,\n        'enabled': false\n    },\n    'minotaur':\n    {\n        'name': 'Minotaur',\n        'weight': 5,\n        'enabled': true\n    },\n    'orc':\n    {\n        'name': 'Orc',\n        'weight': 5,\n        'enabled': true\n    },\n    'owlin':\n    {\n        'name': 'Owlin',\n        'weight': 10,\n        'enabled': false\n    },\n    'plasmoid':\n    {\n        'name': 'Plasmoid',\n        'weight': 5,\n        'enabled': false\n    },\n    'reborn':\n    {\n        'name': 'Reborn',\n        'weight': 5,\n        'enabled': false\n    },\n    'satyr':\n    {\n        'name': 'Satyr',\n        'weight': 5,\n        'enabled': true\n    },\n    'sea-elf':\n    {\n        'name': 'Sea Elf',\n        'weight': 10,\n        'enabled': true\n    },\n    'shadar-kai':\n    {\n        'name': 'Shadar-Kai',\n        'weight': 5,\n        'enabled': true\n    },\n    'beasthide-shifter':\n    {\n        'name': 'Beasthide Shifter',\n        'weight': 5,\n        'enabled': true\n    },\n    'longtooth-shifter':\n    {\n        'name': 'Longtooth Shifter',\n        'weight': 5,\n        'enabled': true\n    },\n    'swiftstride-shifter':\n    {\n        'name': 'Swiftstride Shifter',\n        'weight': 5,\n        'enabled': true\n    },\n    'wildhunt-shifter':\n    {\n        'name': 'Wildhunt Shifter',\n        'weight': 5,\n        'enabled': true\n    },\n    'simic-hybrid':\n    {\n        'name': 'Simic Hybrid',\n        'weight': 25,\n        'enabled': false\n    },\n    'tabaxi':\n    {\n        'name': 'Tabaxi',\n        'weight': 10,\n        'enabled': true\n    },\n    'thri-kreen':\n    {\n        'name': 'Thri-Kreen',\n        'weight': 5,\n        'enabled': false\n    },\n    'baalzebul-tiefling':\n    {\n        'name': 'Baalzebul Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'dispater-tiefling':\n    {\n        'name': 'Dispater Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'tierna-tiefling':\n    {\n        'name': 'Tierna Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'glasya-tiefling':\n    {\n        'name': 'Glasya Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'levistus-tiefling':\n    {\n        'name': 'Levistus Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'mammon-tiefling':\n    {\n        'name': 'Mammon Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'mephistopheles-tiefling':\n    {\n        'name': 'Mephistopheles Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'zariel-tiefling':\n    {\n        'name': 'Zariel Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'hellfire-tiefling':\n    {\n        'name': 'Hellfire Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'winged-tiefling':\n    {\n        'name': 'Winged Tiefling',\n        'weight': 1,\n        'enabled': true\n    },\n    'feral-winged-tiefling':\n    {\n        'name': 'Feral Winged Tiefling',\n        'weight': 1,\n        'enabled': false\n    },\n    'feral-hellfire-tiefling':\n    {\n        'name': 'Feral Hellfire Tiefling',\n        'weight': 1,\n        'enabled': false\n    },\n    'tortle':\n    {\n        'name': 'Tortle',\n        'weight': 5,\n        'enabled': true\n    },\n    'triton':\n    {\n        'name': 'Triton',\n        'weight': 5,\n        'enabled': true\n    },\n    'vedalken':\n    {\n        'name': 'Vedalken',\n        'weight': 25,\n        'enabled': false\n    },\n    'verdan':\n    {\n        'name': 'Verdan',\n        'weight': 5,\n        'enabled': false\n    },\n    'water-genasi':\n    {\n        'name': 'Water Genasi',\n        'weight': 25,\n        'enabled': false\n    },\n    'warforged':\n    {\n        'name': 'Warforged',\n        'weight': 25,\n        'enabled': false\n    },\n    'yaun-ti':\n    {\n        'name': 'Yaun-Ti',\n        'weight': 5,\n        'enabled': true\n    }\n};\nlet chanceTable = [];\nlet chanceTotal;\nexport function updateChanceTable () {\n    chanceTotal = 0;\n    for (let [key, value] of Object.entries(game.settings.get('chris-premades', 'Humanoid Randomizer Settings'))) {\n        if (!value.enabled) continue;\n        chanceTable.push([key, value.weight]);\n        chanceTotal += value.weight;\n    }\n}\nfunction pickRace() {\n    if (chanceTable.length === 0) updateChanceTable();\n    let threshold = Math.random() * chanceTotal;\n    let total = 0;\n    for (let i = 0; i < chanceTotal - 1; ++i) {\n        total += chanceTable[i][1];\n        if (total >= threshold) {\n            return chanceTable[i][0];\n        }\n    }\n    return chanceTable[chanceTotal - 1][0];\n}\nexport async function npcRandomizer(token, options, user) {\n    if ((game.user.id !== user) || token.actorLink) return;\n    let item = token.actor.items.getName('CPR - Randomizer');\n    if (!item) return;\n    let actor = token.actor;\n    let updates = {};\n    if (chris.getConfiguration(item, 'humanoid')) await humanoid(actor, updates, item) ?? false;\n    setProperty(updates, 'embedded.Item.CPR - Randomizer', warpgate.CONST.DELETE);\n    console.log(updates);\n    let warpgateOptions = {\n        'permanent': true,\n        'name': 'CPR - Randomzier',\n        'description': 'CPR - Randomzier'\n    };\n    await warpgate.mutate(token, updates, {}, warpgateOptions);\n}\nasync function humanoid(targetActor, updates, item) {\n//    let race = pickRace();\n    let race = 'stout-halfling';\n    console.log(race);\n    let sourceActor;\n    if (allRaces[race].monster) {\n        sourceActor = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Monster Compendium'), allRaces[race].monster, true);\n        if (!sourceActor) return;\n    }\n    let skills = chris.getConfiguration(item, 'skills') ?? 'upgrade';\n    let abilities = chris.getConfiguration(item, 'abilities') ?? 'upgrade';\n    if (sourceActor) {\n        for (let i of Object.keys(CONFIG.DND5E.abilities)) {\n            let sourceAbility = sourceActor.system.abilities[i].value;\n            let targetAbility = targetActor.system.abilities[i].value;\n            switch (abilities) {\n                case 'source':\n                    setProperty(updates, 'actor.system.abilities.' + i + '.value', sourceAbility);\n                    break;\n                case 'upgrade':\n                    if (sourceAbility > targetAbility) setProperty(updates, 'actor.system.abilities.' + i + '.value', sourceAbility);\n                    break;\n                case 'downgrade':\n                    if (sourceAbility < targetAbility) setProperty(updates, 'actor.system.abilities.' + i + '.value', sourceAbility);\n                    break;\n            }\n        }\n        for (let i of Object.keys(CONFIG.DND5E.skills)) {\n            let sourceSkill = sourceActor.system.skills[i].value;\n            let targetSkill = targetActor.system.skills[i].value;\n            switch (skills) {\n                case 'source':\n                    setProperty(updates, 'actor.system.skills.' + i + '.value', sourceSkill);\n                    break;\n                case 'upgrade':\n                    if (sourceSkill > targetSkill) setProperty(updates, 'actor.system.skills.' + i + '.value', sourceSkill);\n                    break;\n                case 'downgrade':\n                    if (sourceSkill < targetSkill) setProperty(updates, 'actor.system.skills.' + i + '.value', sourceSkill);\n                    break;\n            }\n        }\n        let avatar = chris.getConfiguration(item, 'avatar') ?? 'source';\n        if (avatar === 'source') setProperty(updates, 'actor.img', sourceActor.img);\n        let token = chris.getConfiguration(item, 'token') ?? 'source';\n        if (token === 'source') {\n            setProperty(updates, 'actor.prototypeToken.texture.src', sourceActor.prototypeToken.texture.src);\n            setProperty(updates, 'token.texture.src', sourceActor.prototypeToken.texture.src);\n        }\n        setProperty(updates, 'actor.system.details.type.subtype', sourceActor.system.details.type.subtype);\n    }\n    let features = chris.getConfiguration(item, 'features') ?? 'merge';\n    let spells = chris.getConfiguration(item, 'spells') ?? true;\n    if (features === 'merge' && sourceActor) {\n        for (let item of sourceActor.items) {\n            if (updates.embedded?.Item?.[item.name]) continue;\n            setProperty(updates, 'embedded.Item.' + item.name, item);\n        }\n    } else if (features === 'source' && sourceActor) {\n        for (let item of targetActor.items) {\n            setProperty(updates, 'embedded.Item.' + item.name, warpgate.CONST.DELETE)\n        }\n        for (let item of sourceActor.items) setProperty(updates, 'embedded.Item.' + item.name, item);\n    } else if (features === 'merge' && !sourceActor && allRaces[race].features) {\n        for (let i of allRaces[race].features) {\n            if (i.spellcasting && !spells) continue;\n            if (i.level) {\n                if (i.level > chris.levelOrCR(targetActor)) continue;\n            }\n            let featureData = await chris.getItemFromCompendium('chris-premades.CPR Race Features', i.name, true);\n            if (!featureData) featureData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Racial Trait Compendium'), i.name, true);\n            if (!featureData) continue;\n            if (i.description) {\n                let descriptionItem = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Racial Trait Compendium'), i.description, true);\n                if (descriptionItem) featureData.system.description.value = descriptionItem.system.description.value;\n            }\n            if (i.uses) {\n                if (i.uses.max === '@prof') setProperty(featureData, 'system.uses.value', targetActor.system.attributes.prof);\n            }\n            if (!featureData.img) featureData.img = 'icons/sundries/gaming/dice-runed-brown.webp';\n            if (i.rename) featureData.name = i.rename;\n            setProperty(updates, 'embedded.Item.' + featureData.name, featureData);\n        }\n        if (allRaces[race].spells) {\n            for (let i of allRaces[race].spells) {\n                if (i.level) {\n                    if (i.level > chris.levelOrCR(targetActor)) continue;\n                }\n                let spellData = await chris.getItemFromCompendium(game.settings.get('chris-premades', 'Spell Compendium'), i.name, true);\n                if (!spellData) continue;\n                if (i.uses) {\n                    setProperty(spellData, 'system.uses', i.uses);\n                    if (spellData.system.uses.max === '@prof') setProperty(spellData, 'system.uses.value', targetActor.system.attributes.prof);\n                }\n                if (i.preparation) {\n                    setProperty(spellData, 'system.preparation', i.preparation);\n                    if (i.preparation.mode != 'prepared') spellData.name += ' (' + chris.titleCase(i.preparation.mode) + ')';\n                } else {\n                    setProperty(spellData, 'system.preparation.prepared', true);\n                }\n                if (i.ability) setProperty(spellData, 'system.ability', i.ability);\n                setProperty(updates, 'embedded.Item.' + spellData.name, spellData);\n                if (i.target) setProperty(spellData, 'system.target', i.target);\n                if (i.range) setProperty(spellData, 'system.range', i.range);\n            }\n        }\n        if (allRaces[race].skills) {\n            switch (skills) {\n                case 'upgrade':\n                    for (let [key, value] of Object.entries(allRaces[race].skills)) {\n                        if (targetActor.system.skills[key].value < value) setProperty(updates, 'actor.system.skills.' + key + '.value', value);\n                    }\n                    break;\n                case 'downgrade':\n                    for (let [key, value] of Object.entries(allRaces[race].skills)) {\n                        if (targetActor.system.skills[key].value > value) setProperty(updates, 'actor.system.skills.' + key + '.value', value);\n                    }\n                    break;\n            }\n        }\n        if (allRaces[race].abilities && abilities === 'upgrade') {\n            for (let [key, value] of Object.entries(allRaces[race].abilities)) {\n                let score = Math.min(20, targetActor.system.abilities[key].value + value);\n                setProperty(updates, 'system.abilities.' + key + '.value', score);\n            }\n        }\n    }\n    let conditionImmunity = chris.getConfiguration(item, 'conditionimmunity') ?? 'merge';\n    let damageImmunity = chris.getConfiguration(item, 'damageimmunity') ?? 'merge';\n    let damageResistance = chris.getConfiguration(item, 'damageresistance') ?? 'merge';\n    let damageVulnerability = chris.getConfiguration(item, 'damagevulnerability') ?? 'merge';\n    let languages = chris.getConfiguration(item, 'languages') ?? 'merge';\n    if (sourceActor) {\n        if (conditionImmunity === 'source' || conditionImmunity === 'merge') setProperty(updates, 'actor.system.traits.ci.value', sourceActor.system.traits.ci.value);\n        if (damageImmunity === 'source' || damageImmunity === 'merge') setProperty(updates, 'actor.system.traits.di.value', sourceActor.system.traits.di.value);\n        if (damageResistance === 'source' || damageResistance === 'merge') setProperty(updates, 'actor.system.traits.dr.value', sourceActor.system.traits.dr.value);\n        if (damageVulnerability === 'source' || damageVulnerability === 'merge') setProperty(updates, 'actor.system.traits.dv.value', sourceActor.system.traits.dv.value);\n        if (languages === 'source' || languages === 'merge') setProperty(updates, 'actor.system.traits.languages.value', sourceActor.system.traits.languages.value);\n    } else {\n        if (allRaces[race].ci && (conditionImmunity === 'source' || conditionImmunity === 'merge')) setProperty(updates, 'actor.system.traits.ci.value', allRaces[race].ci);\n        if (allRaces[race].di && (damageImmunity === 'source' || damageImmunity === 'merge')) setProperty(updates, 'actor.system.traits.di.value', allRaces[race].di);\n        if (allRaces[race].dr && (damageResistance === 'source' || damageResistance === 'merge')) setProperty(updates, 'actor.system.traits.dr.value', allRaces[race].dr);\n        if (allRaces[race].dv && (damageVulnerability === 'source' || damageVulnerability === 'merge')) setProperty(updates, 'actor.system.traits.dv.value', allRaces[race].dv);\n        if (allRaces[race].languages && (languages === 'source' || languages === 'merge')) setProperty(updates, 'actor.system.traits.languages.value', allRaces[race].languages);\n    }\n    let name = chris.getConfiguration(item, 'name') ?? 'before';\n    let sourceName = sourceActor?.name ?? allRaces[race].name;\n    switch (name) {\n        case 'source':\n            setProperty(updates, 'actor.name', sourceName);\n            setProperty(updates, 'token.name', sourceName);\n            setProperty(updates, 'actor.prototypeToken.name', sourceName);\n            break;\n        case 'before':\n            setProperty(updates, 'actor.name', sourceName + ' ' + targetActor.name);\n            setProperty(updates, 'token.name', sourceName + ' ' + targetActor.name);\n            setProperty(updates, 'actor.prototypeToken.name', sourceName + ' ' + targetActor.name);\n            break;\n        case 'after':\n            setProperty(updates, 'actor.name', targetActor.name + ' ' + sourceName);\n            setProperty(updates, 'token.name', targetActor.name + ' ' + sourceName);\n            setProperty(updates, 'actor.prototypeToken.name', targetActor.name + ' ' + sourceName);\n            break;\n    }\n    let ac = chris.getConfiguration(item, 'ac') ?? 'source';\n    if (ac === 'source' && sourceActor) {\n        setProperty(updates, 'actor.system.attributes.ac', sourceActor.system.attributes.ac);\n    } else if (allRaces[race].ac && ac === 'source') {\n        setProperty(updates, 'actor.system.attributes.ac.bonus',allRaces[race].ac);\n    }\n    let movement = chris.getConfiguration(item, 'movement') ?? 'source';\n    switch (movement) {\n        case 'source':\n            if (sourceActor) {\n                setProperty(updates, 'actor.system.attributes.movement', sourceActor.system.attributes.movement);\n            } else if (allRaces[race].movement) {\n                setProperty(updates, 'actor.system.attributes.movement', allRaces[race].movement);\n            }\n            break;\n        case 'upgrade':\n            if (sourceActor) {\n                if (sourceActor.system.attributes.movement.burrow > targetActor.system.attributes.movement.burrow) setProperty(updates, 'actor.system.attributes.movement.burrow', sourceActor.system.attributes.movement.burrow);\n                if (sourceActor.system.attributes.movement.climb > targetActor.system.attributes.movement.climb) setProperty(updates, 'actor.system.attributes.movement.climb', sourceActor.system.attributes.movement.climb);\n                if (sourceActor.system.attributes.movement.fly > targetActor.system.attributes.movement.fly) setProperty(updates, 'actor.system.attributes.movement.fly', sourceActor.system.attributes.movement.fly);\n                if (sourceActor.system.attributes.movement.swim > targetActor.system.attributes.movement.swim) setProperty(updates, 'actor.system.attributes.movement.swim', sourceActor.system.attributes.movement.swim);\n                if (sourceActor.system.attributes.movement.walk > targetActor.system.attributes.movement.walk) setProperty(updates, 'actor.system.attributes.movement.walk', sourceActor.system.attributes.movement.walk);\n                if (sourceActor.system.attributes.movement.hover) setProperty(updates, 'actor.system.attributes.movement.hover', true);\n            } else if (allRaces[race].movement) {\n                if (allRaces[race].movement.burrow > targetActor.system.attributes.movement.burrow) setProperty(updates, 'actor.system.attributes.movement.burrow', allRaces[race].movement.burrow);\n                if (allRaces[race].movement.climb > targetActor.system.attributes.movement.climb) setProperty(updates, 'actor.system.attributes.movement.climb', allRaces[race].movement.climb);\n                if (allRaces[race].movement.fly > targetActor.system.attributes.movement.fly) setProperty(updates, 'actor.system.attributes.movement.fly', allRaces[race].movement.fly);\n                if (allRaces[race].movement.swim > targetActor.system.attributes.movement.swim) setProperty(updates, 'actor.system.attributes.movement.swim', allRaces[race].movement.swim);\n                if (allRaces[race].movement.walk > targetActor.system.attributes.movement.walk) setProperty(updates, 'actor.system.attributes.movement.walk', allRaces[race].movement.walk);\n                if (allRaces[race].movement.hover) setProperty(updates, 'actor.system.attributes.movement.hover', true);\n            }\n            break;\n        case 'downgrade':\n            if (sourceActor) {\n                if (sourceActor.system.attributes.movement.burrow < targetActor.system.attributes.movement.burrow) setProperty(updates, 'actor.system.attributes.movement.burrow', sourceActor.system.attributes.movement.burrow);\n                if (sourceActor.system.attributes.movement.climb < targetActor.system.attributes.movement.climb) setProperty(updates, 'actor.system.attributes.movement.climb', sourceActor.system.attributes.movement.climb);\n                if (sourceActor.system.attributes.movement.fly < targetActor.system.attributes.movement.fly) setProperty(updates, 'actor.system.attributes.movement.fly', sourceActor.system.attributes.movement.fly);\n                if (sourceActor.system.attributes.movement.swim < targetActor.system.attributes.movement.swim) setProperty(updates, 'actor.system.attributes.movement.swim', sourceActor.system.attributes.movement.swim);\n                if (sourceActor.system.attributes.movement.walk < targetActor.system.attributes.movement.walk) setProperty(updates, 'actor.system.attributes.movement.walk', sourceActor.system.attributes.movement.walk);\n                if (sourceActor.system.attributes.movement.hover) setProperty(updates, 'actor.system.attributes.movement.hover', true);\n            } else if (allRaces[race].movement) {\n                if (allRaces[race].movement.burrow < targetActor.system.attributes.movement.burrow) setProperty(updates, 'actor.system.attributes.movement.burrow', allRaces[race].movement.burrow);\n                if (allRaces[race].movement.climb < targetActor.system.attributes.movement.climb) setProperty(updates, 'actor.system.attributes.movement.climb', allRaces[race].movement.climb);\n                if (allRaces[race].movement.fly < targetActor.system.attributes.movement.fly) setProperty(updates, 'actor.system.attributes.movement.fly', allRaces[race].movement.fly);\n                if (allRaces[race].movement.swim < targetActor.system.attributes.movement.swim) setProperty(updates, 'actor.system.attributes.movement.swim', allRaces[race].movement.swim);\n                if (allRaces[race].movement.walk < targetActor.system.attributes.movement.walk) setProperty(updates, 'actor.system.attributes.movement.walk', allRaces[race].movement.walk);\n                if (allRaces[race].movement.hover) setProperty(updates, 'actor.system.attributes.movement.hover', true);\n            }\n            break;\n    }\n    let senses = chris.getConfiguration(item, 'senses') ?? 'source';\n    if (senses === 'source') {\n        if (sourceActor) {\n            setProperty(updates, 'actor.system.attributes.senses', sourceActor.system.attributes.senses);\n            setProperty(updates, 'actor.prototypeToken.sight', sourceActor.prototypeToken.sight);\n            setProperty(updates, 'token.sight', sourceActor.prototypeToken.sight);\n        } else if (allRaces[race].senses && allRaces[race].sight) {\n            setProperty(updates, 'actor.system.attributes.senses', allRaces[race].senses);\n            setProperty(updates, 'actor.prototypeToken.sight', allRaces[race].sight);\n            setProperty(updates, 'token.sight', allRaces[race].sight);\n        }\n    }\n    if (allRaces[race].size) {\n        switch (allRaces[race].size) {\n            case 'small':\n                setProperty(updates, 'actor.system.traits.size', 'sm');\n                setProperty(updates, 'token.texture.scaleX', 0.8);\n                setProperty(updates, 'token.texture.scaleY', 0.8);\n                setProperty(updates, 'actor.prototypeToken.texture.scaleX', 0.8)\n                setProperty(updates, 'actor.prototypeToken.texture.scaleY', 0.8)\n                break;\n        }\n    }\n    if (allRaces[race].special) await allRaces[race].special(targetActor, updates);\n    if (allRaces[race].specialTraits) setProperty(updates, 'actor.flags.dnd5e', allRaces[race].specialTraits);\n\n}","import {constants} from './constants.js';\nimport {chris} from './helperFunctions.js';\nimport {saves, skills} from './macros.js';\nexport function patchSkills(enabled) {\n    if (enabled) {\n        libWrapper.register('chris-premades', 'CONFIG.Actor.documentClass.prototype.rollSkill', doRollSkill, 'WRAPPER');\n    } else {\n        libWrapper.unregister('chris-premades', 'CONFIG.Actor.documentClass.prototype.rollSkill');\n    }\n}\nasync function doRollSkill(wrapped, ...args) {\n    let [skillId, options] = args;\n    if (!options) options = {};\n    let flags = this.flags['chris-premades']?.skill;\n    if (flags) {\n        let selections = [];\n        for (let [key, value] of Object.entries(flags)) {\n            if (!value) continue;\n            if (typeof skills[key] != 'function') continue;\n            let data = skills[key].bind(this)(skillId, options);\n            if (data) selections.push(data);\n        }\n        if (selections.length) {\n            let advantages = selections.filter(i => i.type === 'advantage').map(j => ({'type': 'checkbox', 'label': j.label, 'options': false}));\n            let disadvantags = selections.filter(i => i.type === 'disadvantage').map(j => ({'type': 'checkbox', 'label': j.label, 'options': false}));\n            let generatedInputs = [];\n            if (advantages.length) {\n                generatedInputs.push({'label': '<u>Advantage:</u>', 'type': 'info'});\n                generatedInputs.push(...advantages);\n            }\n            if (disadvantags.length) {\n                generatedInputs.push({'label': '<u>Disadvantage:</u>', 'type': 'info'});\n                generatedInputs.push(...disadvantags);\n            }\n            let selection = await chris.menu('Skill Roll Options', constants.okCancel, generatedInputs, true);\n            if (selection.buttons) {\n                let advantage = false;\n                let disadvantage = false;\n                if (advantages.length) advantage = !!selection.inputs.slice(1, advantages.length + 1).find(i => i);\n                if (disadvantags.length) {\n                    let start = 1;\n                    let end = disadvantags.length + 1;\n                    if (advantages.length) {\n                        start += advantages.length + 1;\n                        end += advantages.length + 1;\n                    }\n                    disadvantage = !!selection.inputs.slice(start, end).find(i => i);\n                }\n                if (advantage) options.advantage = true;\n                if (disadvantage) options.disadvantage = true;\n            }\n        }\n    }\n    let returnData = await wrapped(skillId, options);\n    //roll bonus here\n    return returnData;\n}\nexport function patchSaves(enabled) {\n    if (enabled) {\n        libWrapper.register('chris-premades', 'CONFIG.Actor.documentClass.prototype.rollAbilitySave', doRollSave, 'WRAPPER');\n    } else {\n        libWrapper.unregister('chris-premades', 'CONFIG.Actor.documentClass.prototype.rollAbilitySave');\n    }\n}\nasync function doRollSave(wrapped, ...args) {\n    let [saveId, options] = args;\n    let flags = this.flags['chris-premades']?.save;\n    if (flags) {\n        let selections = [];\n        for (let [key, value] of Object.entries(flags)) {\n            if (!value) continue;\n            if (typeof saves[key] != 'function') continue;\n            let data = saves[key].bind(this)(saveId, options);\n            if (data) selections.push(data);\n        }\n        if (selections.length) {\n            let advantages = selections.filter(i => i.type === 'advantage').map(j => ({'type': 'checkbox', 'label': j.label, 'options': false}));\n            let disadvantags = selections.filter(i => i.type === 'disadvantage').map(j => ({'type': 'checkbox', 'label': j.label, 'options': false}));\n            let generatedInputs = [];\n            if (advantages.length) {\n                generatedInputs.push({'label': '<u>Advantage:</u>', 'type': 'info'});\n                generatedInputs.push(...advantages);\n            }\n            if (disadvantags.length) {\n                generatedInputs.push({'label': '<u>Disadvantage:</u>', 'type': 'info'});\n                generatedInputs.push(...disadvantags);\n            }\n            let selection = await chris.menu('Save Roll Options', constants.okCancel, generatedInputs, true);\n            if (selection.buttons) {\n                let advantage = false;\n                let disadvantage = false;\n                if (advantages.length) advantage = !!selection.inputs.slice(1, advantages.length + 1).find(i => i);\n                if (disadvantags.length) {\n                    let start = 1;\n                    let end = disadvantags.length + 1;\n                    if (advantages.length) {\n                        start += advantages.length + 1;\n                        end += advantages.length + 1;\n                    }\n                    disadvantage = !!selection.inputs.slice(start, end).find(i => i);\n                }\n                if (advantage) options.advantage = true;\n                if (disadvantage) options.disadvantage = true;\n            }\n        }\n    }\n    let returnData = await wrapped(saveId, options);\n    //roll bonus here\n    return returnData;\n}\nexport function patchActiveEffectSourceName(enabled) {\n    if (enabled) {\n        libWrapper.register('chris-premades', 'CONFIG.ActiveEffect.documentClass.prototype.sourceName', sourceName, 'WRAPPER');\n    } else {\n        libWrapper.unregister('chris-premades', 'CONFIG.ActiveEffect.documentClass.prototype.sourceName');\n    }\n}\nfunction sourceName(wrapped, ...args) {\n    let name = wrapped();\n    if (name === 'Unknown' && this.origin != '') {\n        if (!this.origin.includes('Compendium.')) {\n            let origin = fromUuidSync(this.origin);\n            if (origin) {\n                if (origin.constructor.name === 'MeasuredTemplateDocument') {\n                    let orginUuid = origin.flags?.dnd5e?.origin;\n                    if (orginUuid) {\n                        let originItem = fromUuidSync(orginUuid);\n                        if (originItem) {\n                            if (originItem.constructor.name === 'Item5e') name = originItem.name + ' Template';\n                        }\n                    } else name = 'Unknown Template';\n                }\n            }\n        }\n    }\n    return name;\n}\n","export function removeDumbV10Effects() {\n    CONFIG.specialStatusEffects.BLIND = null;\n    CONFIG.specialStatusEffects.INVISIBLE = null;\n}","async function update(actors) {\n    for (let actor of actors) {\n        console.log('Updating: ' + actor.name);\n        await game.modules.get('ddb-importer')?.api.effects.addDDBIEffectsToActorDocuments(actor, {'useChrisPremades': true });\n    }\n}\nexport async function updateSidebarNPCs() {\n    if (!game.modules.get('ddb-importer')?.active) {\n        ui.notifications.info('This feature requires the D&D Beyond Importer module to be active!');\n        return;\n    }\n    ui.notifications.info('Starting sidebar NPC updater!');\n    let actors = game.actors.filter(e => e && e.type !== 'character');\n    if (actors.length != 0) await update(actors);\n    ui.notifications.info('Sidebar NPC updater complete!');\n}\nexport async function updateSceneNPCs() {\n    if (!game.modules.get('ddb-importer')?.active) {\n        ui.notifications.info('This feature requires the D&D Beyond Importer module to be active!');\n        return;\n    }\n    ui.notifications.info('Starting scene NPC updater!');\n    if (canvas.scene) {\n        let actors = canvas.scene.tokens.map(i => i.actor).filter(e => e && e.type !== 'character');\n        if (actors.length != 0) await update(actors);\n    }\n    ui.notifications.info('Scene NPC updater complete!');\n}\nexport async function updateAllSceneNPCs() {\n    if (!game.modules.get('ddb-importer')?.active) {\n        ui.notifications.info('This feature requires the D&D Beyond Importer module to be active!');\n        return;\n    }\n    ui.notifications.info('Starting all scenes NPC updater!');\n    for (let scene of game.scenes) {\n        let actors = scene.tokens.map(i => i.actor).filter(e => e && e.type !== 'character');\n        if (actors.length != 0) await update(actors);\n    }\n    ui.notifications.info('All scenes NPC updater complete!');\n}","let names = {\n    'ATL': 'Advanced Token Effects',\n    'JB2A_DnD5e': 'Jules&Ben\\'s Animated Assets (F)',\n    'about-time': 'About Time',\n    'animated-spell-effects-cartoon': 'Animated Spell Effects: Cartoon',\n    'autoanimations': 'Automated Animations',\n    'babonus': 'Build A Bonus',\n    'compendium-folders': 'Compendium Folders',\n    'custom-character-sheet-sections': 'Custom Character Sheet Sections',\n    'dae': 'Dynamic Active Effects',\n    'ddb-importer': 'D&D Beyond Importer',\n    'dfreds-convenient-effects': 'DFreds Convenient Effects',\n    'dice-so-nice': 'Dice So Nice!',\n    'effectmacro': 'Effect Macro',\n    'foundryvtt-simple-calendar': 'Simple Calendar',\n    'fxmaster': 'FXMaster',\n    'itemacro': 'Item Macro',\n    'jb2a_patreon': 'Jules&Ben\\'s Animated Assets (P)',\n    'lib-wrapper': 'libWrapper',\n    'midi-qol': 'Midi-Qol',\n    'quick-insert': 'Quick Insert',\n    'sequencer': 'Sequencer',\n    'smalltime': 'Small Time',\n    'socketlib': 'Socketlib',\n    'templatemacro': 'Template Macro',\n    'tidy5e-sheet': 'Tidy 5e Sheet',\n    'times-up': 'Times Up',\n    'token-attacher': 'Token Attacher',\n    'visual-active-effects': 'Visual Active Effects',\n    'warpgate': 'Warpgate'\n}\nlet optionalModules = [\n    'ATL',\n    'about-time',\n    'animated-spell-effects-cartoon',\n    'compendium-folders',\n    'custom-character-sheet-sections',\n    'ddb-importer',\n    'dice-so-nice',\n    'foundryvtt-simple-calendar',\n    'fxmaster',\n    'itemacro',\n    'JB2A_DnD5e',\n    'jb2a_patreon',\n    'quick-insert',\n    'smalltime',\n    'tidy5e-sheet',\n    'times-up',\n    'visual-active-effects'\n];\nlet incompatibleModules = [\n    'advancedspelleffects',\n    'attack-roll-check-5e',\n    'betterrolls5e',\n    'concentrationnotifier',\n    'dice-rng-protector',\n    'dice-tooltip',\n    'effective-transferral',\n    'faster-rolling-by-default-5e',\n    'gm-paranoia-taragnor',\n    'heartbeat',\n    'max-crit',\n    'mre-dnd5e',\n    'multiattack-5e',\n    'obsidian',\n    'quick-rolls',\n    'ready-set-roll-5e',\n    'retroactive-advantage-5e',\n    'rollgroups',\n    'wire'\n]\nexport function troubleshoot() {\n    let output = '';\n    function addLine(text) {\n        output += '\\n' + text;\n        console.log(text);\n    }\n    function checkModule(name) {\n        let module = game.modules.get(name);\n        let text;\n        if (module) {\n            if (names[name]) {\n                text = names[name] + ': ' + module.version;\n            } else {\n                text = module.title + ': ' + module.version;\n            }\n            if (!module.active) text += ' (Disabled)';\n        } else {\n            text = names[name] + ': Missing!';\n        }\n        return text;\n    }\n    addLine('/////////////// Game Information ///////////////');\n    addLine('Foundry: ' + game.version);\n    addLine('System: ' + game.system.version);\n    addLine('Language: ' + game.settings.get('core', 'language'));\n    let cpr = game.modules.get('chris-premades');\n    if (cpr.version === '#{VERSION}#') {\n        addLine('Chris\\'s Premades: Development');\n    } else {\n        addLine('Chris\\'s Premades: ' + game.modules.get('chris-premades').version);\n    }\n    addLine('');\n    addLine('/////////////// Required Modules ///////////////');\n    let requiredModules = new Set([]);\n    game.modules.get('chris-premades').relationships.requires.forEach(value => {\n        requiredModules.add(value.id);\n        let module = game.modules.get(value.id);\n        if (module) game.modules.get(value.id).relationships.requires.forEach(value => {\n            requiredModules.add(value.id);\n        });\n    });\n    Array.from(requiredModules).sort().forEach(value => {\n        addLine(checkModule(value));\n    });\n    addLine('');\n    addLine('/////////////// Optional Modules ///////////////');\n    optionalModules.forEach(id => {\n        addLine(checkModule(id));\n    });\n    addLine('');\n    addLine('/////////////// Incompatible Modules ///////////////');\n    incompatibleModules.forEach(id => {\n        if (game.modules.get(id)) addLine(checkModule(id));\n    });\n    addLine('');\n    addLine('/////////////// CPR Settings ///////////////');\n    let cprSettings = Array.from(game.settings.settings).filter(i => i[0].includes('chris-premades') && i[1].namespace === 'chris-premades');\n    cprSettings.forEach(i => {\n        addLine(i[1].name + ': ' + game.settings.get('chris-premades', i[1].key));\n    });\n    if (game.modules.get('itemacro')?.active) {\n        addLine('');\n        addLine('/////////////// Item Macro Settings ///////////////');\n        addLine('Character Sheet Hook: ' + game.settings.get('itemacro', 'charsheet'));\n    }\n    if (game.modules.get('midi-qol')?.active) {\n        addLine('');\n        addLine('/////////////// Midi-Qol Settings ///////////////');\n        addLine('Roll Automation Support: ' + game.settings.get('midi-qol', 'EnableWorkflow'));\n        let midiSettings = game.settings.get('midi-qol', 'ConfigSettings');\n        switch(midiSettings.autoCEEffects) {\n            case 'none':\n                addLine('Apply Convenient Effects: None')\n                break;\n            case 'itempri':\n                addLine('Apply Convenient Effects: Items > CE')\n                break;\n            case 'cepri':\n                addLine('Apply Convenient Effects: CE > Items')\n                break;\n            case 'both':\n                addLine('Apply Convenient Effects: Both')\n                break;\n        }\n        addLine('Roll Seperate Attack Per Target: ' + midiSettings.attackPerTarget);\n        addLine('Merge Card: ' + midiSettings.mergeCard);\n        addLine('Actor On Use: ' + midiSettings.allowActorUseMacro);\n        addLine('Item On Use: ' + midiSettings.allowUseMacro);\n    }\n    if (game.modules.get('warpgate')?.active) {\n        addLine('');\n        addLine('/////////////// Warpgate User Permissions ///////////////');\n        addLine('Create Tokens: ' + game.permissions.TOKEN_CREATE.includes(1));\n        addLine('Configure Tokens: ' + game.permissions.TOKEN_CONFIGURE.includes(1));\n        addLine('Browse Files: ' + game.permissions.FILES_BROWSE.includes(1));\n    }\n    if (game.modules.get('plutonium') || game.modules.get('plutonium-addon-automation')) {\n        addLine('');\n        addLine('/////////////// Other ///////////////');\n        if (!game.modules.get('plutonium')?.active) {\n            addLine('Unsupported Importer: false');\n        } else {\n            addLine('Unsupported Importer: true');\n        }\n    }\n    try {\n        let filename = 'CPR-Troubleshoot.txt';\n        let blob = new Blob([output], {\n            'type': 'text/plain;charset=utf-8'\n        });\n        saveAs(blob, filename);\n    } catch (error) {};\n}\nexport async function fixSettings() {\n    let changedSettings = [];\n    if (game.modules.get('itemacro')?.active) {\n        if (game.settings.get('itemacro', 'charsheet')) {\n            await game.settings.set('itemacro', 'charsheet', false);\n            changedSettings.push('IM-CharSheet');\n        }\n    }\n    if (game.modules.get('midi-qol')?.active) {\n        if (!game.settings.get('midi-qol', 'EnableWorkflow')) {\n            await game.settings.set('midi-qol', 'EnableWorkflow', true);\n            changedSettings.push('MQ-EnableWorkflow');\n        }\n        let updateMidiSettings = false;\n        let midiSettings = duplicate(game.settings.get('midi-qol', 'ConfigSettings'));\n        if (midiSettings.autoCEEffects != 'itempri') {\n            midiSettings.autoCEEffects = 'itempri';\n            changedSettings.push('MQ-autoCEEffects');\n            updateMidiSettings = true;\n        }\n        if (midiSettings.attackPerTarget === true) {\n            midiSettings.attackPerTarget = false;\n            changedSettings.push('MQ-attackPerTarget');\n            updateMidiSettings = true;\n        }\n        if (midiSettings.mergeCard === false) {\n            midiSettings.mergeCard = true;\n            changedSettings.push('MQ-mergeCard');\n            updateMidiSettings = true;\n        }\n        if (updateMidiSettings) await game.settings.set('midi-qol', 'ConfigSettings', midiSettings);\n    }\n    if (changedSettings.length === 0) {\n        ChatMessage.create({\n            'speaker': {alias: name},\n            'whisper': [game.user.id],\n            'content': '<hr><b>Updated Settings:</b><br><hr>Nothing!'\n        });\n        return;\n    }\n    let list = '';\n    if (changedSettings.includes('IM-CharSheet')) {\n        list += '- Item Macro: Character Sheet Hook: false<br>';\n    }\n    if (changedSettings.includes('MQ-EnableWorkflow')) list += '- Midi-Qol: Roll Automation Support: true<br>';\n    if (changedSettings.includes('MQ-autoCEEffects')) list += '- Midi-Qol: Apply Convenient Effects: Prefer Item Effect<br>';\n    if (changedSettings.includes('MQ-attackPerTarget')) list += '- Midi-Qol: Roll Seperate Attack Per Target: false<br>';\n    if (changedSettings.includes('MQ-mergeCard')) list += '- Midi-Qol: Merge Card: true<br>';\n    ChatMessage.create({\n        'speaker': {alias: name},\n        'whisper': [game.user.id],\n        'content': '<hr><b>Updated Settings:</b><br><hr>' + list\n    });\n}","import {chris} from './helperFunctions.js';\nlet registered = false;\nlet states = {\n    1: async () => {\n        await ui.sidebar.expand();\n        await ui.sidebar.tabs.journal.activate();\n    },\n    2: async () => {\n        let journalEntry = game.journal.getName('CPR - Descriptions');\n        if (journalEntry) journalEntry.sheet.render(true);\n        await warpgate.wait(250);\n    },\n    3: async () => {\n        let journalEntry = game.journal.getName('CPR - Descriptions');\n        if (journalEntry && journalEntry.sheet.rendered) journalEntry.sheet.close();\n        await ui.sidebar.expand();\n        await ui.sidebar.tabs.compendium.activate();\n        await warpgate.wait(250);\n        let compendiumFolder = game.folders.find(i => i.name === 'Chris\\'s Premades' && i.type === 'Compendium');\n        if (compendiumFolder && !compendiumFolder.expanded) document.querySelector('[data-uuid=\"' + compendiumFolder.uuid + '\"]').classList.remove('collapsed');\n    },\n    4: async () => {\n        let pack = game.packs.get('chris-premades.CPR Spells');\n        if (!pack) return;\n        pack.render(true);\n        await warpgate.wait(250);\n    },\n    5: async () => {\n        let pack = game.packs.get('chris-premades.CPR Spells');\n        if (!pack) return;\n        let index = await pack.getIndex();\n        let fireShield = index.getName('Fire Shield');\n        if (!fireShield) return;\n        let document = await pack.getDocument(fireShield._id);\n        document.sheet.render(true);\n        await warpgate.wait(250);\n    },\n    6: async () => {\n        let pack = game.packs.get('chris-premades.CPR Spells');\n        if (!pack) return;\n        let index = await pack.getIndex();\n        let fireShield = index.getName('Fire Shield');\n        if (!fireShield) return;\n        let document = await pack.getDocument(fireShield._id);\n        document.sheet.close();\n        let compendiumApp = Object.values(ui.windows).find(i => i.metadata?.label === 'CPR Spells');\n        if (compendiumApp) compendiumApp.close();\n        game.settings.sheet.render(true, {'activeCategory': 'chris-premades'});\n        await warpgate.wait(250);\n    },\n    8: async () => {\n        game.settings.sheet.close();\n        let pack = game.packs.get('dnd5e.heroes')\n        if (!pack) return;\n        let index = await pack.getIndex();\n        let rogue = index.getName('Riswynn (Dwarf Rogue)')\n        if (!rogue) return;\n        let document = await pack.getDocument(rogue._id);\n        if (!document) return;\n        document.sheet.render(true);\n        await warpgate.wait(250);\n        let feature = document.items.getName('Sneak Attack')\n        if (!feature) return;\n        feature.sheet.render(true);\n        await warpgate.wait(250);\n    },\n    9: async () => {\n        chris.dialog('Item Configuration: Example', [['🔎 Update / Replace Item', false], ['🛠️ Configure', false], ['⚖️ Add Scale', false]]);\n        await warpgate.wait(250);\n    },\n    12: async () => {\n        let dialogApp = Object.values(ui.windows).find(i => i.data?.title === 'Item Configuration: Example');\n        if (dialogApp) dialogApp.close();\n        let pack = game.packs.get('dnd5e.heroes')\n        if (!pack) return;\n        let index = await pack.getIndex();\n        let rogue = index.getName('Riswynn (Dwarf Rogue)')\n        if (!rogue) return;\n        let document = await pack.getDocument(rogue._id);\n        if (!document) return;\n        let feature = document.items.getName('Sneak Attack')\n        if (!feature) return;\n        feature.sheet.close();\n        document.sheet.close();\n        await ui.sidebar.tabs.chat.activate();\n        let journalEntry = game.journal.getName('CPR - Descriptions');\n        if (journalEntry) await journalEntry.sheet.render(true);\n    }\n\n}\nclass chrisTour extends Tour {\n    async next() {\n        if (this.status === Tour.STATUS.COMPLETED) {\n            throw new Error('Tour ' + this.id + 'has already been completed');\n        }\n        if (!this.hasNext) return this.complete();\n        let nextIndex = this.stepIndex + 1;\n        if (states[nextIndex]) await states[nextIndex]();\n        return this.progress(nextIndex);\n    }\n    get hasPrevious() {\n        return false;\n    }\n    async complete() {\n        let nextIndex = this.stepIndex + 1;\n        await states[nextIndex]();\n        return this.progress(this.steps.length);\n    }\n}\nasync function registerTours() {\n    let journalEntry = game.journal.getName('CPR - Descriptions');\n    if (!journalEntry) return;\n    let dragonBreath = journalEntry.pages.getName('Dragon Breath');\n    if (!dragonBreath) return;\n    let compendiumFolder = game.folders.find(i => i.name === 'Chris\\'s Premades' && i.type === 'Compendium');\n    if (!compendiumFolder) return;\n    let pack = game.packs.get('chris-premades.CPR Spells');\n    if (!pack) return;\n    let index = await pack.getIndex();\n    let fireShield = index.getName('Fire Shield');\n    if (!fireShield) return;\n    await game.tours.register('chris-premades', 'tour', new chrisTour({\n        'title': 'CPR Tour',\n        'description': 'CPR Tour',\n        'canBeResumed': false,\n        'display': false,\n        'steps': [\n            {\n                'id': 'chris-premades.tour.0',\n                'title': 'Welcome!',\n                'content': 'This tour will guide you through using some of the core features of using Chris\\'s Premades.'\n            },\n            {\n                'id': 'chris-premades.tour.1',\n                'title': 'The Description Journal',\n                'selector': '[data-document-id=\"' + journalEntry.id + '\"]',\n                'content': 'This journal is used to store descriptions for temporary spells, items, and features.'\n            },\n            {\n                'id': 'chris-premades.tour.2',\n                'title': 'The Description Journal',\n                'selector': '[data-page-id=\"' + dragonBreath.id + '\"]',\n                'content': 'For example, the spell \"Dragon\\'s Breath\" will make a temporary feature called \"Dragon Breath\" on the target actor.\\nFilling in this journal page will populate the description when it\\'s created.'\n            },\n            {\n                'id': 'chris-premades.tour.3',\n                'title': 'Content Compendiums',\n                'selector': '[data-uuid=\"' + compendiumFolder.uuid + '\"]',\n                'content': 'This is where all the content from this module is stored.'\n            },\n            {\n                'id': 'chris-premades.tour.4',\n                'title': 'Item Info',\n                'selector': '[data-document-id=\"' + fireShield._id + '\"]',\n                'content': 'As an example the spell \"Fire Shield\" is stored in the \"CPR Spells\" compendium. You can drag the spell from this compendium onto an actor sheet.'\n            },\n            {\n                'id': 'chris-premades.tour.5',\n                'title': 'Item Description',\n                'selector': '[id*=\"-Compendium-chris-premades-CPR Spells-Item-' + fireShield._id + '\"]',\n                'content': 'Some automations require specific settings to be enabled.\\nFor example, the \"Fire Shield\" spell requires the \"On Hit Automation\" setting to be enabled.'\n            },\n            {\n                'id': 'chris-premades.tour.6',\n                'title': 'Settings',\n                'selector': '[data-tab=\"chris-premades\"]',\n                'content': 'All of the module settings are located here and organized into categories.'\n            },\n            {\n                'id': 'chris-premades.tour.7',\n                'title': 'Settings',\n                'selector': '[data-key=\"chris-premades.General\"]',\n                'content': '\"On Hit Automation\" is located in this category, along with many other useful settings.'\n            },\n            {\n                'id': 'chris-premades.tour.8',\n                'title': 'The Medkit',\n                'selector': '[class=\"header-button control chris-premades-item\"]',\n                'content': 'As an alternative to copying items out of the compendiums, you can use the medkit button on the title bar.\\nThis button is only available on items that are on actors (Not items in your items directory!).\\nThe medkit will automatically search the compendiums and locate an automation for you (if one is available).\\nThis search is based on the type of the item and it\\'s name.'\n            },\n            {\n                'id': 'chris-premades.tour.9',\n                'title': 'The Medkit',\n                'selector': '[class=\"dialog-button 🔎 Update / Replace Item\"]',\n                'content': 'This button will update the item from the compendium.\\nThe item description, spell preparation, item uses, and quantity will be preserved.'\n            },\n            {\n                'id': 'chris-premades.tour.10',\n                'title': 'The Medkit',\n                'selector': '[class=\"dialog-button 🛠️ Configure\"]',\n                'content': 'This button will allow you to configure certain options for the automation.\\nFor example, \"Sneak Attack\" can be configured to automatically apply sneak attack on valid attacks instead of prompting you to use it.'\n            },\n            {\n                'id': 'chris-premades.tour.11',\n                'title': 'The Medkit',\n                'selector': '[class=\"dialog-button ⚖️ Add Scale\"]',\n                'content': 'This button (which is only available on certain class items) will allow you to automatically create the needed advancement scale for certain automations.\\nFor example, \"Sneak Attack\" requires a sneak attack die scale set.'\n            }\n        ]\n    }));\n}\nasync function guidedTour() {\n    if (!registered) {\n        await registerTours();\n        registered = true;\n    }\n    let tour = game.tours.get('chris-premades.tour');\n    if (!tour) return;\n    tour.start();\n}\nasync function checkTour() {\n    if (!game.user.isGM) return;\n    let makeMessage = !game.settings.get('chris-premades', 'Tour Message');\n    let message = '<hr>View a guided tour of Chris\\'s Premades here:<br><button type=\"button\">Start Tour</button>';\n    let chatMessage = game.messages.find(i => i.flags?.['chris-premades']?.tour);\n    if (!chatMessage && makeMessage) {\n        chatMessage = await ChatMessage.create({\n            'speaker': {'alias': 'Chris\\'s Premades'},\n            'content': message,\n            'flags': {\n                'chris-premades': {\n                    'tour': true\n                }\n            }\n        });\n        await warpgate.wait(250);\n        game.settings.set('chris-premades', 'Tour Message', true);\n    }\n    if (!chatMessage) return;\n    let messageElement = document.querySelector('[data-message-id=\"' + chatMessage.id + '\"]');\n    if (!messageElement) return;\n    let button = messageElement.querySelector('[type=\"button\"]');\n    if (button) button.onclick = guidedTour;\n\n}\nexport let tours = {\n    'registerTours': registerTours,\n    'guidedTour': guidedTour,\n    'chrisTour': chrisTour,\n    'checkTour': checkTour\n}","import {updateAllSceneNPCs, updateSceneNPCs, updateSidebarNPCs} from './actor.js';\nimport {additionalCompendiumPriority, additionalCompendiums, selectCompendium} from './compendium.js';\nimport {fixSettings, troubleshoot} from './help.js';\nimport {manualRolls} from './macros/mechanics/manualRolls.js';\nimport {tours} from './tours.js';\nimport {allRaces} from './utility/npcRandomizer.js';\nlet settingCategories = {};\nexport function addMenuSetting(key, category) {\n    setProperty(settingCategories, key.split(' ').join('-'), category);\n}\nlet labels = {\n    'Humanoid-Randomizer-Settings': 'Configure',\n    'Additional-Compendiums': 'Configure',\n    'Additional-Compendium-Priority': 'Configure',\n    'Item-Compendium': 'Select',\n    'Spell-Compendium': 'Select',\n    'Monster-Compendium': 'Select',\n    'Racial-Trait-Compendium': 'Select',\n    'Manual-Rolling-Players': 'Configure'\n}\nclass chrisSettingsBase extends FormApplication {\n    constructor() {\n        super();\n        this.category = null;\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            'classes': ['form'],\n            'popOut': true,\n            'template': 'modules/chris-premades/templates/config.html',\n            'id': 'chris-premades-settings',\n            'title': 'Chris\\'s Premades',\n            'width': 800,\n            'height': 'auto',\n            'closeOnSubmit': true\n        });\n    }\n    getData() {\n        let generatedOptions = [];\n\t    for (let setting of game.settings.settings.values()) {\n            if (setting.namespace != 'chris-premades') continue;\n            let key = setting.key.split(' ').join('-');\n            if (settingCategories[key] != this.category) continue;\n            const s = foundry.utils.deepClone(setting);\n            if (s.scope === 'world' && !game.user.isGM) continue;\n            s.id = `${s.key}`;\n            s.name = game.i18n.localize(s.name);\n            s.hint = game.i18n.localize(s.hint);\n            s.value = game.settings.get(s.namespace, s.key);\n            s.type = setting.type instanceof Function ? setting.type.name : 'String';\n            s.isCheckbox = setting.type === Boolean;\n            s.isSelect = s.choices !== undefined;\n            s.isRange = (setting.type === Number) && s.range;\n            s.isNumber = setting.type === Number;\n            s.filePickerType = s.filePicker === true ? 'any' : s.filePicker;\n            s.isButton = (setting.type instanceof Object || setting.type instanceof Array) && setting.type.name != 'String';\n            if (s.select) s.isButton = true;\n            s.label = labels[key];\n            generatedOptions.push(s);\n\t    }\n        return {'settings': generatedOptions.sort(function (a, b) {\n            let nameA = a.name.toUpperCase();\n            let nameB = b.name.toUpperCase();\n            if (nameA > nameB) {\n                return 1;\n            } else if (nameA < nameB) {\n                return -1;\n            } else {\n                return 0;\n            }\n        })};\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n    }\n    async _updateObject(event, formData) {\n        for (let [key, value] of Object.entries(formData)) {\n            if (game.settings.get('chris-premades', key) === value) continue;\n            await game.settings.set('chris-premades', key, value);\n        }\n    }\n}\nexport class chrisSettingsGeneral extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'General';\n    }\n}\nexport class chrisSettingsCompendiums extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Compendiums';\n    }\n}\nexport class chrisSettingsMechanics extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Mechanics';\n    }\n}\nexport class chrisSettingsSpells extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Spells';\n    }\n}\nexport class chrisSettingsFeats extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Feats';\n    }\n}\nexport class chrisSettingsClassFeats extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Class Features';\n    }\n}\nexport class chrisSettingsRaceFeats extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Race Features';\n    }\n}\nexport class chrisSettingsMonsterFeats extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Monster Features';\n    }\n}\nexport class chrisSettingsSummons extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Summons';\n    }\n}\nexport class chrisSettingsHomewbrew extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Homebrew';\n    }\n}\nexport class chrisSettingsModule extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Module Integration';\n    }\n}\nexport class chrisSettingsManualRolling extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Manual Rolling';\n    }\n}\nexport class chrisSettingsRandomizer extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Randomizer';\n    }\n}\nexport class chrisSettingsAnimations extends chrisSettingsBase {\n    constructor() {\n        super();\n        this.category = 'Animations';\n    }\n}\nexport class chrisSettingsTroubleshoot extends FormApplication {\n    constructor() {\n        super();\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            'classes': ['form'],\n            'popOut': true,\n            'template': 'modules/chris-premades/templates/config.html',\n            'id': 'chris-troubleshoot-settings',\n            'title': 'Help',\n            'width': 800,\n            'height': 'auto',\n            'closeOnSubmit': true\n        });\n    }\n    getData() {\n        return {\n            'settings': [\n                {\n                    'name': 'Tour Features',\n                    'id': 'tour',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'Start a guided tour of Chris\\'s Premades.',\n                    'label': 'Go'\n                },\n                {\n                    'name': 'Run Troubleshooter:',\n                    'id': 'trouble',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'Will export a file used to help troubleshoot issues with this module on my Discord server.',\n                    'label': 'Go'\n                },\n                {\n                    'name': 'Apply recommended setting fixes:',\n                    'id': 'fix',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'This will have the module automatically apply recommended setting changes.',\n                    'label': 'Go'\n                }\n            ]\n        }\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n    }\n    async _updateObject(event, formData) {\n\n    }\n}\nexport class chrisSettingsRandomizerHumanoid extends FormApplication {\n    constructor() {\n        super();\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            'classes': ['form'],\n            'popOut': true,\n            'template': 'modules/chris-premades/templates/config.html',\n            'id': 'chris-humanoid-randomizer-settings',\n            'title': 'Chris\\'s Humanoid Randomizer Settings',\n            'width': 800,\n            'height': 'auto',\n            'closeOnSubmit': true\n        });\n    }\n    getData() {\n        let generatedOptions = [];\n        let humanoidSettings = game.settings.get('chris-premades', 'Humanoid Randomizer Settings');\n        for (let i of Object.values(allRaces)) {\n            let id = i.name.toLowerCase().split(' ').join('-');\n            generatedOptions.push(\n                {\n                    'name': i.name + ' enabled:',\n                    'id': id + '.enabled',\n                    'value': humanoidSettings?.[id]?.enabled ?? allRaces[id].enabled,\n                    'isCheckbox': true,\n                    'hint': 'Enable use of the ' + i.name + ' race?'\n                },\n                {\n                    'name': i.name + ' weight:',\n                    'id': id + '.weight',\n                    'value': humanoidSettings?.[id]?.weight ?? allRaces[id].weight,\n                    'isRange': true,\n                    'range': {\n                        'min': 1,\n                        'max': 100,\n                        'step': 1\n                    },\n                    'hint': 'Weighted chance for ' + i.name + ' to be selected.'\n                }\n            );\n        }\n        return {'settings': generatedOptions};\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n    }\n    async _updateObject(event, formData) {\n        let updates = {};\n        for (let [key, value] of Object.entries(formData)) {\n            setProperty(updates, key, value);\n        }\n        let setting = mergeObject(allRaces, game.settings.get('chris-premades', 'Humanoid Randomizer Settings'));\n        mergeObject(setting, updates);\n        game.settings.set('chris-premades', 'Humanoid Randomizer Settings', setting);\n    }\n}\nexport async function settingButton(id) {\n    switch (id) {\n        case 'Humanoid Randomizer Settings':\n            await new chrisSettingsRandomizerHumanoid().render(true);\n            break;\n        case 'trouble':\n            try {\n                troubleshoot();\n            } catch {}\n            break;\n        case 'fix':\n            fixSettings();\n            break;\n        case 'sidebarNPCs':\n            await updateSidebarNPCs();\n            break;\n        case 'sceneNPCs':\n            await updateSceneNPCs();\n            break;\n        case 'allSceneNPCs':\n            await updateAllSceneNPCs();\n            break;\n        case 'Additional Compendiums':\n            await additionalCompendiums();\n            break;\n        case 'Additional Compendium Priority':\n            await additionalCompendiumPriority();\n            break;\n        case 'Item Compendium':\n        case 'Spell Compendium':\n        case 'Monster Compendium':\n        case 'Racial Trait Compendium':\n            await selectCompendium(id);\n            break;\n        case 'tour':\n            game.settings.sheet.close();\n            let dialogApp = Object.values(ui.windows).find(i => i.id === 'chris-troubleshoot-settings');\n            if (dialogApp) dialogApp.close();\n            await warpgate.wait(100);\n            await tours.guidedTour();\n            break;\n        case 'Manual Rolling Players':\n            await manualRolls.userOptions();\n            break;\n    }\n}\nexport class chrisSettingsNPCUpdate extends FormApplication {\n    constructor() {\n        super();\n    }\n    static get defaultOptions() {\n        return mergeObject(super.defaultOptions, {\n            'classes': ['form'],\n            'popOut': true,\n            'template': 'modules/chris-premades/templates/config.html',\n            'id': 'chris-npc-updater',\n            'title': 'Chris\\'s NPC Updater',\n            'width': 800,\n            'height': 'auto',\n            'closeOnSubmit': true\n        });\n    }\n    getData() {\n        return {\n            'settings': [\n                {\n                    'name': 'Update Sidebar NPCs:',\n                    'id': 'sidebarNPCs',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'This will use the D&D Beyond Importer API to update all sidebar NPCs with automations from this module. Use with care!',\n                    'label': 'Go'\n                },\n                {\n                    'name': 'Update Current Scene NPCs:',\n                    'id': 'sceneNPCs',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'This will use the D&D Beyond Importer API to update the NPCs on the current scene with automations from this module. Use with care!',\n                    'label': 'Go'\n                },\n                {\n                    'name': 'Update All Scene NPCs',\n                    'id': 'allSceneNPCs',\n                    'value': {},\n                    'isButton': true,\n                    'hint': 'This will use the D&D Beyond Importer API to update all NPCs on all scenes with automations from this module. Use with care!',\n                    'label': 'Go'\n                }\n            ]\n        }\n    }\n    activateListeners(html) {\n        super.activateListeners(html);\n    }\n    async _updateObject(event, formData) {\n\n    }\n}","import {armorModel} from '../macros/classFeatures/artificer/armorer/armorModel.js';\nimport {summonDrakeCompanion} from '../macros/classFeatures/ranger/drakeWarden/summonDrakeCompanion.js';\nimport {steelDefender} from '../macros/classFeatures/artificer/battleSmith/steelDefender.js';\nimport {arcaneWard} from '../macros/classFeatures/wizard/schoolOfAbjuration/arcaneWard.js';\nimport {manifestMind} from '../macros/classFeatures/wizard/orderOfScribes/manifestMind.js';\nimport {wrapsOffDyamak} from '../macros/items/wrapsOffDyamak.js';\nexport async function rest(actor, data) {\n    await armorModel.longRest(actor, data);\n    await summonDrakeCompanion.longRest(actor, data);\n    await steelDefender.longRest(actor, data);\n    await arcaneWard.longRest(actor, data);\n    await manifestMind.longRest(actor, data);\n    await wrapsOffDyamak.rest(actor, data);\n}","import {chris} from '../helperFunctions.js';\nimport {macros} from '../macros.js';\nasync function updateToken(token, changes, context, userId) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    if (!changes.x && !changes.y && !changes.elevation) return;\n    await token.object?._animation;\n    let coords = {'x': token.x, 'y': token.y};\n    let previousCoords = foundry.utils.getProperty(context, 'templatemacro.coords.previous');\n    let templates = token.parent.templates.reduce((acc, templateDoc) => {\n        let cells = chris.findGrids(previousCoords, coords, templateDoc);\n        if (!cells.length) return acc;\n        acc.push(templateDoc.id);\n        return acc;\n    }, []);\n    if (templates.length === 0) return;\n    let allTriggers = {};\n    for (let i of templates) {\n        let template = canvas.scene.templates.get(i);\n        if (!template) continue;\n        let flag = template.flags['chris-premades']?.template;\n        if (!flag?.name) continue;\n        if (flag.ignoreMove) continue;\n        if (flag.ignoreStart && chris.inCombat()) {\n            let {'x': tokx, 'y': toky} = previousCoords;\n            let {'x': tempx, 'y': tempy} = template;\n            let startX = token.width >= 1 ? 0.5 : token.width / 2;\n            let startY = token.height >= 1 ? 0.5 : token.height / 2;\n            let curr = {\n                'x': tokx + startX * token.parent.grid.size - tempx,\n                'y': toky + startY * token.parent.grid.size - tempy\n            };\n            let contains = template.object.shape.contains(curr.x, curr.y);\n            if (contains) continue;\n        }\n        if (!allTriggers[flag.name]) allTriggers[flag.name] = [];\n        allTriggers[flag.name].push(flag);\n    }\n    if (allTriggers.length === 0) return;\n    runTriggers(allTriggers, token, 'move');\n}\nfunction combat(combat, changes, context) {\n    if (game.settings.get('chris-premades', 'LastGM') != game.user.id) return;\n    let currentTurn = combat.current.turn;\n    let previousTurn = context.effectmacro?.previousTR?.T;\n    let currentRound = combat.current.round;\n    let previousRound = context.effectmacro?.previousTR?.R;\n    if (!changes.turn && !changes.round) return;\n    if (!combat.started || !combat.isActive) return;\n    if (currentRound < previousRound || (currentTurn < previousTurn && currentTurn === previousRound)) return;\n    let token = game.combat.scene.tokens.get(combat.current.tokenId);\n    if (token) {\n        let templates = chris.tokenTemplates(token);\n        if (templates.length != 0) {\n            let allTriggers = {};\n            for (let i of templates) {\n                let template = canvas.scene.templates.get(i);\n                if (!template) continue;\n                let flag = template.flags['chris-premades']?.template;\n                if (!flag?.name) continue;\n                if (!flag.turn) continue;\n                if (!(flag.turn === 'start' || flag.turn === 'both')) continue;\n                if (!allTriggers[flag.name]) allTriggers[flag.name] = [];\n                allTriggers[flag.name].push(flag);\n            }\n            if (allTriggers.length === 0) return;\n            runTriggers(allTriggers, token, 'turnStart');\n        }\n    }\n    let previousToken = game.combat.scene.tokens.get(combat.previous.tokenId);\n    if (previousToken) {\n        let templates = chris.tokenTemplates(previousToken);\n        if (templates.length != 0) {\n            let allTriggers = {};\n            for (let i of templates) {\n                let template = canvas.scene.templates.get(i);\n                if (!template) continue;\n                let flag = template.flags['chris-premades']?.template;\n                if (!flag?.name) continue;\n                if (!flag.turn) continue;\n                if (!(flag.turn === 'end' || flag.turn === 'both')) continue;\n                if (!allTriggers[flag.name]) allTriggers[flag.name] = [];\n                allTriggers[flag.name].push(flag);\n            }\n            if (allTriggers.length === 0) return;\n            runTriggers(allTriggers, previousToken, 'turnEnd'); \n        }\n    }\n}\nasync function runTriggers(allTriggers, token, reason) {\n    for (let triggerName of Object.values(allTriggers)) {\n        let maxLevel = Math.max(...triggerName.map(trigger => trigger.castLevel));\n        let maxDC = Math.max(...triggerName.map(trigger => trigger.saveDC));\n        let maxDCTrigger = triggerName.find(trigger => trigger.saveDC === maxDC);\n        let selectedTrigger;\n        if (maxDCTrigger.castLevel === maxLevel) {\n            selectedTrigger = triggerName.find(trigger => trigger.castLevel === maxLevel && trigger.saveDC === maxDC);\n        } else {\n            selectedTrigger = triggerName.find(trigger => trigger.castLevel === maxLevel);\n        }\n        await executeFunction(selectedTrigger, token, reason);\n        await warpgate.wait(100);\n    }\n}\nasync function executeFunction(selectedTrigger, token, reason) {\n    console.log('Chris | Executing template trigger for ' + selectedTrigger.name + ' to: ' + token.actor.name);\n    let macroCommand;\n    if (selectedTrigger.macroName) {\n        macros.templateTrigger(selectedTrigger.macroName, token, selectedTrigger, reason);\n    } else if (selectedTrigger.globalFunction) {\n        macroCommand = `await ${selectedTrigger.globalFunction.trim()}.bind(this)({token, reason})`;\n    } else if (selectedTrigger.worldMacro) {\n        let macro = game.macros?.getName(selectedTrigger.worldMacro.replaceAll('\"', ''));\n        macroCommand = macro?.command ?? `console.warn('Chris | No world macro ${selectedTrigger.worldMacro.replaceAll('\"', '')} found!')`;\n    }\n    if (macroCommand) {\n        let body = `return (async () => {${macroCommand}})()`;\n        let fn = Function('{token}={}', body);\n        try {\n            fn.call(selectedTrigger, {token, reason});\n        } catch (error) {\n            ui.notifications?.error('There was an error running your macro. See the console (F12) for details');\n            error('Error evaluating macro ', error);\n        }\n    }\n}\nexport let templates = {\n    'move': updateToken,\n    'runTrigger': executeFunction,\n    'combat': combat\n}","import {chris} from '../helperFunctions.js';\nexport function vaeEffectDescription(effect, updates, options, id) {\n    if (!effect.parent) return;\n    if (effect.parent.constructor.name != 'Actor5e') return;\n    if (!effect.origin) return;\n    let origin = fromUuidSync(effect.origin);\n    if (!origin) return;\n    if (origin.constructor.name != 'Item5e') return;\n    if (!updates.flags?.['visual-active-effects']?.data?.content) {\n        if (game.settings.get('chris-premades', 'No NPC VAE Descriptions')) {\n            if (origin.actor?.type === 'npc' && origin.actor.id != effect.parent.id) return;\n        }\n        setProperty(updates, 'flags.visual-active-effects.data.content', origin.system.description.value);\n    } else {\n        return;\n    }\n    effect.updateSource({'flags.visual-active-effects': updates.flags['visual-active-effects']});\n}\nexport async function vaeTempItemButton(effect, buttons) {\n    let name = effect.flags['chris-premades']?.vae?.button;\n    if (!name) return;\n    if (name === 'Dismiss Summon') {\n        buttons.push({\n            'label': name,\n            'callback': async function(){\n                await chris.removeEffect(effect);\n            }\n        });\n    } else {\n        buttons.push({\n            'label': 'Use: ' + name,\n            'callback': async function(){\n                let item = effect.parent.items.getName(name);\n                if (item) {\n                    await item.use();\n                } else {\n                    ui.notifications.warn(name + ' item not found!');\n                }\n            }\n        });\n    }\n}","export function templateMacroTitleBarButton(app, [elem], options) {\n    let headerButton = elem.closest('.window-app').querySelector('a.header-button.templatemacro');\n    if (!headerButton) return;\n    let object = app.object;\n    if (!object) return;\n    let flag = object.flags?.templatemacro;\n    if (!flag) return;\n    if (!Object.keys(flag).length) return;\n    headerButton.style.color = 'green';\n}","import {chris} from '../../helperFunctions.js';\nexport async function addActions(token, options, userId) {\n    let option = game.settings.get('chris-premades', 'Add Generic Actions');\n    if (option === 'none' || userId != game.user.id || !token.actor) return;\n    switch (option) {\n        case 'uCharacter':\n            if (token.actor.prototypeToken.actorLink) return;\n        case 'character':\n            if (token.actor.type != 'character') return;\n            break;\n        case 'uNpc':\n            if (token.actor.prototypeToken.actorLink) return;\n        case 'npc':\n            if (token.actor.type != 'npc') return;\n            break;\n        case 'lNpc':\n            if (!token.actor.prototypeToken.actorLink || token.actor.type != 'npc') return;\n            break;\n        case 'lCharacter':\n            if (!token.actor.prototypeToken.actorLink || token.actor.type != 'character') return;\n            break;\n        default:\n            if (token.actor.type != 'character' && token.actor.type != 'npc') return;\n            break;\n    }\n    let pack = game.packs.get('chris-premades.CPR Actions');\n    if (!pack) return;\n    await pack.getDocuments();\n    let newItemData = [];\n    for (let i of pack.contents) {\n        if (token.actor.items.getName(i.name)) continue;\n        let itemData = i.toObject();\n        delete itemData._id;\n        itemData.system.description.value = chris.getItemDescription('CPR - Descriptions', itemData.name);\n        newItemData.push(itemData);\n    }\n    if (newItemData.length) await token.actor.createEmbeddedDocuments('Item', newItemData);\n}","import {macros, onHitMacro} from './macros.js';\nimport {flanking} from './macros/generic/syntheticAttack.js';\nimport {removeDumbV10Effects} from './macros/mechanics/conditions.js';\nimport {tokenMoved, combatUpdate, tokenMovedEarly} from './utility/movement.js';\nimport {patchActiveEffectSourceName, patchSaves, patchSkills} from './patching.js';\nimport {addMenuSetting, chrisSettingsAnimations, chrisSettingsClassFeats, chrisSettingsCompendiums, chrisSettingsFeats, chrisSettingsGeneral, chrisSettingsHomewbrew, chrisSettingsManualRolling, chrisSettingsMechanics, chrisSettingsModule, chrisSettingsMonsterFeats, chrisSettingsNPCUpdate, chrisSettingsRaceFeats, chrisSettingsRandomizer, chrisSettingsRandomizerHumanoid, chrisSettingsSpells, chrisSettingsSummons, chrisSettingsTroubleshoot} from './settingsMenu.js';\nimport {effectTitleBar, fixOrigin, itemDC, noEffectAnimationCreate, noEffectAnimationDelete} from './utility/effect.js';\nimport {effectAuraHooks} from './utility/effectAuras.js';\nimport {allRaces, npcRandomizer, updateChanceTable} from './utility/npcRandomizer.js';\nimport {rest} from './utility/rest.js';\nimport {tashaSummon} from './utility/tashaSummon.js';\nimport {templates} from './utility/templateEffect.js';\nimport {vaeEffectDescription, vaeTempItemButton} from './integrations/vae.js';\nimport {diceSoNice} from './integrations/diceSoNice.js';\nimport {info} from './info.js';\nimport {itemFeatures, itemFeaturesDelete} from './equipment.js';\nimport {cast} from './macros/animations/cast.js';\nimport {automatedAnimations} from './integrations/automatedAnimations.js';\nimport {buildABonus} from './integrations/buildABonus.js';\nimport {dndAnimations} from './integrations/dndAnimations.js';\nimport {colorizeDAETitleBarButton} from './integrations/dae.js';\nimport {firearm} from './macros/mechanics/firearm.js';\nimport {templateMacroTitleBarButton} from './integrations/templateMacro.js';\nimport {addActions} from './macros/actions/token.js';\nlet moduleName = 'chris-premades';\nexport let humanoidSettings = {};\nexport function registerSettings() {\n    game.settings.register(moduleName, 'Automation Verification', {\n        'name': 'Automation Verification',\n        'hint': 'When enabled, the module will verify the automation is up to date and has the correct settings enabled.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preItemRoll', info);\n            } else {\n                Hooks.off('midi-qol.preItemRoll', info);\n            }\n        }\n    });\n    addMenuSetting('Automation Verification', 'General');\n    game.settings.register(moduleName, 'Breaking Version Change', {\n        'name': 'Breaking Version Change',\n        'hint': 'Internal version number bumped when an update requires new imports.',\n        'scope': 'world',\n        'config': false,\n        'type': Number,\n        'default': 9\n    });\n    game.settings.register(moduleName, 'Tour Message', {\n        'name': 'Tour Message',\n        'hint': 'Check if the GM has seen the tour message.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    game.settings.register(moduleName, 'Show Names', {\n        'name': 'Show Names',\n        'hint': 'Enabling this will show target names in the target selector dialog (Used for certain features and spells).',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true\n    });\n    addMenuSetting('Show Names', 'General');\n    game.settings.register(moduleName, 'Priority Queue', {\n        'name': 'Priority Queue',\n        'hint': 'This setting allows macros from this module to have an on use priority order.  This prevents multiple pop-up dialogs from firing at the same time as well as applying damage modification changes in a certain order.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true\n    });\n    addMenuSetting('Priority Queue', 'General');\n    game.settings.register(moduleName, 'Item Replacer Access', {\n        'name': 'Item Replacer Access',\n        'hint': 'If enabled, players can replace their own items.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Item Replacer Access', 'General');\n    game.settings.register(moduleName, 'Item Configuration Access', {\n        'name': 'Item Configuration Access',\n        'hint': 'If enabled, players can configure their own items.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Item Configuration Access', 'General');\n    game.settings.register(moduleName, 'Movement Listener', {\n        'name': 'Movement Listener',\n        'hint': 'This setting allows certain macros from this module to function on token movement.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value && game.user.isGM) {\n                Hooks.on('updateToken', tokenMoved);\n                Hooks.on('preUpdateToken', tokenMovedEarly);\n            } else if (game.user.isGM) {\n                Hooks.off('updateToken', tokenMoved);\n                Hooks.off('preUpdateToken', tokenMovedEarly);\n            }\n        }\n    });\n    addMenuSetting('Movement Listener', 'General');\n    game.settings.register(moduleName, 'Template Listener', {\n        'name': 'Template Listener',\n        'hint': 'This setting allows certain macros from this module to function when tokens interact with templates.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value && game.user.isGM) {\n                Hooks.on('updateToken', templates.move);\n                Hooks.on('updateCombat', templates.combat);\n            } else if (game.user.isGM) {\n                Hooks.off('updateToken', templates.move);\n                Hooks.on('updateCombat', templates.combat);\n            }\n        }\n    });\n    addMenuSetting('Template Listener', 'General');\n    game.settings.register(moduleName, 'Tasha Actors', {\n        'name': 'Keep Summon Actors Updated',\n        'hint': 'This setting will keep actors from this module updated in the sidebar.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': async value => {\n            if (value && game.user.isGM) await tashaSummon.setupFolder();\n        }\n    });\n    addMenuSetting('Tasha Actors', 'Summons');\n    game.settings.register(moduleName, 'Tasha Initiative', {\n        'name': 'Minions use caster\\'s initiative',\n        'hint': 'Enabling this will have minions summoned from this module to use the caster\\'s initiative instead of rolling their own.  Similar to the summon spells from Tasha\\'s Cauldron Of Everything',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Tasha Initiative', 'Summons');\n    game.settings.register(moduleName, 'Player Chooses Conjures', {\n        'name': 'Player choose creatures for conjure spells',\n        'hint': 'Enabling this will have players chose the creatures summoned for conjure spells, instead of the Sage Advice ruling that the DM choses the creatures.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Player Chooses Conjures', 'Summons');\n    game.settings.register(moduleName, 'Effect Auras', {\n        'name': 'Effect Auras',\n        'hint': 'This setting allows certain macros from this module to apply effect auras.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value && game.user.isGM) {\n                Hooks.on('preUpdateActor', effectAuraHooks.preActorUpdate);\n                Hooks.on('updateActor', effectAuraHooks.actorUpdate);\n                Hooks.on('canvasReady', effectAuraHooks.canvasReady);\n                Hooks.on('updateToken', effectAuraHooks.updateToken);\n                Hooks.on('createToken', effectAuraHooks.createToken);\n                Hooks.on('deleteToken', effectAuraHooks.deleteToken);\n                Hooks.on('createActiveEffect', effectAuraHooks.createRemoveEffect);\n                Hooks.on('deleteActiveEffect', effectAuraHooks.createRemoveEffect);\n            } else if (game.user.isGM) {\n                Hooks.off('preUpdateActor', effectAuraHooks.preActorUpdate);\n                Hooks.off('updateActor', effectAuraHooks.actorUpdate);\n                Hooks.off('canvasReady', effectAuraHooks.canvasReady);\n                Hooks.off('updateToken', effectAuraHooks.updateToken);\n                Hooks.off('createToken', effectAuraHooks.createToken);\n                Hooks.off('deleteToken', effectAuraHooks.deleteToken);\n                Hooks.off('createActiveEffect', effectAuraHooks.createRemoveEffect);\n                Hooks.off('deleteActiveEffect', effectAuraHooks.createRemoveEffect);\n            }\n        }\n    });\n    addMenuSetting('Effect Auras', 'General');\n    game.settings.register(moduleName, 'Active Effect Additions', {\n        'name': 'Active Effect Additions',\n        'hint': 'This setting allows active effects to have additional properties.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('preCreateActiveEffect', itemDC);\n                Hooks.on('preCreateActiveEffect', noEffectAnimationCreate);\n                Hooks.on('preDeleteActiveEffect', noEffectAnimationDelete);\n                Hooks.on('getActiveEffectConfigHeaderButtons', effectTitleBar);\n            } else {\n                Hooks.off('preCreateActiveEffect', itemDC);\n                Hooks.off('preCreateActiveEffect', noEffectAnimationCreate);\n                Hooks.off('preDeleteActiveEffect', noEffectAnimationDelete);\n                Hooks.off('getActiveEffectConfigHeaderButtons', effectTitleBar);\n            }\n            patchActiveEffectSourceName(value);\n        }\n    });\n    addMenuSetting('Active Effect Additions', 'General');\n    game.settings.register(moduleName, 'Active Effect Origin Fix', {\n        'name': 'Active Effect Origin Fix',\n        'hint': 'This setting corrects the origin of effects on unlinked actors.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('createToken', fixOrigin);\n            } else {\n                Hooks.off('createToken', fixOrigin);\n            }\n        }\n    });\n    addMenuSetting('Active Effect Origin Fix', 'General');\n    game.settings.register(moduleName, 'Skill Patching', {\n        'name': 'Skill Patching',\n        'hint': 'This setting allows certain macros to modify skill checks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            patchSkills(value);\n        }\n    });\n    addMenuSetting('Skill Patching', 'General');\n    game.settings.register(moduleName, 'Save Patching', {\n        'name': 'Save Patching',\n        'hint': 'This setting allows certain macros to modify ability saves.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            patchSaves(value);\n        }\n    });\n    addMenuSetting('Save Patching', 'General');\n    game.settings.register(moduleName, 'Automatic VAE Descriptions', {\n        'name': 'Automatic VAE Descriptions',\n        'hint': 'When enabled, this setting will automatically fill in VAE effect descriptions when possible.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('preCreateActiveEffect', vaeEffectDescription);\n            } else {\n                Hooks.off('preCreateActiveEffect', vaeEffectDescription);\n            }\n        }\n    });\n    addMenuSetting('Automatic VAE Descriptions', 'Module Integration');\n    game.settings.register(moduleName, 'No NPC VAE Descriptions', {\n        'name': 'No NPC VAE Descriptions',\n        'hint': 'If enabled, automatic VAE descriptions will ignore effects created from NPCs.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('No NPC VAE Descriptions', 'Module Integration');\n    game.settings.register(moduleName, 'VAE Temporary Item Buttons', {\n        'name': 'VAE Temporary Item Buttons',\n        'hint': 'When enabled, this setting will add a button to use temporary items via VAE.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('visual-active-effects.createEffectButtons', vaeTempItemButton);\n            } else {\n                Hooks.off('visual-active-effects.createEffectButtons', vaeTempItemButton);\n            }\n        }\n    });\n    addMenuSetting('VAE Temporary Item Buttons', 'Module Integration');\n    game.settings.register(moduleName, 'Show Limits Animations', {\n        'name': 'Show Limits Animations',\n        'hint': 'When enabled, this setting allows Sequencer effects to be displayed over vision blocking templates.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n    });\n    addMenuSetting('Show Limits Animations', 'Module Integration');\n    game.settings.register(moduleName, 'Condition Fixes', {\n        'name': 'Blinded and Invisibility Changes',\n        'hint': 'This setting restores the blinded and invisibility conditions to how they worked in version 9 of Foundry.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) removeDumbV10Effects();\n        }\n    });\n    addMenuSetting('Condition Fixes', 'Mechanics');\n    game.settings.register(moduleName, 'LastGM', {\n        'name': 'LastGM',\n        'hint': 'Last GM to join the game.',\n        'scope': 'world',\n        'config': false,\n        'type': String\n    });\n    game.settings.register(moduleName, 'Combat Listener', {\n        'name': 'Combat Listener',\n        'hint': 'This setting allows certain macros from this module to function on combat changes.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value && game.user.isGM) {\n                Hooks.on('updateCombat', combatUpdate);\n            } else if (game.user.isGM) {\n                Hooks.off('updateCombat', combatUpdate);\n            }\n        }\n    });\n    addMenuSetting('Combat Listener', 'General');\n    game.settings.register(moduleName, 'Rest Listener', {\n        'name': 'Short / Long Rest Listener',\n        'hint': 'Enabling this allows certain macros to function on short and long rests.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('dnd5e.restCompleted', rest);\n            } else {\n                Hooks.off('dnd5e.restCompleted', rest);\n            }\n        }\n    });\n    addMenuSetting('Rest Listener', 'General');\n    game.settings.register(moduleName, 'Movement Triggers', {\n        'name': 'Movement Triggers',\n        'hint': 'Used to sync the movement queue.',\n        'scope': 'world',\n        'config': false,\n        'type': Object,\n        'default': {}\n    });\n    game.settings.register(moduleName, 'Additional Compendiums', {\n        'name': 'Additional Compendiums',\n        'hint': 'Select the additional compendiums the medkit will check in.',\n        'scope': 'world',\n        'config': false,\n        'type': Array,\n        'default': ['midi-srd.Midi SRD Feats', 'midi-srd.Midi SRD Spells', 'midi-srd.Midi SRD Items', 'midi-qol.midiqol-sample-items']\n    });\n    addMenuSetting('Additional Compendiums', 'Compendiums');\n    game.settings.register(moduleName, 'Additional Compendium Priority', {\n        'name': 'Additional Compendium Priority',\n        'hint': 'Select the priority of additional compendiums.',\n        'scope': 'world',\n        'config': false,\n        'type': Object,\n        'default': {\n            'CPR': 0,\n            'GPS': 1,\n            'MISC': 2,\n            'midi-srd.Midi SRD Feats': 3,\n            'midi-srd.Midi SRD Spells': 4,\n            'midi-srd.Midi SRD Items': 5\n        }\n    });\n    addMenuSetting('Additional Compendium Priority', 'Compendiums');\n    game.settings.register(moduleName, 'GPS Support', {\n        'name': 'Gambit\\'s Premades Support',\n        'hint': 'Include Gambit\\'s premades in the medkit.',\n        'scope': 'world',\n        'config': false,\n        'type': Number,\n        'default': 0,\n        'choices': {\n            0: 'Disabled',\n            1: 'Yes | Exclude Homebrew',\n            2: 'Yes | Include Everything'\n        }\n    });\n    addMenuSetting('GPS Support', 'Compendiums');\n    game.settings.register(moduleName, 'MISC Support', {\n        'name': 'Midi Item Showcase - Community Support',\n        'hint': 'Include Midi Item Showcase in the medkit.',\n        'scope': 'world',\n        'config': false,\n        'type': Number,\n        'default': 0,\n        'choices': {\n            0: 'Disabled',\n            1: 'Yes | Exclude Homebrew',\n            2: 'Yes | Exclude Unearthed Arcana',\n            3: 'Yes | Exclude Homebrew and Unearthed Arcana',\n            4: 'Yes | Include Everything'\n        }\n    });\n    addMenuSetting('MISC Support', 'Compendiums');\n    game.settings.register(moduleName, 'Item Compendium', {\n        'name': 'Personal Item Compendium',\n        'hint': 'A compendium full of items to pick from (DDB items compendium by default).',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'world.ddb-' + game.world.id + '-ddb-items',\n        'select': true\n    });\n    addMenuSetting('Item Compendium', 'Compendiums');\n    game.settings.register(moduleName, 'Spell Compendium', {\n        'name': 'Personal Spell Compendium',\n        'hint': 'A compendium full of spells to pick from (DDB spells compendium by default).',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'world.ddb-' + game.world.id + '-ddb-spells',\n        'select': true\n    });\n    addMenuSetting('Spell Compendium', 'Compendiums');\n    game.settings.register(moduleName, 'Monster Compendium', {\n        'name': 'Personal Monster Compendium',\n        'hint': 'A compendium full of monsters to pick from (DDB monster compendium by default).',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'world.ddb-' + game.world.id + '-ddb-monsters',\n        'select': true\n    });\n    addMenuSetting('Monster Compendium', 'Compendiums');\n    game.settings.register(moduleName, 'Racial Trait Compendium', {\n        'name': 'Personal Racial Trait Compendium',\n        'hint': 'A compendium full of racial traits to pick from (DDB monster compendium by default).',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'world.ddb-' + game.world.id + '-ddb-racial-traits',\n        'select': true\n    });\n    addMenuSetting('Racial Trait Compendium', 'Compendiums');\n    game.settings.register(moduleName, 'Condition Resistance', {\n        'name': 'Condition Resistance Mechanic',\n        'hint': 'Enabling this allows the automation condition resistance via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preItemRoll', macros.conditionResistanceEarly);\n                Hooks.on('midi-qol.RollComplete', macros.conditionResistanceLate);\n            } else {\n                Hooks.off('midi-qol.preItemRoll', macros.conditionResistanceEarly);\n                Hooks.off('midi-qol.RollComplete', macros.conditionResistanceLate);\n            }\n        }\n    });\n    addMenuSetting('Condition Resistance', 'Mechanics');\n    game.settings.register(moduleName, 'Condition Vulnerability', {\n        'name': 'Condition Vulnerability Mechanic',\n        'hint': 'Enabling this allows the automation condition vulnerability via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preItemRoll', macros.conditionVulnerabilityEarly);\n                Hooks.on('midi-qol.RollComplete', macros.conditionVulnerabilityLate);\n            } else {\n                Hooks.off('midi-qol.preItemRoll', macros.conditionVulnerabilityEarly);\n                Hooks.off('midi-qol.RollComplete', macros.conditionVulnerabilityLate);\n            }\n        }\n    });\n    addMenuSetting('Condition Vulnerability', 'Mechanics');\n    game.settings.register(moduleName, 'On Hit', {\n        'name': 'On Hit Automation',\n        'hint': 'Enabling this allows the automation for certain \"On Hit\" features.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.RollComplete', onHitMacro);\n            } else {\n                Hooks.off('midi-qol.RollComplete', onHitMacro);\n            }\n        }\n    });\n    addMenuSetting('On Hit', 'General');\n    game.settings.register(moduleName, 'Beacon of Hope', {\n        'name': 'Beacon of Hope Automation',\n        'hint': 'Enabling this allows the automation of the Beacon of Hope spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.beaconOfHope);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.beaconOfHope);\n            }\n        }\n    });\n    addMenuSetting('Beacon of Hope', 'Spells');\n    game.settings.register(moduleName, 'Darkness', {\n        'name': 'Darkness Automation',\n        'hint': 'Enabling this allows the automation of the Darkness spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', macros.darkness.hook);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', macros.darkness.hook);\n            }\n        }\n    });\n    addMenuSetting('Darkness', 'Spells');\n    game.settings.register(moduleName, 'Fog Cloud', {\n        'name': 'Fog Cloud Automation',\n        'hint': 'Enabling this allows the automation of the Fog Cloud spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', macros.fogCloud.hook);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', macros.fogCloud.hook);\n            }\n        }\n    });\n    addMenuSetting('Fog Cloud', 'Spells');\n    game.settings.register(moduleName, 'Death Ward', {\n        'name': 'Death Ward Automation',\n        'hint': 'Enabling this allows the automation of the Death Ward spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.deathWard);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.deathWard);\n            }\n        }\n    });\n    addMenuSetting('Death Ward', 'Spells');\n    game.settings.register(moduleName, 'Elemental Adept', {\n        'name': 'Elemental Adept Automation',\n        'hint': 'Enabling this allows the automation of the Elemental Adept feat via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.postPreambleComplete', macros.elementalAdept.early);\n                Hooks.on('midi-qol.preDamageRollComplete', macros.elementalAdept.damage);\n                Hooks.on('midi-qol.RollComplete', macros.elementalAdept.late);\n            } else {\n                Hooks.off('midi-qol.postPreambleComplete', macros.elementalAdept.early);\n                Hooks.off('midi-qol.preDamageRollComplete', macros.elementalAdept.damage);\n                Hooks.off('midi-qol.RollComplete', macros.elementalAdept.late);\n            }\n        }\n    });\n    addMenuSetting('Elemental Adept', 'Feats');\n    game.settings.register(moduleName, 'Dual Wielder', {\n        'name': 'Dual Wielder Automation',\n        'hint': 'Enabling this allows the automation of the Dual Wielder feat via the use of Foundry hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('updateItem', macros.dualWielder);\n            } else {\n                Hooks.off('updateItem', macros.dualWielder);\n            }\n        }\n    });\n    addMenuSetting('Dual Wielder', 'Feats');\n    game.settings.register(moduleName, 'Mirror Image', {\n        'name': 'Mirror Image Automation',\n        'hint': 'Enabling this allows the automation of the Mirror Image spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.AttackRollComplete', macros.mirrorImage);\n            } else {\n                Hooks.off('midi-qol.AttackRollComplete', macros.mirrorImage);\n            }\n        }\n    });\n    addMenuSetting('Mirror Image', 'Spells');\n    game.settings.register(moduleName, 'Protection from Evil and Good', {\n        'name': 'Protection from Evil and Good Automation',\n        'hint': 'Enabling this allows the automation of the Protection from Evil and Good spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', macros.protectionFromEvilAndGood);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', macros.protectionFromEvilAndGood);\n            }\n        }\n    });\n    addMenuSetting('Protection from Evil and Good', 'Spells');\n    game.settings.register(moduleName, 'Sanctuary', {\n        'name': 'Sanctuary Automation',\n        'hint': 'Enabling this allows the automation of the Sanctuary spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preItemRoll', macros.sanctuary.hook);\n            } else {\n                Hooks.off('midi-qol.preItemRoll', macros.sanctuary.hook);\n            }\n        }\n    });\n    addMenuSetting('Sanctuary', 'Spells');\n    game.settings.register(moduleName, 'Ranged Smite', {\n        'name': 'Ranged Divine Smite',\n        'hint': 'Enabling this will allow the Divine Smite feature to be used on ranged attacks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Ranged Smite', 'Homebrew');\n    game.settings.register(moduleName, 'Unarmed Strike Smite', {\n        'name': 'Unarmed Strike Divine Smite',\n        'hint': 'Enabling this will allow the Divine Smite feature to be used on unarmed Strikes.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Unarmed Strike Smite', 'Homebrew');\n    game.settings.register(moduleName, 'DMG Cleave', {\n        'name': 'DMG Cleave Mechanic',\n        'hint': 'Enabling this allows the automation of the cleave mechanic from the DMG workshop section via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.RollComplete', macros.cleave.hit);\n                Hooks.on('midi-qol.preCheckHits', macros.cleave.attack);\n                Hooks.on('midi-qol.preDamageRollComplete', macros.cleave.damage);\n            } else {\n                Hooks.off('midi-qol.RollComplete', macros.cleave.hit);\n                Hooks.off('midi-qol.preCheckHits', macros.cleave.attack);\n                Hooks.off('midi-qol.preDamageRollComplete', macros.cleave.damage);\n            }\n        }\n    });\n    addMenuSetting('DMG Cleave', 'Mechanics');\n    game.settings.register(moduleName, 'DMG Cleave Full Health', {\n        'name': 'DMG Cleave Damaged Tokens',\n        'hint': 'When enabled the DMG cleave will also prompt on a target even if they didn\\'t start with full health.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('DMG Cleave Full Health', 'Mechanics');\n    game.settings.register(moduleName, 'Wildhunt', {\n        'name': 'Shifter Wildhunt Automation',\n        'hint': 'Enabling this allows the automation of the Shifter Wildhunt feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', macros.wildhunt);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', macros.wildhunt);\n            }\n        }\n    });\n    addMenuSetting('Wildhunt', 'Race Features');\n    game.settings.register(moduleName, 'Undead Fortitude', {\n        'name': 'Undead Fortitude Automation',\n        'hint': 'Enabling this allows the automation of the Undead Fortitude feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.monster.zombie.undeadFortitude);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.monster.zombie.undeadFortitude);\n            }\n        }\n    });\n    addMenuSetting('Undead Fortitude', 'Monster Features');\n    game.settings.register(moduleName, 'Exploding Heals', {\n        'name': 'Exploding Heals',\n        'hint': 'Enabling this allows the automation of the homebrew rule to have exploding dice for all healing rolls via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preDamageRollComplete', macros.explodingHeals);\n            } else {\n                Hooks.off('midi-qol.preDamageRollComplete', macros.explodingHeals);\n            }\n        }\n    });\n    addMenuSetting('Exploding Heals', 'Homebrew');\n    game.settings.register(moduleName, 'Shield Guardian', {\n        'name': 'Shield Guardian Automation',\n        'hint': 'Enabling this allows the automation of the Shield Guardian\\'s Bound feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.mastersAmulet);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.mastersAmulet);\n            }\n        }\n    });\n    addMenuSetting('Shield Guardian', 'Monster Features');\n    game.settings.register(moduleName, 'Warding Bond', {\n        'name': 'Warding Bond Automation',\n        'hint': 'Enabling this allows the automation of the Warding Bond spell via the use of hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value && game.user.isGM) {\n                Hooks.on('updateToken', macros.wardingBond.moveTarget);\n                Hooks.on('updateToken', macros.wardingBond.moveSource);\n            } else if (game.user.isGM) {\n                Hooks.off('updateToken', macros.wardingBond.moveTarget);\n                Hooks.off('updateToken', macros.wardingBond.moveSource);\n            }\n        }\n    });\n    addMenuSetting('Warding Bond', 'Spells');\n    game.settings.register(moduleName, 'Attack Listener', {\n        'name': 'Attack Listener',\n        'hint': 'This setting is required for certain macros to help with removing flanking and canceling attacks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', flanking);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', flanking);\n            }\n        }\n    });\n    addMenuSetting('Attack Listener', 'General');\n    game.settings.register(moduleName, 'Magic Missile Toggle', {\n        'name': 'Magic Missile Toggle',\n        'hint': 'Enabling this has the Magic Missile spell roll the dice multiple times for damage.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false\n    });\n    addMenuSetting('Magic Missile Toggle', 'Homebrew');\n    game.settings.register(moduleName, 'Strength of the Grave', {\n        'name': 'Strength of the Grave Automation',\n        'hint': 'Enabling this allows the automation of the Strength of the Grave feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.strengthOfTheGrave);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.strengthOfTheGrave);\n            }\n        }\n    });\n    addMenuSetting('Strength of the Grave', 'Class Features');\n    game.settings.register(moduleName, 'Relentless Endurance', {\n        'name': 'Relentless Endurance Automation',\n        'hint': 'Enabling this allows the automation of the Relentless Endurance feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.relentlessEndurance);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.relentlessEndurance);\n            }\n        }\n    });\n    addMenuSetting('Relentless Endurance', 'Race Features');\n    game.settings.register(moduleName, 'Shadow of Moil', {\n        'name': 'Shadow of Moil Automation',\n        'hint': 'Enabling this allows the automation of the Shadow of Moil spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preAttackRoll', macros.shadowOfMoil.hook);\n            } else {\n                Hooks.off('midi-qol.preAttackRoll', macros.shadowOfMoil.hook);\n            }\n        }\n    });\n    addMenuSetting('Shadow of Moil', 'Spells');\n    game.settings.register(moduleName, 'Emboldening Bond', {\n        'name': 'Emboldening Bond',\n        'hint': 'Enabling this allows the automation of the Emboldening Bond via the use of Foundry and Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                if (game.user.isGM) Hooks.on('updateToken', macros.emboldeningBond.move);\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.emboldeningBond.damage);\n            } else {\n                if (game.user.isGM) Hooks.off('updateToken', macros.emboldeningBond.move);\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.emboldeningBond.damage);\n            }\n        }\n    });\n    addMenuSetting('Emboldening Bond', 'Class Features');\n    game.settings.register(moduleName, 'Manual Rolls', {\n        'name': 'Manual Rolls',\n        'hint': 'Enabling this will prompt the GM to input attack, save, and damage totals. This only applies to rolls that involve Midi-Qol.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preCheckHits', macros.manualRolls.attackRoll);\n                Hooks.on('midi-qol.postCheckSaves', macros.manualRolls.saveRolls);\n                Hooks.on('midi-qol.DamageRollComplete', macros.manualRolls.damageRoll);\n            } else {\n                Hooks.off('midi-qol.preCheckHits', macros.manualRolls.attackRoll);\n                Hooks.off('midi-qol.postCheckSaves', macros.manualRolls.saveRolls);\n                Hooks.off('midi-qol.DamageRollComplete', macros.manualRolls.damageRoll);\n            }\n        }\n    });\n    addMenuSetting('Manual Rolls', 'Manual Rolling');\n    game.settings.register(moduleName, 'Ignore GM', {\n        'name': 'Ignore GM Rolls',\n        'hint': 'Do not prompt when there are no player owned tokens involved.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true\n    });\n    addMenuSetting('Ignore GM', 'Manual Rolling');\n    game.settings.register(moduleName, 'Manual Rolling Players', {\n        'name': 'Player Settings',\n        'hint': 'Set rolling options per-player here.',\n        'scope': 'world',\n        'config': false,\n        'type': Object,\n        'default': {}\n    });\n    addMenuSetting('Manual Rolling Players', 'Manual Rolling');\n    game.settings.register(moduleName, 'Use Randomizer', {\n        'name': 'Randomizer',\n        'hint': 'Change this.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('createToken', npcRandomizer);\n            } else {\n                Hooks.off('createToken', npcRandomizer);\n            }\n        }\n    });\n    addMenuSetting('Use Randomizer', 'Randomizer');\n    game.settings.register(moduleName, 'Humanoid Randomizer Settings', {\n        'name': 'Humanoid Randomizer Settings',\n        'hint': 'Change this.',\n        'scope': 'world',\n        'config': false,\n        'type': Object,\n        'default': allRaces,\n        'onChange': value => {\n            if (value) updateChanceTable();\n        }\n    });\n    addMenuSetting('Humanoid Randomizer Settings', 'Randomizer');\n    game.settings.register(moduleName, 'Dice So Nice', {\n        'name': 'Dice So Nice Compatability',\n        'hint': 'Accounts for damage roll changes for DSN rolls through use of Midi-QoL hooks',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preItemRoll', diceSoNice.early);\n                Hooks.on('midi-qol.DamageRollComplete', diceSoNice.late);\n            } else {\n                Hooks.off('midi-qol.preItemRoll', diceSoNice.early);\n                Hooks.off('midi-qol.DamageRollComplete', diceSoNice.late);\n            }\n        }\n    });\n    addMenuSetting('Dice So Nice', 'Module Integration');\n    game.settings.register(moduleName, 'Arcane Ward', {\n        'name': 'Arcane Ward Automation',\n        'hint': 'Enabling this allows the automation of the Arcane Ward feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.arcaneWard.damage);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.arcaneWard.damage);\n            }\n        }\n    });\n    addMenuSetting('Arcane Ward', 'Class Features');\n    game.settings.register(moduleName, 'Righteous Heritor', {\n        'name': 'Righteous Heritor Automation',\n        'hint': 'Enabling this allows the automation of the Righteous Heritor feat via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preTargetDamageApplication', macros.soothePain);\n            } else {\n                Hooks.off('midi-qol.preTargetDamageApplication', macros.soothePain);\n            } \n        }\n    });\n    addMenuSetting('Righteous Heritor', 'Feats');\n    game.settings.register(moduleName, 'Summons Folder', {\n        'name': 'Other Summons Folder',\n        'hint': 'This is the name of the folder that will be used for other summon spells, including \"Conjure\" spells and \"Find\" spells',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'Chris Premades'\n    });\n    addMenuSetting('Summons Folder', 'Summons');\n    game.settings.register(moduleName, 'Item Features', {\n        'name': 'Item Features',\n        'hint': 'When enabled, certain items from this module will be able to add additional features to your character sheet when an item is equipped or attuned.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('preUpdateItem', itemFeatures);\n                Hooks.on('preDeleteItem', itemFeaturesDelete);\n            } else {\n                Hooks.off('preUpdateItem', itemFeatures);\n                Hooks.off('preDeleteItem', itemFeaturesDelete);\n            }\n        }\n    });\n    addMenuSetting('Item Features', 'General');\n    game.settings.register(moduleName, 'Baldur\\'s Gate 3 Weapon Actions', {\n        'name': 'Baldur\\'s Gate 3 Weapon Actions',\n        'hint': 'When enabled Baldur\\'s Gate 3 Weapon Actions will be automatically added to actor features.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('preUpdateItem', macros.bg3.addFeatures);\n                Hooks.on('preDeleteItem', macros.bg3.removeFeatures);\n                Hooks.on('midi-qol.preDamageRollComplete', macros.bg3.piercingStrike.damage);\n                Hooks.on('dnd5e.restCompleted', macros.bg3.rest);\n                Hooks.on('midi-qol.RollComplete', macros.bg3.healing);\n            } else {\n                Hooks.off('preUpdateItem', macros.bg3.addFeatures);\n                Hooks.off('preDeleteItem', macros.bg3.removeFeatures);\n                Hooks.off('midi-qol.postDamageRoll', macros.bg3.piercingStrike.damage);\n                Hooks.off('dnd5e.restCompleted', macros.bg3.rest);\n                Hooks.off('midi-qol.RollComplete', macros.bg3.healing);\n            }\n        }\n    });\n    addMenuSetting('Baldur\\'s Gate 3 Weapon Actions', 'Homebrew');\n    game.settings.register(moduleName, 'Add Generic Actions', {\n        'name': 'Add Generic Actions',\n        'hint': 'When enabled special actions will be added to the actor on token drop.',\n        'scope': 'world',\n        'config': false,\n        'type': String,\n        'default': 'none',\n        'choices': {\n            'none': 'None',\n            'all': 'All Actors',\n            'npc': 'All NPC Actors',\n            'character': 'All Character Actors',\n            'uNpc': 'Unlinked NPC Actors',\n            'uCharacter': 'Unlinked Character Actors',\n            'lNpc': 'Linked NPC Actors',\n            'lCharacter': 'Linked Character Actors'\n        }\n    });\n    addMenuSetting('Add Generic Actions', 'General');\n    game.settings.register(moduleName, 'Cast Animations', {\n        'name': ' Cast Animations',\n        'hint': 'Enable to automatically play JB2A spell cast animations for all spells.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.postPreambleComplete', cast);\n            } else {\n                Hooks.off('midi-qol.postPreambleComplete', cast);\n            }\n        }\n    });\n    addMenuSetting('Cast Animations', 'Animations');\n    game.settings.register(moduleName, 'abj_color', {\n        'name': 'Abjuration Color',\n        'hint': 'Color to use for abjuration spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'blue',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('abj_color', 'Animations');\n    game.settings.register(moduleName, 'con_color', {\n        'name': 'Conjuration Color',\n        'hint': 'Color to use for conjuration spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'yellow',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('con_color', 'Animations');\n    game.settings.register(moduleName, 'div_color', {\n        'name': 'Divination Color',\n        'hint': 'Color to use for divination spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'blue',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('div_color', 'Animations');\n    game.settings.register(moduleName, 'enc_color', {\n        'name': 'Enchantment Color',\n        'hint': 'Color to use for enchantment spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'pink',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('enc_color', 'Animations');\n    game.settings.register(moduleName, 'evo_color', {\n        'name': 'Evocation Color',\n        'hint': 'Color to use for evocation spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'red',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('evo_color', 'Animations');\n    game.settings.register(moduleName, 'ill_color', {\n        'name': 'Illusion Color',\n        'hint': 'Color to use for illusion spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'purple',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('ill_color', 'Animations');\n    game.settings.register(moduleName, 'nec_color', {\n        'name': 'Necromancy Color',\n        'hint': 'Color to use for necromancy spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'green',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('nec_color', 'Animations');\n    game.settings.register(moduleName, 'trs_color', {\n        'name': 'Transmutation Color',\n        'hint': 'Color to use for transmutation spells.',\n        'scope': 'client',\n        'config': false,\n        'type': String,\n        'default': 'yellow',\n        'choices': {\n            'blue': 'Blue',\n            'green': 'Green',\n            'pink': 'Pink',\n            'purple': 'Purple',\n            'red': 'Red',\n            'yellow': 'Yellow'\n        }\n    });\n    addMenuSetting('trs_color', 'Animations');\n    game.settings.register(moduleName, 'Compelled Duel', {\n        'name': 'Compelled Duel Automation',\n        'hint': 'Enabling this allows the automation of the spell Compelled Duel via the use of Foundry hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                if (game.user.isGM) Hooks.on('updateToken', macros.compelledDuel.movement);\n                Hooks.on('midi-qol.RollComplete', macros.compelledDuel.attacked);\n            } else {\n                if (game.user.isGM) Hooks.off('updateToken', macros.compelledDuel.movement);\n                Hooks.off('midi-qol.RollComplete', macros.compelledDuel.attacked);\n            }\n        }\n    });\n    addMenuSetting('Compelled Duel', 'Spells');\n    game.settings.register(moduleName, 'Colorize Automated Animations', {\n        'name': 'Colorize Automated Animations Title Bar Button',\n        'hint': 'Enabling this will make colorize the Automated Animations title bar button.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                automatedAnimations.sortAutoRec();\n                Hooks.on('renderItemSheet', automatedAnimations.titleBarButton);\n            } else {\n                Hooks.off('renderItemSheet', automatedAnimations.titleBarButton);\n            }\n        }\n    });\n    addMenuSetting('Colorize Automated Animations', 'Module Integration');\n    game.settings.register(moduleName, 'Colorize Build A Bonus', {\n        'name': 'Colorize Build A Bonus Title Bar Button',\n        'hint': 'Enabling this will make colorize the Build A Bonus title bar button.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('renderItemSheet', buildABonus.titleBarButton);\n                Hooks.on('renderDAEActiveEffectConfig', buildABonus.daeTitleBarButton);\n                Hooks.on('renderActorSheet5e', buildABonus.actorTitleBarButtons);\n            } else {\n                Hooks.off('renderItemSheet', buildABonus.titleBarButton);\n                Hooks.off('renderDAEActiveEffectConfig', buildABonus.daeTitleBarButton);\n                Hooks.off('renderActorSheet5e', buildABonus.actorTitleBarButtons);\n            }\n        }\n    });\n    addMenuSetting('Colorize Build A Bonus', 'Module Integration');\n    game.settings.register(moduleName, 'Colorize Dynamic Active Effects', {\n        'name': 'Colorize Dynamic Active Effects Title Bar Button',\n        'hint': 'Enabling this will make colorize the Dynamic Active Effects title bar button.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('renderItemSheet', colorizeDAETitleBarButton);\n            } else {\n                Hooks.off('renderItemSheet', colorizeDAETitleBarButton);\n            }\n        }\n    });\n    addMenuSetting('Colorize Dynamic Active Effects', 'Module Integration');\n    game.settings.register(moduleName, 'Colorize Template Macro', {\n        'name': 'Colorize Template Macro Title Bar Button',\n        'hint': 'Enabling this will make colorize the Template Macro title bar button.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('renderItemSheet', templateMacroTitleBarButton);\n            } else {\n                Hooks.off('renderItemSheet', templateMacroTitleBarButton);\n            }\n        }\n    });\n    addMenuSetting('Colorize Template Macro', 'Module Integration');\n    game.settings.register(moduleName, 'D&D5E Animations Sounds', {\n        'name': 'D&D5E Animations Sounds',\n        'hint': 'Play sounds from the D&D5E Animations module (when available).',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                dndAnimations.sortAutoRec();\n                Hooks.on('midi-qol.AttackRollComplete', dndAnimations.attackDone);\n                Hooks.on('midi-qol.DamageRollComplete', dndAnimations.damageDone);\n                Hooks.on('midi-qol.RollComplete', dndAnimations.rollDone);\n            } else {\n                Hooks.off('midi-qol.AttackRollComplete', dndAnimations.attackDone);\n                Hooks.off('midi-qol.DamageRollComplete', dndAnimations.damageDone);\n                Hooks.off('midi-qol.RollComplete', dndAnimations.rollDone);\n            }\n        }\n    });\n    addMenuSetting('D&D5E Animations Sounds', 'Module Integration');\n    game.settings.register(moduleName, 'Build A Bonus Overlapping Effects', {\n        'name': 'Build A Bonus Overlapping Effects',\n        'hint': 'When enabled Build A Bonus auras will respect the overlapping spell effect and combining game effects rules.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('babonus.filterBonuses', buildABonus.overlappingEffects);\n            } else {\n                Hooks.off('babonus.filterBonuses', buildABonus.overlappingEffects);\n            }\n        }\n    });\n    addMenuSetting('Build A Bonus Overlapping Effects', 'Module Integration');\n    game.settings.register(moduleName, 'Aura of Life', {\n        'name': 'Aura of Life Spell Automation',\n        'hint': 'Enabling this allows the automation of the Aura of Life spell via the use of Foundry hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('preCreateActiveEffect', macros.auraOfLife.effect);\n                Hooks.on('updateActiveEffect', macros.auraOfLife.effect);\n            } else {\n                Hooks.off('preCreateActiveEffect', macros.auraOfLife.effect);\n                Hooks.off('updateActiveEffect', macros.auraOfLife.effect);\n            }\n        }\n    });\n    addMenuSetting('Aura of Life', 'Spells');\n    game.settings.register(moduleName, 'Booming Blade', {\n        'name': 'Booming Blade Automation',\n        'hint': 'Enabling this allows the automation of the Booming Blade spell via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('updateToken', macros.boomingBlade.moved);\n            } else {\n                Hooks.off('updateToken', macros.boomingBlade.moved);\n            }\n        }\n    });\n    addMenuSetting('Booming Blade', 'Spells');\n    game.settings.register(moduleName, 'Manifest Echo', {\n        'name': 'Manifest Echo Automation',\n        'hint': 'Enabling this allows the automation of the Manifest Echo feature via the use of Foundry hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('dnd5e.rollAbilitySave', macros.manifestEcho.save);\n            } else {\n                Hooks.off('dnd5e.rollAbilitySave', macros.manifestEcho.save);\n            }\n        }\n    });\n    addMenuSetting('Manifest Echo', 'Class Features');\n    game.settings.register(moduleName, 'Twilight Shroud', {\n        'name': 'Twilight Shroud Automation',\n        'hint': 'Enabling this allows the automation of the Twilight Shroud feature via the use of Midi-Qol hooks.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {\n            if (value) {\n                Hooks.on('midi-qol.preCheckHits', macros.twilightShroud.attack);\n                Hooks.on('midi-qol.preambleComplete', macros.twilightShroud.saveEarly);\n                Hooks.on('midi-qol.RollComplete', macros.twilightShroud.saveLate);\n            } else {\n                Hooks.off('midi-qol.preCheckHits', macros.twilightShroud.attack);\n                Hooks.off('midi-qol.preambleComplete', macros.twilightShroud.saveEarly);\n                Hooks.off('midi-qol.RollComplete', macros.twilightShroud.saveLate);\n            }\n        }\n    });\n    addMenuSetting('Twilight Shroud', 'Class Features');\n//    game.settings.register(moduleName, 'Metric Distance', {\n//        'name': 'Use Metric Distance',\n//        'hint': 'When enabled macros from this module will use metric for distance calculations.',\n//        'scope': 'world',\n//        'config': false,\n//        'type': Boolean,\n//        'default': false\n//    });\n//    addMenuSetting('Metric Distance', 'General');\n    game.settings.register(moduleName, 'Check For Updates', {\n        'name': 'Check for Updates',\n        'hint': 'Display a message when an update is available.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': true\n    });\n    addMenuSetting('Check For Updates', 'General');\n    game.settings.register(moduleName, 'Critical Role Firearm Support', {\n        'name': 'Critical Role Firearm Support',\n        'hint': 'Add firearm support to the D&D 5E system.',\n        'scope': 'world',\n        'config': false,\n        'type': Boolean,\n        'default': false,\n        'onChange': value => {firearm.setup(value)}\n    });\n    addMenuSetting('Critical Role Firearm Support', 'Mechanics');\n    game.settings.registerMenu(moduleName, 'General', {\n        'name': 'General',\n        'label': 'General',\n        'hint': 'General settings for most automations.',\n        'icon': 'fas fa-gears',\n        'type': chrisSettingsGeneral,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Animations', {\n        'name': 'Animations',\n        'label': 'Animations',\n        'hint': 'Settings for animation automation.',\n        'icon': 'fas fa-film',\n        'type': chrisSettingsAnimations,\n        'restricted': false\n    });\n    game.settings.registerMenu(moduleName, 'Compendiums', {\n        'name': 'Compendium',\n        'label': 'Compendium',\n        'hint': 'Compendium settings item replacement and macros.',\n        'icon': 'fas fa-atlas',\n        'type': chrisSettingsCompendiums,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Mechanics', {\n        'name': 'Mechanics',\n        'label': 'Mechanics',\n        'hint': 'Settings related to game mechanics.',\n        'icon': 'fas fa-dice',\n        'type': chrisSettingsMechanics,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Spells', {\n        'name': 'Spells',\n        'label': 'Spells',\n        'hint': 'Settings for specific spell automations.',\n        'icon': 'fas fa-wand-magic',\n        'type': chrisSettingsSpells,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Feats', {\n        'name': 'Feats',\n        'label': 'Feats',\n        'hint': 'Settings for specific feat automations.',\n        'icon': 'fas fa-crystal-ball',\n        'type': chrisSettingsFeats,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Class Features', {\n        'name': 'Class Features',\n        'label': 'Class Features',\n        'hint': 'Settings for specific class features.',\n        'icon': 'fas fa-swords',\n        'type': chrisSettingsClassFeats,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Race Features', {\n        'name': 'Race Features',\n        'label': 'Race Features',\n        'hint': 'Settings for specific race features.',\n        'icon': 'fas fa-solid fa-nesting-dolls',\n        'type': chrisSettingsRaceFeats,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Monster Features', {\n        'name': 'Monster Features',\n        'label': 'Monster Features',\n        'hint': 'Settings for specific monster features.',\n        'icon': 'fas fa-dragon',\n        'type': chrisSettingsMonsterFeats,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Summons', {\n        'name': 'Summons',\n        'label': 'Summons',\n        'hint': 'Settings related to summons.',\n        'icon': 'fas fa-hand-holding-magic',\n        'type': chrisSettingsSummons,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Homebrew', {\n        'name': 'Homebrew',\n        'label': 'Homebrew',\n        'hint': 'Optional settings for homebrew features.',\n        'icon': 'fas fa-cauldron',\n        'type': chrisSettingsHomewbrew,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Module Integration', {\n        'name': 'Module Integration',\n        'label': 'Module Integration',\n        'hint': 'Settings for integrations with other modules.',\n        'icon': 'fas fa-puzzle-piece',\n        'type': chrisSettingsModule,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Manual Rolling', {\n        'name': 'Manual Rolling',\n        'label': 'Manual Rolling',\n        'hint': 'Settings for manual rolling.',\n        'icon': 'fas fa-calculator',\n        'type': chrisSettingsManualRolling,\n        'restricted': true\n    });\n/*    game.settings.registerMenu(moduleName, 'Randomizer', {\n        'name': 'Randomizer',\n        'label': 'Randomizer',\n        'hint': 'Optional settings for randomizer features.',\n        'icon': 'fas fa-dice',\n        'type': chrisSettingsRandomizer,\n        'restricted': true\n    }); */\n    game.settings.registerMenu(moduleName, 'NPC Updater', {\n        'name': 'NPC Updater',\n        'label': 'NPC Updater',\n        'hint': 'Used to bulk update NPCs in your world.',\n        'icon': 'fas fa-folder-open',\n        'type': chrisSettingsNPCUpdate,\n        'restricted': true\n    });\n    game.settings.registerMenu(moduleName, 'Troubleshooter', {\n        'name': 'Help',\n        'label': 'Help',\n        'hint': 'Used to troubleshoot issues with this module.',\n        'icon': 'fas fa-screwdriver-wrench',\n        'type': chrisSettingsTroubleshoot,\n        'restricted': true\n    });\n}","import {chris} from '../helperFunctions.js';\nexport async function remoteDialog(title, options, content) {\n    return await chris.dialog(title, options, content);\n}\nexport async function remoteDocumentDialog(title, uuids) {\n    let documents = [];\n    for (let i of uuids) {\n        documents.push(await fromUuid(i));\n    }\n    return await chris.selectDocument(title, documents, true);\n}\nexport async function remoteDocumentsDialog(title, uuids) {\n    let documents = [];\n    for (let i of uuids) {\n        documents.push(await fromUuid(i));\n    }\n    return await chris.selectDocuments(title, documents, true);\n}\nexport async function remoteAimCrosshair(tokenUuid, maxRange, icon, interval, size) {\n    let token = await fromUuid(tokenUuid);\n    return await chris.aimCrosshair(token, maxRange, icon, interval, size);\n}\nexport async function remoteMenu(title, buttons, inputs, useSpecialRender, info, header, extraOptions) {\n    return await chris.menu(title, buttons, inputs, useSpecialRender, info, header, extraOptions);\n}","import {chris} from './helperFunctions.js';\nasync function updateCombatant(tokenId, updates) {\n    let combatant = game.combat?.combatants?.get(tokenId);\n    if (!combatant) return;\n    await combatant.update(updates);\n}\nasync function createEffect(actorUuid, effectData) {\n    let actor = await fromUuid(actorUuid);\n    if (!actor) return;\n    if (actor instanceof TokenDocument) actor = actor.actor;\n    if (!actor) return;\n    let effects = await actor.createEmbeddedDocuments('ActiveEffect', [effectData]);\n    return effects[0].uuid;\n}\nasync function removeEffect(effectUuid) {\n    let effect = await fromUuid(effectUuid);\n    if (!effect) return;\n    await effect.delete();\n}\nasync function updateEffect(effectUuid, updates) {\n    let effect = await fromUuid(effectUuid);\n    if (!effect) return;\n    await effect.update(updates);\n}\nexport let runAsGM = {\n    'updateCombatant': updateCombatant,\n    'updateEffect': updateEffect,\n    'createEffect': createEffect,\n    'removeEffect': removeEffect\n}\nasync function rollItem(itemUuid, config, options) {\n    let item = await fromUuid(itemUuid);\n    if (!item) return;\n    return await chris.rollItem(item, config, options);\n}\nexport let runAsUser = {\n    'rollItem': rollItem\n}","export function setConfig() {\n    let summonEffectOptions = [\n        {'value': 'none', 'html': 'None'},\n        {'value': 'default', 'html': 'Default'},\n        {'value': 'celestial', 'html': 'Celestial'},\n        {'value': 'fiend', 'html': 'Fiend'},\n        {'value': 'fire', 'html': 'Fire'},\n        {'value': 'water', 'html': 'Water'},\n        {'value': 'air', 'html': 'Air'},\n        {'value': 'earth', 'html': 'Earth'},\n        {'value': 'nature', 'html': 'Nature'},\n        {'value': 'shadow', 'html': 'Shadow'},\n        {'value': 'future', 'html': 'Future'}\n    ];\n    setProperty(CONFIG, 'chrisPremades', {\n        'module': 'chris-premades',\n        'renamedItems': {\n            'Form of Dread: Transform': 'Form of Dread',\n            'Form of Dread': 'Form of Dread: Fear',\n            'Ring of Spell Storing': 'Ring of Spell Storing (0/5)',\n            'Mutagencraft - Consume Mutagen': 'Mutagencraft - Create Mutagen',\n            'Reaper: Chill Touch': 'Reaper',\n            'Reaper: Sapping Sting': 'Reaper',\n            'Reaper: Spare the Dying': 'Reaper',\n            'Reaper: Toll the Dead': 'Reaper'\n        },\n        'additionalItems': {\n            'Blade Flourish': [\n                'Blade Flourish Movement'\n            ],\n            'Arcane Armor': [\n                'Arcane Armor: Guardian Model',\n                'Arcane Armor: Infiltrator Model'\n            ],\n            'Eladrin Season: Autumn': [\n                'Change Season'\n            ],\n            'Eladrin Season: Winter': [\n                'Change Season'\n            ],\n            'Eladrin Season: Spring': [\n                'Change Season'\n            ],\n            'Eladrin Season: Summer': [\n                'Change Season'\n            ],\n            'Planar Wanderer': [\n                'Planar Wanderer: Planar Adaptation'\n            ],\n            'Gunslinger': [\n                'Reload Firearm',\n                'Repair Firearm'\n            ]\n        },\n        'removedItems': {\n            'Animating Performance': [\n                'Animating Performance: Animate',\n                'Animating Performance: Dancing Item'\n            ],\n            'Arcane Armor': [\n                'Guardian Armor: Thunder Gauntlets',\n                'Guardian Armor: Thunder Gauntlets (STR)',\n                'Guardian Armor: Defensive Field',\n                'Infiltrator Armor: Lightning Launcher',\n                'Infiltrator Armor: Lightning Launcher (DEX)'\n            ],\n            'Arcane Ward': [\n                'Arcane Ward - Hit Points'\n            ],\n            'Blessing of the Raven Queen': [\n                'Blessing of the Raven Queen (Resistance)'\n            ],\n            'Drake Companion: Summon': [\n                'Bond of Fang and Scale: Acid Resistance',\n                'Bond of Fang and Scale: Cold Resistance',\n                'Bond of Fang and Scale: Fire Resistance',\n                'Bond of Fang and Scale: Lightning Resistance',\n                'Bond of Fang and Scale: Poison Resistance',\n                'Drake Companion',\n                'Drake Companion: Command',\n                'Drake Companion: Drake Companion (Acid)',\n                'Drake Companion: Drake Companion (Cold)',\n                'Drake Companion: Drake Companion (Fire)',\n                'Drake Companion: Drake Companion (Lightning)',\n                'Drake Companion: Drake Companion (Poison)',\n                'Reflexive Resistance',\n            ],\n            'Eladrin Season: Autumn': [\n                'Fey Step (Autumn)'\n            ],\n            'Eladrin Season: Winter': [\n                'Fey Step (Winter)'\n            ],\n            'Eladrin Season: Spring': [\n                'Fey Step (Spring)'\n            ],\n            'Eladrin Season: Summer': [\n                'Fey Step (Summer)'\n            ],\n            'Manifest Mind: Summon': [\n                'Manifest Mind: Cast Spell',\n                'Manifest Mind: Move'\n            ],\n            'Metamagic - Careful Spell': [\n                'Metamagic: Careful Spell'\n            ],\n            'Metamagic - Distant Spell': [\n                'Metamagic: Distant Spell'\n            ],\n            'Metamagic - Empowered Spell': [\n                'Metamagic: Empowered Spell'\n            ],\n            'Metamagic - Extended Spell': [\n                'Metamagic: Extended Spell'\n            ],\n            'Metamagic - Heightened Spell': [\n                'Metamagic: Heightened Spell'\n            ],\n            'Metamagic - Quickened Spell': [\n                'Metamagic: Quickened Spell'\n            ],\n            'Metamagic - Subtle Spell': [\n                'Metamagic: Subtle Spell'\n            ],\n            'Metamagic - Transmuted Spell': [\n                'Metamagic: Transmuted Spell'\n            ],\n            'Metamagic - Twinned Spell': [\n                'Metamagic: Twinned Spell'\n            ],\n            'Starry Form': [\n                'Starry Form: Archer',\n                'Starry Form: Chalice',\n                'Starry Form: Dragon'\n            ],\n            'Summon Wildfire Spirit': [\n                'Summon Wildfire Spirit: Command'\n            ],\n            'Tentacle of the Deeps: Summon': [\n                'Tentacle of the Deeps: Move',\n                'Tentacle of the Deeps: Attack'\n            ],\n            'Bestial Soul': [\n                'Form of the Beast: Bite',\n                'Form of the Beast: Claws',\n                'Form of the Beast: Tail',\n                'Form of the Beast: Tail (reaction)'\n            ],\n            'Cartomancer: Hidden Ace - Imbue Card': [\n                'Cartomancer: Hidden Ace - Flourish Imbued Card'\n            ],\n            'Elemental Cleaver': [\n                'Elemental Cleaver: Change Damage Type'\n            ],\n            'Manifest Echo': [\n                'Manifest Echo - Attack',\n                'Manifest Echo - Teleport',\n                'Manifest Echo - Opportunity Attack'\n            ],\n            'Dread Lord': [\n                'Dread Lord Shadow Attack'\n            ]\n        },\n        'restrictedItems': {\n            'Radiant Soul': {\n                'originalName': 'Radiant Soul',\n                'requiredClass': 'Warlock',\n                'requiredSubclass': 'The Celestial',\n                'requiredRace': null,\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Radiant Soul',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            },\n            'Unarmored Defense 1': {\n                'originalName': 'Unarmored Defense',\n                'requiredClass': 'Barbarian',\n                'requiredSubclass': null,\n                'requiredRace': null,\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Unarmored Defense (Barbarian)',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            },\n            'Unarmored Defense 2': {\n                'originalName': 'Unarmored Defense',\n                'requiredClass': 'Monk',\n                'requiredSubclass': null,\n                'requiredRace': null,\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Unarmored Defense (Monk)',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            },\n            'Unarmed Strike': {\n                'originalName': 'Unarmed Strike',\n                'requiredClass': 'Monk',\n                'requiredSubclass': null,\n                'requiredRace': null,\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Unarmed Strike (Monk)',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            },\n            'Mental Discipline 1': {\n                'originalName': 'Mental Discipline',\n                'requiredClass': null,\n                'requiredSubclass': null,\n                'requiredRace': 'Kalashtar',\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Mental Discipline (Kalashtar)',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            },\n            'Mental Discipline 2': {\n                'originalName': 'Mental Discipline',\n                'requiredClass': null,\n                'requiredSubclass': null,\n                'requiredRace': 'Githzerai',\n                'requiredEquipment': [],\n                'requiredFeatures': [],\n                'replacedItemName': 'Mental Discipline (Githzerai)',\n                'removedItems': [],\n                'additionalItems': [],\n                'priority': 0\n            }\n        },\n        'correctedItems': {\n            'Metamagic - Careful Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Metamagic - Empowered Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Metamagic - Heightened Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Metamagic - Seeking Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Metamagic - Transmuted Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Metamagic - Twinned Spell': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Steel Defender': {\n                'system': {\n                    'uses': {\n                        'max': 1,\n                        'per': 'lr',\n                        'recovery': '',\n                        'value': 1\n                    }\n                }\n            },\n            'Summon Wildfire Spirit': {\n                'system': {\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': '',\n                    }\n                }\n            },\n            'Overchannel': {\n                'system': {\n                    'uses': {\n                        'per': null,\n                        'recovery': '',\n                        'value': null\n                    },\n                    'consume': {\n                        'amount': null,\n                        'target': '',\n                        'type': ''\n                    }\n                }\n            },\n            'Arcane Ward': {\n                'system': {\n                    'uses': {\n                        'max': 1,\n                        'per': 'charges',\n                        'recovery': '',\n                        'value': 0\n                    }\n                }\n            }\n        },\n        'itemConfiguration': {\n            'Magic Missile': {\n                'checkbox': {\n                    'homebrew': {\n                        'label': 'Roll multiple dice?',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'color': {\n                        'label': 'What color?',\n                        'default': 'purple',\n                        'values': [\n                            {'value': 'white', 'html': 'White'},\n                            {'value': 'dark_red', 'html': 'Red'},\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'yellow', 'html': 'Yellow'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'purple', 'html': 'Purple'},\n                            {'value': 'cycle', 'html': 'Cycle'},\n                            {'value': 'random', 'html': 'Random'}\n                        ]\n                    }\n                }\n            },\n            'Healing Spirit': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Summon Aberration': {\n                'text': {\n                    'name-beholderkin': {\n                        'label': 'Beholderkin Custom Name:',\n                        'default': ''\n                    },\n                    'token-beholderkin': {\n                        'label': 'Beholderkin Token:',\n                        'default': ''\n                    },\n                    'avatar-beholderkin': {\n                        'label': 'Beholderkin Avatar:',\n                        'default': ''\n                    },\n                    'name-slaad': {\n                        'label': 'Slaad Custom Name:',\n                        'default': ''\n                    },\n                    'token-slaad': {\n                        'label': 'Slaad Token:',\n                        'default': ''\n                    },\n                    'avatar-slaad': {\n                        'label': 'Slaad Avatar:',\n                        'default': ''\n                    },\n                    'name-star-spawn': {\n                        'label': 'Star Spawn Custom Name:',\n                        'default': ''\n                    },\n                    'token-star-spawn': {\n                        'label': 'Star Spawn Token:',\n                        'default': ''\n                    },\n                    'avatar-star-spawn': {\n                        'label': 'Star Spawn Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-beholderkin': {\n                        'label': 'Beholderkin Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-slaad': {\n                        'label': 'Slaad Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-star-spawn': {\n                        'label': 'Star Spawn Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Beast': {\n                'text': {\n                    'name-air': {\n                        'label': 'Air Custom Name:',\n                        'default': ''\n                    },\n                    'token-air': {\n                        'label': 'Air Token:',\n                        'default': ''\n                    },\n                    'avatar-air': {\n                        'label': 'Air Avatar:',\n                        'default': ''\n                    },\n                    'name-land': {\n                        'label': 'Land Custom Name:',\n                        'default': ''\n                    },\n                    'token-land': {\n                        'label': 'Land Token:',\n                        'default': ''\n                    },\n                    'avatar-land': {\n                        'label': 'Land Avatar:',\n                        'default': ''\n                    },\n                    'name-water': {\n                        'label': 'Water Custom Name:',\n                        'default': ''\n                    },\n                    'token-water': {\n                        'label': 'Water Token:',\n                        'default': ''\n                    },\n                    'avatar-water': {\n                        'label': 'Water Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-air': {\n                        'label': 'Air Animation:',\n                        'default': 'air',\n                        'values': summonEffectOptions\n                    },\n                    'animation-land': {\n                        'label': 'Land Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    },\n                    'animation-water': {\n                        'label': 'Water Animation:',\n                        'default': 'water',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Celestial': {\n                'text': {\n                    'name-avenger': {\n                        'label': 'Avenger Custom Name:',\n                        'default': ''\n                    },\n                    'token-avenger': {\n                        'label': 'Avenger Token:',\n                        'default': ''\n                    },\n                    'avatar-avenger': {\n                        'label': 'Avenger Avatar:',\n                        'default': ''\n                    },\n                    'name-defender': {\n                        'label': 'Defender Custom Name:',\n                        'default': ''\n                    },\n                    'token-defender': {\n                        'label': 'Defender Token:',\n                        'default': ''\n                    },\n                    'avatar-defender': {\n                        'label': 'Defender Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-avenger': {\n                        'label': 'Avenger Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    },\n                    'animation-defender': {\n                        'label': 'Defender Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Construct': {\n                'text': {\n                    'name-clay': {\n                        'label': 'Clay Custom Name:',\n                        'default': ''\n                    },\n                    'token-clay': {\n                        'label': 'Clay Token:',\n                        'default': ''\n                    },\n                    'avatar-clay': {\n                        'label': 'Clay Avatar:',\n                        'default': ''\n                    },\n                    'name-metal': {\n                        'label': 'Metal Custom Name:',\n                        'default': ''\n                    },\n                    'token-metal': {\n                        'label': 'Metal Token:',\n                        'default': ''\n                    },\n                    'avatar-metal': {\n                        'label': 'Metal Avatar:',\n                        'default': ''\n                    },\n                    'name-stone': {\n                        'label': 'Stone Custom Name:',\n                        'default': ''\n                    },\n                    'token-stone': {\n                        'label': 'Stone Token:',\n                        'default': ''\n                    },\n                    'avatar-stone': {\n                        'label': 'Stone Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-clay': {\n                        'label': 'Clay Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    },\n                    'animation-metal': {\n                        'label': 'Metal Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    },\n                    'animation-stone': {\n                        'label': 'Stone Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Draconic Spirit': {\n                'text': {\n                    'name-chromatic': {\n                        'label': 'Chromatic Custom Name:',\n                        'default': ''\n                    },\n                    'token-chromatic': {\n                        'label': 'Chromatic Token:',\n                        'default': ''\n                    },\n                    'avatar-chromatic': {\n                        'label': 'Chromatic Avatar:',\n                        'default': ''\n                    },\n                    'name-metallic': {\n                        'label': 'Metallic Custom Name:',\n                        'default': ''\n                    },\n                    'token-metallic': {\n                        'label': 'Metallic Token:',\n                        'default': ''\n                    },\n                    'avatar-metallic': {\n                        'label': 'Metallic Avatar:',\n                        'default': ''\n                    },\n                    'name-gem': {\n                        'label': 'Gem Custom Name:',\n                        'default': ''\n                    },\n                    'token-gem': {\n                        'label': 'Gem Token:',\n                        'default': ''\n                    },\n                    'avatar-gem': {\n                        'label': 'Gem Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-chromatic': {\n                        'label': 'Chromatic Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    },\n                    'animation-metallic': {\n                        'label': 'Metallic Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    },\n                    'animation-gem': {\n                        'label': 'Gem Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Elemental': {\n                'text': {\n                    'name-air': {\n                        'label': 'Air Custom Name:',\n                        'default': ''\n                    },\n                    'token-air': {\n                        'label': 'Air Token:',\n                        'default': ''\n                    },\n                    'avatar-air': {\n                        'label': 'Air Avatar:',\n                        'default': ''\n                    },\n                    'name-earth': {\n                        'label': 'Earth Custom Name:',\n                        'default': ''\n                    },\n                    'token-earth': {\n                        'label': 'Earth Token:',\n                        'default': ''\n                    },\n                    'avatar-earth': {\n                        'label': 'Earth Avatar:',\n                        'default': ''\n                    },\n                    'name-fire': {\n                        'label': 'Fire Custom Name:',\n                        'default': ''\n                    },\n                    'token-fire': {\n                        'label': 'Fire Token:',\n                        'default': ''\n                    },\n                    'avatar-fire': {\n                        'label': 'Fire Avatar:',\n                        'default': ''\n                    },\n                    'name-water': {\n                        'label': 'Water Custom Name:',\n                        'default': ''\n                    },\n                    'token-water': {\n                        'label': 'Water Token:',\n                        'default': ''\n                    },\n                    'avatar-water': {\n                        'label': 'Water Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-air': {\n                        'label': 'Air Animation:',\n                        'default': 'air',\n                        'values': summonEffectOptions\n                    },\n                    'animation-earth': {\n                        'label': 'Earth Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fire': {\n                        'label': 'Fire Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    },\n                    'animation-water': {\n                        'label': 'Water Animation:',\n                        'default': 'water',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Fey': {\n                'text': {\n                    'name-fuming': {\n                        'label': 'Fuming Custom Name:',\n                        'default': ''\n                    },\n                    'token-fuming': {\n                        'label': 'Fuming Token:',\n                        'default': ''\n                    },\n                    'avatar-fuming': {\n                        'label': 'Fuming Avatar:',\n                        'default': ''\n                    },\n                    'name-mirthful': {\n                        'label': 'Mirthful Custom Name:',\n                        'default': ''\n                    },\n                    'token-mirthful': {\n                        'label': 'Mirthful Token:',\n                        'default': ''\n                    },\n                    'avatar-mirthful': {\n                        'label': 'Mirthful Avatar:',\n                        'default': ''\n                    },\n                    'name-tricksy': {\n                        'label': 'Tricksy Custom Name:',\n                        'default': ''\n                    },\n                    'token-tricksy': {\n                        'label': 'Tricksy Token:',\n                        'default': ''\n                    },\n                    'avatar-tricksy': {\n                        'label': 'Tricksy Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-fuming': {\n                        'label': 'Fuming Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    },\n                    'animation-mirthful': {\n                        'label': 'Mirthful Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    },\n                    'animation-tricksy': {\n                        'label': 'Tricksy Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Fiend': {\n                'text': {\n                    'name-demon': {\n                        'label': 'Demon Custom Name:',\n                        'default': ''\n                    },\n                    'token-demon': {\n                        'label': 'Demon Token:',\n                        'default': ''\n                    },\n                    'avatar-demon': {\n                        'label': 'Demon Avatar:',\n                        'default': ''\n                    },\n                    'name-devil': {\n                        'label': 'Devil Custom Name:',\n                        'default': ''\n                    },\n                    'token-devil': {\n                        'label': 'Devil Token:',\n                        'default': ''\n                    },\n                    'avatar-devil': {\n                        'label': 'Devil Avatar:',\n                        'default': ''\n                    },\n                    'name-yugoloth': {\n                        'label': 'Yugoloth Custom Name:',\n                        'default': ''\n                    },\n                    'token-yugoloth': {\n                        'label': 'Yugoloth Token:',\n                        'default': ''\n                    },\n                    'avatar-yugoloth': {\n                        'label': 'Yugoloth Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-demon': {\n                        'label': 'Demon Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    },\n                    'animation-devil': {\n                        'label': 'Devil Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    },\n                    'animation-yugoloth': {\n                        'label': 'Yugoloth Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Shadowspawn': {\n                'text': {\n                    'name-fury': {\n                        'label': 'Fury Custom Name:',\n                        'default': ''\n                    },\n                    'token-fury': {\n                        'label': 'Fury Token:',\n                        'default': ''\n                    },\n                    'avatar-fury': {\n                        'label': 'Fury Avatar:',\n                        'default': ''\n                    },\n                    'name-despair': {\n                        'label': 'Despair Custom Name:',\n                        'default': ''\n                    },\n                    'token-despair': {\n                        'label': 'Despair Token:',\n                        'default': ''\n                    },\n                    'avatar-despair': {\n                        'label': 'Despair Avatar:',\n                        'default': ''\n                    },\n                    'name-fear': {\n                        'label': 'Fear Custom Name:',\n                        'default': ''\n                    },\n                    'token-fear': {\n                        'label': 'Fear Token:',\n                        'default': ''\n                    },\n                    'avatar-fear': {\n                        'label': 'Fear Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-fury': {\n                        'label': 'Fury Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-despair': {\n                        'label': 'Despair Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fear': {\n                        'label': 'Fear Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Undead': {\n                'text': {\n                    'name-ghostly': {\n                        'label': 'Ghostly Custom Name:',\n                        'default': ''\n                    },\n                    'token-ghostly': {\n                        'label': 'Ghostly Token:',\n                        'default': ''\n                    },\n                    'avatar-ghostly': {\n                        'label': 'Ghostly Avatar:',\n                        'default': ''\n                    },\n                    'name-putrid': {\n                        'label': 'Putrid Custom Name:',\n                        'default': ''\n                    },\n                    'token-putrid': {\n                        'label': 'Putrid Token:',\n                        'default': ''\n                    },\n                    'avatar-putrid': {\n                        'label': 'Putrid Avatar:',\n                        'default': ''\n                    },\n                    'name-skeletal': {\n                        'label': 'Skeletal Custom Name:',\n                        'default': ''\n                    },\n                    'token-skeletal': {\n                        'label': 'Skeletal Token:',\n                        'default': ''\n                    },\n                    'avatar-skeletal': {\n                        'label': 'Skeletal Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-ghostly': {\n                        'label': 'Ghostly Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-putrid': {\n                        'label': 'Putrid Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    },\n                    'animation-skeletal': {\n                        'label': 'Skeletal Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Summon Wildfire Spirit': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Bigby\\'s Hand': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Animating Performance': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Drake Companion: Summon': {\n                'text': {\n                    'name-acid': {\n                        'label': 'Acid Custom Name:',\n                        'default': ''\n                    },\n                    'token-acid': {\n                        'label': 'Acid Token:',\n                        'default': ''\n                    },\n                    'avatar-acid': {\n                        'label': 'Acid Avatar:',\n                        'default': ''\n                    },\n                    'name-cold': {\n                        'label': 'Cold Custom Name:',\n                        'default': ''\n                    },\n                    'token-cold': {\n                        'label': 'Cold Token:',\n                        'default': ''\n                    },\n                    'avatar-cold': {\n                        'label': 'Cold Avatar:',\n                        'default': ''\n                    },\n                    'name-fire': {\n                        'label': 'Fire Custom Name:',\n                        'default': ''\n                    },\n                    'token-fire': {\n                        'label': 'Fire Token:',\n                        'default': ''\n                    },\n                    'avatar-fire': {\n                        'label': 'Fire Avatar:',\n                        'default': ''\n                    },\n                    'name-lightning': {\n                        'label': 'Lightning Custom Name:',\n                        'default': ''\n                    },\n                    'token-lightning': {\n                        'label': 'Lightning Token:',\n                        'default': ''\n                    },\n                    'avatar-lightning': {\n                        'label': 'Lightning Avatar:',\n                        'default': ''\n                    },\n                    'name-poison': {\n                        'label': 'Poison Custom Name:',\n                        'default': ''\n                    },\n                    'token-poison': {\n                        'label': 'Poison Token:',\n                        'default': ''\n                    },\n                    'avatar-poison': {\n                        'label': 'Poison Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-acid': {\n                        'label': 'Acid Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    },\n                    'animation-cold': {\n                        'label': 'Cold Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fire': {\n                        'label': 'Fire Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    },\n                    'animation-lightning': {\n                        'label': 'Lightning Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    },\n                    'animation-poision': {\n                        'label': 'Poision Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Homunculus Servant': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Primal Companion': {\n                'text': {\n                    'name-land': {\n                        'label': 'Land Custom Name:',\n                        'default': ''\n                    },\n                    'token-land': {\n                        'label': 'Land Token:',\n                        'default': ''\n                    },\n                    'avatar-land': {\n                        'label': 'Land Avatar:',\n                        'default': ''\n                    },\n                    'name-sea': {\n                        'label': 'Sea Custom Name:',\n                        'default': ''\n                    },\n                    'token-sea': {\n                        'label': 'Sea Token:',\n                        'default': ''\n                    },\n                    'avatar-sea': {\n                        'label': 'Sea Avatar:',\n                        'default': ''\n                    },\n                    'name-sky': {\n                        'label': 'Sky Custom Name:',\n                        'default': ''\n                    },\n                    'token-sky': {\n                        'label': 'Sky Token:',\n                        'default': ''\n                    },\n                    'avatar-sky': {\n                        'label': 'Sky Avatar:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-land': {\n                        'label': 'Land Animation:',\n                        'default': 'earth',\n                        'values': summonEffectOptions\n                    },\n                    'animation-sea': {\n                        'label': 'Sea Animation:',\n                        'default': 'water',\n                        'values': summonEffectOptions\n                    },\n                    'animation-sky': {\n                        'label': 'Sky Animation:',\n                        'default': 'air',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Tentacle of the Deeps: Summon': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Steel Defender': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Piercer: Reroll Damage': {\n                'checkbox': {\n                    'auto': {\n                        'label': 'Auto Reroll?',\n                        'default': false\n                    }\n                },\n                'number': {\n                    'reroll': {\n                        'label': 'Auto reroll at:',\n                        'default': 1\n                    }\n                }\n            },\n            'Hybrid Transformation': {\n                'text': {\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Sneak Attack': {\n                'checkbox': {\n                    'auto': {\n                        'label': 'Auto Sneak Attack?',\n                        'default': false\n                    },\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Change Season': {\n                'checkbox': {\n                    'showicon': {\n                        'label': 'Hide effect icon?',\n                        'default': false\n                    }\n                },\n                'text': {\n                    'token-spring': {\n                        'label': 'Spring Token:',\n                        'default': ''\n                    },\n                    'avatar-spring': {\n                        'label': 'Spring Avatar:',\n                        'default': ''\n                    },\n                    'token-summer': {\n                        'label': 'Summer Token:',\n                        'default': ''\n                    },\n                    'avatar-summer': {\n                        'label': 'Summer Avatar:',\n                        'default': ''\n                    },\n                    'token-autumn': {\n                        'label': 'Autumn Token:',\n                        'default': ''\n                    },\n                    'avatar-autumn': {\n                        'label': 'Autumn Avatar:',\n                        'default': ''\n                    },\n                    'token-winter': {\n                        'label': 'Winter Token:',\n                        'default': ''\n                    },\n                    'avatar-winter': {\n                        'label': 'Winter Avatar:',\n                        'default': ''\n                    }\n                }\n            },\n            'Divine Strike': {\n                'select': {\n                    'damagetype': {\n                        'label': 'Override damage type?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'acid', 'html': 'Acid'},\n                            {'value': 'bludgeoning', 'html': 'Bludgeoning'},\n                            {'value': 'cold', 'html': 'Cold'},\n                            {'value': 'fire', 'html': 'Fire'},\n                            {'value': 'force', 'html': 'Force'},\n                            {'value': 'lightning', 'html': 'Lightning'},\n                            {'value': 'necrotic', 'html': 'Necrotic'},\n                            {'value': 'piercing', 'html': 'Piercing'},\n                            {'value': 'poison', 'html': 'Poison'},\n                            {'value': 'psychic', 'html': 'Psychic'},\n                            {'value': 'radiant', 'html': 'Radiant'},\n                            {'value': 'slashing', 'html': 'Slashing'},\n                            {'value': 'thunder', 'html': 'Thunder'}\n                        ]\n                    }\n                }\n            },\n            'Regeneration': {\n                'checkbox': {\n                    'acid': {\n                        'label': 'Acid damage prevents healing?',\n                        'default': false\n                    },\n                    'bludgeoning': {\n                        'label': 'Bludgeoning damage prevents healing?',\n                        'default': false\n                    },\n                    'cold': {\n                        'label': 'Cold damage prevents healing?',\n                        'default': false\n                    },\n                    'fire': {\n                        'label': 'Fire damage prevents healing?',\n                        'default': false\n                    },\n                    'force': {\n                        'label': 'Force damage prevents healing?',\n                        'default': false\n                    },\n                    'lightning': {\n                        'label': 'Lightning damage prevents healing?',\n                        'default': false\n                    },\n                    'necrotic': {\n                        'label': 'Necrotic damage prevents healing?',\n                        'default': false\n                    },\n                    'piercing': {\n                        'label': 'Piercing damage prevents healing?',\n                        'default': false\n                    },\n                    'poison': {\n                        'label': 'Poison damage prevents healing?',\n                        'default': false\n                    },\n                    'psychic': {\n                        'label': 'Psychic damage prevents healing?',\n                        'default': false\n                    },\n                    'radiant': {\n                        'label': 'Radiant damage prevents healing?',\n                        'default': false\n                    },\n                    'slashing': {\n                        'label': 'Slashing damage prevents healing?',\n                        'default': false\n                    },\n                    'thunder': {\n                        'label': 'Thunder damage prevents healing?',\n                        'default': false\n                    },\n                    'critical': {\n                        'label': 'Critical hit prevents healing?',\n                        'default': false\n                    },\n                    'zeroHP': {\n                        'label': 'Don\\'t regenerate at zero HP?',\n                        'default': false\n                    }\n                },\n                'number': {\n                    'threshold': {\n                        'label': 'Reduced healing threshold:',\n                        'default': 0\n                    }\n                }\n            },\n            'Spirit Guardians': {\n                'select': {\n                    'color': {\n                        'label': 'What color?',\n                        'default': 'blueyellow',\n                        'values': [\n                            {'value': 'blueyellow', 'html': 'Blue-Yellow'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'dark_black', 'html': 'Black'},\n                            {'value': 'dark_blue', 'html': 'Dark Blue'},\n                            {'value': 'dark_purple', 'html': 'Purple'},\n                            {'value': 'dark_red', 'html': 'Red'},\n                            {'value': 'dark_whiteblue', 'html': 'White-Blue'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'greenorange', 'html': 'Green-Orange'},\n                            {'value': 'pinkpurple', 'html': 'Pink-Purple'},\n                            {'value': 'random', 'html': 'Random'}\n                        ]\n                    },\n                    'variation': {\n                        'label': 'What variation?',\n                        'default': 'ring',\n                        'values': [\n                            {'value': 'ring', 'html': 'Ring'},\n                            {'value': 'no_ring', 'html': 'No Ring'},\n                            {'value': 'particles', 'html': 'Particles'},\n                            {'value': 'spirits', 'html': 'Spirits'}\n                        ]\n                    }\n                }\n            },\n            'Channel Divinity: Turn Undead': {\n                'text': {\n                    'identifier': {\n                        'label': 'Class Identifier:',\n                        'default': 'cleric'\n                    }\n                }\n            },\n            'Spiritual Weapon': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'CPR - Randomizer': {\n                'checkbox': {\n                    'humanoid': {\n                        'label': 'Disabled:',\n                        'default': false\n                    },\n                    'spells': {\n                        'label': 'Include Spellcasting:',\n                        'default': true\n                    }\n                },\n                'select': {\n                    'abilities': {\n                        'label': 'Abilities:',\n                        'default': 'upgrade',\n                        'values': [\n                            {'value': 'source', 'html': 'Keep Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'upgrade', 'html': 'Upgrade'},\n                            {'value': 'downgrade', 'html': 'Downgrade'}\n                        ]\n                    },\n                    'skills': {\n                        'label': 'Skills:',\n                        'default': 'upgrade',\n                        'values': [\n                            {'value': 'source', 'html': 'Keep Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'upgrade', 'html': 'Upgrade'},\n                            {'value': 'downgrade', 'html': 'Downgrade'}\n                        ]\n                    },\n                    'avatar': {\n                        'label': 'Avatar Image:',\n                        'default': 'source',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'}\n                        ]\n                    },\n                    'token': {\n                        'label': 'Token Image:',\n                        'default': 'source',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'}\n                        ]\n                    },\n                    'features': {\n                        'label': 'Features',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'conditionimmunity': {\n                        'label': 'Condition Immunities',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'damageimmunity': {\n                        'label': 'Damage Immunities',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'damageresistance': {\n                        'label': 'Damage Resistances',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'damagevulnerability': {\n                        'label': 'Damage Vulnerabilities',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'languages': {\n                        'label': 'Languages',\n                        'default': 'merge',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'merge', 'html': 'Merge'}\n                        ]\n                    },\n                    'name': {\n                        'label': 'Name',\n                        'default': 'before',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'before', 'html': 'Prepend'},\n                            {'value': 'after', 'html': 'Append'}\n                        ]\n                    },\n                    'ac': {\n                        'label': 'Armor Calculation',\n                        'default': 'source',\n                        'values': [\n                            {'value': 'source', 'html': 'Use Source'},\n                            {'value': 'target', 'html': 'Keep Target'}\n                        ]\n                    },\n                    'movement': {\n                        'label': 'Movement',\n                        'default': 'upgrade',\n                        'values': [\n                            {'value': 'source', 'html': 'Keep Source'},\n                            {'value': 'target', 'html': 'Keep Target'},\n                            {'value': 'upgrade', 'html': 'Upgrade'},\n                            {'value': 'downgrade', 'html': 'Downgrade'}\n                        ]\n                    },\n                    'senses': {\n                        'label': 'Senses',\n                        'default': 'source',\n                        'values': [\n                            {'value': 'source', 'html': 'Keep Source'},\n                            {'value': 'target', 'html': 'Keep Target'}\n                        ]\n                    }\n                }\n            },\n            'Eldritch Blast': {\n                'checkbox': {\n                    'agonizingblast': {\n                        'label': 'Force Apply Agonizing Blast?',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'color': {\n                        'label': 'What color?',\n                        'default': 'purple',\n                        'values': [\n                            {'value': 'purple', 'html': 'Purple'},\n                            {'value': 'dark_green', 'html': 'Dark Green'},\n                            {'value': 'dark_red', 'html': 'Red'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'lightblue', 'html': 'Blue'},\n                            {'value': 'lightgreen', 'html': 'Light Green'},\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'pink', 'html': 'Pink'},\n                            {'value': 'yellow', 'html': 'Yellow'},\n                            {'value': 'rainbow', 'html': 'Rainbow'},\n                            {'value': 'cycle', 'html': 'Cycle'},\n                            {'value': 'random', 'html': 'Random'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Guardian of Faith': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'color': {\n                        'label': 'Animation Color:',\n                        'default': 'yellow',\n                        'values': [\n                            {'value': 'yellow', 'html': 'Yellow'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'purple', 'html': 'Purple'}\n                        ]\n                    },\n                    'animation': {\n                        'label': 'Summon Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Awakened Spellbook: Replace Damage': {\n                'checkbox': {\n                    'cromaticorb': {\n                        'label': 'Has Chromatic Orb?',\n                        'default': false\n                    },\n                    'magicmissile': {\n                        'label': 'Has Magic Missile?',\n                        'default': false\n                    },\n                    'dragonsbreath': {\n                        'label': 'Has Dragon\\'s Breath?',\n                        'default': false\n                    },\n                    'glyphofwarding': {\n                        'label': 'Has Glyph of Warding?',\n                        'default': false\n                    },\n                    'protectionfromenergy': {\n                        'label': 'Has Protection from Energy?',\n                        'default': false\n                    },\n                    'spiritshroud': {\n                        'label': 'Has Spirit Shroud?',\n                        'default': false\n                    },\n                    'vampirictouch': {\n                        'label': 'Has Vampiric Touch?',\n                        'default': false\n                    },\n                    'elementalbane': {\n                        'label': 'Has Elemental Bane?',\n                        'default': false\n                    },\n                    'cloudkill': {\n                        'label': 'Has Cloudkill?',\n                        'default': false\n                    },\n                    'primasticspray': {\n                        'label': 'Has Prismatic Spray?',\n                        'default': false\n                    },\n                    'illusorydragon': {\n                        'label': 'Has Illusory Dragon?',\n                        'default': false\n                    },\n                    'prismaticwall': {\n                        'label': 'Has Prismatic Wall?',\n                        'default': false\n                    }\n                }\n            },\n            'Dancing Greatsword': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Dancing Longsword': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Dancing Rapier': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Dancing Scimitar': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Dancing Shortsword': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                }\n            },\n            'Conjure Animals': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Conjure Celestial': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Conjure Elemental': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Conjure Fey': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Conjure Minor Elementals': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Conjure Woodland Beings': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'overwriteInitiative': {\n                        'label': 'Overwrite initiative setting? Default Seperate Initiative',\n                        'default': false\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Find Familiar': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    },\n                    'name': {\n                        'label': 'Familiar Name:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-celestial': {\n                        'label': 'Celestial Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fey': {\n                        'label': 'Fey Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fiend': {\n                        'label': 'Fiend Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Crystal Greatsword': {\n                'checkbox': {\n                    'healprompt': {\n                        'label': 'Prompt to use heal?',\n                        'default': true\n                    }\n                }\n            },\n            'Crystal Longsword': {\n                'checkbox': {\n                    'healprompt': {\n                        'label': 'Prompt to use heal?',\n                        'default': true\n                    }\n                }\n            },\n            'Crystal Rapier': {\n                'checkbox': {\n                    'healprompt': {\n                        'label': 'Prompt to use heal?',\n                        'default': true\n                    }\n                }\n            },\n            'Crystal Scimitar': {\n                'checkbox': {\n                    'healprompt': {\n                        'label': 'Prompt to use heal?',\n                        'default': true\n                    }\n                }\n            },\n            'Crystal Shortsword': {\n                'checkbox': {\n                    'healprompt': {\n                        'label': 'Prompt to use heal?',\n                        'default': true\n                    }\n                }\n            },\n            'Find Steed': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    },\n                    'name': {\n                        'label': 'Steed Name:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-celestial': {\n                        'label': 'Celestial Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fey': {\n                        'label': 'Fey Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fiend': {\n                        'label': 'Fiend Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Find Greater Steed': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    },\n                    'name': {\n                        'label': 'Greater Steed Name:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation-celestial': {\n                        'label': 'Celestial Animation:',\n                        'default': 'celestial',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fey': {\n                        'label': 'Fey Animation:',\n                        'default': 'nature',\n                        'values': summonEffectOptions\n                    },\n                    'animation-fiend': {\n                        'label': 'Fiend Animation:',\n                        'default': 'fire',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Enhanced Weapon, +1': {\n                'number': {\n                    'level': {\n                        'label': 'Level:',\n                        'default': 1\n                    }\n                }\n            },\n            'Enhanced Weapon, +2': {\n                'number': {\n                    'level': {\n                        'label': 'Level:',\n                        'default': 2\n                    }\n                }\n            },\n            'Radiant Weapon': {\n                'number': {\n                    'savedc': {\n                        'label': 'Save DC:',\n                        'default': 10\n                    }\n                }\n            },\n            'Resistant Armor': {\n                'select': {\n                    'resistance': {\n                        'label': 'What resistance?',\n                        'default': 'acid',\n                        'values': [\n                            {'value': 'acid', 'html': 'Acid'},\n                            {'value': 'cold', 'html': 'Cold'},\n                            {'value': 'fire', 'html': 'Fire'},\n                            {'value': 'force', 'html': 'Force'},\n                            {'value': 'lightning', 'html': 'Lightning'},\n                            {'value': 'necrotic', 'html': 'Necrotic'},\n                            {'value': 'poison', 'html': 'Poison'},\n                            {'value': 'psychic', 'html': 'Psychic'},\n                            {'value': 'radiant', 'html': 'Radiant'},\n                            {'value': 'thunder', 'html': 'Thunder'}\n                        ]\n                    }\n                }\n            },\n            'Savage Attacker': {\n                'checkbox': {\n                    'auto': {\n                        'label': 'Auto Reroll?',\n                        'default': false\n                    }\n                },\n                'number': {\n                    'reroll': {\n                        'label': 'Auto reroll at:',\n                        'default': 1\n                    }\n                }\n            },\n            'Rage': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'lightning', 'html': 'Purple Lightning'},\n                            {'value': 'saiyan', 'html': 'Super Saiyan'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Burning Hands': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Fly': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Faerie Fire': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'green',\n                        'values': [\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'purple', 'html': 'Violet'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Vortex Warp': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'simple', 'html': 'Simple'}\n                        ]\n                    }\n                }\n            },\n            'Disintegrate': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Fire Storm': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Fire Shield': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Far Step': {\n                'select': {\n                    'animation': {\n                        'label': 'What animation?',\n                        'default': 'default',\n                        'values': [\n                            {'value': 'default', 'html': 'Default'},\n                            {'value': 'simple', 'html': 'Simple'}\n                        ]\n                    }\n                }\n            },\n            'Shocking Grasp': {\n                'select': {\n                    'color': {\n                        'label': 'What color?',\n                        'default': 'blue',\n                        'values': [\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'blue02', 'html': 'Alternate Blue'},\n                            {'value': 'dark_purple', 'html': 'Dark Purple'},\n                            {'value': 'dark_red', 'html': 'Dark Red'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'green02', 'html': 'Alternate Green'},\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'purple', 'html': 'Purple'},\n                            {'value': 'red', 'html': 'Red'},\n                            {'value': 'yellow', 'html': 'Yellow'},\n                            {'value': 'random', 'html': 'Random'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    }\n                }\n            },\n            'Summon Lesser Demons': {\n                'text': {\n                    'folder': {\n                        'label': 'Custom Folder:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Manifest Mind: Summon': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Parry': {\n                'text': {\n                    'acbonus': {\n                        'label': 'AC Bonus:',\n                        'default': '2'\n                    }\n                }\n            },\n            'Enlarge/Reduce': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Breath of the Dragon': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Wraps of Dyamak': {\n                'select': {\n                    'tier': {\n                        'label': 'Tier:',\n                        'default': 1,\n                        'values': [\n                            {'value': 1, 'html': '1'},\n                            {'value': 2, 'html': '2'},\n                            {'value': 3, 'html': '3'},\n                        ]\n                    }\n                }\n            },\n            'Scorching Ray': {\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'complex',\n                        'values': [\n                            {'value': 'complex', 'html': 'Complex'},\n                            {'value': 'simple', 'html': 'Simple'},\n                            {'value': 'none', 'html': 'None'}\n                        ]\n                    },\n                    'color': {\n                        'label': 'Color:',\n                        'default': 'orange',\n                        'values': [\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'pink', 'html': 'Pink'},\n                            {'value': 'purple', 'html': 'Purple'},\n                            {'value': 'rainbow01', 'html': 'Rainbow'},\n                            {'value': 'rainbow02', 'html': 'Rainbow Alternate'},\n                            {'value': 'cycle', 'html': 'Cycle'},\n                            {'value': 'random', 'html': 'Random'}\n                        ]\n                    }\n                }\n            },\n            'Firearm (CR)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 1\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Palm Pistol (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 1\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Bad News (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 3\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Blunderbuss (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 2\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Musket (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 2\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Pepperbox (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 2\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Pistol (Exandria)': {\n                'number': {\n                    'misfire': {\n                        'label': 'Misfire Score:',\n                        'default': 1\n                    }\n                },\n                'select': {\n                    'status': {\n                        'label': 'Status:',\n                        'default': 0,\n                        'values': [\n                            {'value': 0, 'html': 'Normal'},\n                            {'value': 1, 'html': 'Damaged'},\n                            {'value': 2, 'html': 'Broken'},\n                        ]\n                    }\n                }\n            },\n            'Booming Blade': {\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'blue',\n                        'values': [\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'blue02', 'html': 'Alternate Blue'},\n                            {'value': 'dark_purple', 'html': 'Dark Purple'},\n                            {'value': 'dark_red', 'html': 'Dark Red'},\n                            {'value': 'green', 'html': 'Green'},\n                            {'value': 'green02', 'html': 'Alternate Green'},\n                            {'value': 'orange', 'html': 'Orange'},\n                            {'value': 'red', 'html': 'Red'},\n                            {'value': 'purple', 'html': 'Purple'},\n                            {'value': 'yellow', 'html': 'Yellow'},\n                            {'value': 'blue', 'html': 'Blue'},\n                            {'value': 'random', 'html': 'Random'},\n                            {'value': 'none', 'html': 'None'},\n                        ]\n                    }\n                }\n            },\n            'Rime\\'s Binding Ice': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Wild Surge': {\n                'text': {\n                    'flumph-avatar': {\n                        'label': 'Flumph Avatar',\n                        'default': ''\n                    },\n                    'flumph-token': {\n                        'label': 'Flumph Token',\n                        'default': ''\n                    },\n                    'pixie-avatar': {\n                        'label': 'Pixie Avatar',\n                        'default': ''\n                    },\n                    'pixie-token': {\n                        'label': 'Pixie Token',\n                        'default': ''\n                    }\n                }\n            },\n            'Quick Insert Summon': {\n                'text': {\n                    'prefill': {\n                        'label': 'Prefill Text:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Animate Dead': {\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'shadow',\n                        'values': summonEffectOptions\n                    }\n                }\n            },\n            'Stunning Strike': {\n                'checkbox': {\n                    'onhit': {\n                        'label': 'Prompt on hit?',\n                        'default': false\n                    }\n                }\n            },\n            'Investiture of Flame': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Investiture of Ice': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play Animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Long-Limbed': {\n                'checkbox': {\n                    'displaycard': {\n                        'label': 'Display Chat Card?',\n                        'default': true\n                    }\n                }\n            },\n            'Grung Poison': {\n                'checkbox': {\n                    'prompt': {\n                        'label': 'Prompt on each valid attack?',\n                        'default': false\n                    }\n                }\n            },\n            'Bardic Inspiration': {\n                'text': {\n                    'classidentifier': {\n                        'label': 'Class Identifier',\n                        'default': 'bard'\n                    },\n                    'scaleidentifier': {\n                        'label': 'Scale Identifier',\n                        'default': 'bardic-inspiration'\n                    }\n                }\n            },\n            'Manifest Echo': {\n                'text': {\n                    'name': {\n                        'label': 'Custom Name:',\n                        'default': ''\n                    },\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'select': {\n                    'animation': {\n                        'label': 'Animation:',\n                        'default': 'default',\n                        'values': summonEffectOptions\n                    }\n                },\n                'checkbox': {\n                    'filter': {\n                        'label': 'Apply Token Magic Filter?',\n                        'default': true\n                    }\n                }\n            },\n            'Channel Divinity: Control Undead': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Channel Divinity: Dreadful Aspect': {\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Dread Lord': {\n                'text': {\n                    'avatar': {\n                        'label': 'Custom Avatar:',\n                        'default': ''\n                    },\n                    'token': {\n                        'label': 'Custom Token:',\n                        'default': ''\n                    }\n                },\n                'checkbox': {\n                    'animation': {\n                        'label': 'Play animation?',\n                        'default': true\n                    }\n                }\n            },\n            'Gathered Swarm': {\n                'select': {\n                    'animation': {\n                        'label': 'Animation',\n                        'default': 'fairies',\n                        'values': [\n                            {'value': 'fairies', 'html': 'Fairies'},\n                            {'value': 'butterflies', 'html': 'Butterflies'},\n                            {'value': false, 'html': 'None'}\n                        ]\n                    },\n                    'color': {\n                        'label': 'Color',\n                        'default': 'bluepurple',\n                        'values': [\n                            {'value': 'bluepurple', 'html': 'Blue-Purple'},\n                            {'value': 'greenyellow', 'html': 'Green-Yellow'},\n                            {'value': 'white', 'html': 'White'}\n                        ]\n                    }\n                }\n            }\n        },\n        'automations': {\n            'Armor of Agathys': {\n                'name': 'Armor of Agathys',\n                'version': '0.7.45',\n                'settings': [\n                    'On Hit'\n                ],\n                'hasAnimation': true\n            },\n            'Arms of Hadar': {\n                'name': 'Arms of Hadar',\n                'version': '0.7.01'\n            },\n            'Aura of Purity': {\n                'name': 'Aura of Purity',\n                'version': '0.7.01',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Aura of Vitality': {\n                'name': 'Aura of Vitality',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Aura of Vitality'\n                }\n            },\n            'Beacon of Hope': {\n                'name': 'Beacon of Hope',\n                'version': '0.7.01',\n                'settings': [\n                    'Beacon of Hope'\n                ]\n            },\n            'Bestow Curse': {\n                'name': 'Bestow Curse',\n                'version': '0.7.01',\n            },\n            'Bigby\\'s Hand': {\n                'name': 'Bigby\\'s Hand',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Bigby\\'s Hand'\n                ]\n            },\n            'Blade Ward': {\n                'name': 'Blade Ward',\n                'version': '0.7.01'\n            },\n            'Blight': {\n                'name': 'Blight',\n                'version': '0.7.01'\n            },\n            'Blink': {\n                'name': 'Blink',\n                'version': '0.7.01'\n            },\n            'Call Lightning': {\n                'name': 'Call Lightning',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Storm Bolt'\n                }\n            },\n            'Chain Lightning': {\n                'name': 'Chain Lightning',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Charm Person': {\n                'name': 'Charm Person',\n                'version': '0.7.01'\n            },\n            'Chill Touch': {\n                'name': 'Chill Touch',\n                'version': '0.7.01'\n            },\n            'Chromatic Orb': {\n                'name': 'Chromatic Orb',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Cloudkill': {\n                'name': 'Cloudkill',\n                'version': '0.7.01',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Crown of Madness': {\n                'name': 'Crown of Madness',\n                'version': '0.7.01'\n            },\n            'Crusader\\'s Mantle': {\n                'name': 'Crusader\\'s Mantle',\n                'version': '0.7.01'\n            },\n            'Danse Macabre': {\n                'name': 'Danse Macabre',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Danse Macabre'\n                },\n                'actors': [\n                    'CPR - Skeleton',\n                    'CPR - Zombie'\n                ]\n            },\n            'Darkness': {\n                'name': 'Darkness',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Dawn': {\n                'name': 'Dawn',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Dawn'\n                }\n            },\n            'Death Ward': {\n                'name': 'Death Ward',\n                'version': '0.7.01',\n                'settings': [\n                    'Death Ward'\n                ]\n            },\n            'Destructive Wave': {\n                'name': 'Destructive Wave',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Detect Magic': {\n                'name': 'Detect Magic',\n                'version': '0.7.01'\n            },\n            'Detect Thoughts': {\n                'name': 'Detect Thoughts',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Detect Thoughts - Probe Deeper'\n                }\n            },\n            'Dragon\\'s Breath': {\n                'name': 'Dragon\\'s Breath',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Dragon Breath'\n                }\n            },\n            'Strike of the Giants: Frost Strike': {\n                'name': 'Strike of the Giants: Frost Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Storm Strike': {\n                'name': 'Strike of the Giants: Storm Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Cloud Strike': {\n                'name': 'Strike of the Giants: Cloud Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Fire Strike': {\n                'name': 'Strike of the Giants: Fire Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Hill Strike': {\n                'name': 'Strike of the Giants: Hill Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Stone Strike': {\n                'name': 'Strike of the Giants: Stone Strike',\n                'version': '0.7.01'\n            },\n            'Guile of the Cloud Giant: Cloudy Escape': {\n                'name': 'Guile of the Cloud Giant: Cloudy Escape',\n                'version': '0.7.01'\n            },\n            'Vigor of the Hill Giant: Bulwark': {\n                'name': 'Vigor of the Hill Giant: Bulwark',\n                'version': '0.7.01'\n            },\n            'Ember of the Fire Giant: Searing Ignition': {\n                'name': 'Ember of the Fire Giant: Searing Ignition',\n                'version': '0.7.01'\n            },\n            'Fury of the Frost Giant: Frigid Retaliation': {\n                'name': 'Fury of the Frost Giant: Frigid Retaliation',\n                'version': '0.7.01'\n            },\n            'Keenness of the Stone Giant: Stone Throw': {\n                'name': 'Keenness of the Stone Giant: Stone Throw',\n                'version': '0.7.01'\n            },\n            'Favored Foe': {\n                'name': 'Favored Foe',\n                'version': '0.7.01'\n            },\n            'Toll the Dead': {\n                'name': 'Toll the Dead',\n                'version': '0.7.15'\n            },\n            'Ray of Enfeeblement': {\n                'name': 'Ray of Enfeeblement',\n                'version': '0.7.01'\n            },\n            'Shocking Grasp': {\n                'name': 'Shocking Grasp',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Sanctuary': {\n                'name': 'Sanctuary',\n                'version': '0.9.53',\n                'hasAnimation': true,\n                'settings': [\n                    'Sanctuary'\n                ]\n            },\n            'Heat Metal': {\n                'name': 'Heat Metal',\n                'version': '0.7.01'\n            },\n            'Conjure Woodland Beings': {\n                'name': 'Conjure Woodland Beings',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Woodland Beings'\n                }\n            },\n            'Vortex Warp': {\n                'name': 'Vortex Warp',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Tasha\\'s Caustic Brew': {\n                'name': 'Tasha\\'s Caustic Brew',\n                'version': '0.7.19'\n            },\n            'Crown of Madness': {\n                'name': 'Crown of Madness',\n                'version': '0.7.01'\n            },\n            'Crusader\\'s Mantle': {\n                'name': 'Crusader\\'s Mantle',\n                'version': '0.7.01'\n            },\n            'Sickening Radiance': {\n                'name': 'Sickening Radiance',\n                'version': '0.7.01',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Blight': {\n                'name': 'Blight',\n                'version': '0.7.01'\n            },\n            'Conjure Animals': {\n                'name': 'Conjure Animals',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Animals'\n                }\n            },\n            'Pass without Trace': {\n                'name': 'Pass without Trace',\n                'version': '0.7.01'\n            },\n            'Zone of Truth': {\n                'name': 'Zone of Truth',\n                'version': '0.7.01'\n            },\n            'Conjure Elemental': {\n                'name': 'Conjure Elemental',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Elemental'\n                }\n            },\n            'Summon Shadowspawn': {\n                'name': 'Summon Shadowspawn',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Shadow Spirit'\n                ]\n            },\n            'Storm Sphere': {\n                'name': 'Storm Sphere',\n                'version': '0.7.45',\n                'hasAnimation': true,\n                'mutation': {\n                    'self': 'Storm Sphere Handler'\n                }\n            },\n            'Summon Fey': {\n                'name': 'Summon Fey',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Fey Spirit'\n                ]\n            },\n            'Vitriolic Sphere': {\n                'name': 'Vitriolic Sphere',\n                'version': '0.7.01'\n            },\n            'Dawn': {\n                'name': 'Dawn',\n                'version': '0.7.01',\n                'settings': [\n                    'Template Listener'\n                ],\n                'muations': {\n                    'self': 'Dawn'\n                }\n            },\n            'Raulothim\\'s Psychic Lance': {\n                'name': 'Raulothim\\'s Psychic Lance',\n                'version': '0.7.01'\n            },\n            'Life Transference': {\n                'name': 'Life Transference',\n                'version': '0.7.01'\n            },\n            'Healing Spirit': {\n                'name': 'Healing Spirit',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Healing Spirit'\n                ],\n                'mutation': {\n                    'self': 'Healing Spirit'\n                }\n            },\n            'Mirror Image': {\n                'name': 'Mirror Image',\n                'version': '0.7.01',\n                'settings': [\n                    'Mirror Image'\n                ]\n            },\n            'Bigby\\'s Hand': {\n                'name': 'Bigby\\'s Hand',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Bigby\\'s Hand'\n                ],\n                'muation': {\n                    'self': 'Bigby\\'s Hand'\n                }\n            },\n            'Protection from Evil and Good': {\n                'name': 'Protection from Evil and Good',\n                'version': '0.7.01',\n                'settings': [\n                    'Protection from Evil and Good'\n                ]\n            },\n            'Chromatic Orb': {\n                'name': 'Chromatic Orb',\n                'version': '0.7.01'\n            },\n            'Aura of Vitality': {\n                'name': 'Aura of Vitality',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Aura of Vitality'\n                }\n            },\n            'Spike Growth': {\n                'name': 'Spike Growth',\n                'version': '0.7.01'\n            },\n            'Mass Cure Wounds': {\n                'name': 'Mass Cure Wounds',\n                'version': '0.7.01'\n            },\n            'Earth Tremor': {\n                'name': 'Earth Tremor',\n                'version': '0.7.01'\n            },\n            'Charm Person': {\n                'name': 'Charm Person',\n                'version': '0.7.01'\n            },\n            'Detect Magic': {\n                'name': 'Detect Magic',\n                'version': '0.7.01'\n            },\n            'Eldritch Blast': {\n                'name': 'Eldritch Blast',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Summon Aberration': {\n                'name': 'Summon Aberration',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Aberrant Spirit'\n                ]\n            },\n            'Spirit Guardians': {\n                'name': 'Spirit Guardians',\n                'version': '0.7.45',\n                'hasAnimation': true,\n                'settings': [\n                    'Movement Listener',\n                    'Combat Listener'\n                ]\n            },\n            'Sapping Sting': {\n                'name': 'Sapping Sting',\n                'version': '0.7.01'\n            },\n            'Hypnotic Pattern': {\n                'name': 'Hypnotic Pattern',\n                'version': '0.7.01'\n            },\n            'Summon Draconic Spirit': {\n                'name': 'Summon Draconic Spirit',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Draconic Spirit'\n                ]\n            },\n            'Blink': {\n                'name': 'Blink',\n                'version': '0.7.01'\n            },\n            'Danse Macabre': {\n                'name': 'Danse Macabre',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Skeleton',\n                    'CPR - Zombie'\n                ],\n                'mutation': {\n                    'self': 'Danse Macabre - Command Undead'\n                }\n            },\n            'Destructive Wave': {\n                'name': 'Destructive Wave',\n                'version': '0.7.01'\n            },\n            'Scorching Ray': {\n                'name': 'Scorching Ray',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Chain Lightning': {\n                'name': 'Chain Lightning',\n                'version': '0.7.01'\n            },\n            'Misty Step': {\n                'name': 'Misty Step',\n                'version': '0.7.01'\n            },\n            'Conjure Celestial': {\n                'name': 'Conjure Celestial',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Celestial'\n                }\n            },\n            'Detect Thoughts': {\n                'name': 'Detect Thoughts',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Detect Thoughts - Probe Deeper'\n                }\n            },\n            'Wither and Bloom': {\n                'name': 'Wither and Bloom',\n                'version': '0.7.01'\n            },\n            'Darkness': {\n                'name': 'Darkness',\n                'version': '0.7.01',\n                'settings': [\n                    'Darkness'\n                ]\n            },\n            'Hold Person': {\n                'name': 'Hold Person',\n                'version': '0.7.01',\n                'settings': [\n                    'Active Effect Additions'\n                ]\n            },\n            'Shadow of Moil': {\n                'name': 'Shadow of Moil',\n                'version': '0.7.01',\n                'settings': [\n                    'Shadow of Moil',\n                    'On Hit'\n                ]\n            },\n            'Conjure Minor Elementals': {\n                'name': 'Conjure Minor Elementals',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Minor Elementals'\n                }\n            },\n            'Mind Sliver': {\n                'name': 'Mind Sliver',\n                'version': '0.7.01'\n            },\n            'Summon Construct': {\n                'name': 'Summon Construct',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Construct Spirit'\n                ],\n                'settings': [\n                    'On Hit'\n                ]\n            },\n            'Thunder Step': {\n                'name': 'Thunder Step',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Death Ward': {\n                'name': 'Death Ward',\n                'version': '0.7.01',\n                'settings': [\n                    'Death Ward'\n                ]\n            },\n            'Conjure Fey': {\n                'name': 'Conjure Fey',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Conjure Fey'\n                }\n            },\n            'Hail of Thorns': {\n                'name': 'Hail of Thorns',\n                'version': '0.7.01'\n            },\n            'Cloudkill': {\n                'name': 'Cloudkill',\n                'version': '0.7.01',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Melf\\'s Acid Arrow': {\n                'name': 'Melf\\'s Acid Arrow',\n                'version': '0.7.01'\n            },\n            'Shadow Blade': {\n                'name': 'Shadow Blade',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Shadow Blade Sword'\n                }\n            },\n            'Warding Bond': {\n                'name': 'Warding Bond',\n                'version': '0.7.01',\n                'settings': [\n                    'Warding Bond',\n                    'On Hit'\n                ]\n            },\n            'Blade Ward': {\n                'name': 'Blade Ward',\n                'version': '0.7.01'\n            },\n            'Summon Elemental': {\n                'name': 'Summon Elemental',\n                'version': '0.7.16',\n                'actors': [\n                    'CPR - Elemental Spirit'\n                ]\n            },\n            'Gaseous Form': {\n                'name': 'Gaseous Form',\n                'version': '0.7.01'\n            },\n            'Moonbeam': {\n                'name': 'Moonbeam',\n                'version': '0.7.01',\n                'settings': [\n                    'Template Listener'\n                ],\n                'mutation': {\n                    'self': 'Moonbeam'\n                }\n            },\n            'Summon Undead': {\n                'name': 'Summon Undead',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Undead Spirit'\n                ]\n            },\n            'Aura of Purity': {\n                'name': 'Aura of Purity',\n                'version': '0.7.01',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Holy Weapon': {\n                'name': 'Holy Weapon',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Holy Weapon'\n                }\n            },\n            'Guardian of Faith': {\n                'name': 'Guardian of Faith',\n                'version': '0.7.45',\n                'hasAnimation': true,\n                'settings': [\n                    'Movement Listener',\n                    'Combat Listener'\n                ],\n                'actors': [\n                    'CPR - Guardian of Faith'\n                ]\n            },\n            'Magic Missile': {\n                'name': 'Magic Missile',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Lightning Arrow': {\n                'name': 'Lightning Arrow',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Thorn Whip': {\n                'name': 'Thorn Whip',\n                'version': '0.7.01'\n            },\n            'Dragon\\'s Breath': {\n                'name': 'Dragon\\'s Breath',\n                'version': '0.7.01'\n            },\n            'Animate Dead': {\n                'name': 'Animate Dead',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Skeleton',\n                    'CPR - Zombie'\n                ]\n            },\n            'Lightning Lure': {\n                'name': 'Lightning Lure',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Spiritual Weapon': {\n                'name': 'Spiritual Weapon',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Spiritual Weapon'\n                ],\n                'mutation': {\n                    'self': 'Spiritual Weapon'\n                }\n            },\n            'Beacon of Hope': {\n                'name': 'Beacon of Hope',\n                'version': '0.7.01',\n                'settings': [\n                    'Beacon of Hope'\n                ]\n            },\n            'Vampiric Touch': {\n                'name': 'Vampiric Touch',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Vampiric Touch'\n                }\n            },\n            'Hunter\\'s Mark': {\n                'name': 'Hunter\\'s Mark',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'huntersMark'\n                }\n            },\n            'Guiding Bolt': {\n                'name': 'Guiding Bolt',\n                'version': '0.7.01'\n            },\n            'Chill Touch': {\n                'name': 'Chill Touch',\n                'version': '0.7.01'\n            },\n            'Hex': {\n                'name': 'Hex',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Hex'\n                }\n            },\n            'Arms of Hadar': {\n                'name': 'Arms of Hadar',\n                'version': '0.7.01'\n            },\n            'Summon Celestial': {\n                'name': 'Summon Celestial',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Celestial Spirit'\n                ]\n            },\n            'Summon Fiend': {\n                'name': 'Summon Fiend',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Fiendish Spirit'\n                ]\n            },\n            'Tidal Wave': {\n                'name': 'Tidal Wave',\n                'version': '0.7.01'\n            },\n            'Summon Beast': {\n                'name': 'Summon Beast',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Bestial Spirit'\n                ]\n            },\n            'Bestow Curse': {\n                'name': 'Bestow Curse',\n                'version': '0.7.01'\n            },\n            'Fog Cloud': {\n                'name': 'Fog Cloud',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Spirit Shroud': {\n                'name': 'Spirit Shroud',\n                'version': '0.7.01'\n            },\n            'Call Lightning': {\n                'name': 'Call Lightning',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Storm Bolt'\n                }\n            },\n            'Alchemical Savant': {\n                'name': 'Alchemical Savant',\n                'version': '0.7.01'\n            },\n            'Experimental Elixir': {\n                'name': 'Experimental Elixir',\n                'version': '0.7.01'\n            },\n            'Arcane Armor: Guardian Model': {\n                'name': 'Arcane Armor: Guardian Model',\n                'version': '0.7.01',\n                'settings': [\n                    'Rest Listener'\n                ]\n            },\n            'Arcane Armor: Infiltrator Model': {\n                'name': 'Arcane Armor: Infiltrator Model',\n                'version': '0.7.01',\n                'settings': [\n                    'Rest Listener'\n                ]\n            },\n            'Arcane Jolt': {\n                'name': 'Arcane Jolt',\n                'version': '0.7.01',\n                'classes': [\n                    'battle-smith'\n                ],\n                'scales': [\n                    'arcane-jolt'\n                ]\n            },\n            'Steel Defender': {\n                'name': 'Steel Defender',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Steel Defender'\n                ],\n                'mutation': {\n                    'self': 'Steel Defender'\n                }\n            },\n            'Homunculus Servant': {\n                'name': 'Homunculus Servant',\n                'version': '0.7.46',\n                'actors': [\n                    'CPR - Homunculus Servant'\n                ],\n                'mutation': {\n                    'self': 'Homunculus Servant'\n                }\n            },\n            'Ancestral Protectors': {\n                'name': 'Ancestral Protectors',\n                'version': '0.7.01'\n            },\n            'Rage': {\n                'name': 'Rage',\n                'version': '0.7.45',\n                'mutation': {\n                    'self': 'Rage'\n                },\n                'hasAnimation': true,\n                'settings': [\n                    'On Hit'\n                ]\n            },\n            'Totem Spirit: Bear': {\n                'name': 'Totem Spirit: Bear',\n                'version': '0.7.33'\n            },\n            'Danger Sense': {\n                'name': 'Danger Sense',\n                'version': '0.7.01',\n                'settings': [\n                    'Save Patching'\n                ]\n            },\n            'Unarmored Defense (Barbarian)': {\n                'name': 'Unarmored Defense (Barbarian)',\n                'version': '0.7.01'\n            },\n            'Animating Performance': {\n                'name': 'Animating Performance',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Item'\n                ],\n                'mutation': {\n                    'self': 'Dancing Item'\n                }\n            },\n            'Blade Flourish': {\n                'name': 'Blade Flourish',\n                'version': '0.7.01',\n                'classes': [\n                    'bard'\n                ],\n                'scales': [\n                    'bardic-inspiration'\n                ]\n            },\n            'Blade Flourish Movement': {\n                'name': 'Blade Flourish Movement',\n                'version': '0.7.01'\n            },\n            'Defensive Flourish': {\n                'name': 'Defensive Flourish',\n                'version': '0.7.01'\n            },\n            'Mobile Flourish': {\n                'name': 'Mobile Flourish',\n                'version': '0.7.01'\n            },\n            'Slashing Flourish': {\n                'name': 'Slashing Flourish',\n                'version': '0.7.01'\n            },\n            'Blood Curse of the Fallen Puppet': {\n                'name': 'Blood Curse of the Fallen Puppet',\n                'version': '0.7.01',\n                'classes': [\n                    'blood-hunter'\n                ],\n                'scales': [\n                    'crimson-rite'\n                ]\n            },\n            'Blood Curse of the Muddled Mind': {\n                'name': 'Blood Curse of the Muddled Mind',\n                'version': '0.7.01',\n                'classes': [\n                    'blood-hunter'\n                ],\n                'scales': [\n                    'crimson-rite'\n                ]\n            },\n            'Hybrid Transformation': {\n                'name': 'Hybrid Transformation',\n                'version': 'Hybrid Transformation',\n                'mutation': {\n                    'self': 'Hybrid Transformation'\n                },\n                'classes': [\n                    'blood-hunter'\n                ]\n            },\n            'Stalker\\'s Prowess': {\n                'name': 'Stalker\\'s Prowess',\n                'version': '0.7.01'\n            },\n            'Formulas: Aether': {\n                'name': 'Formulas: Aether',\n                'version': '0.7.01'\n            },\n            'Formulas: Alluring': {\n                'name': 'Formulas: Alluring',\n                'version': '0.7.01'\n            },\n            'Formulas: Celerity': {\n                'name': 'Formulas: Celerity',\n                'version': '0.7.01'\n            },\n            'Formulas: Conversant': {\n                'name': 'Formulas: Conversant',\n                'version': '0.7.01'\n            },\n            'Formulas: Cruelty': {\n                'name': 'Formulas: Cruelty',\n                'version': '0.7.01'\n            },\n            'Formulas: Deftness': {\n                'name': 'Formulas: Deftness',\n                'version': '0.7.01'\n            },\n            'Formulas: Embers': {\n                'name': 'Formulas: Embers',\n                'version': '0.7.01'\n            },\n            'Formulas: Gelid': {\n                'name': 'Formulas: Gelid',\n                'version': '0.7.01'\n            },\n            'Formulas: Impermeable': {\n                'name': 'Formulas: Impermeable',\n                'version': '0.7.01'\n            },\n            'Formulas: Mobility': {\n                'name': 'Formulas: Mobility',\n                'version': '0.7.01'\n            },\n            'Formulas: Nighteye': {\n                'name': 'Formulas: Nighteye',\n                'version': '0.7.01'\n            },\n            'Formulas: Percipient': {\n                'name': 'Formulas: Percipient',\n                'version': '0.7.01'\n            },\n            'Formulas: Potency': {\n                'name': 'Formulas: Potency',\n                'version': '0.7.01'\n            },\n            'Formulas: Precision': {\n                'name': 'Formulas: Precision',\n                'version': '0.7.01'\n            },\n            'Formulas: Rapidity': {\n                'name': 'Formulas: Rapidity',\n                'version': '0.7.01'\n            },\n            'Formulas: Reconstruction': {\n                'name': 'Formulas: Reconstruction',\n                'version': '0.7.01'\n            },\n            'Formulas: Sagacity': {\n                'name': 'Formulas: Sagacity',\n                'version': '0.7.01'\n            },\n            'Formulas: Shielded': {\n                'name': 'Formulas: Shielded',\n                'version': '0.7.01'\n            },\n            'Formulas: Unbreakable': {\n                'name': 'Formulas: Unbreakable',\n                'version': '0.7.01'\n            },\n            'Formulas: Vermillion': {\n                'name': 'Formulas: Vermillion',\n                'version': '0.7.01'\n            },\n            'Mutagencraft - Create Mutagen': {\n                'name': 'Mutagencraft - Create Mutagen',\n                'version': '0.7.01'\n            },\n            'Strange Metabolism': {\n                'name': 'Strange Metabolism',\n                'version': '0.7.01'\n            },\n            'Brand of Castigation': {\n                'name': 'Brand of Castigation',\n                'version': '0.7.01',\n                'classes': [\n                    'blood-hunter'\n                ],\n                'scales': [\n                    'crimson-rite'\n                ]\n            },\n            'Crimson Rite': {\n                'name': 'Crimson Rite',\n                'version': '0.7.01',\n                'classes': [\n                    'blood-hunter'\n                ],\n                'scales': [\n                    'crimson-rite'\n                ]\n            },\n            'Reaper': {\n                'name': 'Reaper',\n                'version': '0.7.01'\n            },\n            'Blessing of the Forge': {\n                'name': 'Blessing of the Forge',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Blessing of the Forge'\n                }\n            },\n            'Channel Divinity: Path to the Grave': {\n                'name': 'Channel Divinity: Path to the Grave',\n                'version': '0.7.01'\n            },\n            'Circle of Mortality': {\n                'name': 'Circle of Mortality',\n                'version': '0.7.01'\n            },\n            'Channel Divinity: Preserve Life': {\n                'name': 'Channel Divinity: Preserve Life',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Channel Divinity: Radiance of the Dawn': {\n                'name': 'Channel Divinity: Radiance of the Dawn',\n                'version': '0.7.01'\n            },\n            'Channel Divinity: Balm of Peace': {\n                'name': 'Channel Divinity: Balm of Peace',\n                'version': '0.7.01'\n            },\n            'Emboldening Bond': {\n                'name': 'Emboldening Bond',\n                'version': '0.7.01',\n                'settings': [\n                    'Emboldening Bond'\n                ]\n            },\n            'Expansive Bond': {\n                'name': 'Expansive Bond',\n                'version': '0.7.01',\n                'settings': [\n                    'Emboldening Bond'\n                ]\n            },\n            'Protective Bond': {\n                'name': 'Protective Bond',\n                'version': '0.7.01',\n                'settings': [\n                    'Emboldening Bond'\n                ]\n            },\n            'Channel Divinity: Destructive Wrath': {\n                'name': 'Channel Divinity: Destructive Wrath',\n                'version': '0.7.01'\n            },\n            'Thunderbolt Strike': {\n                'name': 'Thunderbolt Strike',\n                'version': '0.7.01'\n            },\n            'Wrath of the Storm': {\n                'name': 'Wrath of the Storm',\n                'version': '0.7.01'\n            },\n            'Channel Divinity: Twilight Sanctuary': {\n                'name': 'Channel Divinity: Twilight Sanctuary',\n                'version': '0.9.63'\n            },\n            'Eyes of Night': {\n                'name': 'Eyes of Night',\n                'version': '0.7.01'\n            },\n            'Steps of Night': {\n                'name': 'Steps of Night',\n                'version': '0.7.01'\n            },\n            'Vigilant Blessing': {\n                'name': 'Vigilant Blessing',\n                'version': '0.7.01'\n            },\n            'Blessed Strikes': {\n                'name': 'Blessed Strikes',\n                'version': '0.7.01'\n            },\n            'Channel Divinity: Turn Undead': {\n                'name': 'Channel Divinity: Turn Undead',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Divine Strike': {\n                'name': 'Divine Strike',\n                'version': '0.7.01'\n            },\n            'Potent Spellcasting': {\n                'name': 'Potent Spellcasting',\n                'version': '0.7.01'\n            },\n            'Starry Form': {\n                'name': 'Starry Form',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Starry Form'\n                },\n                'scales': [\n                    'circle-of-stars'\n                ],\n                'classes': [\n                    'druid'\n                ]\n            },\n            'Twinkling Constellations': {\n                'name': 'Twinkling Constellations',\n                'version': '0.7.01'\n            },\n            'Summon Wildfire Spirit': {\n                'name': 'Summon Wildfire Spirit',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Wildfire Spirit'\n                ],\n                'classes': [\n                    'druid'\n                ],\n                'mutation': {\n                    'self': 'Wildfire Spirit'\n                }\n            },\n            'Primal Strike': {\n                'name': 'Primal Strike',\n                'version': '0.7.01'\n            },\n            'Wild Shape': {\n                'name': 'Wild Shape',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Wild Shape'\n                }\n            },\n            'Maneuvers: Ambush': {\n                'name': 'Maneuvers: Ambush',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Bait and Switch': {\n                'name': 'Maneuvers: Bait and Switch',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Brace': {\n                'name': 'Maneuvers: Brace',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Commander\\'s Strike': {\n                'name': 'Maneuvers: Commander\\'s Strike',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Disarming Attack': {\n                'name': 'Maneuvers: Disarming Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Distracting Strike': {\n                'name': 'Maneuvers: Distracting Strike',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Evasive Footwork': {\n                'name': 'Maneuvers: Evasive Footwork',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Feinting Attack': {\n                'name': 'Maneuvers: Feinting Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Goading Attack': {\n                'name': 'Maneuvers: Goading Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Grappling Strike': {\n                'name': 'Maneuvers: Grappling Strike',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Lunging Attack': {\n                'name': 'Maneuvers: Lunging Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Maneuvering Attack': {\n                'name': 'Maneuvers: Maneuvering Attack',\n                'version': '0.9.35',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Menacing Attack': {\n                'name': 'Maneuvers: Menacing Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Parry': {\n                'name': 'Maneuvers: Parry',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Precision Attack': {\n                'name': 'Maneuvers: Precision Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Pushing Attack': {\n                'name': 'Maneuvers: Pushing Attack',\n                'version': '0.7.39',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Quick Toss': {\n                'name': 'Maneuvers: Quick Toss',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Rally': {\n                'name': 'Maneuvers: Rally',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Riposte': {\n                'name': 'Maneuvers: Riposte',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Sweeping Attack': {\n                'name': 'Maneuvers: Sweeping Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Tactical Assessment': {\n                'name': 'Maneuvers: Tactical Assessment',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Maneuvers: Trip Attack': {\n                'name': 'Maneuvers: Trip Attack',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Superiority Dice': {\n                'name': 'Superiority Dice',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'combat-superiority-die'\n                ]\n            },\n            'Fighting Spirit': {\n                'name': 'Fighting Spirit',\n                'version': '0.7.01',\n                'classes': [\n                    'fighter'\n                ],\n                'scales': [\n                    'fighting-spirit'\n                ]\n            },\n            'Shadow Step': {\n                'name': 'Shadow Step',\n                'version': '0.7.01'\n            },\n            'Evasion': {\n                'name': 'Evasion',\n                'version': '0.7.01'\n            },\n            'Focused Aim': {\n                'name': 'Focused Aim',\n                'version': '0.7.01'\n            },\n            'Patient Defense': {\n                'name': 'Patient Defense',\n                'version': '0.7.01'\n            },\n            'Quickened Healing': {\n                'name': 'Quickened Healing',\n                'version': '0.7.01',\n                'classes': [\n                    'monk'\n                ],\n                'scales': [\n                    'quickened-healing'\n                ]\n            },\n            'Stillness of Mind': {\n                'name': 'Stillness of Mind',\n                'version': '0.7.01'\n            },\n            'Stunning Strike': {\n                'name': 'Stunning Strike',\n                'version': '0.9.16'\n            },\n            'Unarmored Defense (Monk)': {\n                'name': 'Unarmored Defense (Monk)',\n                'version': '0.7.01'\n            },\n            'Aura of Alacrity': {\n                'name': 'Aura of Alacrity',\n                'version': '0.7.01'\n            },\n            'Channel Divinity: Inspiring Smite': {\n                'name': 'Channel Divinity: Inspiring Smite',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Channel Divinity: Peerless Athlete': {\n                'name': 'Channel Divinity: Peerless Athlete',\n                'version': '0.7.01'\n            },\n            'Aura of Warding': {\n                'name': 'Aura of Warding',\n                'version': '0.9.4',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Aura of Courage': {\n                'name': 'Aura of Courage',\n                'version': '0.7.01',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Aura of Protection': {\n                'name': 'Aura of Protection',\n                'version': '0.7.01',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Divine Smite': {\n                'name': 'Divine Smite',\n                'version': '0.7.01'\n            },\n            'Primal Companion': {\n                'name': 'Primal Companion',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Primal Companion'\n                ],\n                'mutation': {\n                    'self': 'Primal Companion'\n                }\n            },\n            'Drake Companion: Summon': {\n                'name': 'Drake Companion: Summon',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Drake Companion'\n                ],\n                'mutation': {\n                    'self': 'Drake Companion'\n                }\n            },\n            'Beguiling Twist': {\n                'name': 'Beguiling Twist',\n                'version': '0.7.01'\n            },\n            'Dreadful Strikes': {\n                'name': 'Dreadful Strikes',\n                'version': '0.7.01',\n                'classes': [\n                    'ranger'\n                ],\n                'scales': [\n                    'dreadful-strikes'\n                ]\n            },\n            'Dread Ambusher': {\n                'name': 'Dread Ambusher',\n                'version': '0.9.27'\n            },\n            'Favored Foe': {\n                'name': 'Favored Foe',\n                'version': '0.7.01',\n                'classes': [\n                    'ranger'\n                ],\n                'scales': [\n                    'favored-foe'\n                ]\n            },\n            'Rakish Audacity': {\n                'name': 'Rakish Audacity',\n                'version': '0.7.01'\n            },\n            'Evasion': {\n                'name': 'Evasion',\n                'version': '0.7.01'\n            },\n            'Sneak Attack': {\n                'name': 'Sneak Attack',\n                'version': '0.7.46'\n            },\n            'Favored by the Gods': {\n                'name': 'Favored by the Gods',\n                'version': '0.8.23'\n            },\n            'Metamagic - Careful Spell': {\n                'name': 'Metamagic - Careful Spell',\n                'version': '0.7.01'\n            },\n            'Metamagic - Twinned Spell': {\n                'name': 'Metamagic - Twinned Spell',\n                'version': '0.7.01'\n            },\n            'Metamagic - Transmuted Spell': {\n                'name': 'Metamagic - Transmuted Spell',\n                'version': '0.7.01'\n            },\n            'Metamagic - Seeking Spell': {\n                'name': 'Metamagic - Seeking Spell',\n                'version': '0.7.01'\n            },\n            'Metamagic - Heightened Spell': {\n                'name': 'Metamagic - Heightened Spell',\n                'version': '0.7.01'\n            },\n            'Metamagic - Empowered Spell': {\n                'name': 'Metamagic - Empowered Spell',\n                'version': '0.7.01'\n            },\n            'Strength of the Grave': {\n                'name': 'Strength of the Grave',\n                'version': '0.7.01',\n                'settings': [\n                    'Strength of the Grave'\n                ]\n            },\n            'Heart of the Storm': {\n                'name': 'Heart of the Storm',\n                'version': '0.7.01'\n            },\n            'Sorcery Points': {\n                'name': 'Sorcery Points',\n                'version': '0.7.01'\n            },\n            'Devil\\'s Sight': {\n                'name': 'Devil\\'s Sight',\n                'version': '0.7.01'\n            },\n            'Eldritch Invocations: Agonizing Blast': {\n                'name': 'Eldritch Invocations: Agonizing Blast',\n                'version': '0.7.01'\n            },\n            'Eldritch Invocations: Grasp of Hadar': {\n                'name': 'Eldritch Invocations: Grasp of Hadar',\n                'version': '0.7.01'\n            },\n            'Eldritch Invocations: Repelling Blast': {\n                'name': 'Eldritch Invocations: Repelling Blast',\n                'version': '0.7.01'\n            },\n            'Eldritch Smite': {\n                'name': 'Eldritch Smite',\n                'version': '0.7.01'\n            },\n            'Maddening Hex': {\n                'name': 'Maddening Hex',\n                'version': '0.7.01'\n            },\n            'One with Shadows': {\n                'name': 'One with Shadows',\n                'version': '0.7.01'\n            },\n            'Relentless Hex': {\n                'name': 'Relentless Hex',\n                'version': '0.7.01'\n            },\n            'Fey Presence': {\n                'name': 'Fey Presence',\n                'version': '0.7.01'\n            },\n            'Misty Escape': {\n                'name': 'Misty Escape',\n                'version': '0.7.01'\n            },\n            'Healing Light': {\n                'name': 'Healing Light',\n                'version': '0.7.01'\n            },\n            'Radiant Soul': {\n                'name': 'Radiant Soul',\n                'version': '0.7.01'\n            },\n            'Tentacle of the Deeps: Summon': {\n                'name': 'Tentacle of the Deeps: Summon',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Spectral Tentacle'\n                ],\n                'mutation': {\n                    'self': 'Tentacle of the Deeps'\n                }\n            },\n            'Dark One\\'s Blessing': {\n                'name': 'Dark One\\'s Blessing',\n                'version': '0.7.01'\n            },\n            'Dark One\\'s Own Luck': {\n                'name': 'Dark One\\'s Own Luck',\n                'version': '0.7.01'\n            },\n            'Elemental Gift - Flight': {\n                'name': 'Elemental Gift - Flight',\n                'version': '0.9.43'\n            },\n            'Elemental Gift: Elemental Gift (Dao)': {\n                'name': 'Elemental Gift: Elemental Gift (Dao)',\n                'version': '0.7.01'\n            },\n            'Elemental Gift: Elemental Gift (Djinni)': {\n                'name': 'Elemental Gift: Elemental Gift (Djinni)',\n                'version': '0.7.01'\n            },\n            'Elemental Gift: Elemental Gift (Efreeti)': {\n                'name': 'Elemental Gift: Elemental Gift (Efreeti)',\n                'version': '0.7.01'\n            },\n            'Elemental Gift: Elemental Gift (Marid)': {\n                'name': 'Elemental Gift: Elemental Gift (Marid)',\n                'version': '0.7.01'\n            },\n            'Genie\\'s Vessel: Genie\\'s Wrath (Dao)': {\n                'name': 'Genie\\'s Vessel: Genie\\'s Wrath (Dao)',\n                'version': '0.8.19'\n            },\n            'Genie\\'s Vessel: Genie\\'s Wrath (Djinni)': {\n                'name': 'Genie\\'s Vessel: Genie\\'s Wrath (Djinni)',\n                'version': '0.8.19'\n            },\n            'Genie\\'s Vessel: Genie\\'s Wrath (Efreeti)': {\n                'name': 'Genie\\'s Vessel: Genie\\'s Wrath (Efreeti)',\n                'version': '0.8.19'\n            },\n            'Genie\\'s Vessel: Genie\\'s Wrath (Marid)': {\n                'name': 'Genie\\'s Vessel: Genie\\'s Wrath (Marid)',\n                'version': '0.8.19'\n            },\n            'Hexblade\\'s Curse': {\n                'name': 'Hexblade\\'s Curse',\n                'version': '0.7.01',\n                'classes': [\n                    'warlock'\n                ]\n            },\n            'Form of Dread': {\n                'name': 'Form of Dread',\n                'version': '0.7.38'\n            },\n            'Form of Dread: Fear': {\n                'name': 'Form of Dread: Fear',\n                'version': '0.7.38'\n            },\n            'Grave Touched': {\n                'name': 'Grave Touched',\n                'version': '0.7.38'\n            },\n            'Awakened Spellbook: Replace Damage': {\n                'name': 'Awakened Spellbook: Replace Damage',\n                'version': '0.7.01'\n            },\n            'Arcane Ward': {\n                'name': 'Arcane Ward',\n                'version': '0.7.34',\n                'settings': [\n                    'Rest Listener',\n                    'Arcane Ward'\n                ]\n            },\n            'Projected Ward': {\n                'name': 'Projected Ward',\n                'version': '0.7.01',\n                'settings': [\n                    'Arcane Ward'\n                ]\n            },\n            'Expert Divination': {\n                'name': 'Expert Divination',\n                'version': '0.7.07'\n            },\n            'Grim Harvest': {\n                'name': 'Grim Harvest',\n                'version': '0.7.01'\n            },\n            'Undead Thralls': {\n                'name': 'Undead Thralls',\n                'version': '0.7.01'\n            },\n            'Elixir of Health': {\n                'name': 'Elixir of Health',\n                'version': '0.7.01'\n            },\n            'Oil of Sharpness': {\n                'name': 'Oil of Sharpness',\n                'version': '0.7.01'\n            },\n            'Potion of Advantage': {\n                'name': 'Potion of Advantage',\n                'version': '0.7.01'\n            },\n            'Potion of Aqueous Form': {\n                'name': 'Potion of Aqueous Form',\n                'version': '0.7.01'\n            },\n            'Potion of Diminution': {\n                'name': 'Potion of Diminution',\n                'version': '0.7.01'\n            },\n            'Potion of Fire Breath': {\n                'name': 'Potion of Fire Breath',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Potion of Fire Breath'\n                }\n            },\n            'Potion of Giant Size': {\n                'name': 'Potion of Giant Size',\n                'version': '0.7.01'\n            },\n            'Potion of Growth': {\n                'name': 'Potion of Growth',\n                'version': '0.7.01'\n            },\n            'Potion of Heroism': {\n                'name': 'Potion of Heroism',\n                'version': '0.7.01'\n            },\n            'Potion of Invisibility': {\n                'name': 'Potion of Invisibility',\n                'version': '0.7.01'\n            },\n            'Potion of Invulnerability': {\n                'name': 'Potion of Invulnerability',\n                'version': '0.7.01'\n            },\n            'Potion of Maximum Power': {\n                'name': 'Potion of Maximum Power',\n                'version': '0.7.01'\n            },\n            'Potion of Poison': {\n                'name': 'Potion of Poison',\n                'version': '0.7.01'\n            },\n            'Potion of Speed': {\n                'name': 'Potion of Speed',\n                'version': '0.7.01'\n            },\n            'Potion of Vitality': {\n                'name': 'Potion of Vitality',\n                'version': '0.7.01'\n            },\n            'Ring of Spell Storing (0/5)': {\n                'name': 'Ring of Spell Storing (0/5)',\n                'version': '0.7.01'\n            },\n            'Boots of Elvenkind': {\n                'name': 'Boots of Elvenkind',\n                'version': '0.7.01'\n            },\n            'Dragon Vessel (Ascendant)': {\n                'name': 'Dragon Vessel (Ascendant)',\n                'version': '0.7.01'\n            },\n            'Dragon Vessel (Slumbering)': {\n                'name': 'Dragon Vessel (Slumbering)',\n                'version': '0.7.01'\n            },\n            'Dragon Vessel (Stirring)': {\n                'name': 'Dragon Vessel (Stirring)',\n                'version': '0.7.01'\n            },\n            'Dragon Vessel (Wakened)': {\n                'name': 'Dragon Vessel (Wakened)',\n                'version': '0.7.01'\n            },\n            'Dragon-Touched Focus (Slumbering)': {\n                'name': 'Dragon-Touched Focus (Slumbering)',\n                'version': '0.7.01'\n            },\n            'Dragon-Touched Focus (Stirring / Chromatic)': {\n                'name': 'Dragon-Touched Focus (Stirring / Chromatic)',\n                'version': '0.7.01'\n            },\n            'Dragon-Touched Focus (Stirring / Gem)': {\n                'name': 'Dragon-Touched Focus (Stirring / Gem)',\n                'version': '0.7.01'\n            },\n            'Eyes of Minute Seeing': {\n                'name': 'Eyes of Minute Seeing',\n                'version': '0.7.01',\n                'settings': [\n                    'Skill Patching'\n                ]\n            },\n            'Eyes of the Eagle': {\n                'name': 'Eyes of the Eagle',\n                'version': '0.7.01',\n                'settings': [\n                    'Skill Patching'\n                ]\n            },\n            'Lantern of Revealing': {\n                'name': 'Lantern of Revealing',\n                'version': '0.7.01',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Stormgirdle (Awakened)': {\n                'name': 'Stormgirdle (Awakened)',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Storm Avatar'\n                }\n            },\n            'Stormgirdle (Dormant)': {\n                'name': 'Stormgirdle (Dormant)',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Storm Avatar'\n                }\n            },\n            'Stormgirdle (Exalted)': {\n                'name': 'Stormgirdle (Exalted)',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Storm Avatar'\n                }\n            },\n            'Blackrazor': {\n                'name': 'Blackrazor',\n                'version': '0.7.01',\n                'settings': [\n                    'On Hit'\n                ]\n            },\n            'Dancing Greatsword': {\n                'name': 'Dancing Greatsword',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dancing Greatsword': {\n                'name': 'Dancing Greatsword',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dancing Longsword': {\n                'name': 'Dancing Longsword',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dancing Rapier': {\n                'name': 'Dancing Rapier',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dancing Scimitar': {\n                'name': 'Dancing Scimitar',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dancing Shortsword': {\n                'name': 'Dancing Shortsword',\n                'version': '0.7.01',\n                'actors': [\n                    'CPR - Dancing Sword'\n                ],\n                'mutation': {\n                    'self': 'Dancing Sword'\n                }\n            },\n            'Dragon\\'s Wrath Weapon (Ascendant)': {\n                'name': 'Dragon\\'s Wrath Weapon (Ascendant)',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Dragon\\'s Wrath Weapon (Slumbering)': {\n                'name': 'Dragon\\'s Wrath Weapon (Slumbering)',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Dragon\\'s Wrath Weapon (Stirring)': {\n                'name': 'Dragon\\'s Wrath Weapon (Stirring)',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Dragon\\'s Wrath Weapon (Wakened)': {\n                'name': 'Dragon\\'s Wrath Weapon (Wakened)',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Grovelthrash (Awakened)': {\n                'name': 'Grovelthrash (Awakened)',\n                'version': '0.7.01'\n            },\n            'Grovelthrash (Dormant)': {\n                'name': 'Grovelthrash (Dormant)',\n                'version': '0.7.01'\n            },\n            'Grovelthrash (Exalted)': {\n                'name': 'Grovelthrash (Exalted)',\n                'version': '0.7.01'\n            },\n            'Blood Spear': {\n                'name': 'Blood Spear',\n                'version': '0.7.01'\n            },\n            'Insignia of Claws': {\n                'name': 'Insignia of Claws',\n                'version': '0.7.01'\n            },\n            'Celestial Revelation (Necrotic Shroud)': {\n                'name': 'Celestial Revelation (Necrotic Shroud)',\n                'version': '0.7.01'\n            },\n            'Celestial Revelation (Radiant Consumption)': {\n                'name': 'Celestial Revelation (Radiant Consumption)',\n                'version': '0.7.53'\n            },\n            'Celestial Revelation (Radiant Soul)': {\n                'name': 'Celestial Revelation (Radiant Soul)',\n                'version': '0.7.53'\n            },\n            'Astral Trance': {\n                'name': 'Astral Trance',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Trance'\n                }\n            },\n            'Fey Ancestry': {\n                'name': 'Fey Ancestry',\n                'version': '0.7.01',\n                'settings': [\n                    'Condition Resistance'\n                ]\n            },\n            'Starlight Step': {\n                'name': 'Starlight Step',\n                'version': '0.8.23'\n            },\n            'Vampiric Bite': {\n                'name': 'Vampiric Bite',\n                'version': '0.7.01'\n            },\n            'Dwarven Resilience': {\n                'name': 'Dwarven Resilience',\n                'version': '0.7.01',\n                'settings': [\n                    'Condition Resistance'\n                ]\n            },\n            'Change Season': {\n                'name': 'Change Season',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Eladrin Season'\n                }\n            },\n            'Fey Step': {\n                'name': 'Fey Step',\n                'version': '0.7.01'\n            },\n            'Cunning Intuition': {\n                'name': 'Cunning Intuition',\n                'version': '0.7.01'\n            },\n            'Incisive Sense': {\n                'name': 'Incisive Sense',\n                'version': '0.7.01'\n            },\n            'Astral Spark': {\n                'name': 'Astral Spark',\n                'version': '0.7.01'\n            },\n            'Gnome Cunning': {\n                'name': 'Gnome Cunning',\n                'version': '0.7.01'\n            },\n            'Deductive Intuition': {\n                'name': 'Deductive Intuition',\n                'version': '0.7.01'\n            },\n            'Savage Attacks': {\n                'name': 'Savage Attacks',\n                'version': '0.7.35'\n            },\n            'Artisan\\'s Intuition': {\n                'name': 'Artisan\\'s Intuition',\n                'version': '0.7.01'\n            },\n            'Dual Mind': {\n                'name': 'Dual Mind',\n                'version': '0.7.01'\n            },\n            'Hungry Jaws': {\n                'name': 'Hungry Jaws',\n                'version': '0.7.01'\n            },\n            'Relentless Endurance': {\n                'name': 'Relentless Endurance',\n                'version': '0.7.01',\n                'settings': [\n                    'Relentless Endurance'\n                ]\n            },\n            'Natural Resilience': {\n                'name': 'Natural Resilience',\n                'version': '0.7.01',\n                'settings': [\n                    'Condition Resistance'\n                ]\n            },\n            'Blessing of the Raven Queen': {\n                'name': 'Blessing of the Raven Queen',\n                'version': '0.7.01'\n            },\n            'Shift - Wildhunt': {\n                'name': 'Shift - Wildhunt',\n                'version': '0.7.01',\n                'settings': [\n                    'Wildhunt'\n                ]\n            },\n            'Telepathic Insight': {\n                'name': 'Telepathic Insight',\n                'version': '0.7.01'\n            },\n            'Constructed Resilience': {\n                'name': 'Constructed Resilience',\n                'version': '0.7.01',\n                'settings': [\n                    'Condition Resistance'\n                ]\n            },\n            'Crusher: Critical': {\n                'name': 'Crusher: Critical',\n                'version': '0.7.01'\n            },\n            'Elemental Adept (Acid)': {\n                'name': 'Elemental Adept (Acid)',\n                'version': '0.7.01',\n                'settings': [\n                    'Elemental Adept'\n                ]\n            },\n            'Elemental Adept (Cold)': {\n                'name': 'Elemental Adept (Cold)',\n                'version': '0.7.01',\n                'settings': [\n                    'Elemental Adept'\n                ]\n            },\n            'Elemental Adept (Fire)': {\n                'name': 'Elemental Adept (Fire)',\n                'version': '0.7.01',\n                'settings': [\n                    'Elemental Adept'\n                ]\n            },\n            'Elemental Adept (Lightning)': {\n                'name': 'Elemental Adept (Lightning)',\n                'version': '0.7.01',\n                'settings': [\n                    'Elemental Adept'\n                ]\n            },\n            'Elemental Adept (Thunder)': {\n                'name': 'Elemental Adept (Thunder)',\n                'version': '0.7.01',\n                'settings': [\n                    'Elemental Adept'\n                ]\n            },\n            'Ember of the Fire Giant: Searing Ignition': {\n                'name': 'Ember of the Fire Giant: Searing Ignition',\n                'version': '0.7.01'\n            },\n            'Fury of the Frost Giant: Frigid Retaliation': {\n                'name': 'Fury of the Frost Giant: Frigid Retaliation',\n                'version': '0.7.01'\n            },\n            'Gift of the Chromatic Dragon: Chromatic Infusion': {\n                'name': 'Gift of the Chromatic Dragon: Chromatic Infusion',\n                'version': '0.7.01',\n                'mutation': {\n                    'self': 'Chromatic Infusion'\n                }\n            },\n            'Gift of the Chromatic Dragon: Reactive Resistance': {\n                'name': 'Gift of the Chromatic Dragon: Reactive Resistance',\n                'version': '0.7.01'\n            },\n            'Guile of the Cloud Giant: Cloudy Escape': {\n                'name': 'Guile of the Cloud Giant: Cloudy Escape',\n                'version': '0.7.01'\n            },\n            'Keenness of the Stone Giant: Stone Throw': {\n                'name': 'Keenness of the Stone Giant: Stone Throw',\n                'version': '0.7.01'\n            },\n            'Orcish Fury - Extra Damage': {\n                'name': 'Orcish Fury - Extra Damage',\n                'version': '0.7.01'\n            },\n            'Piercer: Critical Hit': {\n                'name': 'Piercer: Critical Hit',\n                'version': '0.7.01'\n            },\n            'Piercer: Reroll Damage': {\n                'name': 'Piercer: Reroll Damage',\n                'version': '0.7.01'\n            },\n            'Slasher: Critical Hit': {\n                'name': 'Slasher: Critical Hit',\n                'version': '0.7.01'\n            },\n            'Slasher: Reduce Speed': {\n                'name': 'Slasher: Reduce Speed',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Cloud Strike': {\n                'name': 'Strike of the Giants: Cloud Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Fire Strike': {\n                'name': 'Strike of the Giants: Fire Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Frost Strike': {\n                'name': 'Strike of the Giants: Frost Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Hill Strike': {\n                'name': 'Strike of the Giants: Hill Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Stone Strike': {\n                'name': 'Strike of the Giants: Stone Strike',\n                'version': '0.7.01'\n            },\n            'Strike of the Giants: Storm Strike': {\n                'name': 'Strike of the Giants: Storm Strike',\n                'version': '0.7.01'\n            },\n            'Telekinetic: Shove': {\n                'name': 'Telekinetic: Shove',\n                'version': '0.7.01'\n            },\n            'Vigor of the Hill Giant: Bulwark': {\n                'name': 'Vigor of the Hill Giant: Bulwark',\n                'version': '0.7.01'\n            },\n            'Dash': {\n                'name': 'Dash',\n                'version': '0.7.01'\n            },\n            'Disengage': {\n                'name': 'Disengage',\n                'version': '0.7.01'\n            },\n            'Dodge': {\n                'name': 'Dodge',\n                'version': '0.7.01'\n            },\n            'Fall': {\n                'name': 'Fall',\n                'version': '0.8.17'\n            },\n            'Grapple': {\n                'name': 'Grapple',\n                'version': '0.8.17'\n            },\n            'Help': {\n                'name': 'Help',\n                'version': '0.8.17'\n            },\n            'Hide': {\n                'name': 'Hide',\n                'version': '0.8.17'\n            },\n            'Ready Action': {\n                'name': 'Ready Action',\n                'version': '0.7.01'\n            },\n            'Ready Spell': {\n                'name': 'Ready Spell',\n                'version': '0.7.01'\n            },\n            'Search': {\n                'name': 'Search',\n                'version': '0.8.17'\n            },\n            'Shove': {\n                'name': 'Shove',\n                'version': '0.8.17'\n            },\n            'Durable Magic': {\n                'name': 'Durable Magic',\n                'version': '0.7.02'\n            },\n            'Find Familiar': {\n                'name': 'Find Familiar',\n                'version': '0.7.03',\n                'mutation': {\n                    'self': 'Find Familiar'\n                }\n            },\n            'Eldritch Invocations: Investment of the Chain Master': {\n                'name': 'Eldritch Invocations: Investment of the Chain Master',\n                'version': '0.7.03',\n            },\n            'Underwater': {\n                'name': 'Underwater',\n                'version': '0.8.17'\n            },\n            'Squeeze': {\n                'name': 'Squeeze',\n                'version': '0.7.03'\n            },\n            'Shield of Faith': {\n                'name': 'Shield of Faith',\n                'version': '0.7.03'\n            },\n            'Grease': {\n                'name': 'Grease',\n                'version': '0.7.04',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Dash': {\n                'name': 'Dash',\n                'version': '0.7.11'\n            },\n            'Disengage': {\n                'name': 'Disengage',\n                'version': '0.7.11'\n            },\n            'Dodge': {\n                'name': 'Dodge',\n                'version': '0.7.11'\n            },\n            'Fall': {\n                'name': 'Fall',\n                'version': '0.7.11'\n            },\n            'Grapple': {\n                'name': 'Grapple',\n                'version': '0.7.11'\n            },\n            'Help': {\n                'name': 'Help',\n                'version': '0.7.11'\n            },\n            'Hide': {\n                'name': 'Hide',\n                'version': '0.7.11'\n            },\n            'Ready Action': {\n                'name': 'Ready Action',\n                'version': '0.7.11'\n            },\n            'Ready Spell': {\n                'name': 'Ready Spell',\n                'version': '0.7.11'\n            },\n            'Search': {\n                'name': 'Search',\n                'version': '0.7.11'\n            },\n            'Shove': {\n                'name': 'Shove',\n                'version': '0.7.11'\n            },\n            'Squeeze': {\n                'name': 'Squeeze',\n                'version': '0.7.11'\n            },\n            'Underwater': {\n                'name': 'Underwater',\n                'version': '0.7.11'\n            },\n            'Sculpt Spells': {\n                'name': 'Sculpt Spells',\n                'version': '0.7.12'\n            },\n            'Potent Cantrip': {\n                'name': 'Potent Cantrip',\n                'version': '0.7.12'\n            },\n            'Empowered Evocation': {\n                'name': 'Empowered Evocation',\n                'version': '0.9.9'\n            },\n            'Overchannel': {\n                'name': 'Overchannel',\n                'version': '0.7.12'\n            },\n            'Aura of Devotion': {\n                'name': 'Aura of Devotion',\n                'version': '0.7.13',\n                'settings': [\n                    'Effect Auras'\n                ]\n            },\n            'Channel Divinity: Sacred Weapon': {\n                'name': 'Channel Divinity: Sacred Weapon',\n                'version': '0.7.13',\n                'mutation': {\n                    'self': 'Sacred Weapon'\n                }\n            },\n            'Holy Nimbus': {\n                'name': 'Holy Nimbus',\n                'version': '0.7.13',\n                'settings': [\n                    'Save Patching'\n                ]\n            },\n            'Purity of Spirit': {\n                'name': 'Purity of Spirit',\n                'version': '0.7.13',\n                'settings': [\n                    'Protection from Evil and Good'\n                ]\n            },\n            'Crystal Greatsword': {\n                'name': 'Crystal Greatsword',\n                'version': '0.9.9'\n            },\n            'Crystal Longsword': {\n                'name': 'Crystal Longsword',\n                'version': '0.9.9'\n            },\n            'Crystal Rapier': {\n                'name': 'Crystal Rapier',\n                'version': '0.9.9'\n            },\n            'Crystal Scimitar': {\n                'name': 'Crystal Scimitar',\n                'version': '0.9.9'\n            },\n            'Crystal Shortsword': {\n                'name': 'Crystal Shortsword',\n                'version': '0.9.9'\n            },\n            'Find Steed': {\n                'name': 'Find Steed',\n                'version': '0.7.14'\n            },\n            'Find Greater Steed': {\n                'name': 'Find Greater Steed',\n                'version': '0.7.14'\n            },\n            'Arcane Propulsion Armor': {\n                'name': 'Arcane Propulsion Armor',\n                'version': '0.7.14'\n            },\n            'Armor of Magical Strength': {\n                'name': 'Armor of Magical Strength',\n                'version': '0.7.14'\n            },\n            'Boots of the Winding Path': {\n                'name': 'Boots of the Winding Path',\n                'version': '0.7.15'\n            },\n            'Wand of the War Mage, +1': {\n                'name': 'Wand of the War Mage, +1',\n                'version': '0.7.15'\n            },\n            'Wand of the War Mage, +2': {\n                'name': 'Wand of the War Mage, +2',\n                'version': '0.7.15'\n            },\n            'Wand of the War Mage, +3': {\n                'name': 'Wand of the War Mage, +3',\n                'version': '0.7.15'\n            },\n            'Enhanced Arcane Focus, +1': {\n                'name': 'Enhanced Arcane Focus, +1',\n                'version': '0.7.15'\n            },\n            'Enhanced Arcane Focus, +2': {\n                'name': 'Enhanced Arcane Focus, +2',\n                'version': '0.7.15'\n            },\n            'Enhanced Weapon, +1': {\n                'name': 'Enhanced Weapon, +1',\n                'version': '0.7.16'\n            },\n            'Enhanced Weapon, +2': {\n                'name': 'Enhanced Weapon, +2',\n                'version': '0.7.16'\n            },\n            'Radiant Weapon': {\n                'name': 'Radiant Weapon',\n                'version': '0.9.24'\n            },\n            'Repeating Shot': {\n                'name': 'Repeating Shot',\n                'version': '0.7.18'\n            },\n            'Repulsion Shield': {\n                'name': 'Repulsion Shield',\n                'version': '0.7.18'\n            },\n            'Resistant Armor': {\n                'name': 'Resistant Armor',\n                'version': '0.7.18'\n            },\n            'Returning Weapon': {\n                'name': 'Returning Weapon',\n                'version': '0.7.18'\n            },\n            'Backbreaker': {\n                'name': 'Backbreaker',\n                'version': '0.8.28'\n            },\n            'Brace': {\n                'name': 'Brace',\n                'version': '0.8.28'\n            },\n            'Cleave': {\n                'name': 'Cleave',\n                'version': '0.8.28'\n            },\n            'Concussive Smash': {\n                'name': 'Concussive Smash',\n                'version': '0.8.28'\n            },\n            'Maiming Strike': {\n                'name': 'Maiming Strike',\n                'version': '0.8.28'\n            },\n            'Flourish': {\n                'name': 'Flourish',\n                'version': '0.8.28'\n            },\n            'Heartstopper': {\n                'name': 'Heartstopper',\n                'version': '0.8.28'\n            },\n            'Lacerate': {\n                'name': 'Lacerate',\n                'version': '0.8.28'\n            },\n            'Piercing Strike': {\n                'name': 'Piercing Strike',\n                'version': '0.8.28'\n            },\n            'Piercing Shot': {\n                'name': 'Piercing Shot',\n                'version': '0.8.28'\n            },\n            'Pommel Strike': {\n                'name': 'Pommel Strike',\n                'version': '0.8.28'\n            },\n            'Prepare': {\n                'name': 'Prepare',\n                'version': '0.8.28'\n            },\n            'Rush Attack': {\n                'name': 'Rush Attack',\n                'version': '0.8.28'\n            },\n            'Tenacity': {\n                'name': 'Tenacity',\n                'version': '0.8.28'\n            },\n            'Topple': {\n                'name': 'Topple',\n                'version': '0.8.28'\n            },\n            'Hamstring Shot': {\n                'name': 'Hamstring Shot',\n                'version': '0.8.28'\n            },\n            'Mobile Shot': {\n                'name': 'Mobile Shot',\n                'version': '0.8.28'\n            },\n            'Weakening Strike': {\n                'name': 'Weakening Strike',\n                'version': '0.8.28'\n            },\n            'Tasha\\'s Otherworldly Guise': {\n                'name': 'Tasha\\'s Otherworldly Guise',\n                'version': '0.7.22'\n            },\n            'Guardian of Nature': {\n                'name': 'Guardian of Nature',\n                'version': '0.7.27'\n            },\n            'Lucky Footwork': {\n                'name': 'Lucky Footwork',\n                'version': '0.8.19'\n            },\n            'Relentless': {\n                'name': 'Relentless',\n                'version': '0.7.27'\n            },\n            'Insect Plague': {\n                'name': 'Insect Plague',\n                'version': '0.7.27',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Savage Attacker': {\n                'name': 'Savage Attacker',\n                'version': '0.7.28'\n            },\n            'Crusher': {\n                'name': 'Crusher',\n                'version': '0.7.29'\n            },\n            'Burning Hands': {\n                'name': 'Burning Hands',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Fly': {\n                'name': 'Fly',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Faerie Fire': {\n                'name': 'Faerie Fire',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Disintegrate': {\n                'name': 'Disintegrate',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Form of the Beast': {\n                'name': 'Form of the Beast',\n                'version': '0.7.33'\n            },\n            'Bestial Soul': {\n                'name': 'Bestial Soul',\n                'version': '0.7.33'\n            },\n            'Infectious Fury': {\n                'name': 'Infectious Fury',\n                'version': '0.7.33'\n            },\n            'Call the Hunt': {\n                'name': 'Call the Hunt',\n                'version': '0.8.18'\n            },\n            'Fire Storm': {\n                'name': 'Fire Storm',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Teleport': {\n                'name': 'Teleport',\n                'version': '0.7.35'\n            },\n            'Fire Shield': {\n                'name': 'Fire Shield',\n                'version': '0.7.45',\n                'settings': [\n                    'On Hit'\n                ],\n                'mutation': {\n                    'self': 'Fire Shield'\n                },\n                'hasAnimation': true\n            },\n            'Far Step': {\n                'name': 'Far Step',\n                'version': '0.7.45',\n                'mutation': {\n                    'self': 'Far Step'\n                },\n                'hasAnimation': true\n            },\n            'Summon Lesser Demons': {\n                'name': 'Summon Lesser Demons',\n                'version': '0.7.45',\n                'hasAnimation': true,\n                'mutation': {\n                    'self': 'Summon Lesser Demons'\n                }\n            },\n            'Manifest Mind: Summon': {\n                'name': 'Manifest Mind: Summon',\n                'version': '0.7.44',\n                'actors': [\n                    'CPR - Manifest Mind'\n                ],\n                'mutation': {\n                    'self': 'Manifest Mind'\n                },\n                'settings': [\n                    'Rest Listener'\n                ]\n            },\n            'Enlarge/Reduce': {\n                'name': 'Enlarge/Reduce',\n                'version': '0.7.45',\n                'mutation': {\n                    'target': 'Enlarge/Reduce'\n                },\n                'hasAnimation': true\n            },\n            'Frost Fingers': {\n                'name': 'Frost Fingers',\n                'version': '0.7.45',\n                'hasAnimation': true\n            },\n            'Eye for Weakness': {\n                'name': 'Eye for Weakness',\n                'version': '0.7.46'\n            },\n            'Insightful Fighting': {\n                'name': 'Insightful Fighting',\n                'version': '0.7.46'\n            },\n            'Soul of the Storm Giant: Maelstrom Aura': {\n                'name': 'Soul of the Storm Giant: Maelstrom Aura',\n                'version': '0.7.46'\n            },\n            'Agent of Order: Stasis Strike': {\n                'name': 'Agent of Order: Stasis Strike',\n                'version': '0.7.46'\n            },\n            'Baleful Scion: Grasp of Avarice': {\n                'name': 'Baleful Scion: Grasp of Avarice',\n                'version': '0.7.46'\n            },\n            'Righteous Heritor: Soothe Pain': {\n                'name': 'Righteous Heritor: Soothe Pain',\n                'version': '0.7.46',\n                'settings': [\n                    'Righteous Heritor'\n                ]\n            },\n            'Planar Wanderer: Planar Adaptation': {\n                'name': 'Planar Wanderer: Planar Adaptation',\n                'version': '0.7.46'\n            },\n            'Planar Wanderer: Portal Cracker': {\n                'name': 'Planar Wanderer: Portal Cracker',\n                'version': '0.7.46'\n            },\n            'Scion of the Outer Planes (Chaotic Outer Plane)': {\n                'name': 'Scion of the Outer Planes (Chaotic Outer Plane)',\n                'version': '0.7.46'\n            },\n            'Scion of the Outer Planes (Evil Outer Plane)': {\n                'name': 'Scion of the Outer Planes (Evil Outer Plane)',\n                'version': '0.7.46'\n            },\n            'Scion of the Outer Planes (Good Outer Plane)': {\n                'name': 'Scion of the Outer Planes (Good Outer Plane)',\n                'version': '0.7.46'\n            },\n            'Scion of the Outer Planes (Lawful Outer Plane)': {\n                'name': 'Scion of the Outer Planes (Lawful Outer Plane)',\n                'version': '0.7.46'\n            },\n            'Scion of the Outer Planes (The Outlands)': {\n                'name': 'Scion of the Outer Planes (The Outlands)',\n                'version': '0.7.46'\n            },\n            'Blood Curse of Binding': {\n                'name': 'Blood Curse of Binding',\n                'version': '0.7.46'\n            },\n            'Compelled Duel': {\n                'name': 'Compelled Duel',\n                'version': '0.9.64',\n                'settings': [\n                    'Compelled Duel',\n                    'Movement Listener'\n                ]\n            },\n            'Draconic Cry': {\n                'name': 'Draconic Cry',\n                'version': '0.7.47'\n            },\n            'Divine Fury: Necrotic': {\n                'name': 'Divine Fury: Necrotic',\n                'version': '0.7.53'\n            },\n            'Divine Fury: Radiant': {\n                'name': 'Divine Fury: Radiant',\n                'version': '0.7.53'\n            },\n            'Healing Hands': {\n                'name': 'Healing Hands',\n                'version': '0.7.54'\n            },\n            'Channel Divinity: Charm Animals and Plants': {\n                'name': 'Channel Divinity: Charm Animals and Plants',\n                'version': '0.7.54'\n            },\n            'Unarmed Strike (Monk)': {\n                'name': 'Unarmed Strike (Monk)',\n                'version': '0.7.54'\n            },\n            'Draconic Strike': {\n                'name': 'Draconic Strike',\n                'version': '0.7.54'\n            },\n            'Breath of the Dragon': {\n                'name': 'Breath of the Dragon',\n                'version': '0.7.54'\n            },\n            'Ki Points': {\n                'name': 'Ki Points',\n                'version': '0.7.54'\n            },\n            'Augment Breath': {\n                'name': 'Augment Breath',\n                'version': '0.7.54'\n            },\n            'Wraps of Dyamak':  {\n                'name': 'Wraps of Dyamak',\n                'version': '0.8.04'\n            },\n            'Hunger of Hadar': {\n                'name': 'Hunger of Hadar',\n                'version': '0.8.11',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Labyrinthine Recall': {\n                'name': 'Labyrinthine Recall',\n                'version': '0.8.11',\n                'settings': [\n                    'Skill Patching'\n                ]\n            },\n            'Harness Divine Power': {\n                'name': 'Harness Divine Power',\n                'version': '0.8.13'\n            },\n            'Aura of Life': {\n                'name': 'Aura of Life',\n                'version': '0.8.13',\n                'settings': [\n                    'Aura of Life'\n                ]\n            },\n            'Spider Climb': {\n                'name': 'Spider Climb',\n                'version': '0.8.13'\n            },\n            'Acid Breath Weapon': {\n                'name': 'Acid Breath Weapon',\n                'version': '0.8.13'\n            },\n            'Lightning Breath Weapon': {\n                'name': 'Lightning Breath Weapon',\n                'version': '0.8.13'\n            },\n            'Poison Breath Weapon': {\n                'name': 'Poison Breath Weapon',\n                'version': '0.8.13'\n            },\n            'Fire Breath Weapon': {\n                'name': 'Fire Breath Weapon',\n                'version': '0.8.13'\n            },\n            'Cold Breath Weapon': {\n                'name': 'Cold Breath Weapon',\n                'version': '0.8.13'\n            },\n            'Chromatic Warding (Acid)': {\n                'name': 'Chromatic Warding (Acid)',\n                'version': '0.8.13'\n            },\n            'Chromatic Warding (Cold)': {\n                'name': 'Chromatic Warding (Cold)',\n                'version': '0.8.13'\n            },\n            'Chromatic Warding (Fire)': {\n                'name': 'Chromatic Warding (Fire)',\n                'version': '0.8.13'\n            },\n            'Chromatic Warding (Lightning)': {\n                'name': 'Chromatic Warding (Lightning)',\n                'version': '0.8.13'\n            },\n            'Chromatic Warding (Poison)': {\n                'name': 'Chromatic Warding (Poison)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Black)': {\n                'name': 'Breath Weapon (Black)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Blue)': {\n                'name': 'Breath Weapon (Blue)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Brass)': {\n                'name': 'Breath Weapon (Brass)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Bronze)': {\n                'name': 'Breath Weapon (Bronze)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Copper)': {\n                'name': 'Breath Weapon (Copper)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Gold)': {\n                'name': 'Breath Weapon (Gold)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Green)': {\n                'name': 'Breath Weapon (Green)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Red)': {\n                'name': 'Breath Weapon (Red)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Silver)': {\n                'name': 'Breath Weapon (Silver)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (White)': {\n                'name': 'Breath Weapon (White)',\n                'version': '0.8.13'\n            },\n            'Forceful Presence': {\n                'name': 'Forceful Presence',\n                'version': '0.8.13'\n            },\n            'Gem Flight': {\n                'name': 'Gem Flight',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Force)': {\n                'name': 'Breath Weapon (Force)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Necrotic)': {\n                'name': 'Breath Weapon (Necrotic)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Psychic)': {\n                'name': 'Breath Weapon (Psychic)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Radiant)': {\n                'name': 'Breath Weapon (Radiant)',\n                'version': '0.8.13'\n            },\n            'Breath Weapon (Thunder)': {\n                'name': 'Breath Weapon (Thunder)',\n                'version': '0.8.13'\n            },\n            'Metallic Breath Weapon': {\n                'name': 'Metallic Breath Weapon',\n                'version': '0.8.16'\n            },\n            'Warder\\'s Intuition': {\n                'name': 'Warder\\'s Intuition',\n                'version': '0.8.16'\n            },\n            'Check Cover': {\n                'name': 'Check Cover',\n                'version': '0.8.17'\n            },\n            'Adept Marksman': {\n                'name': 'Adept Marksman',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Bullying Shot': {\n                'name': 'Bullying Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Dazing Shot': {\n                'name': 'Dazing Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Deadeye Shot': {\n                'name': 'Deadeye Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Disarming Shot': {\n                'name': 'Disarming Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Forceful Shot': {\n                'name': 'Forceful Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Winging Shot': {\n                'name': 'Winging Shot',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Hemorrhaging Critical': {\n                'name': 'Hemorrhaging Critical',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Quickdraw': {\n                'name': 'Quickdraw',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Reload Firearm': {\n                'name': 'Reload Firearm',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Repair Firearm': {\n                'name': 'Repair Firearm',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Vicious Intent': {\n                'name': 'Vicious Intent',\n                'version': '0.8.21',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Firearm (CR)': {\n                'name': 'Firearm (CR)',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Lightning Reload': {\n                'name': 'Lightning Reload',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Rapid Repair': {\n                'name': 'Rapid Repair',\n                'version': '0.8.20',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Violent Shot': {\n                'name': 'Violent Shot',\n                'version': '0.8.21',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Thunderwave': {\n                'name': 'Thunderwave',\n                'version': '0.8.25'\n            },\n            'Flame Blade': {\n                'name': 'Flame Blade',\n                'version': '0.8.22',\n                'mutation': {\n                    'self': 'Flame Blade'\n                }\n            },\n            'Hidden Step': {\n                'name': 'Hidden Step',\n                'version': '0.8.22'\n            },\n            'Synaptic Static': {\n                'name': 'Synaptic Static',\n                'version': '0.8.23',\n                'settings': [\n                    'Active Effect Additions'\n                ]\n            },\n            'Booming Blade': {\n                'name': 'Booming Blade',\n                'version': '0.8.26',\n                'settings': [\n                    'Booming Blade'\n                ],\n                'hasAnimation': true\n            },\n            'Green-Flame Blade': {\n                'name': 'Green-Flame Blade',\n                'version': '0.8.26'\n            },\n            'Spray of Cards': {\n                'name': 'Spray of Cards',\n                'version': '0.8.28'\n            },\n            'Antagonize': {\n                'name': 'Antagonize',\n                'version': '0.8.28'\n            },\n            'Cartomancer: Hidden Ace - Imbue Card': {\n                'name': 'Cartomancer: Hidden Ace - Imbue Card',\n                'version': '0.8.30',\n                'mutation': {\n                    'self': 'Cartomancer'\n                }\n            },\n            'Astral Knowledge': {\n                'name': 'Astral Knowledge',\n                'version': '0.8.31'\n            },\n            'Mental Discipline (Githzerai)': {\n                'name': 'Mental Discipline (Githzerai)',\n                'version': '0.8.31'\n            },\n            'Mental Discipline (Kalashtar)': {\n                'name': 'Mental Discipline (Kalashtar)',\n                'version': '0.8.31'\n            },\n            'Thunderous Smite': {\n                'name': 'Thunderous Smite',\n                'version': '0.9.2'\n            },\n            'Rime\\'s Binding Ice': {\n                'name': 'Rime\\'s Binding Ice',\n                'version': '0.9.3',\n                'hasAnimation': true\n            },\n            'Ice Storm': {\n                'name': 'Ice Storm',\n                'version': '0.9.3',\n                'hasAnimation': true\n            },\n            'Searing Smite': {\n                'name': 'Searing Smite',\n                'version': '0.9.4'\n            },\n            'Wild Surge': {\n                'name': 'Wild Surge',\n                'version': '0.9.5',\n                'actors': [\n                    'CPR - Intangible Spirit'\n                ]\n            },\n            'Controlled Surge': {\n                'name': 'Controlled Surge',\n                'version': '0.9.5'\n            },\n            'Unstable Backlash': {\n                'name': 'Unstable Backlash',\n                'version': '0.9.5'\n            },\n            'Bolstering Magic': {\n                'name': 'Bolstering Magic',\n                'version': '0.9.5'\n            },\n            'Piercing Shot CR': {\n                'name': 'Piercing Shot CR',\n                'version': '0.9.6',\n                'settings': [\n                    'Critical Role Firearm Support'\n                ]\n            },\n            'Borrowed Knowledge': {\n                'name': 'Borrowed Knowledge',\n                'version': '0.9.6'\n            },\n            'Skill Empowerment': {\n                'name': 'Skill Empowerment',\n                'version': '0.9.6'\n            },\n            'Quick Insert Summon': {\n                'name': 'Quick Insert Summon',\n                'version': '0.9.10'\n            },\n            'Sleet Storm': {\n                'name': 'Sleet Storm',\n                'version': '0.9.14',\n                'settings': [\n                    'Template Listener'\n                ]\n            },\n            'Giant\\'s Havoc: Crushing Throw': {\n                'name': 'Giant\\'s Havoc: Crushing Throw',\n                'version': '0.9.17'\n            },\n            'Giant\\'s Havoc: Giant Stature': {\n                'name': 'Giant\\'s Havoc: Giant Stature',\n                'version': '0.9.17'\n            },\n            'Demiurgic Colossus': {\n                'name': 'Demiurgic Colossus',\n                'version': '0.9.17'\n            },\n            'Elemental Cleaver': {\n                'name': 'Elemental Cleaver',\n                'version': '0.9.17',\n                'mutation': {\n                    'self': 'Elemental Cleaver'\n                }\n            },\n            'Mighty Impel': {\n                'name': 'Mighty Impel',\n                'version': '0.9.17'\n            },\n            'Investiture of Flame': {\n                'name': 'Investiture of Flame',\n                'version': '0.9.22',\n                'mutation': {\n                    'self': 'Investiture of Flame'\n                }\n            },\n            'Investiture of Ice': {\n                'name': 'Investiture of Ice',\n                'version': '0.9.22',\n                'mutation': {\n                    'self': 'Investiture of Ice'\n                }\n            },\n            'Investiture of Stone': {\n                'name': 'Investiture of Stone',\n                'version': '0.9.22',\n                'mutation': {\n                    'self': 'Investiture of Stone'\n                }\n            },\n            'Create Pact Weapon': {\n                'name': 'Create Pact Weapon',\n                'version': '0.9.24'\n            },\n            'Eldritch Invocations: Improved Pact Weapon': {\n                'name': 'Eldritch Invocations: Improved Pact Weapon',\n                'version': '0.9.24'\n            },\n            'Hex Warrior': {\n                'name': 'Hex Warrior',\n                'version': '0.9.24'\n            },\n            'Armor Modifications': {\n                'name': 'Armor Modifications',\n                'version': '0.9.27'\n            },\n            'Persistent Rage': {\n                'name': 'Persistent Rage',\n                'version': '0.9.28'\n            },\n            'Long-Limbed': {\n                'name': 'Long-Limbed',\n                'version': '0.9.28'\n            },\n            'Elemental Weapon': {\n                'name': 'Elemental Weapon',\n                'version': '0.9.29'\n            },\n            'Gifted Scribe': {\n                'name': 'Gifted Scribe',\n                'version': '0.9.31'\n            },\n            'Grung Poison': {\n                'name': 'Grung Poison',\n                'version': '0.9.31'\n            },\n            'Poisonous Skin': {\n                'name': 'Poisonous Skin',\n                'version': '0.9.31'\n            },\n            'Hadozee Dodge': {\n                'name': 'Hadozee Dodge',\n                'version': '0.9.31'\n            },\n            'Stone\\'s Endurance': {\n                'name': 'Stone\\'s Endurance',\n                'version': '0.9.60'\n            },\n            'Breath Weapon (Acid)': {\n                'name': 'Breath Weapon (Acid)',\n                'version': '0.9.31'\n            },\n            'Breath Weapon (Cold)': {\n                'name': 'Breath Weapon (Cold)',\n                'version': '0.9.31'\n            },\n            'Breath Weapon (Fire)': {\n                'name': 'Breath Weapon (Fire)',\n                'version': '0.9.31'\n            },\n            'Breath Weapon (Lightning)': {\n                'name': 'Breath Weapon (Lightning)',\n                'version': '0.9.31'\n            },\n            'Windwright\\'s Intuition': {\n                'name': 'Windwright\\'s Intuition',\n                'version': '0.9.32'\n            },\n            'Bladesong': {\n                'name': 'Bladesong',\n                'version': '0.9.33'\n            },\n            'Song of Defense': {\n                'name': 'Bladesong',\n                'version': '0.9.33'\n            },\n            'Song of Victory': {\n                'name': 'Bladesong',\n                'version': '0.9.33'\n            },\n            'Mote of Potential': {\n                'name': 'Mote of Potential',\n                'version': '0.9.35'\n            },\n            'Magical Inspiration': {\n                'name': 'Magical Inspiration',\n                'version': '0.9.35'\n            },\n            'Bardic Inspiration': {\n                'name': 'Bardic Inspiration',\n                'version': '0.9.35'\n            },\n            'Echo Avatar': {\n                'name': 'Echo Avatar',\n                'version': '0.9.40'\n            },\n            'Legion of One': {\n                'name': 'Legion of One',\n                'version': '0.9.40'\n            },\n            'Manifest Echo': {\n                'name': 'Manifest Echo',\n                'version': '0.9.40'\n            },\n            'Reclaim Potential': {\n                'name': 'Reclaim Potential',\n                'version': '0.9.40'\n            },\n            'Unleash Incarnation': {\n                'name': 'Unleash Incarnation',\n                'version': '0.9.40'\n            },\n            'Palm Pistol (Exandria)': {\n                'name': 'Palm Pistol (Exandria)',\n                'version': '0.9.45'\n            },\n            'Bad News (Exandria)': {\n                'name': 'Bad News (Exandria)',\n                'version': '0.9.45'\n            },\n            'Blunderbuss (Exandria)': {\n                'name': 'Blunderbuss (Exandria)',\n                'version': '0.9.45'\n            },\n            'Musket (Exandria)': {\n                'name': 'Musket (Exandria)',\n                'version': '0.9.45'\n            },\n            'Pepperbox (Exandria)': {\n                'name': 'Pepperbox (Exandria)',\n                'version': '0.9.45'\n            },\n            'Pistol (Exandria)': {\n                'name': 'Pistol (Exandria)',\n                'version': '0.9.45'\n            },\n            'Javelin of Lightning': {\n                'name': 'Javelin of Lightning',\n                'version': '0.9.46'\n            },\n            'Channel Divinity: Control Undead': {\n                'name': 'Channel Divinity: Control Undead',\n                'version': '0.9.52',\n                'hasAnimation': true\n            },\n            'Channel Divinity: Dreadful Aspect': {\n                'name': 'Channel Divinity: Dreadful Aspect',\n                'version': '0.9.52',\n                'hasAnimation': true\n            },\n            'Dread Lord': {\n                'name': 'Dread Lord',\n                'version': '0.9.52',\n                'settings': [\n                    'Effect Auras'\n                ],\n                'hasAnimation': true\n            },\n            'Gathered Swarm': {\n                'name': 'Gathered Swarm',\n                'version': '0.9.55'\n            },\n            'Brave': {\n                'name': 'Brave',\n                'version': '0.9.60'\n            },\n            'Lucky': {\n                'name': 'Lucky',\n                'version': '0.9.60'\n            },\n            'Medical Intuition': {\n                'name': 'Medical Intuition',\n                'version': '0.9.60'\n            },\n            'Ever Hospitable': {\n                'name': 'Ever Hospitable',\n                'version': '0.9.60'\n            },\n            'Stout Resilience': {\n                'name': 'Stout Resilience',\n                'version': '0.9.60'\n            },\n            'Amorphous': {\n                'name': 'Amorphous',\n                'version': '0.9.62',\n                'settings': [\n                    'Skill Patching'\n                ]\n            },\n            'Dual Wielder': {\n                'name': 'Dual Wielder',\n                'version': '0.9.63'\n            },\n            'Twilight Shroud': {\n                'name': 'Twilight Shroud',\n                'version': '0.9.63'\n            }\n        }\n    });\n}","let welcomeText = `<p>Thank you for using my module! If you find any bugs or have any requests please either either message <strong>chrisk123999</strong> on Discord or make a <a href=\"https://github.com/chrisk123999/chris-premades\">Github</a> issue. Do not pester tposney, Zhell, or any other module authors with bugs or issues related to this module.</p>\n<p>As a note, I generally work-around items that have been imported via the DDB importer module. If something works \"as-is\" from that module, it's unlikely I'll have it here.</p>\n<p>To get started you can find my automations inside the compendiums that start with: \"CPR.\"</p>\n<p>You can also click the medical kit icon on the title bar to update the item with my automation. This will preserve your description already on the item.</p>\n<hr>\n<p>Any item, spell, or feature that is added to your sheet temporarily needs a description. Module updates will replace the compendiums they're stored in, so instead the descriptions will be pulled from this journal entry. All pages after this one will not get regenerated when updating this module.</p>\n<hr>\n<a href=\"https://ko-fi.com/chrisk123999\">\n    <img src=\"https://ko-fi.com/img/githubbutton_sm.svg\">\n</a>`;\nexport async function setupJournalEntry() {\n    let journalName = 'CPR - Descriptions';\n    let journalEntry = game.journal.getName(journalName);\n    if (!journalEntry) {\n        journalEntry = await JournalEntry.create({\n            'name': journalName,\n            'pages': [\n                {\n                    'sort': 100000,\n                    'name': 'Info',\n                    'type': 'text',\n                    'title': {\n                        'show': true,\n                        'level': 1\n                    },\n                    'text': {\n                        'format': 1,\n                        'content': welcomeText,\n                        'markdown': ''\n                    }\n                }\n            ],\n            'ownership': {\n                'default': 2\n            }\n        });\n        let message = '<hr>View Chris\\'s premades readme here: @UUID[JournalEntry.' + journalEntry.id + ']{Read Me}';\n        ChatMessage.create({\n            'speaker': {'alias': 'Chris\\'s Premades'},\n            'content': message\n        });\n    } else {\n        let page = journalEntry.pages.getName('Info');\n        if (page) {\n            await page.update({\n                'text.content': welcomeText\n            });\n        }\n    }\n    async function addPage(journalEntry, pageName, text) {\n        await JournalEntryPage.create({\n            'name': pageName, \n            'text': {'content': text}, \n            'title': {'show': false, 'level': 1}, \n            'sort': journalEntry.pages.contents.at(-1).sort + CONST.SORT_INTEGER_DENSITY\n        }, \n        {\n            'parent': journalEntry\n        });\n    }\n    async function checkPage(journalEntry, name) {\n        if (!journalEntry.pages.getName(name)) await addPage(journalEntry, name, '');\n    }\n    async function preparePages(journalEntry, packKey) {\n        let gamePack = game.packs.get(packKey);\n        if (!gamePack) {\n            ui.notifications.error('Compendium was not loaded! Journal entries could not be updated.');\n            return;\n        }\n        let packItems = await gamePack.getDocuments();\n        for (let i of packItems) {\n            if (i.name === '#[CF_tempEntity]') continue;\n            await checkPage(journalEntry, i.name);\n        }\n    }\n    await preparePages(journalEntry, 'chris-premades.CPR Spell Features');\n    await preparePages(journalEntry, 'chris-premades.CPR Class Feature Items');\n    await preparePages(journalEntry, 'chris-premades.CPR Monster Feature Items');\n    await preparePages(journalEntry, 'chris-premades.CPR Item Features');\n    await preparePages(journalEntry, 'chris-premades.CPR Race Feature Items');\n    await preparePages(journalEntry, 'chris-premades.CPR Summon Features');\n    await preparePages(journalEntry, 'chris-premades.CPR Actions');\n    await preparePages(journalEntry, 'chris-premades.CPR Feat Features');\n    await preparePages(journalEntry, 'chris-premades.CPR Homebrew Feature Items');\n}","export async function checkUpdate() {\n    if (game.messages.contents.find(i => i.flags?.['chris-premades']?.update)) return;\n    try {\n        let reponse = await fetch('https://api.github.com/repos/chrisk123999/chris-premades/releases/latest');\n        if (!reponse.ok) return;\n        let info = await reponse.json();\n        let currentVersion = game.modules.get('chris-premades').version;\n        if (currentVersion === '#{VERSION}#') return;\n        if (!isNewerVersion(info.tag_name, currentVersion)) return;\n        let body = info.body.replaceAll('\\r\\n\\r\\n', '<hr>')\n            .replaceAll('\\r\\n', '<br>')\n            .replaceAll('New Content:', '<b><u>New Content:</u></b>')\n            .replaceAll('New Monster Content:', '<b><u>New Monster Content:</u></b>')\n            .replaceAll('Bug Fixes:', '<b><u>Bug Fixes:</u></b>')\n            .replaceAll('Update Notes:', '<b><u>Update Notes:</u></b>')\n            .replaceAll('New Enhanced Animations:', '<b><u>New Enhanced Animations:</u></b>');\n        let message = '<hr>Chris\\'s Premades update <b>' + info.tag_name + '</b> available!<hr>' + body;\n        await ChatMessage.create({\n            'speaker': {'alias': name},\n            'content': message,\n            'whisper': [game.user.id],\n            'flags': {\n                'chris-premades': {\n                    'update': true\n                }\n            }\n        });\n    } catch {};\n}","import {buttonActors, buttonItem, buttonSettings} from './info.js';\nexport async function addChatButton(message, options, user) {\n    let flagData = message.flags?.['chris-premades']?.message?.button;\n    if (!flagData) return;\n    await warpgate.wait(100);\n    let messageElement = document.querySelector('[data-message-id=\"' + message.id + '\"]');\n    if (!messageElement) return;\n    if (flagData.settings) {\n        let button = messageElement.querySelector('[class=\"chris-settings-button\"]');\n        if (button) button.addEventListener('click', () => {\n            buttonSettings(flagData.settings, button, message);\n        });\n    }\n    if (flagData.actors) {\n        let button = messageElement.querySelector('[class=\"chris-actors-button\"]');\n        if (button) button.addEventListener('click', () => {\n            buttonActors(flagData.actors, button, message);\n        });\n    }\n    if (flagData.item) {\n        let button = messageElement.querySelector('[class=\"chris-item-button\"]');\n        if (button) button.addEventListener('click', () => {\n            buttonItem(flagData.item, button, message);\n        });\n    }\n}","import {addDAEFlags, colorizeDAETitleBarButton} from './integrations/dae.js';\nimport {applyEquipmentFlag, itemFeatures, itemFeaturesDelete} from './equipment.js';\nimport {automatedAnimations} from './integrations/automatedAnimations.js';\nimport {buildABonus} from './integrations/buildABonus.js';\nimport {cast} from './macros/animations/cast.js';\nimport {chris as helpers} from './helperFunctions.js';\nimport {compendiumRender} from './compendium.js';\nimport {constants} from './constants.js';\nimport {createActorHeaderButton, createHeaderButton, updateItemButton} from './item.js';\nimport {diceSoNice} from './integrations/diceSoNice.js';\nimport {dndAnimations} from './integrations/dndAnimations.js';\nimport {effectAuraHooks, effectAuras, effectSockets} from './utility/effectAuras.js';\nimport {effectTitleBar, fixOrigin, itemDC, noEffectAnimationCreate, noEffectAnimationDelete} from './utility/effect.js';\nimport {flanking} from './macros/generic/syntheticAttack.js';\nimport {info, removeFolderFlag, setCompendiumItemInfo, setItemName, stripUnusedFlags, updateAllCompendiums} from './info.js';\nimport {macros, onHitMacro} from './macros.js';\nimport {npcRandomizer} from './utility/npcRandomizer.js';\nimport {patchActiveEffectSourceName, patchSaves, patchSkills} from './patching.js';\nimport {queue} from './utility/queue.js';\nimport {registerSettings} from './settings.js';\nimport {remoteAimCrosshair, remoteDialog, remoteDocumentDialog, remoteDocumentsDialog, remoteMenu} from './utility/remoteDialog.js';\nimport {removeDumbV10Effects} from './macros/mechanics/conditions.js';\nimport {rest} from './utility/rest.js';\nimport {runAsGM, runAsUser} from './runAsGM.js';\nimport {setConfig} from './config.js';\nimport {settingButton} from './settingsMenu.js';\nimport {setupJournalEntry} from './journal.js';\nimport {summons} from './utility/summons.js';\nimport {tashaSummon} from './utility/tashaSummon.js';\nimport {templates} from './utility/templateEffect.js';\nimport {tokenMove, tokenMoved, combatUpdate, updateMoveTriggers, updateGMTriggers, loadTriggers, tokenMovedEarly} from './utility/movement.js';\nimport {translate} from './translations.js';\nimport {troubleshoot} from './help.js';\nimport {vaeEffectDescription, vaeTempItemButton} from './integrations/vae.js';\nimport {checkUpdate} from './update.js';\nimport {firearm} from './macros/mechanics/firearm.js';\nimport {templateMacroTitleBarButton} from './integrations/templateMacro.js';\nimport {addActions} from './macros/actions/token.js';\nimport {summonEffects} from './macros/animations/summonEffects.js';\nimport {actionsTab} from './integrations/tidy5eSheet.js';\nimport {tours} from './tours.js';\nimport {addChatButton} from './chat.js';\nexport let socket;\nHooks.once('init', async function() {\n    registerSettings();\n    setConfig();\n});\nHooks.once('socketlib.ready', async function() {\n    socket = socketlib.registerModule('chris-premades');\n    socket.register('updateMoveTriggers', updateMoveTriggers);\n    socket.register('updateGMTriggers', updateGMTriggers);\n    socket.register('remoteAddEffectAura', effectSockets.remoteAdd);\n    socket.register('remoteRemoveEffectAura', effectSockets.remoteRemove);\n    socket.register('createCombatant', tashaSummon.createCombatant);\n    socket.register('updateCombatant', runAsGM.updateCombatant);\n    socket.register('remoteDialog', remoteDialog);\n    socket.register('remoteDocumentDialog', remoteDocumentDialog);\n    socket.register('remoteDocumentsDialog', remoteDocumentsDialog);\n    socket.register('remoteAimCrosshair', remoteAimCrosshair);\n    socket.register('remoteMenu', remoteMenu);\n    socket.register('updateEffect', runAsGM.updateEffect);\n    socket.register('createEffect', runAsGM.createEffect);\n    socket.register('removeEffect', runAsGM.removeEffect);\n    socket.register('rollItem', runAsUser.rollItem);\n});\nHooks.once('ready', async function() {\n    if (game.user.isGM) {\n        let oldVersion = game.settings.get('chris-premades', 'Breaking Version Change');\n        let currentVersion = 9;\n        if (oldVersion < currentVersion && oldVersion === 8) {\n            let message = '<hr><p>Bardic Inspiration, Mote of Potential, and Magical Inspiration have been split into separate items. You will need to replace the features for them to continue to work.</p>';\n            ChatMessage.create({\n                'speaker': {'alias': 'Chris\\'s Premades'},\n                'content': message\n            });\n            await game.settings.set('chris-premades', 'Breaking Version Change', 9);\n            oldVersion = 1;\n        }\n        await setupJournalEntry();\n        await tours.checkTour();\n        if (game.settings.get('chris-premades', 'Tasha Actors')) await tashaSummon.setupFolder();\n        if (game.modules.get('itemacro')?.active) {\n            try {\n                if (game.settings.get('itemacro', 'charsheet')) ui.notifications.error('Chris\\'s Premades & Midi-Qol requires \"Character Sheet Hook\" in Item Macro\\'s module settings to be turned off!');\n            } catch {}\n        }\n        if (game.modules.get('ddb-importer')?.active) Hooks.on('getActorSheet5eHeaderButtons', createActorHeaderButton);\n        game.settings.set('chris-premades', 'LastGM', game.user.id);\n        if (game.settings.get('chris-premades', 'Combat Listener')) Hooks.on('updateCombat', combatUpdate);\n        if (game.settings.get('chris-premades', 'Movement Listener')) {\n            Hooks.on('preUpdateToken', tokenMovedEarly);\n            Hooks.on('updateToken', tokenMoved);\n        }\n        if (game.settings.get('chris-premades', 'Emboldening Bond')) Hooks.on('updateToken', macros.emboldeningBond.move);\n        if (game.settings.get('chris-premades', 'Template Listener')) {\n            Hooks.on('updateToken', templates.move);\n            Hooks.on('updateCombat', templates.combat);\n        }\n        if (game.settings.get('chris-premades', 'Effect Auras')) {\n            Hooks.on('preUpdateActor', effectAuraHooks.preActorUpdate);\n            Hooks.on('updateActor', effectAuraHooks.actorUpdate);\n            Hooks.on('canvasReady', effectAuraHooks.canvasReady);\n            Hooks.on('updateToken', effectAuraHooks.updateToken);\n            Hooks.on('createToken', effectAuraHooks.createToken);\n            Hooks.on('deleteToken', effectAuraHooks.deleteToken);\n            Hooks.on('createActiveEffect', effectAuraHooks.createRemoveEffect);\n            Hooks.on('deleteActiveEffect', effectAuraHooks.createRemoveEffect);\n            effectAuras.registerAll();\n        }\n        if (game.settings.get('chris-premades', 'Warding Bond')) {\n            Hooks.on('updateToken', macros.wardingBond.moveTarget);\n            Hooks.on('updateToken', macros.wardingBond.moveSource);\n        }\n        if (game.settings.get('chris-premades', 'Compelled Duel')) Hooks.on('updateToken', macros.compelledDuel.movement);\n        if (game.settings.get('chris-premades', 'Check For Updates')) checkUpdate();\n        Hooks.on('createChatMessage', addChatButton);\n    }\n    await loadTriggers();\n    if (game.settings.get('chris-premades', 'Condition Resistance')) {\n        Hooks.on('midi-qol.preItemRoll', macros.conditionResistanceEarly);\n        Hooks.on('midi-qol.RollComplete', macros.conditionResistanceLate);\n    }\n    if (game.settings.get('chris-premades', 'Condition Vulnerability')) {\n        Hooks.on('midi-qol.preItemRoll', macros.conditionVulnerabilityEarly);\n        Hooks.on('midi-qol.RollComplete', macros.conditionVulnerabilityLate);\n    }\n    if (game.settings.get('chris-premades', 'Beacon of Hope')) Hooks.on('midi-qol.preTargetDamageApplication', macros.beaconOfHope);\n    if (game.settings.get('chris-premades', 'DMG Cleave')) {\n        Hooks.on('midi-qol.RollComplete', macros.cleave.hit);\n        Hooks.on('midi-qol.preCheckHits', macros.cleave.attack);\n        Hooks.on('midi-qol.preDamageRollComplete', macros.cleave.damage);\n    }\n    if (game.settings.get('chris-premades', 'Darkness')) Hooks.on('midi-qol.preAttackRoll', macros.darkness.hook);\n    if (game.settings.get('chris-premades', 'Death Ward')) Hooks.on('midi-qol.preTargetDamageApplication', macros.deathWard);\n    if (game.settings.get('chris-premades', 'Rest Listener')) Hooks.on('dnd5e.restCompleted', rest);\n    if (game.settings.get('chris-premades', 'Elemental Adept')) {\n        Hooks.on('midi-qol.postPreambleComplete', macros.elementalAdept.early);\n        Hooks.on('midi-qol.preDamageRollComplete', macros.elementalAdept.damage);\n        Hooks.on('midi-qol.RollComplete', macros.elementalAdept.late);\n    }\n    if (game.settings.get('chris-premades', 'Fog Cloud')) Hooks.on('midi-qol.preAttackRoll', macros.fogCloud.hook);\n    if (game.settings.get('chris-premades', 'Mirror Image')) Hooks.on('midi-qol.AttackRollComplete', macros.mirrorImage);\n    if (game.settings.get('chris-premades', 'On Hit')) Hooks.on('midi-qol.RollComplete', onHitMacro);\n    if (game.settings.get('chris-premades', 'Protection from Evil and Good')) Hooks.on('midi-qol.preAttackRoll', macros.protectionFromEvilAndGood);\n    if (game.settings.get('chris-premades', 'Sanctuary')) Hooks.on('midi-qol.preItemRoll', macros.sanctuary.hook);\n    if (game.settings.get('chris-premades', 'Shield Guardian')) Hooks.on('midi-qol.preTargetDamageApplication', macros.mastersAmulet);\n    if (game.settings.get('chris-premades', 'Undead Fortitude')) Hooks.on('midi-qol.preTargetDamageApplication', macros.monster.zombie.undeadFortitude);\n    if (game.settings.get('chris-premades', 'Wildhunt')) Hooks.on('midi-qol.preAttackRoll', macros.wildhunt);\n    if (game.settings.get('chris-premades', 'Active Effect Additions')) {\n        Hooks.on('preCreateActiveEffect', itemDC);  \n        Hooks.on('preCreateActiveEffect', noEffectAnimationCreate);\n        Hooks.on('preDeleteActiveEffect', noEffectAnimationDelete);\n        Hooks.on('getActiveEffectConfigHeaderButtons', effectTitleBar);\n        patchActiveEffectSourceName(true);\n    }\n    if (game.settings.get('chris-premades', 'Active Effect Origin Fix')) Hooks.on('createToken', fixOrigin);\n    if (game.settings.get('chris-premades', 'Automatic VAE Descriptions')) Hooks.on('preCreateActiveEffect', vaeEffectDescription);\n    if (game.settings.get('chris-premades', 'VAE Temporary Item Buttons')) Hooks.on('visual-active-effects.createEffectButtons', vaeTempItemButton);\n    if (game.settings.get('chris-premades', 'Condition Fixes')) removeDumbV10Effects();\n    if (game.settings.get('chris-premades', 'Exploding Heals')) Hooks.on('midi-qol.preDamageRollComplete', macros.explodingHeals);\n    if (game.settings.get('chris-premades', 'Attack Listener')) Hooks.on('midi-qol.preAttackRoll', flanking);\n    if (game.settings.get('chris-premades', 'Strength of the Grave')) Hooks.on('midi-qol.preTargetDamageApplication', macros.strengthOfTheGrave);\n    if (game.settings.get('chris-premades', 'Relentless Endurance')) Hooks.on('midi-qol.preTargetDamageApplication', macros.relentlessEndurance);\n    if (game.settings.get('chris-premades', 'Shadow of Moil')) Hooks.on('midi-qol.preAttackRoll', macros.shadowOfMoil.hook);\n    if (game.settings.get('chris-premades', 'Emboldening Bond')) Hooks.on('midi-qol.preTargetDamageApplication', macros.emboldeningBond.damage);\n    if (game.settings.get('chris-premades', 'Manual Rolls')) {\n        Hooks.on('midi-qol.preCheckHits', macros.manualRolls.attackRoll);\n        Hooks.on('midi-qol.postCheckSaves', macros.manualRolls.saveRolls);\n        Hooks.on('midi-qol.DamageRollComplete', macros.manualRolls.damageRoll);\n    }\n    if (game.user.isGM || game.settings.get('chris-premades', 'Item Replacer Access') || game.settings.get('chris-premades', 'Item Configuration Access')) {\n        Hooks.on('getItemSheetHeaderButtons', createHeaderButton);\n        Hooks.on('renderItemSheet', updateItemButton);\n    }\n    if (game.settings.get('chris-premades', 'Use Randomizer')) Hooks.on('createToken', npcRandomizer);\n    if (game.settings.get('chris-premades', 'Skill Patching')) patchSkills(true);\n    if (game.settings.get('chris-premades', 'Save Patching')) patchSaves(true);\n    if (game.settings.get('chris-premades', 'Dice So Nice')) {\n        Hooks.on('midi-qol.preItemRoll', diceSoNice.early);\n        Hooks.on('midi-qol.DamageRollComplete', diceSoNice.late)\n    }\n    if (game.settings.get('chris-premades', 'Arcane Ward')) Hooks.on('midi-qol.preTargetDamageApplication', macros.arcaneWard.damage);\n    if (game.settings.get('chris-premades', 'Automation Verification')) Hooks.on('midi-qol.preItemRoll', info);\n    if (game.settings.get('chris-premades', 'Item Features')) {\n        Hooks.on('preUpdateItem', itemFeatures);\n        Hooks.on('preDeleteItem', itemFeaturesDelete);\n    }\n    if (game.settings.get('chris-premades', 'Baldur\\'s Gate 3 Weapon Actions')) {\n        Hooks.on('preUpdateItem', macros.bg3.addFeatures);\n        Hooks.on('preDeleteItem', macros.bg3.removeFeatures);\n        Hooks.on('midi-qol.preDamageRollComplete', macros.bg3.piercingStrike.damage);\n        Hooks.on('dnd5e.restCompleted', macros.bg3.rest);\n        Hooks.on('midi-qol.RollComplete', macros.bg3.healing);\n    }\n    if (game.settings.get('chris-premades', 'Cast Animations')) Hooks.on('midi-qol.postPreambleComplete', cast);\n    if (game.settings.get('chris-premades', 'Righteous Heritor')) Hooks.on('midi-qol.preTargetDamageApplication', macros.soothePain);\n    if (game.settings.get('chris-premades', 'Compelled Duel')) Hooks.on('midi-qol.RollComplete', macros.compelledDuel.attacked);\n    Hooks.on('renderCompendium', compendiumRender);\n    if (game.modules.get('dae')?.active) addDAEFlags();\n    if (game.settings.get('chris-premades', 'Colorize Automated Animations')) {\n        automatedAnimations.sortAutoRec();\n        Hooks.on('renderItemSheet', automatedAnimations.titleBarButton);\n    }\n    if (game.settings.get('chris-premades', 'Colorize Build A Bonus')) {\n        Hooks.on('renderItemSheet', buildABonus.titleBarButton);\n        Hooks.on('renderDAEActiveEffectConfig', buildABonus.daeTitleBarButton);\n        Hooks.on('renderActorSheet5e', buildABonus.actorTitleBarButtons);\n    }\n    if (game.settings.get('chris-premades', 'Colorize Dynamic Active Effects')) Hooks.on('renderItemSheet', colorizeDAETitleBarButton);\n    if (game.settings.get('chris-premades', 'Colorize Template Macro')) Hooks.on('renderItemSheet', templateMacroTitleBarButton);\n    if (game.settings.get('chris-premades', 'D&D5E Animations Sounds')) {\n        dndAnimations.sortAutoRec();\n        Hooks.on('midi-qol.AttackRollComplete', dndAnimations.attackDone);\n        Hooks.on('midi-qol.DamageRollComplete', dndAnimations.damageDone);\n        Hooks.on('midi-qol.RollComplete', dndAnimations.rollDone);\n    }\n    if (game.settings.get('chris-premades', 'Aura of Life')) {\n        Hooks.on('preCreateActiveEffect', macros.auraOfLife.effect);\n        Hooks.on('updateActiveEffect', macros.auraOfLife.effect);\n    }\n    if (game.settings.get('chris-premades', 'Critical Role Firearm Support')) firearm.setup(true);\n    if (game.settings.get('chris-premades', 'Booming Blade')) Hooks.on('updateToken', macros.boomingBlade.moved);\n    if (game.settings.get('chris-premades', 'Build A Bonus Overlapping Effects')) Hooks.on('babonus.filterBonuses', buildABonus.overlappingEffects);\n    if (game.settings.get('chris-premades', 'Manifest Echo')) Hooks.on('dnd5e.rollAbilitySave', macros.manifestEcho.save);\n    if (game.settings.get('chris-premades', 'Dual Wielder')) Hooks.on('updateItem', macros.dualWielder);\n    if (game.settings.get('chris-premades', 'Twilight Shroud')) {\n        Hooks.on('midi-qol.preCheckHits', macros.twilightShroud.attack);\n        Hooks.on('midi-qol.preambleComplete', macros.twilightShroud.saveEarly);\n        Hooks.on('midi-qol.RollComplete', macros.twilightShroud.saveLate);\n    }\n    Hooks.on('createToken', addActions);\n});\n//Hooks.once('tidy5e-sheet.ready', actionsTab);\nlet dev = {\n    'setCompendiumItemInfo': setCompendiumItemInfo,\n    'stripUnusedFlags': stripUnusedFlags,\n    'applyEquipmentFlag': applyEquipmentFlag,\n    'setItemName': setItemName,\n    'removeFolderFlag': removeFolderFlag,\n    'checkUpdate': checkUpdate,\n    'updateAllCompendiums': updateAllCompendiums\n}\nglobalThis['chrisPremades'] = {\n    constants,\n    dev,\n    effectAuras,\n    helpers,\n    macros,\n    queue,\n    settingButton,\n    summonEffects,\n    summons,\n    tashaSummon,\n    tokenMove,\n    translate,\n    troubleshoot\n}"],"names":[],"sourceRoot":""}